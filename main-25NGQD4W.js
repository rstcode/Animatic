var KA=Object.defineProperty,ZA=Object.defineProperties;var QA=Object.getOwnPropertyDescriptors;var Mc=Object.getOwnPropertySymbols,JA=Object.getPrototypeOf,z_=Object.prototype.hasOwnProperty,G_=Object.prototype.propertyIsEnumerable,XA=Reflect.get;var W_=(e,t,n)=>t in e?KA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m=(e,t)=>{for(var n in t||={})z_.call(t,n)&&W_(e,n,t[n]);if(Mc)for(var n of Mc(t))G_.call(t,n)&&W_(e,n,t[n]);return e},S=(e,t)=>ZA(e,QA(t));var Nc=(e,t)=>{var n={};for(var r in e)z_.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Mc)for(var r of Mc(e))t.indexOf(r)<0&&G_.call(e,r)&&(n[r]=e[r]);return n};var Ur=(e,t,n)=>XA(JA(e),n,t);var p=(e,t,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(e,t)).next())});var Kf;function Rc(){return Kf}function pn(e){let t=Kf;return Kf=e,t}var q_=Symbol("NotFound");function Hi(e){return e===q_||e?.name==="\u0275NotFound"}function Fc(e,t){return Object.is(e,t)}var Be=null,xc=!1,Zf=1,eM=null,qe=Symbol("SIGNAL");function U(e){let t=Be;return Be=e,t}function Lc(){return Be}var $i={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Wi(e){if(xc)throw new Error("");if(Be===null)return;Be.consumerOnSignalRead(e);let t=Be.producersTail;if(t!==void 0&&t.producer===e)return;let n,r=Be.recomputing;if(r&&(n=t!==void 0?t.nextProducer:Be.producers,n!==void 0&&n.producer===e)){Be.producersTail=n,n.lastReadVersion=e.version;return}let i=e.consumersTail;if(i!==void 0&&i.consumer===Be&&(!r||nM(i,Be)))return;let o=Gi(Be),s={producer:e,consumer:Be,nextProducer:n,prevConsumer:i,lastReadVersion:e.version,nextConsumer:void 0};Be.producersTail=s,t!==void 0?t.nextProducer=s:Be.producers=s,o&&Q_(e,s)}function Y_(){Zf++}function Vc(e){if(!(Gi(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Zf)){if(!e.producerMustRecompute(e)&&!gs(e)){Pc(e);return}e.producerRecomputeValue(e),Pc(e)}}function Qf(e){if(e.consumers===void 0)return;let t=xc;xc=!0;try{for(let n=e.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||tM(r)}}finally{xc=t}}function Jf(){return Be?.consumerAllowSignalWrites!==!1}function tM(e){e.dirty=!0,Qf(e),e.consumerMarkedDirty?.(e)}function Pc(e){e.dirty=!1,e.lastCleanEpoch=Zf}function zi(e){return e&&K_(e),U(e)}function K_(e){e.producersTail=void 0,e.recomputing=!0}function ps(e,t){U(t),e&&Z_(e)}function Z_(e){e.recomputing=!1;let t=e.producersTail,n=t!==void 0?t.nextProducer:e.producers;if(n!==void 0){if(Gi(e))do n=Xf(n);while(n!==void 0);t!==void 0?t.nextProducer=void 0:e.producers=void 0}}function gs(e){for(let t=e.producers;t!==void 0;t=t.nextProducer){let n=t.producer,r=t.lastReadVersion;if(r!==n.version||(Vc(n),r!==n.version))return!0}return!1}function ms(e){if(Gi(e)){let t=e.producers;for(;t!==void 0;)t=Xf(t)}e.producers=void 0,e.producersTail=void 0,e.consumers=void 0,e.consumersTail=void 0}function Q_(e,t){let n=e.consumersTail,r=Gi(e);if(n!==void 0?(t.nextConsumer=n.nextConsumer,n.nextConsumer=t):(t.nextConsumer=void 0,e.consumers=t),t.prevConsumer=n,e.consumersTail=t,!r)for(let i=e.producers;i!==void 0;i=i.nextProducer)Q_(i.producer,i)}function Xf(e){let t=e.producer,n=e.nextProducer,r=e.nextConsumer,i=e.prevConsumer;if(e.nextConsumer=void 0,e.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:t.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(t.consumers=r,!Gi(t)){let o=t.producers;for(;o!==void 0;)o=Xf(o)}return n}function Gi(e){return e.consumerIsAlwaysLive||e.consumers!==void 0}function jc(e){eM?.(e)}function nM(e,t){let n=t.producersTail;if(n!==void 0){let r=t.producers;do{if(r===e)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Uc(e,t){let n=Object.create(rM);n.computation=e,t!==void 0&&(n.equal=t);let r=()=>{if(Vc(n),Wi(n),n.value===hs)throw n.error;return n.value};return r[qe]=n,jc(n),r}var Oc=Symbol("UNSET"),kc=Symbol("COMPUTING"),hs=Symbol("ERRORED"),rM=S(m({},$i),{value:Oc,dirty:!0,error:null,equal:Fc,kind:"computed",producerMustRecompute(e){return e.value===Oc||e.value===kc},producerRecomputeValue(e){if(e.value===kc)throw new Error("");let t=e.value;e.value=kc;let n=zi(e),r,i=!1;try{r=e.computation(),U(null),i=t!==Oc&&t!==hs&&r!==hs&&e.equal(t,r)}catch(o){r=hs,e.error=o}finally{ps(e,n)}if(i){e.value=t;return}e.value=r,e.version++}});function iM(){throw new Error}var J_=iM;function X_(e){J_(e)}function eh(e){J_=e}var oM=null;function th(e,t){let n=Object.create(Bc);n.value=e,t!==void 0&&(n.equal=t);let r=()=>eE(n);return r[qe]=n,jc(n),[r,s=>qi(n,s),s=>nh(n,s)]}function eE(e){return Wi(e),e.value}function qi(e,t){Jf()||X_(e),e.equal(e.value,t)||(e.value=t,sM(e))}function nh(e,t){Jf()||X_(e),qi(e,t(e.value))}var Bc=S(m({},$i),{equal:Fc,value:void 0,kind:"signal"});function sM(e){e.version++,Y_(),Qf(e),oM?.(e)}function L(e){return typeof e=="function"}function Yi(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Hc=Yi(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Br(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var le=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(L(r))try{r()}catch(o){t=o instanceof Hc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{tE(o)}catch(s){t=t??[],s instanceof Hc?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Hc(t)}}add(t){var n;if(t&&t!==this)if(this.closed)tE(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Br(n,t)}remove(t){let{_finalizers:n}=this;n&&Br(n,t),t instanceof e&&t._removeParent(this)}};le.EMPTY=(()=>{let e=new le;return e.closed=!0,e})();var rh=le.EMPTY;function $c(e){return e instanceof le||e&&"closed"in e&&L(e.remove)&&L(e.add)&&L(e.unsubscribe)}function tE(e){L(e)?e():e.unsubscribe()}var Gt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ki={setTimeout(e,t,...n){let{delegate:r}=Ki;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=Ki;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Wc(e){Ki.setTimeout(()=>{let{onUnhandledError:t}=Gt;if(t)t(e);else throw e})}function vs(){}var nE=ih("C",void 0,void 0);function rE(e){return ih("E",void 0,e)}function iE(e){return ih("N",e,void 0)}function ih(e,t,n){return{kind:e,value:t,error:n}}var Hr=null;function Zi(e){if(Gt.useDeprecatedSynchronousErrorHandling){let t=!Hr;if(t&&(Hr={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=Hr;if(Hr=null,n)throw r}}else e()}function oE(e){Gt.useDeprecatedSynchronousErrorHandling&&Hr&&(Hr.errorThrown=!0,Hr.error=e)}var $r=class extends le{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,$c(t)&&t.add(this)):this.destination=lM}static create(t,n,r){return new Qi(t,n,r)}next(t){this.isStopped?sh(iE(t),this):this._next(t)}error(t){this.isStopped?sh(rE(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?sh(nE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},aM=Function.prototype.bind;function oh(e,t){return aM.call(e,t)}var ah=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){zc(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){zc(r)}else zc(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){zc(n)}}},Qi=class extends $r{constructor(t,n,r){super();let i;if(L(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Gt.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&oh(t.next,o),error:t.error&&oh(t.error,o),complete:t.complete&&oh(t.complete,o)}):i=t}this.destination=new ah(i)}};function zc(e){Gt.useDeprecatedSynchronousErrorHandling?oE(e):Wc(e)}function cM(e){throw e}function sh(e,t){let{onStoppedNotification:n}=Gt;n&&Ki.setTimeout(()=>n(e,t))}var lM={closed:!0,next:vs,error:cM,complete:vs};var Ji=typeof Symbol=="function"&&Symbol.observable||"@@observable";function gt(e){return e}function ch(...e){return lh(e)}function lh(e){return e.length===0?gt:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var O=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=dM(n)?n:new Qi(n,r,i);return Zi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=sE(r),new r((i,o)=>{let s=new Qi({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ji](){return this}pipe(...n){return lh(n)(this)}toPromise(n){return n=sE(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function sE(e){var t;return(t=e??Gt.Promise)!==null&&t!==void 0?t:Promise}function uM(e){return e&&L(e.next)&&L(e.error)&&L(e.complete)}function dM(e){return e&&e instanceof $r||uM(e)&&$c(e)}function uh(e){return L(e?.lift)}function q(e){return t=>{if(uh(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function G(e,t,n,r,i){return new dh(e,t,n,r,i)}var dh=class extends $r{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Xi(){return q((e,t)=>{let n=null;e._refCount++;let r=G(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var eo=class extends O{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,uh(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new le;let n=this.getSubject();t.add(this.source.subscribe(G(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=le.EMPTY)}return t}refCount(){return Xi()(this)}};var aE=Yi(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=(()=>{class e extends O{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Gc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new aE}next(n){Zi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Zi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Zi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?rh:(this.currentObservers=null,o.push(n),new le(()=>{this.currentObservers=null,Br(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new O;return n.source=this,n}}return e.create=(t,n)=>new Gc(t,n),e})(),Gc=class extends re{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:rh}};var Oe=class extends re{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var fh={now(){return(fh.delegate||Date).now()},delegate:void 0};var qc=class extends le{constructor(t,n){super()}schedule(t,n=0){return this}};var ys={setInterval(e,t,...n){let{delegate:r}=ys;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=ys;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var Yc=class extends qc{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,r=0){return ys.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ys.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r=!1,i;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Br(r,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var to=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}};to.now=fh.now;var Kc=class extends to{constructor(t,n=to.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}};var hh=new Kc(Yc),cE=hh;var rt=new O(e=>e.complete());function Zc(e){return e&&L(e.schedule)}function lE(e){return e[e.length-1]}function Qc(e){return L(lE(e))?e.pop():void 0}function or(e){return Zc(lE(e))?e.pop():void 0}function dE(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function uE(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wr(e){return this instanceof Wr?(this.v=e,this):new Wr(e)}function fE(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(h){return function(g){return Promise.resolve(g).then(h,d)}}function a(h,g){r[h]&&(i[h]=function(_){return new Promise(function(T,N){o.push([h,_,T,N])>1||c(h,_)})},g&&(i[h]=g(i[h])))}function c(h,g){try{l(r[h](g))}catch(_){f(o[0][3],_)}}function l(h){h.value instanceof Wr?Promise.resolve(h.value.v).then(u,d):f(o[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,g){h(g),o.shift(),o.length&&c(o[0][0],o[0][1])}}function hE(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof uE=="function"?uE(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Jc=e=>e&&typeof e.length=="number"&&typeof e!="function";function Xc(e){return L(e?.then)}function el(e){return L(e[Ji])}function tl(e){return Symbol.asyncIterator&&L(e?.[Symbol.asyncIterator])}function nl(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function fM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var rl=fM();function il(e){return L(e?.[rl])}function ol(e){return fE(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield Wr(n.read());if(i)return yield Wr(void 0);yield yield Wr(r)}}finally{n.releaseLock()}})}function sl(e){return L(e?.getReader)}function Ie(e){if(e instanceof O)return e;if(e!=null){if(el(e))return hM(e);if(Jc(e))return pM(e);if(Xc(e))return gM(e);if(tl(e))return pE(e);if(il(e))return mM(e);if(sl(e))return vM(e)}throw nl(e)}function hM(e){return new O(t=>{let n=e[Ji]();if(L(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function pM(e){return new O(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function gM(e){return new O(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Wc)})}function mM(e){return new O(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function pE(e){return new O(t=>{yM(e,t).catch(n=>t.error(n))})}function vM(e){return pE(ol(e))}function yM(e,t){var n,r,i,o;return dE(this,void 0,void 0,function*(){try{for(n=hE(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function it(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function al(e,t=0){return q((n,r)=>{n.subscribe(G(r,i=>it(r,e,()=>r.next(i),t),()=>it(r,e,()=>r.complete(),t),i=>it(r,e,()=>r.error(i),t)))})}function cl(e,t=0){return q((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function gE(e,t){return Ie(e).pipe(cl(t),al(t))}function mE(e,t){return Ie(e).pipe(cl(t),al(t))}function vE(e,t){return new O(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function yE(e,t){return new O(n=>{let r;return it(n,t,()=>{r=e[rl](),it(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>L(r?.return)&&r.return()})}function ll(e,t){if(!e)throw new Error("Iterable cannot be null");return new O(n=>{it(n,t,()=>{let r=e[Symbol.asyncIterator]();it(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function _E(e,t){return ll(ol(e),t)}function EE(e,t){if(e!=null){if(el(e))return gE(e,t);if(Jc(e))return vE(e,t);if(Xc(e))return mE(e,t);if(tl(e))return ll(e,t);if(il(e))return yE(e,t);if(sl(e))return _E(e,t)}throw nl(e)}function se(e,t){return t?EE(e,t):Ie(e)}function A(...e){let t=or(e);return se(e,t)}function no(e,t){let n=L(e)?e:()=>e,r=i=>i.error(n());return new O(t?i=>t.schedule(r,0,i):r)}function ph(e){return!!e&&(e instanceof O||L(e.lift)&&L(e.subscribe))}var Fn=Yi(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function IE(e){return e instanceof Date&&!isNaN(e)}function B(e,t){return q((n,r)=>{let i=0;n.subscribe(G(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:_M}=Array;function EM(e,t){return _M(t)?e(...t):e(t)}function ul(e){return B(t=>EM(e,t))}var{isArray:IM}=Array,{getPrototypeOf:CM,prototype:wM,keys:DM}=Object;function dl(e){if(e.length===1){let t=e[0];if(IM(t))return{args:t,keys:null};if(bM(t)){let n=DM(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function bM(e){return e&&typeof e=="object"&&CM(e)===wM}function fl(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function zr(...e){let t=or(e),n=Qc(e),{args:r,keys:i}=dl(e);if(r.length===0)return se([],t);let o=new O(TM(r,t,i?s=>fl(i,s):gt));return n?o.pipe(ul(n)):o}function TM(e,t,n=gt){return r=>{CE(t,()=>{let{length:i}=e,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)CE(t,()=>{let l=se(e[c],t),u=!1;l.subscribe(G(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function CE(e,t,n){e?it(n,e,t):t()}function wE(e,t,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&t.complete()},h=_=>l<r?g(_):c.push(_),g=_=>{o&&t.next(_),l++;let T=!1;Ie(n(_,u++)).subscribe(G(t,N=>{i?.(N),o?h(N):t.next(N)},()=>{T=!0},void 0,()=>{if(T)try{for(l--;c.length&&l<r;){let N=c.shift();s?it(t,s,()=>g(N)):g(N)}f()}catch(N){t.error(N)}}))};return e.subscribe(G(t,h,()=>{d=!0,f()})),()=>{a?.()}}function pe(e,t,n=1/0){return L(t)?pe((r,i)=>B((o,s)=>t(r,o,i,s))(Ie(e(r,i))),n):(typeof t=="number"&&(n=t),q((r,i)=>wE(r,i,e,n)))}function ro(e=1/0){return pe(gt,e)}function DE(){return ro(1)}function io(...e){return DE()(se(e,or(e)))}function _s(e){return new O(t=>{Ie(e()).subscribe(t)})}function gh(...e){let t=Qc(e),{args:n,keys:r}=dl(e),i=new O(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;Ie(n[u]).subscribe(G(o,f=>{d||(d=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?fl(r,a):a),o.complete())}))}});return t?i.pipe(ul(t)):i}function bE(e=0,t,n=cE){let r=-1;return t!=null&&(Zc(t)?n=t:r=t),new O(i=>{let o=IE(e)?+e-n.now():e;o<0&&(o=0);let s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function mh(e=0,t=hh){return e<0&&(e=0),bE(e,e,t)}function ot(e,t){return q((n,r)=>{let i=0;n.subscribe(G(r,o=>e.call(t,o,i++)&&r.next(o)))})}function Ln(e){return q((t,n)=>{let r=null,i=!1,o;r=t.subscribe(G(n,void 0,void 0,s=>{o=Ie(e(s,Ln(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function TE(e,t,n,r,i){return(o,s)=>{let a=n,c=t,l=0;o.subscribe(G(s,u=>{let d=l++;c=a?e(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function sr(e,t){return L(t)?pe(e,t,1):pe(e,1)}function ar(e){return q((t,n)=>{let r=!1;t.subscribe(G(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function Mt(e){return e<=0?()=>rt:q((t,n)=>{let r=0;t.subscribe(G(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function hl(e=SM){return q((t,n)=>{let r=!1;t.subscribe(G(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function SM(){return new Fn}function Es(e){return q((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function Vn(e,t){let n=arguments.length>=2;return r=>r.pipe(e?ot((i,o)=>e(i,o,r)):gt,Mt(1),n?ar(t):hl(()=>new Fn))}function oo(e){return e<=0?()=>rt:q((t,n)=>{let r=[];t.subscribe(G(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function vh(e,t){let n=arguments.length>=2;return r=>r.pipe(e?ot((i,o)=>e(i,o,r)):gt,oo(1),n?ar(t):hl(()=>new Fn))}function yh(e,t){return q(TE(e,t,arguments.length>=2,!0))}function _h(...e){let t=or(e);return q((n,r)=>{(t?io(e,n,t):io(e,n)).subscribe(r)})}function Me(e,t){return q((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(G(r,c=>{i?.unsubscribe();let l=0,u=o++;Ie(e(c,u)).subscribe(i=G(r,d=>r.next(t?t(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function jn(e){return q((t,n)=>{Ie(e).subscribe(G(n,()=>n.complete(),vs)),!n.closed&&t.subscribe(n)})}function Ce(e,t,n){let r=L(e)||t||n?{next:e,error:t,complete:n}:e;return r?q((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(G(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):gt}function SE(e){let t=U(null);try{return e()}finally{U(t)}}var vl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",E=class extends Error{code;constructor(t,n){super(ao(t,n)),this.code=t}};function AM(e){return`NG0${Math.abs(e)}`}function ao(e,t){return`${AM(e)}${t?": "+t:""}`}var Hn=globalThis;function J(e){for(let t in e)if(e[t]===J)return t;throw Error("")}function NE(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Bn(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(Bn).join(", ")}]`;if(e==null)return""+e;let t=e.overriddenName||e.name;if(t)return`${t}`;let n=e.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Rh(e,t){return e?t?`${e} ${t}`:e:t||""}var MM=J({__forward_ref__:J});function gn(e){return e.__forward_ref__=gn,e.toString=function(){return Bn(this())},e}function ke(e){return xh(e)?e():e}function xh(e){return typeof e=="function"&&e.hasOwnProperty(MM)&&e.__forward_ref__===gn}function I(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Yt(e){return{providers:e.providers||[],imports:e.imports||[]}}function Ds(e){return NM(e,yl)}function Oh(e){return Ds(e)!==null}function NM(e,t){return e.hasOwnProperty(t)&&e[t]||null}function RM(e){let t=e?.[yl]??null;return t||null}function Ih(e){return e&&e.hasOwnProperty(gl)?e[gl]:null}var yl=J({\u0275prov:J}),gl=J({\u0275inj:J}),b=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=I({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function kh(e){return e&&!!e.\u0275providers}var Ph=J({\u0275cmp:J}),Fh=J({\u0275dir:J}),Lh=J({\u0275pipe:J}),Vh=J({\u0275mod:J}),Cs=J({\u0275fac:J}),Zr=J({__NG_ELEMENT_ID__:J}),AE=J({__NG_ENV_ID__:J});function Qr(e){return typeof e=="string"?e:e==null?"":String(e)}function RE(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Qr(e)}var xE=J({ngErrorCode:J}),xM=J({ngErrorMessage:J}),OM=J({ngTokenPath:J});function jh(e,t){return OE("",-200,t)}function _l(e,t){throw new E(-201,!1)}function OE(e,t,n){let r=new E(t,e);return r[xE]=t,r[xM]=e,n&&(r[OM]=n),r}function kM(e){return e[xE]}var Ch;function kE(){return Ch}function Ye(e){let t=Ch;return Ch=e,t}function Uh(e,t,n){let r=Ds(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(t!==void 0)return t;_l(e,"Injector")}var PM={},Gr=PM,FM="__NG_DI_FLAG__",wh=class{injector;constructor(t){this.injector=t}retrieve(t,n){let r=qr(n)||0;try{return this.injector.get(t,r&8?null:Gr,r)}catch(i){if(Hi(i))return i;throw i}}};function LM(e,t=0){let n=Rc();if(n===void 0)throw new E(-203,!1);if(n===null)return Uh(e,void 0,t);{let r=VM(t),i=n.retrieve(e,r);if(Hi(i)){if(r.optional)return null;throw i}return i}}function M(e,t=0){return(kE()||LM)(ke(e),t)}function v(e,t){return M(e,qr(t))}function qr(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function VM(e){return{optional:!!(e&8),host:!!(e&1),self:!!(e&2),skipSelf:!!(e&4)}}function Dh(e){let t=[];for(let n=0;n<e.length;n++){let r=ke(e[n]);if(Array.isArray(r)){if(r.length===0)throw new E(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=jM(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}t.push(M(i,o))}else t.push(M(r))}return t}function jM(e){return e[FM]}function cr(e,t){let n=e.hasOwnProperty(Cs);return n?e[Cs]:null}function El(e,t){e.forEach(n=>Array.isArray(n)?El(n,t):t(n))}function Bh(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function bs(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function PE(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}function FE(e,t,n){let r=co(e,t);return r>=0?e[r|1]=n:(r=~r,PE(e,r,t,n)),r}function Il(e,t){let n=co(e,t);if(n>=0)return e[n|1]}function co(e,t){return UM(e,t,1)}function UM(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=e[o<<n];if(t===s)return o<<n;s>t?i=o:r=o+1}return~(i<<n)}var dr={},mt=[],$n=new b(""),Hh=new b("",-1),$h=new b(""),ws=class{get(t,n=Gr){if(n===Gr){let i=OE("",-201);throw i.name="\u0275NotFound",i}return n}};function Wh(e){return e[Vh]||null}function Wn(e){return e[Ph]||null}function zh(e){return e[Fh]||null}function LE(e){return e[Lh]||null}function fr(e){return{\u0275providers:e}}function VE(e){return fr([{provide:$n,multi:!0,useValue:e}])}function jE(...e){return{\u0275providers:Gh(!0,e),\u0275fromNgModule:!0}}function Gh(e,...t){let n=[],r=new Set,i,o=s=>{n.push(s)};return El(t,s=>{let a=s;ml(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&UE(i,o),n}function UE(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];qh(i,o=>{t(o,r)})}}function ml(e,t,n,r){if(e=ke(e),!e)return!1;let i=null,o=Ih(e),s=!o&&Wn(e);if(!o&&!s){let c=e.ngModule;if(o=Ih(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=e}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)ml(l,t,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{El(o.imports,u=>{ml(u,t,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&UE(l,t)}if(!a){let l=cr(i)||(()=>new i);t({provide:i,useFactory:l,deps:mt},i),t({provide:$h,useValue:i,multi:!0},i),t({provide:$n,useValue:()=>M(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=e;qh(c,u=>{t(u,l)})}}else return!1;return i!==e&&e.providers!==void 0}function qh(e,t){for(let n of e)kh(n)&&(n=n.\u0275providers),Array.isArray(n)?qh(n,t):t(n)}var BM=J({provide:String,useValue:J});function BE(e){return e!==null&&typeof e=="object"&&BM in e}function HM(e){return!!(e&&e.useExisting)}function $M(e){return!!(e&&e.useFactory)}function Yr(e){return typeof e=="function"}function HE(e){return!!e.useClass}var Ts=new b(""),pl={},ME={},Eh;function Ss(){return Eh===void 0&&(Eh=new ws),Eh}var Te=class{},Kr=class extends Te{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Th(t,s=>this.processProvider(s)),this.records.set(Hh,so(void 0,this)),i.has("environment")&&this.records.set(Te,so(void 0,this));let o=this.records.get(Ts);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get($h,mt,{self:!0}))}retrieve(t,n){let r=qr(n)||0;try{return this.get(t,Gr,r)}catch(i){if(Hi(i))return i;throw i}}destroy(){Is(this),this._destroyed=!0;let t=U(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),U(t)}}onDestroy(t){return Is(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Is(this);let n=pn(this),r=Ye(void 0),i;try{return t()}finally{pn(n),Ye(r)}}get(t,n=Gr,r){if(Is(this),t.hasOwnProperty(AE))return t[AE](this);let i=qr(r),o,s=pn(this),a=Ye(void 0);try{if(!(i&4)){let l=this.records.get(t);if(l===void 0){let u=YM(t)&&Ds(t);u&&this.injectableDefInScope(u)?l=so(bh(t),pl):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l,i)}let c=i&2?Ss():this.parent;return n=i&8&&n===Gr?null:n,c.get(t,n)}catch(c){let l=kM(c);throw l===-200||l===-201?new E(l,null):c}finally{Ye(a),pn(s)}}resolveInjectorInitializers(){let t=U(null),n=pn(this),r=Ye(void 0),i;try{let o=this.get($n,mt,{self:!0});for(let s of o)s()}finally{pn(n),Ye(r),U(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(Bn(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=ke(t);let n=Yr(t)?t:ke(t&&t.provide),r=zM(t);if(!Yr(t)&&t.multi===!0){let i=this.records.get(n);i||(i=so(void 0,pl,!0),i.factory=()=>Dh(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n,r){let i=U(null);try{if(n.value===ME)throw jh(Bn(t));return n.value===pl&&(n.value=ME,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&qM(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{U(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=ke(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function bh(e){let t=Ds(e),n=t!==null?t.factory:cr(e);if(n!==null)return n;if(e instanceof b)throw new E(204,!1);if(e instanceof Function)return WM(e);throw new E(204,!1)}function WM(e){if(e.length>0)throw new E(204,!1);let n=RM(e);return n!==null?()=>n.factory(e):()=>new e}function zM(e){if(BE(e))return so(void 0,e.useValue);{let t=Yh(e);return so(t,pl)}}function Yh(e,t,n){let r;if(Yr(e)){let i=ke(e);return cr(i)||bh(i)}else if(BE(e))r=()=>ke(e.useValue);else if($M(e))r=()=>e.useFactory(...Dh(e.deps||[]));else if(HM(e))r=(i,o)=>M(ke(e.useExisting),o!==void 0&&o&8?8:void 0);else{let i=ke(e&&(e.useClass||e.provide));if(GM(e))r=()=>new i(...Dh(e.deps));else return cr(i)||bh(i)}return r}function Is(e){if(e.destroyed)throw new E(205,!1)}function so(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function GM(e){return!!e.deps}function qM(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function YM(e){return typeof e=="function"||typeof e=="object"&&e.ngMetadataName==="InjectionToken"}function Th(e,t){for(let n of e)Array.isArray(n)?Th(n,t):n&&kh(n)?Th(n.\u0275providers,t):t(n)}function He(e,t){let n;e instanceof Kr?(Is(e),n=e):n=new wh(e);let r,i=pn(n),o=Ye(void 0);try{return t()}finally{pn(i),Ye(o)}}function $E(){return kE()!==void 0||Rc()!=null}var Kt=0,P=1,k=2,Pe=3,Nt=4,Rt=5,As=6,lo=7,$e=8,uo=9,mn=10,ge=11,fo=12,Kh=13,Jr=14,xt=15,Xr=16,ei=17,ti=18,Ms=19,Zh=20,Un=21,Cl=22,Ns=23,vt=24,ni=25,Ke=26,Fe=27,WE=1;var hr=7,Rs=8,xs=9,at=10;function vn(e){return Array.isArray(e)&&typeof e[WE]=="object"}function Zt(e){return Array.isArray(e)&&e[WE]===!0}function Qh(e){return(e.flags&4)!==0}function pr(e){return e.componentOffset>-1}function ho(e){return(e.flags&1)===1}function yn(e){return!!e.template}function po(e){return(e[k]&512)!==0}function ri(e){return(e[k]&256)===256}var zE="svg",GE="math";function Ot(e){for(;Array.isArray(e);)e=e[Kt];return e}function Jh(e,t){return Ot(t[e])}function Qt(e,t){return Ot(t[e.index])}function wl(e,t){return e.data[t]}function Xh(e,t){return e[t]}function ep(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}function kt(e,t){let n=t[e];return vn(n)?n:n[Kt]}function Dl(e){return(e[k]&128)===128}function qE(e){return Zt(e[Pe])}function Os(e,t){return t==null?null:e[t]}function tp(e){e[ei]=0}function np(e){e[k]&1024||(e[k]|=1024,Dl(e)&&go(e))}function YE(e,t){for(;e>0;)t=t[Jr],e--;return t}function ks(e){return!!(e[k]&9216||e[vt]?.dirty)}function bl(e){e[mn].changeDetectionScheduler?.notify(8),e[k]&64&&(e[k]|=1024),ks(e)&&go(e)}function go(e){e[mn].changeDetectionScheduler?.notify(0);let t=lr(e);for(;t!==null&&!(t[k]&8192||(t[k]|=8192,!Dl(t)));)t=lr(t)}function rp(e,t){if(ri(e))throw new E(911,!1);e[Un]===null&&(e[Un]=[]),e[Un].push(t)}function KE(e,t){if(e[Un]===null)return;let n=e[Un].indexOf(t);n!==-1&&e[Un].splice(n,1)}function lr(e){let t=e[Pe];return Zt(t)?t[Pe]:t}function ZE(e){return e[lo]??=[]}function QE(e){return e.cleanup??=[]}var H={lFrame:pI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Sh=!1;function JE(){return H.lFrame.elementDepthCount}function XE(){H.lFrame.elementDepthCount++}function eI(){H.lFrame.elementDepthCount--}function Tl(){return H.bindingsEnabled}function tI(){return H.skipHydrationRootTNode!==null}function nI(e){return H.skipHydrationRootTNode===e}function rI(){H.skipHydrationRootTNode=null}function X(){return H.lFrame.lView}function yt(){return H.lFrame.tView}function _t(e){return H.lFrame.contextLView=e,e[$e]}function Et(e){return H.lFrame.contextLView=null,e}function We(){let e=ip();for(;e!==null&&e.type===64;)e=e.parent;return e}function ip(){return H.lFrame.currentTNode}function iI(){let e=H.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function mo(e,t){let n=H.lFrame;n.currentTNode=e,n.isParent=t}function op(){return H.lFrame.isParent}function oI(){H.lFrame.isParent=!1}function sI(){return H.lFrame.contextLView}function sp(){return Sh}function ap(e){let t=Sh;return Sh=e,t}function cp(){let e=H.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function aI(){return H.lFrame.bindingIndex}function cI(e){return H.lFrame.bindingIndex=e}function Sl(){return H.lFrame.bindingIndex++}function lp(e){let t=H.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function lI(){return H.lFrame.inI18n}function uI(e,t){let n=H.lFrame;n.bindingIndex=n.bindingRootIndex=e,Al(t)}function dI(){return H.lFrame.currentDirectiveIndex}function Al(e){H.lFrame.currentDirectiveIndex=e}function fI(e){let t=H.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function up(e){H.lFrame.currentQueryIndex=e}function KM(e){let t=e[P];return t.type===2?t.declTNode:t.type===1?e[Rt]:null}function dp(e,t,n){if(n&4){let i=t,o=e;for(;i=i.parent,i===null&&!(n&1);)if(i=KM(o),i===null||(o=o[Jr],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=H.lFrame=hI();return r.currentTNode=t,r.lView=e,!0}function Ml(e){let t=hI(),n=e[P];H.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function hI(){let e=H.lFrame,t=e===null?null:e.child;return t===null?pI(e):t}function pI(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function gI(){let e=H.lFrame;return H.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var fp=gI;function Nl(){let e=gI();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function mI(e){return(H.lFrame.contextLView=YE(e,H.lFrame.contextLView))[$e]}function gr(){return H.lFrame.selectedIndex}function mr(e){H.lFrame.selectedIndex=e}function hp(){let e=H.lFrame;return wl(e.tView,e.selectedIndex)}function vI(){return H.lFrame.currentNamespace}var yI=!0;function Rl(){return yI}function Ps(e){yI=e}function Ah(e,t=null,n=null,r){let i=pp(e,t,n,r);return i.resolveInjectorInitializers(),i}function pp(e,t=null,n=null,r,i=new Set){let o=[n||mt,jE(e)];return r=r||(typeof e=="object"?void 0:Bn(e)),new Kr(o,t||Ss(),r||null,i)}var st=class e{static THROW_IF_NOT_FOUND=Gr;static NULL=new ws;static create(t,n){if(Array.isArray(t))return Ah({name:""},n,t,"");{let r=t.name??"";return Ah({name:r},t.parent,t.providers,r)}}static \u0275prov=I({token:e,providedIn:"any",factory:()=>M(Hh)});static __NG_ELEMENT_ID__=-1},me=new b(""),_n=(()=>{class e{static __NG_ELEMENT_ID__=ZM;static __NG_ENV_ID__=n=>n}return e})(),Mh=class extends _n{_lView;constructor(t){super(),this._lView=t}get destroyed(){return ri(this._lView)}onDestroy(t){let n=this._lView;return rp(n,t),()=>KE(n,t)}};function ZM(){return new Mh(X())}var qt=class{_console=console;handleError(t){this._console.error("ERROR",t)}},ct=new b("",{providedIn:"root",factory:()=>{let e=v(Te),t;return n=>{e.destroyed&&!t?setTimeout(()=>{throw n}):(t??=e.get(qt),t.handleError(n))}}}),_I={provide:$n,useValue:()=>void v(qt),multi:!0},QM=new b("",{providedIn:"root",factory:()=>{let e=v(me).defaultView;if(!e)return;let t=v(ct),n=o=>{t(o.reason),o.preventDefault()},r=o=>{o.error?t(o.error):t(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{e.addEventListener("unhandledrejection",n),e.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),v(_n).onDestroy(()=>{e.removeEventListener("error",r),e.removeEventListener("unhandledrejection",n)})}});function gp(){return fr([VE(()=>void v(QM))])}function It(e,t){let[n,r,i]=th(e,t?.equal),o=n,s=o[qe];return o.set=r,o.update=i,o.asReadonly=EI.bind(o),o}function EI(){let e=this[qe];if(e.readonlyFn===void 0){let t=()=>this();t[qe]=e,e.readonlyFn=t}return e.readonlyFn}var ur=class{},Fs=new b("",{providedIn:"root",factory:()=>!1});var mp=new b(""),vp=new b("");var xl=(()=>{class e{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=JM}return e})();function JM(){return new xl(X(),We())}var zn=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Oe(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new O(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=I({token:e,providedIn:"root",factory:()=>new e})}return e})();function Ls(...e){}var yp=(()=>{class e{static \u0275prov=I({token:e,providedIn:"root",factory:()=>new Nh})}return e})(),Nh=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let n=t.zone,r=this.queues.get(n);r.has(t)&&(r.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||r.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[n,r]of this.queues)n===null?t||=this.flushQueue(r):t||=n.run(()=>this.flushQueue(r));t||(this.dirtyEffectCount=0)}}flushQueue(t){let n=!1;for(let r of t)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function Ws(e){return{toString:e}.toString()}function cN(e){return typeof e=="function"}var jl=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function JI(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var qn=(()=>{let e=()=>XI;return e.ngInherit=!0,e})();function XI(e){return e.type.prototype.ngOnChanges&&(e.setInput=uN),lN}function lN(){let e=tC(this),t=e?.current;if(t){let n=e.previous;if(n===dr)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function uN(e,t,n,r,i){let o=this.declaredInputs[r],s=tC(e)||dN(e,{previous:dr,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new jl(l&&l.currentValue,n,c===dr),JI(e,t,i,n)}var eC="__ngSimpleChanges__";function tC(e){return e[eC]||null}function dN(e,t){return e[eC]=t}var II=[];var ee=function(e,t=null,n){for(let r=0;r<II.length;r++){let i=II[r];i(e,t,n)}};function fN(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=XI(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function nC(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function Fl(e,t,n){rC(e,t,3,n)}function Ll(e,t,n,r){(e[k]&3)===n&&rC(e,t,n,r)}function _p(e,t){let n=e[k];(n&3)===t&&(n&=16383,n+=1,e[k]=n)}function rC(e,t,n,r){let i=r!==void 0?e[ei]&65535:0,o=r??-1,s=t.length-1,a=0;for(let c=i;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[ei]+=65536),(a<o||o==-1)&&(hN(e,n,t,c),e[ei]=(e[ei]&4294901760)+c+2),c++}function CI(e,t){ee(4,e,t);let n=U(null);try{t.call(e)}finally{U(n),ee(5,e,t)}}function hN(e,t,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=e[s];i?e[k]>>14<e[ei]>>16&&(e[k]&3)===t&&(e[k]+=16384,CI(a,o)):CI(a,o)}var yo=-1,oi=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r,i){this.factory=t,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function pN(e){return(e.flags&8)!==0}function gN(e){return(e.flags&16)!==0}function mN(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{let o=i,s=n[++r];vN(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function iC(e){return e===3||e===4||e===6}function vN(e){return e.charCodeAt(0)===64}function Us(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?wI(e,n,i,null,t[++r]):wI(e,n,i,null,null))}}return e}function wI(e,t,n,r,i){let o=0,s=e.length;if(t===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===n){i!==null&&(e[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),i!==null&&e.splice(o++,0,i)}function oC(e){return e!==yo}function Ul(e){return e&32767}function yN(e){return e>>16}function Bl(e,t){let n=yN(e),r=t;for(;n>0;)r=r[Jr],n--;return r}var Np=!0;function Hl(e){let t=Np;return Np=e,t}var _N=256,sC=_N-1,aC=5,EN=0,En={};function IN(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Zr)&&(r=n[Zr]),r==null&&(r=n[Zr]=EN++);let i=r&sC,o=1<<i;t.data[e+(i>>aC)]|=o}function $l(e,t){let n=cC(e,t);if(n!==-1)return n;let r=t[P];r.firstCreatePass&&(e.injectorIndex=t.length,Ep(r.data,e),Ep(t,null),Ep(r.blueprint,null));let i=Kp(e,t),o=e.injectorIndex;if(oC(i)){let s=Ul(i),a=Bl(i,t),c=a[P].data;for(let l=0;l<8;l++)t[o+l]=a[s+l]|c[s+l]}return t[o+8]=i,o}function Ep(e,t){e.push(0,0,0,0,0,0,0,0,t)}function cC(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function Kp(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=hC(i),r===null)return yo;if(n++,i=i[Jr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return yo}function Rp(e,t,n){IN(e,t,n)}function CN(e,t){if(t==="class")return e.classes;if(t==="style")return e.styles;let n=e.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(iC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===t)return n[i+1];i=i+2}}}return null}function lC(e,t,n){if(n&8||e!==void 0)return e;_l(t,"NodeInjector")}function uC(e,t,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=e[uo],o=Ye(void 0);try{return i?i.get(t,r,n&8):Uh(t,r,n&8)}finally{Ye(o)}}return lC(r,t,n)}function dC(e,t,n,r=0,i){if(e!==null){if(t[k]&2048&&!(r&2)){let s=SN(e,t,n,r,En);if(s!==En)return s}let o=fC(e,t,n,r,En);if(o!==En)return o}return uC(t,n,r,i)}function fC(e,t,n,r,i){let o=bN(n);if(typeof o=="function"){if(!dp(t,e,r))return r&1?lC(i,n,r):uC(t,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))_l(n);else return s}finally{fp()}}else if(typeof o=="number"){let s=null,a=cC(e,t),c=yo,l=r&1?t[xt][Rt]:null;for((a===-1||r&4)&&(c=a===-1?Kp(e,t):t[a+8],c===yo||!bI(r,!1)?a=-1:(s=t[P],a=Ul(c),t=Bl(c,t)));a!==-1;){let u=t[P];if(DI(o,a,u.data)){let d=wN(a,t,n,s,r,l);if(d!==En)return d}c=t[a+8],c!==yo&&bI(r,t[P].data[a+8]===l)&&DI(o,a,t)?(s=u,a=Ul(c),t=Bl(c,t)):a=-1}}return i}function wN(e,t,n,r,i,o){let s=t[P],a=s.data[e+8],c=r==null?pr(a)&&Np:r!=s&&(a.type&3)!==0,l=i&1&&o===a,u=DN(a,s,n,c,l);return u!==null?Wl(t,s,u,a,i):En}function DN(e,t,n,r,i){let o=e.providerIndexes,s=t.data,a=o&1048575,c=e.directiveStart,l=e.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let g=s[h];if(h<c&&n===g||h>=c&&g.type===n)return h}if(i){let h=s[c];if(h&&yn(h)&&h.type===n)return c}return null}function Wl(e,t,n,r,i){let o=e[n],s=t.data;if(o instanceof oi){let a=o;if(a.resolving){let h=RE(s[n]);throw jh(h)}let c=Hl(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],u,d=a.injectImpl?Ye(a.injectImpl):null,f=dp(e,r,0);try{o=e[n]=a.factory(void 0,i,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&fN(n,s[n],t)}finally{d!==null&&Ye(d),Hl(c),a.resolving=!1,fp()}}return o}function bN(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Zr)?e[Zr]:void 0;return typeof t=="number"?t>=0?t&sC:TN:t}function DI(e,t,n){let r=1<<e;return!!(n[t+(e>>aC)]&r)}function bI(e,t){return!(e&2)&&!(e&1&&t)}var ii=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return dC(this._tNode,this._lView,t,qr(r),n)}};function TN(){return new ii(We(),X())}function yr(e){return Ws(()=>{let t=e.prototype.constructor,n=t[Cs]||xp(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[Cs]||xp(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function xp(e){return xh(e)?()=>{let t=xp(ke(e));return t&&t()}:cr(e)}function SN(e,t,n,r,i){let o=e,s=t;for(;o!==null&&s!==null&&s[k]&2048&&!po(s);){let a=fC(o,s,n,r|2,En);if(a!==En)return a;let c=o.parent;if(!c){let l=s[Zh];if(l){let u=l.get(n,En,r);if(u!==En)return u}c=hC(s),s=s[Jr]}o=c}return i}function hC(e){let t=e[P],n=t.type;return n===2?t.declTNode:n===1?e[Rt]:null}function zs(e){return CN(We(),e)}function AN(){return nu(We(),X())}function nu(e,t){return new Pt(Qt(e,t))}var Pt=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=AN}return e})();function pC(e){return(e.flags&128)===128}var Zp=(function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e})(Zp||{}),gC=new Map,MN=0;function NN(){return MN++}function RN(e){gC.set(e[Ms],e)}function Op(e){gC.delete(e[Ms])}var TI="__ngContext__";function _o(e,t){vn(t)?(e[TI]=t[Ms],RN(t)):e[TI]=t}function mC(e){return yC(e[fo])}function vC(e){return yC(e[Nt])}function yC(e){for(;e!==null&&!Zt(e);)e=e[Nt];return e}var kp;function Qp(e){kp=e}function _C(){if(kp!==void 0)return kp;if(typeof document<"u")return document;throw new E(210,!1)}var ru=new b("",{providedIn:"root",factory:()=>xN}),xN="ng",iu=new b(""),Co=new b("",{providedIn:"platform",factory:()=>"unknown"});var ou=new b("",{providedIn:"root",factory:()=>_C().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var ON="h",kN="b";var EC=!1,IC=new b("",{providedIn:"root",factory:()=>EC});var Jp=new b("");var PN=(e,t,n,r)=>{};function FN(e,t,n,r){PN(e,t,n,r)}function Xp(e){return(e.flags&32)===32}var LN=()=>null;function CC(e,t,n=!1){return LN(e,t,n)}function wC(e,t){let n=e.contentQueries;if(n!==null){let r=U(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=e.data[s];up(o),a.contentQueries(2,t[s],s)}}}finally{U(r)}}}function Pp(e,t,n){up(0);let r=U(null);try{t(e,n)}finally{U(r)}}function eg(e,t,n){if(Qh(t)){let r=U(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=e.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{U(r)}}}var Gn=(function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e})(Gn||{});var Ol;function VN(){if(Ol===void 0&&(Ol=null,Hn.trustedTypes))try{Ol=Hn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Ol}function SI(e){return VN()?.createScriptURL(e)||e}var zl=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${vl})`}};function Gs(e){return e instanceof zl?e.changingThisBreaksApplicationSecurity:e}function tg(e,t){let n=DC(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${vl})`)}return n===t}function DC(e){return e instanceof zl&&e.getTypeName()||null}var jN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function bC(e){return e=String(e),e.match(jN)?e:"unsafe:"+e}var su=(function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e})(su||{});function TC(e){let t=AC();return t?t.sanitize(su.URL,e)||"":tg(e,"URL")?Gs(e):bC(Qr(e))}function SC(e){let t=AC();if(t)return SI(t.sanitize(su.RESOURCE_URL,e)||"");if(tg(e,"ResourceURL"))return SI(Gs(e));throw new E(904,!1)}function UN(e,t){return t==="src"&&(e==="embed"||e==="frame"||e==="iframe"||e==="media"||e==="script")||t==="href"&&(e==="base"||e==="link")?SC:TC}function ng(e,t,n){return UN(t,n)(e)}function AC(){let e=X();return e&&e[mn].sanitizer}var BN=/^>|^->|<!--|-->|--!>|<!-$/g,HN=/(<|>)/g,$N="\u200B$1\u200B";function WN(e){return e.replace(BN,t=>t.replace(HN,$N))}function MC(e){return e instanceof Function?e():e}function zN(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}var NC="ng-template";function GN(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&zN(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(rg(e))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function rg(e){return e.type===4&&e.value!==NC}function qN(e,t,n){let r=e.type===4&&!n?NC:e.value;return t===r}function YN(e,t,n){let r=4,i=e.attrs,o=i!==null?QN(i):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!Jt(r)&&!Jt(c))return!1;if(s&&Jt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!qN(e,c,n)||c===""&&t.length===1){if(Jt(r))return!1;s=!0}}else if(r&8){if(i===null||!GN(e,i,c,n)){if(Jt(r))return!1;s=!0}}else{let l=t[++a],u=KN(c,i,rg(e),n);if(u===-1){if(Jt(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Jt(r))return!1;s=!0}}}}return Jt(r)||s}function Jt(e){return(e&1)===0}function KN(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let s=t[i];if(s===e)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return JN(t,e)}function ZN(e,t,n=!1){for(let r=0;r<t.length;r++)if(YN(e,t[r],n))return!0;return!1}function QN(e){for(let t=0;t<e.length;t++){let n=e[t];if(iC(n))return t}return e.length}function JN(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function AI(e,t){return e?":not("+t.trim()+")":t}function XN(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Jt(s)&&(t+=AI(o,i),i=""),r=s,o=o||!Jt(r);n++}return i!==""&&(t+=AI(o,i)),t}function eR(e){return e.map(XN).join(",")}function tR(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!Jt(i))break;i=o}r++}return n.length&&t.push(1,...n),t}var Xt={};function nR(e,t){return e.createText(t)}function rR(e,t,n){e.setValue(t,n)}function iR(e,t){return e.createComment(WN(t))}function RC(e,t,n){return e.createElement(t,n)}function Gl(e,t,n,r,i){e.insertBefore(t,n,r,i)}function xC(e,t,n){e.appendChild(t,n)}function MI(e,t,n,r,i){r!==null?Gl(e,t,n,r,i):xC(e,t,n)}function oR(e,t,n,r){e.removeChild(null,t,n,r)}function sR(e,t,n){e.setAttribute(t,"style",n)}function aR(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function OC(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&mN(e,t,r),i!==null&&aR(e,t,i),o!==null&&sR(e,t,o)}function ig(e,t,n,r,i,o,s,a,c,l,u){let d=Fe+r,f=d+i,h=cR(d,f),g=typeof l=="function"?l():l;return h[P]={type:e,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:u}}function cR(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:Xt);return n}function lR(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=ig(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function og(e,t,n,r,i,o,s,a,c,l,u){let d=t.blueprint.slice();return d[Kt]=i,d[k]=r|4|128|8|64|1024,(l!==null||e&&e[k]&2048)&&(d[k]|=2048),tp(d),d[Pe]=d[Jr]=e,d[$e]=n,d[mn]=s||e&&e[mn],d[ge]=a||e&&e[ge],d[uo]=c||e&&e[uo]||null,d[Rt]=o,d[Ms]=NN(),d[As]=u,d[Zh]=l,d[xt]=t.type==2?e[xt]:d,d}function uR(e,t,n){let r=Qt(t,e),i=lR(n),o=e[mn].rendererFactory,s=sg(e,og(e,i,null,kC(n),r,t,null,o.createRenderer(r,n),null,null,null));return e[t.index]=s}function kC(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function PC(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function sg(e,t){return e[fo]?e[Kh][Nt]=t:e[fo]=t,e[Kh]=t,t}function F(e=1){FC(yt(),X(),gr()+e,!1)}function FC(e,t,n,r){if(!r)if((t[k]&3)===3){let o=e.preOrderCheckHooks;o!==null&&Fl(t,o,n)}else{let o=e.preOrderHooks;o!==null&&Ll(t,o,0,n)}mr(n)}var au=(function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e})(au||{});function Fp(e,t,n,r){let i=U(null);try{let[o,s,a]=e.inputs[n],c=null;(s&au.SignalBased)!==0&&(c=t[o][qe]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(t,r)),e.setInput!==null?e.setInput(t,c,r,n,o):JI(t,c,o,r)}finally{U(i)}}var In=(function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e})(In||{}),dR;function ag(e,t){return dR(e,t)}var cu=new Set;function vo(e,t,n,r,i,o){if(r!=null){let s,a=!1;Zt(r)?s=r:vn(r)&&(a=!0,r=r[Kt]);let c=Ot(r);e===0&&n!==null?i==null?xC(t,n,c):Gl(t,n,c,i||null,!0):e===1&&n!==null?Gl(t,n,c,i||null,!0):e===2?NI(o,l=>{oR(t,c,a,l)}):e===3&&NI(o,()=>{t.destroyNode(c)}),s!=null&&DR(t,e,s,n,i)}}function fR(e,t){LC(e,t),t[Kt]=null,t[Rt]=null}function hR(e,t,n,r,i,o){r[Kt]=i,r[Rt]=t,lu(e,r,n,1,i,o)}function LC(e,t){t[mn].changeDetectionScheduler?.notify(9),lu(e,t,t[ge],2,null,null)}function pR(e){let t=e[fo];if(!t)return Ip(e[P],e);for(;t;){let n=null;if(vn(t))n=t[fo];else{let r=t[at];r&&(n=r)}if(!n){for(;t&&!t[Nt]&&t!==e;)vn(t)&&Ip(t[P],t),t=t[Pe];t===null&&(t=e),vn(t)&&Ip(t[P],t),n=t&&t[Nt]}t=n}}function cg(e,t){let n=e[xs],r=n.indexOf(t);n.splice(r,1)}function VC(e,t){if(ri(t))return;let n=t[ge];n.destroyNode&&lu(e,t,n,3,null,null),pR(t)}function Ip(e,t){if(ri(t))return;let n=U(null);try{t[k]&=-129,t[k]|=256,t[vt]&&ms(t[vt]),vR(e,t),mR(e,t),t[P].type===1&&t[ge].destroy();let r=t[Xr];if(r!==null&&Zt(t[Pe])){r!==t[Pe]&&cg(r,t);let i=t[ti];i!==null&&i.detachView(e)}Op(t)}finally{U(n)}}function NI(e,t){if(e&&e[Ke]&&e[Ke].leave)if(e[Ke].skipLeaveAnimations)e[Ke].skipLeaveAnimations=!1;else{let n=e[Ke].leave,r=[];for(let i=0;i<n.length;i++){let o=n[i];r.push(o())}e[Ke].running=Promise.allSettled(r),e[Ke].leave=void 0}gR(e,t)}function gR(e,t){if(e&&e[Ke]&&e[Ke].running){e[Ke].running.then(()=>{e[Ke]&&e[Ke].running&&(e[Ke].running=void 0),cu.delete(e),t(!0)});return}t(!1)}function mR(e,t){let n=e.cleanup,r=t[lo];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(t[lo]=null);let i=t[Un];if(i!==null){t[Un]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=t[Ns];if(o!==null){t[Ns]=null;for(let s of o)s.destroy()}}function vR(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof oi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];ee(4,a,c);try{c.call(a)}finally{ee(5,a,c)}}else{ee(4,i,o);try{o.call(i)}finally{ee(5,i,o)}}}}}function yR(e,t,n){return _R(e,t.parent,n)}function _R(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[Kt];if(pr(r)){let{encapsulation:i}=e.data[r.directiveStart+r.componentOffset];if(i===Gn.None||i===Gn.Emulated)return null}return Qt(r,n)}function ER(e,t,n){return CR(e,t,n)}function IR(e,t,n){return e.type&40?Qt(e,n):null}var CR=IR,RI;function lg(e,t,n,r){let i=yR(e,r,t),o=t[ge],s=r.parent||t[Rt],a=ER(s,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)MI(o,i,n[c],a,!1);else MI(o,i,n,a,!1);RI!==void 0&&RI(o,r,t,n,i)}function Vs(e,t){if(t!==null){let n=t.type;if(n&3)return Qt(t,e);if(n&4)return Lp(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Vs(e,r);{let i=e[t.index];return Zt(i)?Lp(-1,i):Ot(i)}}else{if(n&128)return Vs(e,t.next);if(n&32)return ag(t,e)()||Ot(e[t.index]);{let r=jC(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=lr(e[xt]);return Vs(i,r)}else return Vs(e,t.next)}}}return null}function jC(e,t){if(t!==null){let r=e[xt][Rt],i=t.projection;return r.projection[i]}return null}function Lp(e,t){let n=at+e+1;if(n<t.length){let r=t[n],i=r[P].firstChild;if(i!==null)return Vs(r,i)}return t[hr]}function ug(e,t,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&t===0&&(a&&_o(Ot(a),r),n.flags|=2),!Xp(n))if(c&8)ug(e,t,n.child,r,i,o,!1),vo(t,e,i,a,o,r);else if(c&32){let l=ag(n,r),u;for(;u=l();)vo(t,e,i,u,o,r);vo(t,e,i,a,o,r)}else c&16?wR(e,t,r,n,i,o):vo(t,e,i,a,o,r);n=s?n.projectionNext:n.next}}function lu(e,t,n,r,i,o){ug(n,r,e.firstChild,t,i,o,!1)}function wR(e,t,n,r,i,o){let s=n[xt],c=s[Rt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];vo(t,e,i,u,o,n)}else{let l=c,u=s[Pe];pC(r)&&(l.flags|=128),ug(e,t,l,u,i,o,!0)}}function DR(e,t,n,r,i){let o=n[hr],s=Ot(n);o!==s&&vo(t,e,r,o,i);for(let a=at;a<n.length;a++){let c=n[a];lu(c[P],c,e,t,r,o)}}function bR(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:In.DashCase;i==null?e.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=In.Important),e.setStyle(n,r,i,o))}}function UC(e,t,n,r,i){let o=gr(),s=r&2;try{mr(-1),s&&t.length>Fe&&FC(e,t,Fe,!1),ee(s?2:0,i,n),n(r,i)}finally{mr(o),ee(s?3:1,i,n)}}function uu(e,t,n){OR(e,t,n),(n.flags&64)===64&&kR(e,t,n)}function dg(e,t,n=Qt){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(t,e):e[s];e[i++]=a}}}function TR(e,t,n,r){let o=r.get(IC,EC)||n===Gn.ShadowDom,s=e.selectRootElement(t,o);return SR(s),s}function SR(e){AR(e)}var AR=()=>null;function MR(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function NR(e,t,n,r,i,o){let s=t[P];if(hg(e,s,t,n,r)){pr(e)&&xR(t,e.index);return}e.type&3&&(n=MR(n)),RR(e,t,n,r,i,o)}function RR(e,t,n,r,i,o){if(e.type&3){let s=Qt(e,t);r=o!=null?o(r,e.value||"",n):r,i.setProperty(s,n,r)}else e.type&12}function xR(e,t){let n=kt(t,e);n[k]&16||(n[k]|=64)}function OR(e,t,n){let r=n.directiveStart,i=n.directiveEnd;pr(n)&&uR(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||$l(n,t);let o=n.initialInputs;for(let s=r;s<i;s++){let a=e.data[s],c=Wl(t,e,s,n);if(_o(c,t),o!==null&&VR(t,s-r,c,a,n,o),yn(a)){let l=kt(n.index,t);l[$e]=Wl(t,e,s,n)}}}function kR(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=dI();try{mr(o);for(let a=r;a<i;a++){let c=e.data[a],l=t[a];Al(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&PR(c,l)}}finally{mr(-1),Al(s)}}function PR(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function fg(e,t){let n=e.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];ZN(t,o.selectors,!1)&&(r??=[],yn(o)?r.unshift(o):r.push(o))}return r}function FR(e,t,n,r,i,o){let s=Qt(e,t);LR(t[ge],s,o,e.value,n,r,i)}function LR(e,t,n,r,i,o,s){if(o==null)e.removeAttribute(t,i,n);else{let a=s==null?Qr(o):s(o,r||"",i);e.setAttribute(t,i,a,n)}}function VR(e,t,n,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];Fp(r,n,c,l)}}function BC(e,t,n,r,i){let o=Fe+n,s=t[P],a=i(s,t,e,r,n);t[o]=a,mo(e,!0);let c=e.type===2;return c?(OC(t[ge],a,e),(JE()===0||ho(e))&&_o(a,t),XE()):_o(a,t),Rl()&&(!c||!Xp(e))&&lg(s,t,a,e),e}function HC(e){let t=e;return op()?oI():(t=t.parent,mo(t,!1)),t}function jR(e,t){let n=e[uo];if(!n)return;let r;try{r=n.get(ct,null)}catch{r=null}r?.(t)}function hg(e,t,n,r,i){let o=e.inputs?.[r],s=e.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],d=t.data[l];Fp(d,n[l],u,i),a=!0}if(o)for(let c of o){let l=n[c],u=t.data[c];Fp(u,l,r,i),a=!0}return a}function UR(e,t){let n=kt(t,e),r=n[P];BR(r,n);let i=n[Kt];i!==null&&n[As]===null&&(n[As]=CC(i,n[uo])),ee(18),pg(r,n,n[$e]),ee(19,n[$e])}function BR(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function pg(e,t,n){Ml(t);try{let r=e.viewQuery;r!==null&&Pp(1,r,n);let i=e.template;i!==null&&UC(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[ti]?.finishViewCreation(e),e.staticContentQueries&&wC(e,t),e.staticViewQueries&&Pp(2,e.viewQuery,n);let o=e.components;o!==null&&HR(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[k]&=-5,Nl()}}function HR(e,t){for(let n=0;n<t.length;n++)UR(e,t[n])}function $R(e,t,n,r){let i=U(null);try{let o=t.tView,a=e[k]&4096?4096:16,c=og(e,o,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=e[t.index];c[Xr]=l;let u=e[ti];return u!==null&&(c[ti]=u.createEmbeddedView(o)),pg(o,c,n),c}finally{U(i)}}function xI(e,t){return!t||t.firstChild===null||pC(e)}function Bs(e,t,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=t[n.index];o!==null&&r.push(Ot(o)),Zt(o)&&$C(o,r);let s=n.type;if(s&8)Bs(e,t,n.child,r);else if(s&32){let a=ag(n,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=jC(t,n);if(Array.isArray(a))r.push(...a);else{let c=lr(t[xt]);Bs(c[P],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function $C(e,t){for(let n=at;n<e.length;n++){let r=e[n],i=r[P].firstChild;i!==null&&Bs(r[P],r,i,t)}e[hr]!==e[Kt]&&t.push(e[hr])}function WC(e){if(e[ni]!==null){for(let t of e[ni])t.impl.addSequence(t);e[ni].length=0}}var zC=[];function WR(e){return e[vt]??zR(e)}function zR(e){let t=zC.pop()??Object.create(qR);return t.lView=e,t}function GR(e){e.lView[vt]!==e&&(e.lView=null,zC.push(e))}var qR=S(m({},$i),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{go(e.lView)},consumerOnSignalRead(){this.lView[vt]=this}});function YR(e){let t=e[vt]??Object.create(KR);return t.lView=e,t}var KR=S(m({},$i),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=lr(e.lView);for(;t&&!GC(t[P]);)t=lr(t);t&&np(t)},consumerOnSignalRead(){this.lView[vt]=this}});function GC(e){return e.type!==2}function qC(e){if(e[Ns]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[Ns])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[k]&8192)}}var ZR=100;function YC(e,t=0){let r=e[mn].rendererFactory,i=!1;i||r.begin?.();try{QR(e,t)}finally{i||r.end?.()}}function QR(e,t){let n=sp();try{ap(!0),Vp(e,t);let r=0;for(;ks(e);){if(r===ZR)throw new E(103,!1);r++,Vp(e,1)}}finally{ap(n)}}function JR(e,t,n,r){if(ri(t))return;let i=t[k],o=!1,s=!1;Ml(t);let a=!0,c=null,l=null;o||(GC(e)?(l=WR(t),c=zi(l)):Lc()===null?(a=!1,l=YR(t),c=zi(l)):t[vt]&&(ms(t[vt]),t[vt]=null));try{tp(t),cI(e.bindingStartIndex),n!==null&&UC(e,t,n,2,r),XR(t);let u=(i&3)===3;if(!o)if(u){let h=e.preOrderCheckHooks;h!==null&&Fl(t,h,null)}else{let h=e.preOrderHooks;h!==null&&Ll(t,h,0,null),_p(t,0)}if(s||ex(t),qC(t),KC(t,0),e.contentQueries!==null&&wC(e,t),!o)if(u){let h=e.contentCheckHooks;h!==null&&Fl(t,h)}else{let h=e.contentHooks;h!==null&&Ll(t,h,1),_p(t,1)}nx(e,t);let d=e.components;d!==null&&QC(t,d,0);let f=e.viewQuery;if(f!==null&&Pp(2,f,r),!o)if(u){let h=e.viewCheckHooks;h!==null&&Fl(t,h)}else{let h=e.viewHooks;h!==null&&Ll(t,h,2),_p(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Cl]){for(let h of t[Cl])h();t[Cl]=null}o||(WC(t),t[k]&=-73)}catch(u){throw o||go(t),u}finally{l!==null&&(ps(l,c),a&&GR(l)),Nl()}}function XR(e){let t=e[Ke];if(t?.enter){for(let n of t.enter)n();t.enter=void 0}}function KC(e,t){for(let n=mC(e);n!==null;n=vC(n))for(let r=at;r<n.length;r++){let i=n[r];ZC(i,t)}}function ex(e){for(let t=mC(e);t!==null;t=vC(t)){if(!(t[k]&2))continue;let n=t[xs];for(let r=0;r<n.length;r++){let i=n[r];np(i)}}}function tx(e,t,n){ee(18);let r=kt(t,e);ZC(r,n),ee(19,r[$e])}function ZC(e,t){Dl(e)&&Vp(e,t)}function Vp(e,t){let r=e[P],i=e[k],o=e[vt],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&gs(o)),s||=!1,o&&(o.dirty=!1),e[k]&=-9217,s)JR(r,e,r.template,e[$e]);else if(i&8192){let a=U(null);try{qC(e),KC(e,1);let c=r.components;c!==null&&QC(e,c,1),WC(e)}finally{U(a)}}}function QC(e,t,n){for(let r=0;r<t.length;r++)tx(e,t[r],n)}function nx(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)mr(~i);else{let o=i,s=n[++r],a=n[++r];uI(s,o);let c=t[o];ee(24,c),a(2,c),ee(25,c)}}}finally{mr(-1)}}function gg(e,t){let n=sp()?64:1088;for(e[mn].changeDetectionScheduler?.notify(t);e;){e[k]|=n;let r=lr(e);if(po(e)&&!r)return e;e=r}return null}function JC(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function rx(e,t,n,r=!0){let i=t[P];if(ix(i,t,e,n),r){let s=Lp(n,e),a=t[ge],c=a.parentNode(e[hr]);c!==null&&hR(i,e[Rt],a,t,c,s)}let o=t[As];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function jp(e,t){if(e.length<=at)return;let n=at+t,r=e[n];if(r){let i=r[Xr];i!==null&&i!==e&&cg(i,r),t>0&&(e[n-1][Nt]=r[Nt]);let o=bs(e,at+t);fR(r[P],r);let s=o[ti];s!==null&&s.detachView(o[P]),r[Pe]=null,r[Nt]=null,r[k]&=-129}return r}function ix(e,t,n,r){let i=at+r,o=n.length;r>0&&(n[i-1][Nt]=t),r<o-at?(t[Nt]=n[i],Bh(n,at+r,t)):(n.push(t),t[Nt]=null),t[Pe]=n;let s=t[Xr];s!==null&&n!==s&&XC(s,t);let a=t[ti];a!==null&&a.insertView(e),bl(t),t[k]|=128}function XC(e,t){let n=e[xs],r=t[Pe];if(vn(r))e[k]|=2;else{let i=r[Pe][xt];t[xt]!==i&&(e[k]|=2)}n===null?e[xs]=[t]:n.push(t)}var vr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,n=t[P];return Bs(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n}get context(){return this._lView[$e]}set context(t){this._lView[$e]=t}get destroyed(){return ri(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Pe];if(Zt(t)){let n=t[Rs],r=n?n.indexOf(this):-1;r>-1&&(jp(t,r),bs(n,r))}this._attachedToViewContainer=!1}VC(this._lView[P],this._lView)}onDestroy(t){rp(this._lView,t)}markForCheck(){gg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[k]&=-129}reattach(){bl(this._lView),this._lView[k]|=128}detectChanges(){this._lView[k]|=1024,YC(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new E(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=po(this._lView),n=this._lView[Xr];n!==null&&!t&&cg(n,this._lView),LC(this._lView[P],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new E(902,!1);this._appRef=t;let n=po(this._lView),r=this._lView[Xr];r!==null&&!n&&XC(r,this._lView),bl(this._lView)}};var qs=(()=>{class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=ox;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=$R(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new vr(o)}}return e})();function ox(){return ew(We(),X())}function ew(e,t){return e.type&4?new qs(t,e,nu(e,t)):null}function mg(e,t,n,r,i){let o=e.data[t];if(o===null)o=sx(e,t,n,r,i),lI()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=iI();o.injectorIndex=s===null?-1:s.injectorIndex}return mo(o,!0),o}function sx(e,t,n,r,i){let o=ip(),s=op(),a=s?o:o&&o.parent,c=e.data[t]=cx(e,a,n,t,r,i);return ax(e,c,o,s),c}function ax(e,t,n,r){e.firstChild===null&&(e.firstChild=t),n!==null&&(r?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function cx(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return tI()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var $6=new RegExp(`^(\\d+)*(${kN}|${ON})*(.*)`);var lx=()=>null;function OI(e,t){return lx(e,t)}var tw=class{},du=class{},Up=class{resolveComponentFactory(t){throw new E(917,!1)}},Ys=class{static NULL=new Up},si=class{},en=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>ux()}return e})();function ux(){let e=X(),t=We(),n=kt(t.index,e);return(vn(n)?n:e)[ge]}var nw=(()=>{class e{static \u0275prov=I({token:e,providedIn:"root",factory:()=>null})}return e})();var Vl={},Bp=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){let i=this.injector.get(t,Vl,r);return i!==Vl||n===Vl?i:this.parentInjector.get(t,n,r)}};function kI(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=Rh(i,a);else if(o==2){let c=a,l=t[++s];r=Rh(r,c+": "+l+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function C(e,t=0){let n=X();if(n===null)return M(e,t);let r=We();return dC(r,n,ke(e),t)}function vg(){let e="invalid";throw new Error(e)}function rw(e,t,n,r,i){let o=r===null?null:{"":-1},s=i(e,n);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}hx(e,t,n,a,o,c,l)}o!==null&&r!==null&&dx(n,r,o)}function dx(e,t,n){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new E(-301,!1);r.push(t[i],o)}}function fx(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function hx(e,t,n,r,i,o,s){let a=r.length,c=!1;for(let f=0;f<a;f++){let h=r[f];!c&&yn(h)&&(c=!0,fx(e,n,f)),Rp($l(n,t),e,h.type)}_x(n,e.data.length,a);for(let f=0;f<a;f++){let h=r[f];h.providersResolver&&h.providersResolver(h)}let l=!1,u=!1,d=PC(e,t,a,null);a>0&&(n.directiveToIndex=new Map);for(let f=0;f<a;f++){let h=r[f];if(n.mergedAttrs=Us(n.mergedAttrs,h.hostAttrs),gx(e,n,t,d,h),yx(d,h,i),s!==null&&s.has(h)){let[_,T]=s.get(h);n.directiveToIndex.set(h.type,[d,_+n.directiveStart,T+n.directiveStart])}else(o===null||!o.has(h))&&n.directiveToIndex.set(h.type,d);h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let g=h.type.prototype;!l&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),l=!0),!u&&(g.ngOnChanges||g.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),u=!0),d++}px(e,n,o)}function px(e,t,n){for(let r=t.directiveStart;r<t.directiveEnd;r++){let i=e.data[r];if(n===null||!n.has(i))PI(0,t,i,r),PI(1,t,i,r),LI(t,r,!1);else{let o=n.get(i);FI(0,t,o,r),FI(1,t,o,r),LI(t,r,!0)}}}function PI(e,t,n,r){let i=e===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;e===0?s=t.inputs??={}:s=t.outputs??={},s[o]??=[],s[o].push(r),iw(t,o)}}function FI(e,t,n,r){let i=e===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;e===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),iw(t,s)}}function iw(e,t){t==="class"?e.flags|=8:t==="style"&&(e.flags|=16)}function LI(e,t,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=e;if(r===null||!n&&i===null||n&&o===null||rg(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===t){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===t){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}e.initialInputs??=[],e.initialInputs.push(s)}function gx(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=cr(i.type,!0)),s=new oi(o,yn(i),C,null);e.blueprint[r]=s,n[r]=s,mx(e,t,r,PC(e,n,i.hostVars,Xt),i)}function mx(e,t,n,r,i){let o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;vx(s)!=a&&s.push(a),s.push(n,r,o)}}function vx(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function yx(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;yn(t)&&(n[""]=e)}}function _x(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function yg(e,t,n,r,i,o,s,a){let c=t[P],l=c.consts,u=Os(l,s),d=mg(c,e,n,r,u);return o&&rw(c,t,d,Os(l,a),i),d.mergedAttrs=Us(d.mergedAttrs,d.attrs),d.attrs!==null&&kI(d,d.attrs,!1),d.mergedAttrs!==null&&kI(d,d.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,d),d}function _g(e,t){nC(e,t),Qh(t)&&e.queries.elementEnd(t)}function Eg(e){return sw(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function ow(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function sw(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function Ex(e,t,n){return e[t]=n}function Eo(e,t,n){if(n===Xt)return!1;let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function aw(e,t,n,r){let i=Eo(e,t,n);return Eo(e,t+1,r)||i}function Cp(e,t,n){return function r(i){let o=pr(e)?kt(e.index,t):t;gg(o,5);let s=t[$e],a=VI(t,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=VI(t,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function VI(e,t,n,r){let i=U(null);try{return ee(6,t,n),n(r)!==!1}catch(o){return jR(e,o),!1}finally{ee(7,t,n),U(i)}}function Ix(e,t,n,r,i,o,s,a){let c=ho(e),l=!1,u=null;if(!r&&c&&(u=wx(t,n,o,e.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let d=Qt(e,n),f=r?r(d):d;FN(n,f,o,a);let h=i.listen(f,o,a);if(!Cx(o)){let g=r?_=>r(Ot(_[e.index])):e.index;cw(g,t,n,o,a,h,!1)}}return l}function Cx(e){return e.startsWith("animation")||e.startsWith("transition")}function wx(e,t,n,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=t[lo],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function cw(e,t,n,r,i,o,s){let a=t.firstCreatePass?QE(t):null,c=ZE(n),l=c.length;c.push(i,o),a&&a.push(r,e,l,(l+1)*(s?-1:1))}function jI(e,t,n,r,i,o){let s=t[n],a=t[P],l=a.data[n].outputs[r],d=s[l].subscribe(o);cw(e.index,a,t,i,o,d,!0)}var Hp=Symbol("BINDING");var ql=class extends Ys{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Wn(t);return new ai(n,this.ngModule)}};function Dx(e){return Object.keys(e).map(t=>{let[n,r,i]=e[t],o={propName:n,templateName:t,isSignal:(r&au.SignalBased)!==0};return i&&(o.transform=i),o})}function bx(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}function Tx(e,t,n){let r=t instanceof Te?t:t?.injector;return r&&e.getStandaloneInjector!==null&&(r=e.getStandaloneInjector(r)||r),r?new Bp(n,r):n}function Sx(e){let t=e.get(si,null);if(t===null)throw new E(407,!1);let n=e.get(nw,null),r=e.get(ur,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function Ax(e,t){let n=lw(e);return RC(t,n,n==="svg"?zE:n==="math"?GE:null)}function lw(e){return(e.selectors[0][0]||"div").toLowerCase()}var ai=class extends du{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Dx(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=bx(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=eR(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,r,i,o,s){ee(22);let a=U(null);try{let c=this.componentDef,l=Mx(r,c,s,o),u=Tx(c,i||this.ngModule,t),d=Sx(u),f=d.rendererFactory.createRenderer(null,c),h=r?TR(f,r,c.encapsulation,u):Ax(c,f),g=s?.some(UI)||o?.some(N=>typeof N!="function"&&N.bindings.some(UI)),_=og(null,l,null,512|kC(c),null,null,d,f,u,null,CC(h,u,!0));_[Fe]=h,Ml(_);let T=null;try{let N=yg(Fe,_,2,"#host",()=>l.directiveRegistry,!0,0);OC(f,h,N),_o(h,_),uu(l,_,N),eg(l,N,_),_g(l,N),n!==void 0&&Rx(N,this.ngContentSelectors,n),T=kt(N.index,_),_[$e]=T[$e],pg(l,_,null)}catch(N){throw T!==null&&Op(T),Op(_),N}finally{ee(23),Nl()}return new Yl(this.componentType,_,!!g)}finally{U(a)}}};function Mx(e,t,n,r){let i=e?["ng-version","20.3.2"]:tR(t.selectors[0]),o=null,s=null,a=0;if(n)for(let u of n)a+=u[Hp].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let d=r[u];if(typeof d!="function")for(let f of d.bindings){a+=f[Hp].requiredVars;let h=u+1;f.create&&(f.targetIdx=h,(o??=[]).push(f)),f.update&&(f.targetIdx=h,(s??=[]).push(f))}}let c=[t];if(r)for(let u of r){let d=typeof u=="function"?u:u.type,f=zh(d);c.push(f)}return ig(0,null,Nx(o,s),1,a,c,null,null,null,[i],null)}function Nx(e,t){return!e&&!t?null:n=>{if(n&1&&e)for(let r of e)r.create();if(n&2&&t)for(let r of t)r.update()}}function UI(e){let t=e[Hp].kind;return t==="input"||t==="twoWay"}var Yl=class extends tw{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=wl(n[P],Fe),this.location=nu(this._tNode,n),this.instance=kt(this._tNode.index,n)[$e],this.hostView=this.changeDetectorRef=new vr(n,void 0),this.componentType=t}setInput(t,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let i=this._rootLView,o=hg(r,i[P],i,t,n);this.previousInputValues.set(t,n);let s=kt(r.index,i);gg(s,1)}get injector(){return new ii(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function Rx(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var ui=(()=>{class e{static __NG_ELEMENT_ID__=xx}return e})();function xx(){let e=We();return kx(e,X())}var Ox=ui,uw=class extends Ox{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return nu(this._hostTNode,this._hostLView)}get injector(){return new ii(this._hostTNode,this._hostLView)}get parentInjector(){let t=Kp(this._hostTNode,this._hostLView);if(oC(t)){let n=Bl(t,this._hostLView),r=Ul(t),i=n[P].data[r+8];return new ii(i,n)}else return new ii(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=BI(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-at}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=OI(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,xI(this._hostTNode,s)),a}createComponent(t,n,r,i,o,s,a){let c=t&&!cN(t),l;if(c)l=n;else{let T=n||{};l=T.index,r=T.injector,i=T.projectableNodes,o=T.environmentInjector||T.ngModuleRef,s=T.directives,a=T.bindings}let u=c?t:new ai(Wn(t)),d=r||this.parentInjector;if(!o&&u.ngModule==null){let N=(c?d:this.parentInjector).get(Te,null);N&&(o=N)}let f=Wn(u.componentType??{}),h=OI(this._lContainer,f?.id??null),g=h?.firstChild??null,_=u.create(d,i,g,o,s,a);return this.insertImpl(_.hostView,l,xI(this._hostTNode,h)),_}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(qE(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=i[Pe],l=new uw(c,c[Rt],c[Pe]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(n),s=this._lContainer;return rx(s,i,o,r),t.attachToViewContainerRef(),Bh(wp(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=BI(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=jp(this._lContainer,n);r&&(bs(wp(this._lContainer),n),VC(r[P],r))}detach(t){let n=this._adjustIndex(t,-1),r=jp(this._lContainer,n);return r&&bs(wp(this._lContainer),n)!=null?new vr(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function BI(e){return e[Rs]}function wp(e){return e[Rs]||(e[Rs]=[])}function kx(e,t){let n,r=t[e.index];return Zt(r)?n=r:(n=JC(r,t,null,e),t[e.index]=n,sg(t,n)),Fx(n,t,e,r),new uw(n,e,t)}function Px(e,t){let n=e[ge],r=n.createComment(""),i=Qt(t,e),o=n.parentNode(i);return Gl(n,o,r,n.nextSibling(i),!1),r}var Fx=jx,Lx=()=>!1;function Vx(e,t,n){return Lx(e,t,n)}function jx(e,t,n,r){if(e[hr])return;let i;n.type&8?i=Ot(r):i=Px(t,n),e[hr]=i}var HI=new Set;function di(e){HI.has(e)||(HI.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var ci=class{},fu=class{};var Kl=class extends ci{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new ql(this);constructor(t,n,r,i=!0){super(),this.ngModuleType=t,this._parent=n;let o=Wh(t);this._bootstrapComponents=MC(o.bootstrap),this._r3Injector=pp(t,n,[{provide:ci,useValue:this},{provide:Ys,useValue:this.componentFactoryResolver},...r],Bn(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Zl=class extends fu{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Kl(this.moduleType,t,[])}};var Hs=class extends ci{injector;componentFactoryResolver=new ql(this);instance=null;constructor(t){super();let n=new Kr([...t.providers,{provide:ci,useValue:this},{provide:Ys,useValue:this.componentFactoryResolver}],t.parent||Ss(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function wo(e,t,n=null){return new Hs({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var Ux=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Gh(!1,n.type),i=r.length>0?wo([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=I({token:e,providedIn:"environment",factory:()=>new e(M(Te))})}return e})();function Ze(e){return Ws(()=>{let t=dw(e),n=S(m({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Zp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(Ux).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Gn.Emulated,styles:e.styles||mt,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&di("NgStandalone"),fw(n);let r=e.dependencies;return n.directiveDefs=$I(r,Bx),n.pipeDefs=$I(r,LE),n.id=Wx(n),n})}function Bx(e){return Wn(e)||zh(e)}function Cn(e){return Ws(()=>({type:e.type,bootstrap:e.bootstrap||mt,declarations:e.declarations||mt,imports:e.imports||mt,exports:e.exports||mt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Hx(e,t){if(e==null)return dr;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=au.None,c=null),n[o]=[r,a,c],t[o]=s}return n}function $x(e){if(e==null)return dr;let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function ue(e){return Ws(()=>{let t=dw(e);return fw(t),t})}function Ig(e){return{type:e.type,name:e.name,factory:null,pure:e.pure!==!1,standalone:e.standalone??!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function dw(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||dr,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||mt,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Hx(e.inputs,t),outputs:$x(e.outputs),debugInfo:null}}function fw(e){e.features?.forEach(t=>t(e))}function $I(e,t){return e?()=>{let n=typeof e=="function"?e():e,r=[];for(let i of n){let o=t(i);o!==null&&r.push(o)}return r}:null}function Wx(e){let t=0,n=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let o of r.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function zx(e){return Object.getPrototypeOf(e.prototype).constructor}function tn(e){let t=zx(e.type),n=!0,r=[e];for(;t;){let i;if(yn(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new E(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let s=e;s.inputs=Dp(e.inputs),s.declaredInputs=Dp(e.declaredInputs),s.outputs=Dp(e.outputs);let a=i.hostBindings;a&&Zx(e,a);let c=i.viewQuery,l=i.contentQueries;if(c&&Yx(e,c),l&&Kx(e,l),Gx(e,i),NE(e.outputs,i.outputs),yn(i)&&i.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(e),a===tn&&(n=!1)}}t=Object.getPrototypeOf(t)}qx(r)}function Gx(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n])}}function qx(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Us(i.hostAttrs,n=Us(n,i.hostAttrs))}}function Dp(e){return e===dr?{}:e===mt?[]:e}function Yx(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function Kx(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,o)=>{t(r,i,o),n(r,i,o)}:e.contentQueries=t}function Zx(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}function Qx(e,t,n,r,i,o,s,a){if(n.firstCreatePass){e.mergedAttrs=Us(e.mergedAttrs,e.attrs);let u=e.tView=ig(2,e,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,e),u.queries=n.queries.embeddedTView(e))}a&&(e.flags|=a),mo(e,!1);let c=Xx(n,t,e,r);Rl()&&lg(n,t,c,e),_o(c,t);let l=JC(c,t,c,e);t[r+Fe]=l,sg(t,l),Vx(l,e,t)}function Jx(e,t,n,r,i,o,s,a,c,l,u){let d=n+Fe,f;return t.firstCreatePass?(f=mg(t,d,4,s||null,a||null),Tl()&&rw(t,e,f,Os(t.consts,l),fg),nC(t,f)):f=t.data[d],Qx(f,e,t,n,r,i,o,c),ho(f)&&uu(t,e,f),l!=null&&dg(e,f,u),f}function Ne(e,t,n,r,i,o,s,a){let c=X(),l=yt(),u=Os(l.consts,o);return Jx(c,l,e,t,n,r,i,u,void 0,s,a),Ne}var Xx=eO;function eO(e,t,n,r){return Ps(!0),t[ge].createComment("")}var hu=(function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e})(hu||{}),fi=new b(""),hw=!1,$p=class extends re{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,$E()&&(this.destroyRef=v(_n,{optional:!0})??void 0,this.pendingTasks=v(zn,{optional:!0})??void 0)}emit(t){let n=U(null);try{super.next(t)}finally{U(n)}}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof le&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},we=$p;function pw(e){let t,n;function r(){e=Ls;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function WI(e){return queueMicrotask(()=>e()),()=>{e=Ls}}var Cg="isAngularZone",Ql=Cg+"_ID",tO=0,ve=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new we(!1);onMicrotaskEmpty=new we(!1);onStable=new we(!1);onError=new we(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=hw}=t;if(typeof Zone>"u")throw new E(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,iO(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Cg)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new E(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new E(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,nO,Ls,Ls);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},nO={};function wg(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function rO(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){pw(()=>{e.callbackScheduled=!1,Wp(e),e.isCheckStableRunning=!0,wg(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),Wp(e)}function iO(e){let t=()=>{rO(e)},n=tO++;e._inner=e._inner.fork({name:"angular",properties:{[Cg]:!0,[Ql]:n,[Ql+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(oO(c))return r.invokeTask(o,s,a,c);try{return zI(e),r.invokeTask(o,s,a,c)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),GI(e)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return zI(e),r.invoke(o,s,a,c,l)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!sO(c)&&t(),GI(e)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,Wp(e),wg(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function Wp(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function zI(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function GI(e){e._nesting--,wg(e)}var Jl=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new we;onMicrotaskEmpty=new we;onStable=new we;onError=new we;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function oO(e){return gw(e,"__ignore_ng_zone__")}function sO(e){return gw(e,"__scheduler_tick__")}function gw(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Dg=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=I({token:e,providedIn:"root",factory:()=>new e})}return e})(),mw=[0,1,2,3],vw=(()=>{class e{ngZone=v(ve);scheduler=v(ur);errorHandler=v(qt,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){v(fi,{optional:!0})}execute(){let n=this.sequences.size>0;n&&ee(16),this.executing=!0;for(let r of mw)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&ee(17)}register(n){let{view:r}=n;r!==void 0?((r[ni]??=[]).push(n),go(r),r[k]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(hu.AFTER_NEXT_RENDER,n):n()}static \u0275prov=I({token:e,providedIn:"root",factory:()=>new e})}return e})(),Xl=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,n,r,i,o,s=null){this.impl=t,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[ni];t&&(this.view[ni]=t.filter(n=>n!==this))}};function Ks(e,t){let n=t?.injector??v(st);return di("NgAfterNextRender"),cO(e,n,t,!0)}function aO(e){return e instanceof Function?[void 0,void 0,e,void 0]:[e.earlyRead,e.write,e.mixedReadWrite,e.read]}function cO(e,t,n,r){let i=t.get(Dg);i.impl??=t.get(vw);let o=t.get(fi,null,{optional:!0}),s=n?.manualCleanup!==!0?t.get(_n):null,a=t.get(xl,null,{optional:!0}),c=new Xl(i.impl,aO(e),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var bg=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();var Tg=new b("");function _r(e){return!!e&&typeof e.then=="function"}function Sg(e){return!!e&&typeof e.subscribe=="function"}var Ag=new b("");function pu(e){return fr([{provide:Ag,multi:!0,useValue:e}])}var Mg=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=v(Ag,{optional:!0})??[];injector=v(st);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=He(this.injector,i);if(_r(o))n.push(o);else if(Sg(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Zs=new b("");function yw(){eh(()=>{let e="";throw new E(600,e)})}function _w(e){return e.isBoundToModule}var lO=10;var Yn=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=v(ct);afterRenderManager=v(Dg);zonelessEnabled=v(Fs);rootEffectScheduler=v(yp);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new re;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=v(zn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(B(n=>!n))}constructor(){v(fi,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=v(Te);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=st.NULL){return this._injector.get(ve).run(()=>{ee(10);let s=n instanceof du;if(!this._injector.get(Mg).done){let g="";throw new E(405,g)}let c;s?c=n:c=this._injector.get(Ys).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let l=_w(c)?void 0:this._injector.get(ci),u=r||c.selector,d=c.create(i,[],u,l),f=d.location.nativeElement,h=d.injector.get(Tg,null);return h?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),js(this.components,d),h?.unregisterApplication(f)}),this._loadComponent(d),ee(11,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ee(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(hu.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new E(101,!1);let n=U(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,U(n),this.afterTick.next(),ee(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(si,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<lO;)ee(14),this.synchronizeOnce(),ee(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ks(i))continue;let o=r&&!this.zonelessEnabled?0:1;YC(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>ks(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;js(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Zs,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>js(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new E(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function js(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Qs(e,t,n,r){let i=X(),o=Sl();if(Eo(i,o,t)){let s=yt(),a=hp();FR(a,i,e,t,n,r)}return Qs}var Z6=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function Y(e,t,n){let r=X(),i=Sl();if(Eo(r,i,t)){let o=yt(),s=hp();NR(s,r,e,t,r[ge],n)}return Y}function qI(e,t,n,r,i){hg(t,e,n,i?"class":"style",r)}function w(e,t,n,r){let i=X(),o=i[P],s=e+Fe,a=o.firstCreatePass?yg(s,i,2,t,fg,Tl(),n,r):o.data[s];if(BC(a,i,e,t,uO),ho(a)){let c=i[P];uu(c,i,a),eg(c,a,i)}return r!=null&&dg(i,a),w}function D(){let e=yt(),t=We(),n=HC(t);return e.firstCreatePass&&_g(e,n),nI(n)&&rI(),eI(),n.classesWithoutHost!=null&&pN(n)&&qI(e,n,X(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&gN(n)&&qI(e,n,X(),n.stylesWithoutHost,!1),D}function de(e,t,n,r){return w(e,t,n,r),D(),de}var uO=(e,t,n,r,i)=>(Ps(!0),RC(t[ge],r,vI()));function gu(e,t,n){let r=X(),i=r[P],o=e+Fe,s=i.firstCreatePass?yg(o,r,8,"ng-container",fg,Tl(),t,n):i.data[o];if(BC(s,r,e,"ng-container",dO),ho(s)){let a=r[P];uu(a,r,s),eg(a,s,r)}return n!=null&&dg(r,s),gu}function mu(){let e=yt(),t=We(),n=HC(t);return e.firstCreatePass&&_g(e,n),mu}var dO=(e,t,n,r,i)=>(Ps(!0),iR(t[ge],""));function Er(){return X()}var kl=void 0;function fO(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return t===1&&n===0?1:5}var hO=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],kl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],kl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",kl,"{1} 'at' {0}",kl],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",fO],bp={};function Ct(e){let t=pO(e),n=YI(t);if(n)return n;let r=t.split("-")[0];if(n=YI(r),n)return n;if(r==="en")return hO;throw new E(701,!1)}function YI(e){return e in bp||(bp[e]=Hn.ng&&Hn.ng.common&&Hn.ng.common.locales&&Hn.ng.common.locales[e]),bp[e]}var ye=(function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e})(ye||{});function pO(e){return e.toLowerCase().replace(/_/g,"-")}var Js="en-US";var gO=Js;function Ew(e){typeof e=="string"&&(gO=e.toLowerCase().replace(/_/g,"-"))}function fe(e,t,n){let r=X(),i=yt(),o=We();return mO(i,r,r[ge],o,e,t,n),fe}function mO(e,t,n,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=Cp(r,t,o),Ix(r,e,t,s,n,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let d=0;d<u.length;d+=2){let f=u[d],h=u[d+1];c??=Cp(r,t,o),jI(r,t,f,h,i,c)}if(l&&l.length)for(let d of l)c??=Cp(r,t,o),jI(r,t,d,i,i,c)}}function ae(e=1){return mI(e)}function vu(e){let t=sI();return Xh(t,Fe+e)}function Pl(e,t){return e<<17|t<<2}function li(e){return e>>17&32767}function vO(e){return(e&2)==2}function yO(e,t){return e&131071|t<<17}function zp(e){return e|2}function Io(e){return(e&131068)>>2}function Tp(e,t){return e&-131069|t<<2}function _O(e){return(e&1)===1}function Gp(e){return e|1}function EO(e,t,n,r,i,o){let s=o?t.classBindings:t.styleBindings,a=li(s),c=Io(s);e[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||co(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let f=li(e[a+1]);e[r+1]=Pl(f,a),f!==0&&(e[f+1]=Tp(e[f+1],r)),e[a+1]=yO(e[a+1],r)}else e[r+1]=Pl(a,0),a!==0&&(e[a+1]=Tp(e[a+1],r)),a=r;else e[r+1]=Pl(c,0),a===0?a=r:e[c+1]=Tp(e[c+1],r),c=r;l&&(e[r+1]=zp(e[r+1])),KI(e,u,r,!0),KI(e,u,r,!1),IO(t,u,e,r,o),s=Pl(a,c),o?t.classBindings=s:t.styleBindings=s}function IO(e,t,n,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&co(o,t)>=0&&(n[r+1]=Gp(n[r+1]))}function KI(e,t,n,r){let i=e[n+1],o=t===null,s=r?li(i):Io(i),a=!1;for(;s!==0&&(a===!1||o);){let c=e[s],l=e[s+1];CO(c,t)&&(a=!0,e[s+1]=r?Gp(l):zp(l)),s=r?li(l):Io(l)}a&&(e[n+1]=r?zp(i):Gp(i))}function CO(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?co(e,t)>=0:!1}function Ft(e,t,n){return Iw(e,t,n,!1),Ft}function Xs(e,t){return Iw(e,t,null,!0),Xs}function Iw(e,t,n,r){let i=X(),o=yt(),s=lp(2);if(o.firstUpdatePass&&DO(o,e,s,r),t!==Xt&&Eo(i,s,t)){let a=o.data[gr()];MO(o,a,i,i[ge],e,i[s+1]=NO(t,n),r,s)}}function wO(e,t){return t>=e.expandoStartIndex}function DO(e,t,n,r){let i=e.data;if(i[n+1]===null){let o=i[gr()],s=wO(e,n);RO(o,r)&&t===null&&!s&&(t=!1),t=bO(i,o,t,r),EO(i,o,t,n,s,r)}}function bO(e,t,n,r){let i=fI(e),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=Sp(null,e,t,n,r),n=$s(n,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==i)if(n=Sp(i,e,t,n,r),o===null){let c=TO(e,t,r);c!==void 0&&Array.isArray(c)&&(c=Sp(null,e,t,c[1],r),c=$s(c,t.attrs,r),SO(e,t,r,c))}else o=AO(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function TO(e,t,n){let r=n?t.classBindings:t.styleBindings;if(Io(r)!==0)return e[li(r)]}function SO(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[li(i)]=r}function AO(e,t,n){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=e[o].hostAttrs;r=$s(r,s,n)}return $s(r,t.attrs,n)}function Sp(e,t,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=t[a],r=$s(r,o.hostAttrs,i),o!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function $s(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),FE(e,s,n?!0:t[++o]))}return e===void 0?null:e}function MO(e,t,n,r,i,o,s,a){if(!(t.type&3))return;let c=e.data,l=c[a+1],u=_O(l)?ZI(c,t,n,i,Io(l),s):void 0;if(!eu(u)){eu(o)||vO(l)&&(o=ZI(c,null,n,i,a,s));let d=Jh(gr(),n);bR(r,s,d,i,o)}}function ZI(e,t,n,r,i,o){let s=t===null,a;for(;i>0;){let c=e[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,f=n[i+1];f===Xt&&(f=d?mt:void 0);let h=d?Il(f,r):u===r?f:void 0;if(l&&!eu(h)&&(h=Il(c,r)),eu(h)&&(a=h,s))return a;let g=e[i+1];i=s?li(g):Io(g)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(a=Il(c,r))}return a}function eu(e){return e!==void 0}function NO(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=Bn(Gs(e)))),e}function RO(e,t){return(e.flags&(t?8:16))!==0}function R(e,t=""){let n=X(),r=yt(),i=e+Fe,o=r.firstCreatePass?mg(r,i,1,t,null):r.data[i],s=xO(r,n,o,t,e);n[i]=s,Rl()&&lg(r,n,s,o),mo(o,!1)}var xO=(e,t,n,r,i)=>(Ps(!0),nR(t[ge],r));function OO(e,t,n,r=""){return Eo(e,Sl(),n)?t+Qr(n)+r:Xt}function kO(e,t,n,r,i,o=""){let s=aI(),a=aw(e,s,n,i);return lp(2),a?t+Qr(n)+r+Qr(i)+o:Xt}function Lt(e){return Vt("",e),Lt}function Vt(e,t,n){let r=X(),i=OO(r,e,t,n);return i!==Xt&&Cw(r,gr(),i),Vt}function yu(e,t,n,r,i){let o=X(),s=kO(o,e,t,n,r,i);return s!==Xt&&Cw(o,gr(),s),yu}function Cw(e,t,n){let r=Jh(t,e);rR(e[ge],r,n)}function PO(e,t,n){let r=yt();if(r.firstCreatePass){let i=yn(e);qp(n,r.data,r.blueprint,i,!0),qp(t,r.data,r.blueprint,i,!1)}}function qp(e,t,n,r,i){if(e=ke(e),Array.isArray(e))for(let o=0;o<e.length;o++)qp(e[o],t,n,r,i);else{let o=yt(),s=X(),a=We(),c=Yr(e)?e:ke(e.provide),l=Yh(e),u=a.providerIndexes&1048575,d=a.directiveStart,f=a.providerIndexes>>20;if(Yr(e)||!e.multi){let h=new oi(l,i,C,null),g=Mp(c,t,i?u:u+f,d);g===-1?(Rp($l(a,s),o,c),Ap(o,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(h),s.push(h)):(n[g]=h,s[g]=h)}else{let h=Mp(c,t,u+f,d),g=Mp(c,t,u,u+f),_=h>=0&&n[h],T=g>=0&&n[g];if(i&&!T||!i&&!_){Rp($l(a,s),o,c);let N=VO(i?LO:FO,n.length,i,r,l,e);!i&&T&&(n[g].providerFactory=N),Ap(o,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(N),s.push(N)}else{let N=ww(n[i?g:h],l,!i&&r);Ap(o,e,h>-1?h:g,N)}!i&&r&&T&&n[g].componentProviders++}}}function Ap(e,t,n,r){let i=Yr(t),o=HE(t);if(i||o){let c=(o?ke(t.useClass):t).prototype.ngOnDestroy;if(c){let l=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function ww(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Mp(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function FO(e,t,n,r,i){return Yp(this.multi,[])}function LO(e,t,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Wl(r,r[P],this.providerFactory.index,i);s=c.slice(0,a),Yp(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],Yp(o,s);return s}function Yp(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function VO(e,t,n,r,i,o){let s=new oi(e,n,C,null);return s.multi=[],s.index=t,s.componentProviders=0,ww(s,i,r&&!n),s}function hi(e,t=[]){return n=>{n.providersResolver=(r,i)=>PO(r,i?i(e):e,t)}}function Ng(e,t,n,r,i){return Dw(X(),cp(),e,t,n,r,i)}function jO(e,t){let n=e[t];return n===Xt?void 0:n}function Dw(e,t,n,r,i,o,s){let a=t+n;return aw(e,a,i,o)?Ex(e,a+2,s?r.call(s,i,o):r(i,o)):jO(e,a+2)}function Rg(e,t){let n=yt(),r,i=e+Fe;n.firstCreatePass?(r=UO(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=cr(r.type,!0)),s,a=Ye(C);try{let c=Hl(!1),l=o();return Hl(c),ep(n,X(),i,l),l}finally{Ye(a)}}function UO(e,t){if(t)for(let n=t.length-1;n>=0;n--){let r=t[n];if(e===r.name)return r}}function xg(e,t,n,r){let i=e+Fe,o=X(),s=Xh(o,i);return BO(o,i)?Dw(o,cp(),t,s.transform,n,r,s):s.transform(n,r)}function BO(e,t){return e[P].data[t].pure}function _u(e,t){return ew(e,t)}var tu=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},Og=(()=>{class e{compileModuleSync(n){return new Zl(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Wh(n),o=MC(i.declarations).reduce((s,a)=>{let c=Wn(a);return c&&s.push(new ai(c)),s},[]);return new tu(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var HO=(()=>{class e{zone=v(ve);changeDetectionScheduler=v(ur);applicationRef=v(Yn);applicationErrorHandler=v(ct);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),bw=new b("",{factory:()=>!1});function kg({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new ve(S(m({},Fg()),{scheduleInRootZone:n})),[{provide:ve,useFactory:e},{provide:$n,multi:!0,useFactory:()=>{let r=v(HO,{optional:!0});return()=>r.initialize()}},{provide:$n,multi:!0,useFactory:()=>{let r=v($O);return()=>{r.initialize()}}},t===!0?{provide:mp,useValue:!0}:[],{provide:vp,useValue:n??hw},{provide:ct,useFactory:()=>{let r=v(ve),i=v(Te),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(qt),o.handleError(s))})}}}]}function Pg(e){let t=e?.ignoreChangesOutsideZone,n=e?.scheduleInRootZone,r=kg({ngZoneFactory:()=>{let i=Fg(e);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&di("NgZone_CoalesceEvent"),new ve(i)},ignoreChangesOutsideZone:t,scheduleInRootZone:n});return fr([{provide:bw,useValue:!0},{provide:Fs,useValue:!1},r])}function Fg(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var $O=(()=>{class e{subscription=new le;initialized=!1;zone=v(ve);pendingTasks=v(zn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ve.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ve.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Tw=(()=>{class e{applicationErrorHandler=v(ct);appRef=v(Yn);taskService=v(zn);ngZone=v(ve);zonelessEnabled=v(Fs);tracing=v(fi,{optional:!0});disableScheduling=v(mp,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new le;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ql):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(v(vp,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Jl||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?WI:pw;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ql+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,WI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function WO(){return typeof $localize<"u"&&$localize.locale||Js}var ea=new b("",{providedIn:"root",factory:()=>v(ea,{optional:!0,skipSelf:!0})||WO()});function Re(e){return SE(e)}function Do(e,t){return Uc(e,t?.equal)}var Sw=class{[qe];constructor(t){this[qe]=t}destroy(){this[qe].destroy()}};var Ow=Symbol("InputSignalNode#UNSET"),ok=S(m({},Bc),{transformFn:void 0,applyValueToInputSignal(e,t){qi(e,t)}});function kw(e,t){let n=Object.create(ok);n.value=e,n.transformFn=t?.transform;function r(){if(Wi(n),n.value===Ow){let i=null;throw new E(-950,i)}return n.value}return r[qe]=n,r}var Iu=class{attributeName;constructor(t){this.attributeName=t}__NG_ELEMENT_ID__=()=>zs(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},sk=new b("");sk.__NG_ELEMENT_ID__=e=>{let t=We();if(t===null)throw new E(204,!1);if(t.type&2)return t.value;if(e&8)return null;throw new E(204,!1)};function Aw(e,t){return kw(e,t)}function ak(e){return kw(Ow,e)}var Pw=(Aw.required=ak,Aw);var Lg=new b(""),ck=new b("");function ta(e){return!e.moduleRef}function lk(e){let t=ta(e)?e.r3Injector:e.moduleRef.injector,n=t.get(ve);return n.run(()=>{ta(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(ct),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),ta(e)){let o=()=>t.destroy(),s=e.platformInjector.get(Lg);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>e.moduleRef.destroy(),s=e.platformInjector.get(Lg);s.add(o),e.moduleRef.onDestroy(()=>{js(e.allPlatformModules,e.moduleRef),i.unsubscribe(),s.delete(o)})}return dk(r,n,()=>{let o=t.get(zn),s=o.add(),a=t.get(Mg);return a.runInitializers(),a.donePromise.then(()=>{let c=t.get(ea,Js);if(Ew(c||Js),!t.get(ck,!0))return ta(e)?t.get(Yn):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(ta(e)){let u=t.get(Yn);return e.rootComponent!==void 0&&u.bootstrap(e.rootComponent),u}else return uk?.(e.moduleRef,e.allPlatformModules),e.moduleRef}).finally(()=>void o.remove(s))})})}var uk;function dk(e,t,n){try{let r=n();return _r(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e(r)),r}}var Eu=null;function fk(e=[],t){return st.create({name:t,providers:[{provide:Ts,useValue:"platform"},{provide:Lg,useValue:new Set([()=>Eu=null])},...e]})}function hk(e=[]){if(Eu)return Eu;let t=fk(e);return Eu=t,yw(),pk(t),t}function pk(e){let t=e.get(iu,null);He(e,()=>{t?.forEach(n=>n())})}var pi=(()=>{class e{static __NG_ELEMENT_ID__=gk}return e})();function gk(e){return mk(We(),X(),(e&16)===16)}function mk(e,t,n){if(pr(e)&&!n){let r=kt(e.index,t);return new vr(r,r)}else if(e.type&175){let r=t[xt];return new vr(r,t)}return null}var Vg=class{constructor(){}supports(t){return Eg(t)}create(t){return new jg(t)}},vk=(e,t)=>t,jg=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||vk}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<Mw(r,i,o)?n:r,a=Mw(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let f=0;f<l;f++){let h=f<o.length?o[f]:o[f]=0,g=h+f;u<=g&&g<l&&(o[f]=h+1)}let d=s.previousIndex;o[d]=u-l}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!Eg(t))throw new E(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,ow(t,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new Ug(n,r),o,i)),t}_verifyReinsertion(t,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let i=n===null?this._itHead:n._next;return t._next=i,t._prev=n,i===null?this._itTail=t:i._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new Cu),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Cu),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Ug=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,n){this.item=t,this.trackById=n}},Bg=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Cu=class{map=new Map;put(t){let n=t.trackById,r=this.map.get(n);r||(r=new Bg,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,i=this.map.get(r);return i?i.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Mw(e,t,n){let r=e.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function Nw(){return new Hg([new Vg])}var Hg=(()=>{class e{factories;static \u0275prov=I({token:e,providedIn:"root",factory:Nw});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:()=>{let r=v(e,{optional:!0,skipSelf:!0});return e.create(n,r||Nw())}}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new E(901,!1)}}return e})();function Fw(e){let{rootComponent:t,appProviders:n,platformProviders:r,platformRef:i}=e;ee(8);try{let o=i?.injector??hk(r),s=[kg({}),{provide:ur,useExisting:Tw},_I,...n||[]],a=new Hs({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return lk({r3Injector:a.injector,platformInjector:o,rootComponent:t})}catch(o){return Promise.reject(o)}finally{ee(9)}}function bo(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function Lw(e){let t=Wn(e);if(!t)return null;let n=new ai(t);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var Uw=null;function jt(){return Uw}function $g(e){Uw??=e}var na=class{},ra=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>v(Bw),providedIn:"platform"})}return e})(),Wg=new b(""),Bw=(()=>{class e extends ra{_location;_history;_doc=v(me);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return jt().getBaseHref(this._doc)}onPopState(n){let r=jt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=jt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function wu(e,t){return e?t?e.endsWith("/")?t.startsWith("/")?e+t.slice(1):e+t:t.startsWith("/")?e+t:`${e}/${t}`:e:t}function Vw(e){let t=e.search(/#|\?|$/);return e[t-1]==="/"?e.slice(0,t-1)+e.slice(t):e}function nn(e){return e&&e[0]!=="?"?`?${e}`:e}var rn=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>v(bu),providedIn:"root"})}return e})(),Du=new b(""),bu=(()=>{class e extends rn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??v(me).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return wu(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+nn(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+nn(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+nn(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(M(ra),M(Du,8))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ir=(()=>{class e{_subject=new re;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=Ek(Vw(jw(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+nn(r))}normalize(n){return e.stripTrailingSlash(_k(this._basePath,jw(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+nn(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+nn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=nn;static joinWithSlash=wu;static stripTrailingSlash=Vw;static \u0275fac=function(r){return new(r||e)(M(rn))};static \u0275prov=I({token:e,factory:()=>yk(),providedIn:"root"})}return e})();function yk(){return new Ir(M(rn))}function _k(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function jw(e){return e.replace(/\/index.html$/,"")}function Ek(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var Kg=(()=>{class e extends rn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=wu(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+nn(o))||this._platformLocation.pathname;this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+nn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(M(ra),M(Du,8))};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})();var ze=(function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e})(ze||{}),ne=(function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e})(ne||{}),lt=(function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e})(lt||{}),Zn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Gw(e){return Ct(e)[ye.LocaleId]}function qw(e,t,n){let r=Ct(e),i=[r[ye.DayPeriodsFormat],r[ye.DayPeriodsStandalone]],o=Ut(i,t);return Ut(o,n)}function Yw(e,t,n){let r=Ct(e),i=[r[ye.DaysFormat],r[ye.DaysStandalone]],o=Ut(i,t);return Ut(o,n)}function Kw(e,t,n){let r=Ct(e),i=[r[ye.MonthsFormat],r[ye.MonthsStandalone]],o=Ut(i,t);return Ut(o,n)}function Zw(e,t){let r=Ct(e)[ye.Eras];return Ut(r,t)}function ia(e,t){let n=Ct(e);return Ut(n[ye.DateFormat],t)}function oa(e,t){let n=Ct(e);return Ut(n[ye.TimeFormat],t)}function sa(e,t){let r=Ct(e)[ye.DateTimeFormat];return Ut(r,t)}function aa(e,t){let n=Ct(e),r=n[ye.NumberSymbols][t];if(typeof r>"u"){if(t===Zn.CurrencyDecimal)return n[ye.NumberSymbols][Zn.Decimal];if(t===Zn.CurrencyGroup)return n[ye.NumberSymbols][Zn.Group]}return r}function Qw(e){if(!e[ye.ExtraData])throw new E(2303,!1)}function Jw(e){let t=Ct(e);return Qw(t),(t[ye.ExtraData][2]||[]).map(r=>typeof r=="string"?zg(r):[zg(r[0]),zg(r[1])])}function Xw(e,t,n){let r=Ct(e);Qw(r);let i=[r[ye.ExtraData][0],r[ye.ExtraData][1]],o=Ut(i,t)||[];return Ut(o,n)||[]}function Ut(e,t){for(let n=t;n>-1;n--)if(typeof e[n]<"u")return e[n];throw new E(2304,!1)}function zg(e){let[t,n]=e.split(":");return{hours:+t,minutes:+n}}var Ik=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Tu={},Ck=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function eD(e,t,n,r){let i=Rk(e);t=Kn(n,t)||t;let s=[],a;for(;t;)if(a=Ck.exec(t),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;t=u}else{s.push(t);break}let c=i.getTimezoneOffset();r&&(c=nD(r,c),i=Nk(i,r));let l="";return s.forEach(u=>{let d=Ak(u);l+=d?d(i,n,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Ru(e,t,n){let r=new Date(0);return r.setFullYear(e,t,n),r.setHours(0,0,0),r}function Kn(e,t){let n=Gw(e);if(Tu[n]??={},Tu[n][t])return Tu[n][t];let r="";switch(t){case"shortDate":r=ia(e,lt.Short);break;case"mediumDate":r=ia(e,lt.Medium);break;case"longDate":r=ia(e,lt.Long);break;case"fullDate":r=ia(e,lt.Full);break;case"shortTime":r=oa(e,lt.Short);break;case"mediumTime":r=oa(e,lt.Medium);break;case"longTime":r=oa(e,lt.Long);break;case"fullTime":r=oa(e,lt.Full);break;case"short":let i=Kn(e,"shortTime"),o=Kn(e,"shortDate");r=Su(sa(e,lt.Short),[i,o]);break;case"medium":let s=Kn(e,"mediumTime"),a=Kn(e,"mediumDate");r=Su(sa(e,lt.Medium),[s,a]);break;case"long":let c=Kn(e,"longTime"),l=Kn(e,"longDate");r=Su(sa(e,lt.Long),[c,l]);break;case"full":let u=Kn(e,"fullTime"),d=Kn(e,"fullDate");r=Su(sa(e,lt.Full),[u,d]);break}return r&&(Tu[n][t]=r),r}function Su(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(n,r){return t!=null&&r in t?t[r]:n})),e}function on(e,t,n="-",r,i){let o="";(e<0||i&&e<=0)&&(i?e=-e+1:(e=-e,o=n));let s=String(e);for(;s.length<t;)s="0"+s;return r&&(s=s.slice(s.length-t)),o+s}function wk(e,t){return on(e,3).substring(0,t)}function De(e,t,n=0,r=!1,i=!1){return function(o,s){let a=Dk(e,o);if((n>0||a>-n)&&(a+=n),e===3)a===0&&n===-12&&(a=12);else if(e===6)return wk(a,t);let c=aa(s,Zn.MinusSign);return on(a,t,c,r,i)}}function Dk(e,t){switch(e){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new E(2301,!1)}}function ie(e,t,n=ze.Format,r=!1){return function(i,o){return bk(i,o,e,t,n,r)}}function bk(e,t,n,r,i,o){switch(n){case 2:return Kw(t,i,r)[e.getMonth()];case 1:return Yw(t,i,r)[e.getDay()];case 0:let s=e.getHours(),a=e.getMinutes();if(o){let l=Jw(t),u=Xw(t,i,r),d=l.findIndex(f=>{if(Array.isArray(f)){let[h,g]=f,_=s>=h.hours&&a>=h.minutes,T=s<g.hours||s===g.hours&&a<g.minutes;if(h.hours<g.hours){if(_&&T)return!0}else if(_||T)return!0}else if(f.hours===s&&f.minutes===a)return!0;return!1});if(d!==-1)return u[d]}return qw(t,i,r)[s<12?0:1];case 3:return Zw(t,r)[e.getFullYear()<=0?0:1];default:let c=n;throw new E(2302,!1)}}function Au(e){return function(t,n,r){let i=-1*r,o=aa(n,Zn.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(e){case 0:return(i>=0?"+":"")+on(s,2,o)+on(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+on(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+on(s,2,o)+":"+on(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+on(s,2,o)+":"+on(Math.abs(i%60),2,o);default:throw new E(2310,!1)}}}var Tk=0,Nu=4;function Sk(e){let t=Ru(e,Tk,1).getDay();return Ru(e,0,1+(t<=Nu?Nu:Nu+7)-t)}function tD(e){let t=e.getDay(),n=t===0?-3:Nu-t;return Ru(e.getFullYear(),e.getMonth(),e.getDate()+n)}function Gg(e,t=!1){return function(n,r){let i;if(t){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=tD(n),s=Sk(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return on(i,e,aa(r,Zn.MinusSign))}}function Mu(e,t=!1){return function(n,r){let o=tD(n).getFullYear();return on(o,e,aa(r,Zn.MinusSign),t)}}var qg={};function Ak(e){if(qg[e])return qg[e];let t;switch(e){case"G":case"GG":case"GGG":t=ie(3,ne.Abbreviated);break;case"GGGG":t=ie(3,ne.Wide);break;case"GGGGG":t=ie(3,ne.Narrow);break;case"y":t=De(0,1,0,!1,!0);break;case"yy":t=De(0,2,0,!0,!0);break;case"yyy":t=De(0,3,0,!1,!0);break;case"yyyy":t=De(0,4,0,!1,!0);break;case"Y":t=Mu(1);break;case"YY":t=Mu(2,!0);break;case"YYY":t=Mu(3);break;case"YYYY":t=Mu(4);break;case"M":case"L":t=De(1,1,1);break;case"MM":case"LL":t=De(1,2,1);break;case"MMM":t=ie(2,ne.Abbreviated);break;case"MMMM":t=ie(2,ne.Wide);break;case"MMMMM":t=ie(2,ne.Narrow);break;case"LLL":t=ie(2,ne.Abbreviated,ze.Standalone);break;case"LLLL":t=ie(2,ne.Wide,ze.Standalone);break;case"LLLLL":t=ie(2,ne.Narrow,ze.Standalone);break;case"w":t=Gg(1);break;case"ww":t=Gg(2);break;case"W":t=Gg(1,!0);break;case"d":t=De(2,1);break;case"dd":t=De(2,2);break;case"c":case"cc":t=De(7,1);break;case"ccc":t=ie(1,ne.Abbreviated,ze.Standalone);break;case"cccc":t=ie(1,ne.Wide,ze.Standalone);break;case"ccccc":t=ie(1,ne.Narrow,ze.Standalone);break;case"cccccc":t=ie(1,ne.Short,ze.Standalone);break;case"E":case"EE":case"EEE":t=ie(1,ne.Abbreviated);break;case"EEEE":t=ie(1,ne.Wide);break;case"EEEEE":t=ie(1,ne.Narrow);break;case"EEEEEE":t=ie(1,ne.Short);break;case"a":case"aa":case"aaa":t=ie(0,ne.Abbreviated);break;case"aaaa":t=ie(0,ne.Wide);break;case"aaaaa":t=ie(0,ne.Narrow);break;case"b":case"bb":case"bbb":t=ie(0,ne.Abbreviated,ze.Standalone,!0);break;case"bbbb":t=ie(0,ne.Wide,ze.Standalone,!0);break;case"bbbbb":t=ie(0,ne.Narrow,ze.Standalone,!0);break;case"B":case"BB":case"BBB":t=ie(0,ne.Abbreviated,ze.Format,!0);break;case"BBBB":t=ie(0,ne.Wide,ze.Format,!0);break;case"BBBBB":t=ie(0,ne.Narrow,ze.Format,!0);break;case"h":t=De(3,1,-12);break;case"hh":t=De(3,2,-12);break;case"H":t=De(3,1);break;case"HH":t=De(3,2);break;case"m":t=De(4,1);break;case"mm":t=De(4,2);break;case"s":t=De(5,1);break;case"ss":t=De(5,2);break;case"S":t=De(6,1);break;case"SS":t=De(6,2);break;case"SSS":t=De(6,3);break;case"Z":case"ZZ":case"ZZZ":t=Au(0);break;case"ZZZZZ":t=Au(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Au(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=Au(2);break;default:return null}return qg[e]=t,t}function nD(e,t){e=e.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function Mk(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function Nk(e,t,n){let i=e.getTimezoneOffset(),o=nD(t,i);return Mk(e,-1*(o-i))}function Rk(e){if(Hw(e))return e;if(typeof e=="number"&&!isNaN(e))return new Date(e);if(typeof e=="string"){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){let[i,o=1,s=1]=e.split("-").map(a=>+a);return Ru(i,o-1,s)}let n=parseFloat(e);if(!isNaN(e-n))return new Date(n);let r;if(r=e.match(Ik))return xk(r)}let t=new Date(e);if(!Hw(t))throw new E(2311,!1);return t}function xk(e){let t=new Date(0),n=0,r=0,i=e[8]?t.setUTCFullYear:t.setFullYear,o=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),r=Number(e[9]+e[11])),i.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));let s=Number(e[4]||0)-n,a=Number(e[5]||0)-r,c=Number(e[6]||0),l=Math.floor(parseFloat("0."+(e[7]||0))*1e3);return o.call(t,s,a,c,l),t}function Hw(e){return e instanceof Date&&!isNaN(e.valueOf())}var Yg=/\s+/,$w=[],ca=(()=>{class e{_ngEl;_renderer;initialClasses=$w;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(Yg):$w}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(Yg):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(Yg).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||e)(C(Pt),C(en))};static \u0275dir=ue({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return e})();var xu=class{$implicit;ngForOf;index;count;constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},To=(()=>{class e{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new xu(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Ww(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Ww(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(C(ui),C(qs),C(Hg))};static \u0275dir=ue({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return e})();function Ww(e,t){e.context.$implicit=t.item}var sn=(()=>{class e{_viewContainer;_context=new Ou;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){zw(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){zw(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(C(ui),C(qs))};static \u0275dir=ue({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return e})(),Ou=class{$implicit=null;ngIf=null};function zw(e,t){if(e&&!e.createEmbeddedView)throw new E(2020,!1)}function Ok(e,t){return new E(2100,!1)}var kk="mediumDate",rD=new b(""),iD=new b(""),Zg=(()=>{class e{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??kk,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return eD(n,s,o||this.locale,a)}catch(s){throw Ok(e,s.message)}}static \u0275fac=function(r){return new(r||e)(C(ea,16),C(rD,24),C(iD,24))};static \u0275pipe=Ig({name:"date",type:e,pure:!0})}return e})();var ut=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=Cn({type:e});static \u0275inj=Yt({})}return e})();function Qg(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var la=class{};var oD="browser";var sD=(()=>{class e{static \u0275prov=I({token:e,providedIn:"root",factory:()=>new Jg(v(me),window)})}return e})(),Jg=class{document;window;offset=()=>[0,0];constructor(t,n){this.document=t,this.window=n}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t,n){this.window.scrollTo(S(m({},n),{left:t[0],top:t[1]}))}scrollToAnchor(t,n){let r=Pk(this.document,t);r&&(this.scrollToElement(r,n),r.focus())}setHistoryScrollRestoration(t){try{this.window.history.scrollRestoration=t}catch{console.warn(ao(2400,!1))}}scrollToElement(t,n){let r=t.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(S(m({},n),{left:i-s[0],top:o-s[1]}))}};function Pk(e,t){let n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if(typeof e.createTreeWalker=="function"&&e.body&&typeof e.body.attachShadow=="function"){let r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}i=r.nextNode()}}return null}var Pu=new b(""),rm=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new E(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(M(Pu),M(ve))};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})(),ua=class{_doc;constructor(t){this._doc=t}manager},Xg="ng-app-id";function aD(e){for(let t of e)t.remove()}function cD(e,t){let n=t.createElement("style");return n.textContent=e,n}function Fk(e,t,n,r){let i=e.head?.querySelectorAll(`style[${Xg}="${t}"],link[${Xg}="${t}"]`);if(i)for(let o of i)o.removeAttribute(Xg),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function tm(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var im=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,Fk(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,cD);r?.forEach(i=>this.addUsage(i,this.external,tm))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(aD(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])aD(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,cD(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,tm(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(M(me),M(ru),M(ou,8),M(Co))};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})(),em={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},om=/%COMP%/g;var uD="%COMP%",Lk=`_nghost-${uD}`,Vk=`_ngcontent-${uD}`,jk=!0,Uk=new b("",{providedIn:"root",factory:()=>jk});function Bk(e){return Vk.replace(om,e)}function Hk(e){return Lk.replace(om,e)}function dD(e,t){return t.map(n=>n.replace(om,e))}var sm=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,c,l=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new da(n,s,c,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof ku?i.applyToHost(n):i instanceof fa&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,f=this.tracingService;switch(r.encapsulation){case Gn.Emulated:o=new ku(c,l,r,this.appId,u,s,a,d,f);break;case Gn.ShadowDom:return new nm(c,l,n,r,s,a,this.nonce,d,f);default:o=new fa(c,l,r,u,s,a,d,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||e)(M(rm),M(im),M(ru),M(Uk),M(me),M(Co),M(ve),M(ou),M(fi,8))};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})(),da=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,i,o){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(em[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(lD(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(lD(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new E(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=em[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=em[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(In.DashCase|In.Important)?t.style.setProperty(n,r,i&In.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&In.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r,i){if(typeof t=="string"&&(t=jt().getGlobalEventTarget(this.doc,t),!t))throw new E(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,n,o)),this.eventManager.addEventListener(t,n,o,i)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;t(n)===!1&&n.preventDefault()}}};function lD(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var nm=class extends da{sharedStylesHost;hostEl;shadowRoot;constructor(t,n,r,i,o,s,a,c,l){super(t,o,s,c,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=dD(i.id,u);for(let f of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=f,this.shadowRoot.appendChild(h)}let d=i.getExternalStyles?.();if(d)for(let f of d){let h=tm(f,o);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},fa=class extends da{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,i,o,s,a,c,l){super(t,o,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?dD(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&cu.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ku=class extends fa{contentAttr;hostAttr;constructor(t,n,r,i,o,s,a,c,l){let u=i+"-"+r.id;super(t,n,r,o,s,a,c,l,u),this.contentAttr=Bk(u),this.hostAttr=Hk(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}};var Fu=class e extends na{supportsDOMEvents=!0;static makeCurrent(){$g(new e)}onAndCancel(t,n,r,i){return t.addEventListener(n,r,i),()=>{t.removeEventListener(n,r,i)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=$k();return n==null?null:Wk(n)}resetBaseElement(){ha=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Qg(document.cookie,t)}},ha=null;function $k(){return ha=ha||document.head.querySelector("base"),ha?ha.getAttribute("href"):null}function Wk(e){return new URL(e,document.baseURI).pathname}var zk=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})(),hD=(()=>{class e extends ua{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||e)(M(me))};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})(),fD=["alt","control","meta","shift"],Gk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qk={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},pD=(()=>{class e extends ua{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>jt().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),fD.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=Gk[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),fD.forEach(s=>{if(s!==i){let a=qk[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(M(me))};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})();function am(e,t,n){let r=m({rootComponent:e,platformRef:n?.platformRef},Yk(t));return Fw(r)}function Yk(e){return{appProviders:[...Xk,...e?.providers??[]],platformProviders:Jk}}function Kk(){Fu.makeCurrent()}function Zk(){return new qt}function Qk(){return Qp(document),document}var Jk=[{provide:Co,useValue:oD},{provide:iu,useValue:Kk,multi:!0},{provide:me,useFactory:Qk}];var Xk=[{provide:Ts,useValue:"root"},{provide:qt,useFactory:Zk},{provide:Pu,useClass:hD,multi:!0,deps:[me]},{provide:Pu,useClass:pD,multi:!0,deps:[me]},sm,im,rm,{provide:si,useExisting:sm},{provide:la,useClass:zk},[]];var gD=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||e)(M(me))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var V="primary",Ta=Symbol("RouteTitle"),fm=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function yi(e){return new fm(e)}function wD(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=e[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function tP(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!wn(e[n],t[n]))return!1;return!0}function wn(e,t){let n=e?hm(e):void 0,r=t?hm(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!DD(e[i],t[i]))return!1;return!0}function hm(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function DD(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function bD(e){return e.length>0?e[e.length-1]:null}function Qn(e){return ph(e)?e:_r(e)?se(Promise.resolve(e)):A(e)}var nP={exact:SD,subset:AD},TD={exact:rP,subset:iP,ignored:()=>!0};function mD(e,t,n){return nP[n.paths](e.root,t.root,n.matrixParams)&&TD[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function rP(e,t){return wn(e,t)}function SD(e,t,n){if(!mi(e.segments,t.segments)||!ju(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!SD(e.children[r],t.children[r],n))return!1;return!0}function iP(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>DD(e[n],t[n]))}function AD(e,t,n){return MD(e,t,t.segments,n)}function MD(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!mi(i,n)||t.hasChildren()||!ju(i,n,r))}else if(e.segments.length===n.length){if(!mi(e.segments,n)||!ju(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!AD(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!mi(e.segments,i)||!ju(e.segments,i,r)||!e.children[V]?!1:MD(e.children[V],t,o,r)}}function ju(e,t,n){return t.every((r,i)=>TD[n](e[i].parameters,r.parameters))}var bn=class{root;queryParams;fragment;_queryParamMap;constructor(t=new Z([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=yi(this.queryParams),this._queryParamMap}toString(){return aP.serialize(this)}},Z=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Uu(this)}},Cr=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=yi(this.parameters),this._parameterMap}toString(){return RD(this)}};function oP(e,t){return mi(e,t)&&e.every((n,r)=>wn(n.parameters,t[r].parameters))}function mi(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function sP(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===V&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==V&&(n=n.concat(t(i,r)))}),n}var _i=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>new wr,providedIn:"root"})}return e})(),wr=class{parse(t){let n=new gm(t);return new bn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${pa(t.root,!0)}`,r=uP(t.queryParams),i=typeof t.fragment=="string"?`#${cP(t.fragment)}`:"";return`${n}${r}${i}`}},aP=new wr;function Uu(e){return e.segments.map(t=>RD(t)).join("/")}function pa(e,t){if(!e.hasChildren())return Uu(e);if(t){let n=e.children[V]?pa(e.children[V],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==V&&r.push(`${i}:${pa(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=sP(e,(r,i)=>i===V?[pa(e.children[V],!1)]:[`${i}:${pa(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[V]!=null?`${Uu(e)}/${n[0]}`:`${Uu(e)}/(${n.join("//")})`}}function ND(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Lu(e){return ND(e).replace(/%3B/gi,";")}function cP(e){return encodeURI(e)}function pm(e){return ND(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bu(e){return decodeURIComponent(e)}function vD(e){return Bu(e.replace(/\+/g,"%20"))}function RD(e){return`${pm(e.path)}${lP(e.parameters)}`}function lP(e){return Object.entries(e).map(([t,n])=>`;${pm(t)}=${pm(n)}`).join("")}function uP(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Lu(n)}=${Lu(i)}`).join("&"):`${Lu(n)}=${Lu(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var dP=/^[^\/()?;#]+/;function cm(e){let t=e.match(dP);return t?t[0]:""}var fP=/^[^\/()?;=#]+/;function hP(e){let t=e.match(fP);return t?t[0]:""}var pP=/^[^=?&#]+/;function gP(e){let t=e.match(pP);return t?t[0]:""}var mP=/^[^&#]+/;function vP(e){let t=e.match(mP);return t?t[0]:""}var gm=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Z([],{}):new Z([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[V]=new Z(t,n)),r}parseSegment(){let t=cm(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new E(4009,!1);return this.capture(t),new Cr(Bu(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=hP(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=cm(this.remaining);i&&(r=i,this.capture(r))}t[Bu(n)]=Bu(r)}parseQueryParam(t){let n=gP(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=vP(this.remaining);s&&(r=s,this.capture(r))}let i=vD(n),o=vD(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=cm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new E(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=V);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[V]:new Z([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new E(4011,!1)}};function xD(e){return e.segments.length>0?new Z([],{[V]:e}):e}function OD(e){let t={};for(let[r,i]of Object.entries(e.children)){let o=OD(i);if(r===V&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new Z(e.segments,t);return yP(n)}function yP(e){if(e.numberOfChildren===1&&e.children[V]){let t=e.children[V];return new Z(e.segments.concat(t.segments),t.children)}return e}function Dr(e){return e instanceof bn}function kD(e,t,n=null,r=null){let i=PD(e);return FD(i,t,n,r)}function PD(e){let t;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new Z(o.url,s);return o===e&&(t=a),a}let r=n(e.root),i=xD(r);return t??i}function FD(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return lm(i,i,i,n,r);let o=_P(t);if(o.toRoot())return lm(i,i,new Z([],{}),n,r);let s=EP(o,i,e),a=s.processChildren?ma(s.segmentGroup,s.index,o.commands):VD(s.segmentGroup,s.index,o.commands);return lm(i,s.segmentGroup,a,n,r)}function Hu(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function ya(e){return typeof e=="object"&&e!=null&&e.outlets}function lm(e,t,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;e===t?s=n:s=LD(e,t,n);let a=xD(OD(s));return new bn(a,o,i)}function LD(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=LD(o,t,n)}),new Z(e.segments,r)}var $u=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Hu(r[0]))throw new E(4003,!1);let i=r.find(ya);if(i&&i!==bD(r))throw new E(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function _P(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new $u(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new $u(n,t,r)}var Mo=class{segmentGroup;processChildren;index;constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function EP(e,t,n){if(e.isAbsolute)return new Mo(t,!0,0);if(!n)return new Mo(t,!1,NaN);if(n.parent===null)return new Mo(n,!0,0);let r=Hu(e.commands[0])?0:1,i=n.segments.length-1+r;return IP(n,i,e.numberOfDoubleDots)}function IP(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new E(4005,!1);i=r.segments.length}return new Mo(r,!1,i-o)}function CP(e){return ya(e[0])?e[0].outlets:{[V]:e}}function VD(e,t,n){if(e??=new Z([],{}),e.segments.length===0&&e.hasChildren())return ma(e,t,n);let r=wP(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new Z(e.segments.slice(0,r.pathIndex),{});return o.children[V]=new Z(e.segments.slice(r.pathIndex),e.children),ma(o,0,i)}else return r.match&&i.length===0?new Z(e.segments,{}):r.match&&!e.hasChildren()?mm(e,t,n):r.match?ma(e,0,i):mm(e,t,n)}function ma(e,t,n){if(n.length===0)return new Z(e.segments,{});{let r=CP(n),i={};if(Object.keys(r).some(o=>o!==V)&&e.children[V]&&e.numberOfChildren===1&&e.children[V].segments.length===0){let o=ma(e.children[V],t,n);return new Z(e.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=VD(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Z(e.segments,i)}}function wP(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let s=e.segments[i],a=n[r];if(ya(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!_D(c,l,s))return o;r+=2}else{if(!_D(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function mm(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(ya(o)){let c=DP(o.outlets);return new Z(r,c)}if(i===0&&Hu(n[0])){let c=e.segments[t];r.push(new Cr(c.path,yD(n[0]))),i++;continue}let s=ya(o)?o.outlets[V]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Hu(a)?(r.push(new Cr(s,yD(a))),i+=2):(r.push(new Cr(s,{})),i++)}return new Z(r,{})}function DP(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=mm(new Z([],{}),0,r))}),t}function yD(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function _D(e,t,n){return e==n.path&&wn(t,n.parameters)}var No="imperative",Se=(function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e})(Se||{}),Dt=class{id;url;constructor(t,n){this.id=t,this.url=n}},br=class extends Dt{type=Se.NavigationStart;navigationTrigger;restoredState;constructor(t,n,r="imperative",i=null){super(t,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},dt=class extends Dt{urlAfterRedirects;type=Se.NavigationEnd;constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Qe=(function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e[e.Aborted=4]="Aborted",e})(Qe||{}),xo=(function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e})(xo||{}),Dn=class extends Dt{reason;code;type=Se.NavigationCancel;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Tn=class extends Dt{reason;code;type=Se.NavigationSkipped;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}},Oo=class extends Dt{error;target;type=Se.NavigationError;constructor(t,n,r,i){super(t,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},_a=class extends Dt{urlAfterRedirects;state;type=Se.RoutesRecognized;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wu=class extends Dt{urlAfterRedirects;state;type=Se.GuardsCheckStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zu=class extends Dt{urlAfterRedirects;state;shouldActivate;type=Se.GuardsCheckEnd;constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Gu=class extends Dt{urlAfterRedirects;state;type=Se.ResolveStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qu=class extends Dt{urlAfterRedirects;state;type=Se.ResolveEnd;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yu=class{route;type=Se.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ku=class{route;type=Se.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Zu=class{snapshot;type=Se.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qu=class{snapshot;type=Se.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ju=class{snapshot;type=Se.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xu=class{snapshot;type=Se.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ko=class{routerEvent;position;anchor;type=Se.Scroll;constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Ea=class{},Po=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function bP(e){return!(e instanceof Ea)&&!(e instanceof Po)}function TP(e,t){return e.providers&&!e._injector&&(e._injector=wo(e.providers,t,`Route: ${e.path}`)),e._injector??t}function an(e){return e.outlet||V}function SP(e,t){let n=e.filter(r=>an(r)===t);return n.push(...e.filter(r=>an(r)!==t)),n}function Vo(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var ed=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Vo(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Ei(this.rootInjector)}},Ei=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new ed(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||e)(M(Te))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),td=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=vm(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=vm(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=ym(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return ym(t,this._root).map(n=>n.value)}};function vm(e,t){if(e===t.value)return t;for(let n of t.children){let r=vm(e,n);if(r)return r}return null}function ym(e,t){if(e===t.value)return[t];for(let n of t.children){let r=ym(e,n);if(r.length)return r.unshift(t),r}return[]}var wt=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ao(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var Ia=class extends td{snapshot;constructor(t,n){super(t),this.snapshot=n,Tm(this,t)}toString(){return this.snapshot.toString()}};function jD(e){let t=AP(e),n=new Oe([new Cr("",{})]),r=new Oe({}),i=new Oe({}),o=new Oe({}),s=new Oe(""),a=new ft(n,r,o,s,i,V,e,t.root);return a.snapshot=t.root,new Ia(new wt(a,[]),t)}function AP(e){let t={},n={},r={},o=new vi([],t,r,"",n,V,e,null,{});return new Ca("",new wt(o,[]))}var ft=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,r,i,o,s,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(B(l=>l[Ta]))??A(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(B(t=>yi(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(B(t=>yi(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function nd(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:m(m({},t.params),e.params),data:m(m({},t.data),e.data),resolve:m(m(m(m({},e.data),t.data),i?.data),e._resolvedData)}:r={params:m({},e.params),data:m({},e.data),resolve:m(m({},e.data),e._resolvedData??{})},i&&BD(i)&&(r.resolve[Ta]=i.title),r}var vi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ta]}constructor(t,n,r,i,o,s,a,c,l){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=yi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=yi(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},Ca=class extends td{url;constructor(t,n){super(n),this.url=t,Tm(this,n)}toString(){return UD(this._root)}};function Tm(e,t){t.value._routerState=e,t.children.forEach(n=>Tm(e,n))}function UD(e){let t=e.children.length>0?` { ${e.children.map(UD).join(", ")} } `:"";return`${e.value}${t}`}function um(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,wn(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),wn(t.params,n.params)||e.paramsSubject.next(n.params),tP(t.url,n.url)||e.urlSubject.next(n.url),wn(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function _m(e,t){let n=wn(e.params,t.params)&&oP(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||_m(e.parent,t.parent))}function BD(e){return typeof e.title=="string"||e.title===null}var HD=new b(""),Sa=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=V;activateEvents=new we;deactivateEvents=new we;attachEvents=new we;detachEvents=new we;routerOutletData=Pw(void 0);parentContexts=v(Ei);location=v(ui);changeDetector=v(pi);inputBinder=v(Aa,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new E(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new E(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new E(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new E(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Em(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=ue({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[qn]})}return e})(),Em=class{route;childContexts;parent;outletData;constructor(t,n,r,i){this.route=t,this.childContexts=n,this.parent=r,this.outletData=i}get(t,n){return t===ft?this.route:t===Ei?this.childContexts:t===HD?this.outletData:this.parent.get(t,n)}},Aa=new b(""),Sm=(()=>{class e{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,i=zr([r.queryParams,r.params,r.data]).pipe(Me(([o,s,a],c)=>(a=m(m(m({},o),s),a),c===0?A(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let s=Lw(r.component);if(!s){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(n,i)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})(),Am=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Ze({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&de(0,"router-outlet")},dependencies:[Sa],encapsulation:2})}return e})();function Mm(e){let t=e.children&&e.children.map(Mm),n=t?S(m({},e),{children:t}):m({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==V&&(n.component=Am),n}function MP(e,t,n){let r=wa(e,t._root,n?n._root:void 0);return new Ia(r,t)}function wa(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=NP(e,t,n);return new wt(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>wa(e,a)),s}}let r=RP(t.value),i=t.children.map(o=>wa(e,o));return new wt(r,i)}}function NP(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return wa(e,r,i);return wa(e,r)})}function RP(e){return new ft(new Oe(e.url),new Oe(e.params),new Oe(e.queryParams),new Oe(e.fragment),new Oe(e.data),e.outlet,e.component,e)}var Fo=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},$D="ngNavigationCancelingError";function rd(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=Dr(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=WD(!1,Qe.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function WD(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[$D]=!0,n.cancellationCode=t,n}function xP(e){return zD(e)&&Dr(e.url)}function zD(e){return!!e&&e[$D]}var OP=(e,t,n,r)=>B(i=>(new Im(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),Im=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),um(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=Ao(n);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Ao(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Ao(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=Ao(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Xu(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Qu(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(um(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),um(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},id=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Ro=class{component;route;constructor(t,n){this.component=t,this.route=n}};function kP(e,t,n){let r=e._root,i=t?t._root:null;return ga(r,i,n,[r.value])}function PP(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function jo(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!Oh(e)?e:t.get(e):r}function ga(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ao(t);return e.children.forEach(s=>{FP(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>va(a,n.getContext(s),i)),i}function FP(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=LP(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new id(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ga(e,t,a?a.children:null,r,i):ga(e,t,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ro(a.outlet.component,s))}else s&&va(t,a,i),i.canActivateChecks.push(new id(r)),o.component?ga(e,null,a?a.children:null,r,i):ga(e,null,n,r,i);return i}function LP(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!mi(e.url,t.url);case"pathParamsOrQueryParamsChange":return!mi(e.url,t.url)||!wn(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_m(e,t)||!wn(e.queryParams,t.queryParams);case"paramsChange":default:return!_m(e,t)}}function va(e,t,n){let r=Ao(e),i=e.value;Object.entries(r).forEach(([o,s])=>{i.component?t?va(s,t.children.getContext(o),n):va(s,null,n):va(s,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Ro(t.outlet.component,i)):n.canDeactivateChecks.push(new Ro(null,i)):n.canDeactivateChecks.push(new Ro(null,i))}function Ma(e){return typeof e=="function"}function VP(e){return typeof e=="boolean"}function jP(e){return e&&Ma(e.canLoad)}function UP(e){return e&&Ma(e.canActivate)}function BP(e){return e&&Ma(e.canActivateChild)}function HP(e){return e&&Ma(e.canDeactivate)}function $P(e){return e&&Ma(e.canMatch)}function GD(e){return e instanceof Fn||e?.name==="EmptyError"}var Vu=Symbol("INITIAL_VALUE");function Lo(){return Me(e=>zr(e.map(t=>t.pipe(Mt(1),_h(Vu)))).pipe(B(t=>{for(let n of t)if(n!==!0){if(n===Vu)return Vu;if(n===!1||WP(n))return n}return!0}),ot(t=>t!==Vu),Mt(1)))}function WP(e){return Dr(e)||e instanceof Fo}function zP(e,t){return pe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?A(S(m({},n),{guardsResult:!0})):GP(s,r,i,e).pipe(pe(a=>a&&VP(a)?qP(r,o,e,t):A(a)),B(a=>S(m({},n),{guardsResult:a})))})}function GP(e,t,n,r){return se(e).pipe(pe(i=>JP(i.component,i.route,n,t,r)),Vn(i=>i!==!0,!0))}function qP(e,t,n,r){return se(t).pipe(sr(i=>io(KP(i.route.parent,r),YP(i.route,r),QP(e,i.path,n),ZP(e,i.route,n))),Vn(i=>i!==!0,!0))}function YP(e,t){return e!==null&&t&&t(new Ju(e)),A(!0)}function KP(e,t){return e!==null&&t&&t(new Zu(e)),A(!0)}function ZP(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return A(!0);let i=r.map(o=>_s(()=>{let s=Vo(t)??n,a=jo(o,s),c=UP(a)?a.canActivate(t,e):He(s,()=>a(t,e));return Qn(c).pipe(Vn())}));return A(i).pipe(Lo())}function QP(e,t,n){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>PP(s)).filter(s=>s!==null).map(s=>_s(()=>{let a=s.guards.map(c=>{let l=Vo(s.node)??n,u=jo(c,l),d=BP(u)?u.canActivateChild(r,e):He(l,()=>u(r,e));return Qn(d).pipe(Vn())});return A(a).pipe(Lo())}));return A(o).pipe(Lo())}function JP(e,t,n,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return A(!0);let s=o.map(a=>{let c=Vo(t)??i,l=jo(a,c),u=HP(l)?l.canDeactivate(e,t,n,r):He(c,()=>l(e,t,n,r));return Qn(u).pipe(Vn())});return A(s).pipe(Lo())}function XP(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return A(!0);let o=i.map(s=>{let a=jo(s,e),c=jP(a)?a.canLoad(t,n):He(e,()=>a(t,n));return Qn(c)});return A(o).pipe(Lo(),qD(r))}function qD(e){return ch(Ce(t=>{if(typeof t!="boolean")throw rd(e,t)}),B(t=>t===!0))}function e1(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return A(!0);let o=i.map(s=>{let a=jo(s,e),c=$P(a)?a.canMatch(t,n):He(e,()=>a(t,n));return Qn(c)});return A(o).pipe(Lo(),qD(r))}var Da=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},ba=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function So(e){return no(new Da(e))}function t1(e){return no(new E(4e3,!1))}function n1(e){return no(WD(!1,Qe.GuardRejected))}var Cm=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return A(r);if(i.numberOfChildren>1||!i.children[V])return t1(`${t.redirectTo}`);i=i.children[V]}}applyRedirectCommands(t,n,r,i,o){return r1(n,i,o).pipe(B(s=>{if(s instanceof bn)throw new ba(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),t,r);if(s[0]==="/")throw new ba(a);return a}))}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new bn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,i)}),new Z(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new E(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}};function r1(e,t,n){if(typeof e=="string")return A(e);let r=e,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:u,title:d}=t;return Qn(He(n,()=>r({params:l,data:u,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:d})))}var wm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function i1(e,t,n,r,i){let o=YD(e,t,n);return o.matched?(r=TP(t,r),e1(r,t,n,i).pipe(B(s=>s===!0?o:m({},wm)))):A(o)}function YD(e,t,n){if(t.path==="**")return o1(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?m({},wm):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||wD)(n,e,t);if(!i)return m({},wm);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?m(m({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function o1(e){return{matched:!0,parameters:e.length>0?bD(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function ED(e,t,n,r){return n.length>0&&c1(e,n,r)?{segmentGroup:new Z(t,a1(r,new Z(n,e.children))),slicedSegments:[]}:n.length===0&&l1(e,n,r)?{segmentGroup:new Z(e.segments,s1(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new Z(e.segments,e.children),slicedSegments:n}}function s1(e,t,n,r){let i={};for(let o of n)if(sd(e,t,o)&&!r[an(o)]){let s=new Z([],{});i[an(o)]=s}return m(m({},r),i)}function a1(e,t){let n={};n[V]=t;for(let r of e)if(r.path===""&&an(r)!==V){let i=new Z([],{});n[an(r)]=i}return n}function c1(e,t,n){return n.some(r=>sd(e,t,r)&&an(r)!==V)}function l1(e,t,n){return n.some(r=>sd(e,t,r))}function sd(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function u1(e,t,n){return t.length===0&&!e.children[n]}var Dm=class{};function d1(e,t,n,r,i,o,s="emptyOnly"){return new bm(e,t,n,r,i,s,o).recognize()}var f1=31,bm=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,r,i,o,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Cm(this.urlSerializer,this.urlTree)}noMatchError(t){return new E(4002,`'${t.segmentGroup}'`)}recognize(){let t=ED(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(B(({children:n,rootSnapshot:r})=>{let i=new wt(r,n),o=new Ca("",i),s=kD(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let n=new vi([],Object.freeze({}),Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),V,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,V,n).pipe(B(r=>({children:r,rootSnapshot:n})),Ln(r=>{if(r instanceof ba)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Da?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,o):this.processSegment(t,n,r,r.segments,i,!0,o).pipe(B(s=>s instanceof wt?[s]:[]))}processChildren(t,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return se(o).pipe(sr(s=>{let a=r.children[s],c=SP(n,s);return this.processSegmentGroup(t,c,a,s,i)}),yh((s,a)=>(s.push(...a),s)),ar(null),vh(),pe(s=>{if(s===null)return So(r);let a=KD(s);return h1(a),A(a)}))}processSegment(t,n,r,i,o,s,a){return se(n).pipe(sr(c=>this.processSegmentAgainstRoute(c._injector??t,n,c,r,i,o,s,a).pipe(Ln(l=>{if(l instanceof Da)return A(null);throw l}))),Vn(c=>!!c),Ln(c=>{if(GD(c))return u1(r,i,o)?A(new Dm):So(r);throw c}))}processSegmentAgainstRoute(t,n,r,i,o,s,a,c){return an(r)!==s&&(s===V||!sd(i,o,r))?So(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,s,c):So(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=YD(n,i,o);if(!c)return So(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>f1&&(this.allowRedirects=!1));let h=new vi(o,l,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,ID(i),an(i),i.component??i._loadedComponent??null,i,CD(i)),g=nd(h,a,this.paramsInheritanceStrategy);return h.params=Object.freeze(g.params),h.data=Object.freeze(g.data),this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,h,t).pipe(Me(T=>this.applyRedirects.lineralizeSegments(i,T)),pe(T=>this.processSegment(t,r,n,T.concat(f),s,!1,a)))}matchSegmentAgainstRoute(t,n,r,i,o,s){let a=i1(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Me(c=>c.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(Me(({routes:l})=>{let u=r._loadedInjector??t,{parameters:d,consumedSegments:f,remainingSegments:h}=c,g=new vi(f,d,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,ID(r),an(r),r.component??r._loadedComponent??null,r,CD(r)),_=nd(g,s,this.paramsInheritanceStrategy);g.params=Object.freeze(_.params),g.data=Object.freeze(_.data);let{segmentGroup:T,slicedSegments:N}=ED(n,f,h,l);if(N.length===0&&T.hasChildren())return this.processChildren(u,l,T,g).pipe(B(At=>new wt(g,At)));if(l.length===0&&N.length===0)return A(new wt(g,[]));let pt=an(r)===o;return this.processSegment(u,l,T,N,pt?V:o,!0,g).pipe(B(At=>new wt(g,At instanceof wt?[At]:[])))}))):So(n)))}getChildConfig(t,n,r){return n.children?A({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?A({routes:n._loadedRoutes,injector:n._loadedInjector}):XP(t,n,r,this.urlSerializer).pipe(pe(i=>i?this.configLoader.loadChildren(t,n).pipe(Ce(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):n1(n))):A({routes:[],injector:t})}};function h1(e){e.sort((t,n)=>t.value.outlet===V?-1:n.value.outlet===V?1:t.value.outlet.localeCompare(n.value.outlet))}function p1(e){let t=e.value.routeConfig;return t&&t.path===""}function KD(e){let t=[],n=new Set;for(let r of e){if(!p1(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=KD(r.children);t.push(new wt(r.value,i))}return t.filter(r=>!n.has(r))}function ID(e){return e.data||{}}function CD(e){return e.resolve||{}}function g1(e,t,n,r,i,o){return pe(s=>d1(e,t,n,r,s.extractedUrl,i,o).pipe(B(({state:a,tree:c})=>S(m({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function m1(e,t){return pe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return A(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of ZD(c))s.add(l);let a=0;return se(s).pipe(sr(c=>o.has(c)?v1(c,r,e,t):(c.data=nd(c,c.parent,e).resolve,A(void 0))),Ce(()=>a++),oo(1),pe(c=>a===s.size?A(n):rt))})}function ZD(e){let t=e.children.map(n=>ZD(n)).flat();return[e,...t]}function v1(e,t,n,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!BD(i)&&(o[Ta]=i.title),_s(()=>(e.data=nd(e,e.parent,n).resolve,y1(o,e,t,r).pipe(B(s=>(e._resolvedData=s,e.data=m(m({},e.data),s),null)))))}function y1(e,t,n,r){let i=hm(e);if(i.length===0)return A({});let o={};return se(i).pipe(pe(s=>_1(e[s],t,n,r).pipe(Vn(),Ce(a=>{if(a instanceof Fo)throw rd(new wr,a);o[s]=a}))),oo(1),B(()=>o),Ln(s=>GD(s)?rt:no(s)))}function _1(e,t,n,r){let i=Vo(t)??r,o=jo(e,i),s=o.resolve?o.resolve(t,n):He(i,()=>o(t,n));return Qn(s)}function dm(e){return Me(t=>{let n=e(t);return n?se(n).pipe(B(()=>t)):A(t)})}var Nm=(()=>{class e{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===V);return r}getResolvedTitleForRoute(n){return n.data[Ta]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>v(QD),providedIn:"root"})}return e})(),QD=(()=>{class e extends Nm{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(M(gD))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Tr=new b("",{providedIn:"root",factory:()=>({})}),Ii=new b(""),ad=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=v(Og);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return A(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Qn(He(n,()=>r.loadComponent())).pipe(B(XD),Me(eb),Ce(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Es(()=>{this.componentLoaders.delete(r)})),o=new eo(i,()=>new re).pipe(Xi());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return A({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=JD(r,this.compiler,n,this.onLoadEndListener).pipe(Es(()=>{this.childrenLoaders.delete(r)})),s=new eo(o,()=>new re).pipe(Xi());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function JD(e,t,n,r){return Qn(He(n,()=>e.loadChildren())).pipe(B(XD),Me(eb),pe(i=>i instanceof fu||Array.isArray(i)?A(i):se(t.compileModuleAsync(i))),B(i=>{r&&r(e);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Ii,[],{optional:!0,self:!0}).flat()),{routes:s.map(Mm),injector:o}}))}function E1(e){return e&&typeof e=="object"&&"default"in e}function XD(e){return E1(e)?e.default:e}function eb(e){return A(e)}var cd=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>v(I1),providedIn:"root"})}return e})(),I1=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Rm=new b(""),xm=new b("");function tb(e,t,n){let r=e.get(xm),i=e.get(me);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),C1(e)));a.ready.catch(l=>{});let{onViewTransitionCreated:c}=r;return c&&He(e,()=>c({transition:a,from:t,to:n})),s}function C1(e){return new Promise(t=>{Ks({read:()=>setTimeout(t)},{injector:e})})}var Om=new b(""),ld=(()=>{class e{currentNavigation=It(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new re;transitionAbortWithErrorSubject=new re;configLoader=v(ad);environmentInjector=v(Te);destroyRef=v(_n);urlSerializer=v(_i);rootContexts=v(Ei);location=v(Ir);inputBindingEnabled=v(Aa,{optional:!0})!==null;titleStrategy=v(Nm);options=v(Tr,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=v(cd);createViewTransition=v(Rm,{optional:!0});navigationErrorHandler=v(Om,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>A(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Yu(i)),r=i=>this.events.next(new Ku(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;Re(()=>{this.transitions?.next(S(m({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new Oe(null),this.transitions.pipe(ot(r=>r!==null),Me(r=>{let i=!1;return A(r).pipe(Me(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Qe.SupersededByNewNavigation),rt;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?S(m({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Tn(o.id,this.urlSerializer.serialize(o.rawUrl),"",xo.IgnoredSameUrlNavigation)),o.resolve(!1),rt;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return A(o).pipe(Me(c=>(this.events.next(new br(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?rt:Promise.resolve(c))),g1(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Ce(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(u=>(u.finalUrl=c.urlAfterRedirects,u));let l=new _a(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:l,source:u,restoredState:d,extras:f}=o,h=new br(c,this.urlSerializer.serialize(l),u,d);this.events.next(h);let g=jD(this.rootComponentType).snapshot;return this.currentTransition=r=S(m({},o),{targetSnapshot:g,urlAfterRedirects:l,extras:S(m({},f),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(_=>(_.finalUrl=l,_)),A(r)}else return this.events.next(new Tn(o.id,this.urlSerializer.serialize(o.extractedUrl),"",xo.IgnoredByUrlHandlingStrategy)),o.resolve(!1),rt}),Ce(o=>{let s=new Wu(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),B(o=>(this.currentTransition=r=S(m({},o),{guards:kP(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),zP(this.environmentInjector,o=>this.events.next(o)),Ce(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw rd(this.urlSerializer,o.guardsResult);let s=new zu(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),ot(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Qe.GuardRejected),!1)),dm(o=>{if(o.guards.canActivateChecks.length!==0)return A(o).pipe(Ce(s=>{let a=new Gu(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Me(s=>{let a=!1;return A(s).pipe(m1(this.paramsInheritanceStrategy,this.environmentInjector),Ce({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Qe.NoDataFromResolver)}}))}),Ce(s=>{let a=new qu(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),dm(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent){let l=Vo(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(Ce(u=>{a.component=u}),B(()=>{})))}for(let l of a.children)c.push(...s(l));return c};return zr(s(o.targetSnapshot.root)).pipe(ar(null),Mt(1))}),dm(()=>this.afterPreactivation()),Me(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?se(a).pipe(B(()=>r)):A(r)}),B(o=>{let s=MP(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=S(m({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),Ce(()=>{this.events.next(new Ea)}),OP(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Mt(1),jn(new O(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(ot(()=>!i&&!r.targetRouterState),Ce(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Qe.Aborted)}))),Ce({next:o=>{i=!0,this.lastSuccessfulNavigation=Re(this.currentNavigation),this.events.next(new dt(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),jn(this.transitionAbortWithErrorSubject.pipe(Ce(o=>{throw o}))),Es(()=>{i||this.cancelNavigationTransition(r,"",Qe.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Ln(o=>{if(this.destroyed)return r.resolve(!1),rt;if(i=!0,zD(o))this.events.next(new Dn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),xP(o)?this.events.next(new Po(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Oo(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=He(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Fo){let{message:c,cancellationCode:l}=rd(this.urlSerializer,a);this.events.next(new Dn(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new Po(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return rt}))}))}cancelNavigationTransition(n,r,i){let o=new Dn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Re(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function w1(e){return e!==No}var nb=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>v(D1),providedIn:"root"})}return e})(),od=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},D1=(()=>{class e extends od{static \u0275fac=(()=>{let n;return function(i){return(n||(n=yr(e)))(i||e)}})();static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),rb=(()=>{class e{urlSerializer=v(_i);options=v(Tr,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=v(Ir);urlHandlingStrategy=v(cd);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new bn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof bn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=jD(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>v(b1),providedIn:"root"})}return e})(),b1=(()=>{class e extends rb{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof br?this.updateStateMemento():n instanceof Tn?this.commitTransition(r):n instanceof _a?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Ea?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Dn&&n.code!==Qe.SupersededByNewNavigation&&n.code!==Qe.Redirect?this.restoreHistory(r):n instanceof Oo?this.restoreHistory(r,!0):n instanceof dt&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,c=m(m({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",c)}else{let a=m(m({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=yr(e)))(i||e)}})();static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ud(e,t){e.events.pipe(ot(n=>n instanceof dt||n instanceof Dn||n instanceof Oo||n instanceof Tn),B(n=>n instanceof dt||n instanceof Tn?0:(n instanceof Dn?n.code===Qe.Redirect||n.code===Qe.SupersededByNewNavigation:!1)?2:1),ot(n=>n!==2),Mt(1)).subscribe(()=>{t()})}var T1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},S1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},_e=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=v(bg);stateManager=v(rb);options=v(Tr,{optional:!0})||{};pendingTasks=v(zn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=v(ld);urlSerializer=v(_i);location=v(Ir);urlHandlingStrategy=v(cd);injector=v(Te);_events=new re;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=v(nb);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=v(Ii,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!v(Aa,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new le;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Re(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Dn&&r.code!==Qe.Redirect&&r.code!==Qe.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof dt)this.navigated=!0;else if(r instanceof Po){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=m({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||w1(i.source)},s);this.scheduleNavigation(a,No,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}bP(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),No,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=m({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(ct)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Re(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Mm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=m(m({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let f=i?i.snapshot:this.routerState.snapshot.root;d=PD(f)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return FD(d,n,u,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Dr(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,No,null,r)}navigate(n,r={skipLocationChange:!1}){return A1(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=m({},T1):r===!1?i=m({},S1):i=r,Dr(n))return mD(this.currentUrlTree,n,i);let o=this.parseUrl(n);return mD(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,f)=>{a=d,c=f});let u=this.pendingTasks.add();return ud(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function A1(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new E(4008,!1)}var Uo=(()=>{class e{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=It(null);get href(){return Re(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new re;applicationErrorHandler=v(ct);options=v(Tr,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(v(new Iu("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof dt&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Dr(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:Dr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||e)(C(_e),C(ft),zs("tabindex"),C(en),C(Pt),C(rn))};static \u0275dir=ue({type:e,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&fe("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Qs("href",i.reactiveHref(),ng)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",bo],skipLocationChange:[2,"skipLocationChange","skipLocationChange",bo],replaceUrl:[2,"replaceUrl","replaceUrl",bo],routerLink:"routerLink"},features:[qn]})}return e})();var Na=class{};var ib=(()=>{class e{router;injector;preloadingStrategy;loader;subscription;constructor(n,r,i,o){this.router=n,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ot(n=>n instanceof dt),sr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=wo(o.providers,n,`Route: ${o.path}`));let s=o._injector??n,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return se(i).pipe(ro())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(n,r):i=A(null);let o=i.pipe(pe(s=>s===null?A(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(n,r);return se([o,s]).pipe(ro())}else return o})}static \u0275fac=function(r){return new(r||e)(M(_e),M(Te),M(Na),M(ad))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),ob=new b(""),M1=(()=>{class e{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=No;restoredId=0;store={};constructor(n,r,i,o,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof br?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof dt?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Tn&&n.code===xo.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof ko&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>p(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new ko(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){vg()};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})();function Pm(e,...t){return fr([{provide:Ii,multi:!0,useValue:e},[],{provide:ft,useFactory:sb,deps:[_e]},{provide:Zs,multi:!0,useFactory:ab},t.map(n=>n.\u0275providers)])}function sb(e){return e.routerState.root}function Ra(e,t){return{\u0275kind:e,\u0275providers:t}}function ab(){let e=v(st);return t=>{let n=e.get(Yn);if(t!==n.components[0])return;let r=e.get(_e),i=e.get(cb);e.get(Fm)===1&&r.initialNavigation(),e.get(db,null,{optional:!0})?.setUpPreloading(),e.get(ob,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var cb=new b("",{factory:()=>new re}),Fm=new b("",{providedIn:"root",factory:()=>1});function lb(){let e=[{provide:Jp,useValue:!0},{provide:Fm,useValue:0},pu(()=>{let t=v(st);return t.get(Wg,Promise.resolve()).then(()=>new Promise(r=>{let i=t.get(_e),o=t.get(cb);ud(i,()=>{r(!0)}),t.get(ld).afterPreactivation=()=>(r(!0),o.closed?A(void 0):o),i.initialNavigation()}))})];return Ra(2,e)}function ub(){let e=[pu(()=>{v(_e).setUpLocationChangeListener()}),{provide:Fm,useValue:2}];return Ra(3,e)}var db=new b("");function fb(e){return Ra(0,[{provide:db,useExisting:ib},{provide:Na,useExisting:e}])}function hb(){return Ra(8,[Sm,{provide:Aa,useExisting:Sm}])}function pb(e){di("NgRouterViewTransitions");let t=[{provide:Rm,useValue:tb},{provide:xm,useValue:m({skipNextTransition:!!e?.skipInitialTransition},e)}];return Ra(9,t)}var gb=[Ir,{provide:_i,useClass:wr},_e,Ei,{provide:ft,useFactory:sb,deps:[_e]},ad,[]],Ci=(()=>{class e{constructor(){}static forRoot(n,r){return{ngModule:e,providers:[gb,[],{provide:Ii,multi:!0,useValue:n},[],r?.errorHandler?{provide:Om,useValue:r.errorHandler}:[],{provide:Tr,useValue:r||{}},r?.useHash?R1():x1(),N1(),r?.preloadingStrategy?fb(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?O1(r):[],r?.bindToComponentInputs?hb().\u0275providers:[],r?.enableViewTransitions?pb().\u0275providers:[],k1()]}}static forChild(n){return{ngModule:e,providers:[{provide:Ii,multi:!0,useValue:n}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=Cn({type:e});static \u0275inj=Yt({})}return e})();function N1(){return{provide:ob,useFactory:()=>{let e=v(sD),t=v(ve),n=v(Tr),r=v(ld),i=v(_i);return n.scrollOffset&&e.setOffset(n.scrollOffset),new M1(i,r,e,t,n)}}}function R1(){return{provide:rn,useClass:Kg}}function x1(){return{provide:rn,useClass:bu}}function O1(e){return[e.initialNavigation==="disabled"?ub().\u0275providers:[],e.initialNavigation==="enabledBlocking"?lb().\u0275providers:[]]}var km=new b("");function k1(){return[{provide:km,useFactory:ab},{provide:Zs,multi:!0,useExisting:km}]}var bb=(()=>{class e{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||e)(C(en),C(Pt))};static \u0275dir=ue({type:e})}return e})(),Bm=(()=>{class e extends bb{static \u0275fac=(()=>{let n;return function(i){return(n||(n=yr(e)))(i||e)}})();static \u0275dir=ue({type:e,features:[tn]})}return e})(),Ed=new b("");var P1={provide:Ed,useExisting:gn(()=>Id),multi:!0};function F1(){let e=jt()?jt().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var L1=new b(""),Id=(()=>{class e extends bb{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!F1())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||e)(C(en),C(Pt),C(L1,8))};static \u0275dir=ue({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&fe("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[hi([P1]),tn]})}return e})();function Hm(e){return e==null||$m(e)===0}function $m(e){return e==null?null:Array.isArray(e)||typeof e=="string"?e.length:e instanceof Set?e.size:null}var Tb=new b(""),Sb=new b(""),V1=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,wi=class{static min(t){return j1(t)}static max(t){return U1(t)}static required(t){return B1(t)}static requiredTrue(t){return H1(t)}static email(t){return $1(t)}static minLength(t){return W1(t)}static maxLength(t){return z1(t)}static pattern(t){return G1(t)}static nullValidator(t){return Ab()}static compose(t){return kb(t)}static composeAsync(t){return Fb(t)}};function j1(e){return t=>{if(t.value==null||e==null)return null;let n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}function U1(e){return t=>{if(t.value==null||e==null)return null;let n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}function B1(e){return Hm(e.value)?{required:!0}:null}function H1(e){return e.value===!0?null:{required:!0}}function $1(e){return Hm(e.value)||V1.test(e.value)?null:{email:!0}}function W1(e){return t=>{let n=t.value?.length??$m(t.value);return n===null||n===0?null:n<e?{minlength:{requiredLength:e,actualLength:n}}:null}}function z1(e){return t=>{let n=t.value?.length??$m(t.value);return n!==null&&n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}}function G1(e){if(!e)return Ab;let t,n;return typeof e=="string"?(n="",e.charAt(0)!=="^"&&(n+="^"),n+=e,e.charAt(e.length-1)!=="$"&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),r=>{if(Hm(r.value))return null;let i=r.value;return t.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function Ab(e){return null}function Mb(e){return e!=null}function Nb(e){return _r(e)?se(e):e}function Rb(e){let t={};return e.forEach(n=>{t=n!=null?m(m({},t),n):t}),Object.keys(t).length===0?null:t}function xb(e,t){return t.map(n=>n(e))}function q1(e){return!e.validate}function Ob(e){return e.map(t=>q1(t)?t:n=>t.validate(n))}function kb(e){if(!e)return null;let t=e.filter(Mb);return t.length==0?null:function(n){return Rb(xb(n,t))}}function Pb(e){return e!=null?kb(Ob(e)):null}function Fb(e){if(!e)return null;let t=e.filter(Mb);return t.length==0?null:function(n){let r=xb(n,t).map(Nb);return gh(r).pipe(B(Rb))}}function Lb(e){return e!=null?Fb(Ob(e)):null}function mb(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function Vb(e){return e._rawValidators}function jb(e){return e._rawAsyncValidators}function Lm(e){return e?Array.isArray(e)?e:[e]:[]}function hd(e,t){return Array.isArray(e)?e.includes(t):e===t}function vb(e,t){let n=Lm(t);return Lm(e).forEach(i=>{hd(n,i)||n.push(i)}),n}function yb(e,t){return Lm(t).filter(n=>!hd(e,n))}var pd=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Pb(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Lb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},Wo=class extends pd{name;get formDirective(){return null}get path(){return null}},Fa=class extends pd{_parent=null;name=null;valueAccessor=null},gd=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Y1={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},yX=S(m({},Y1),{"[class.ng-submitted]":"isSubmitted"}),Ub=(()=>{class e extends gd{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(C(Fa,2))};static \u0275dir=ue({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Xs("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[tn]})}return e})(),Bb=(()=>{class e extends gd{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(C(Wo,10))};static \u0275dir=ue({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Xs("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[tn]})}return e})();var xa="VALID",dd="INVALID",Ho="PENDING",Oa="DISABLED",Sr=class{},md=class extends Sr{value;source;constructor(t,n){super(),this.value=t,this.source=n}},ka=class extends Sr{pristine;source;constructor(t,n){super(),this.pristine=t,this.source=n}},Pa=class extends Sr{touched;source;constructor(t,n){super(),this.touched=t,this.source=n}},$o=class extends Sr{status;source;constructor(t,n){super(),this.status=t,this.source=n}},Vm=class extends Sr{source;constructor(t){super(),this.source=t}},La=class extends Sr{source;constructor(t){super(),this.source=t}};function Wm(e){return(Cd(e)?e.validators:e)||null}function K1(e){return Array.isArray(e)?Pb(e):e||null}function zm(e,t){return(Cd(t)?t.asyncValidators:e)||null}function Z1(e){return Array.isArray(e)?Lb(e):e||null}function Cd(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function Hb(e,t,n){let r=e.controls;if(!(t?Object.keys(r):r).length)throw new E(1e3,"");if(!r[n])throw new E(1001,"")}function $b(e,t,n){e._forEachChild((r,i)=>{if(n[i]===void 0)throw new E(1002,"")})}var zo=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,n){this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Re(this.statusReactive)}set status(t){Re(()=>this.statusReactive.set(t))}_status=Do(()=>this.statusReactive());statusReactive=It(void 0);get valid(){return this.status===xa}get invalid(){return this.status===dd}get pending(){return this.status==Ho}get disabled(){return this.status===Oa}get enabled(){return this.status!==Oa}errors;get pristine(){return Re(this.pristineReactive)}set pristine(t){Re(()=>this.pristineReactive.set(t))}_pristine=Do(()=>this.pristineReactive());pristineReactive=It(!0);get dirty(){return!this.pristine}get touched(){return Re(this.touchedReactive)}set touched(t){Re(()=>this.touchedReactive.set(t))}_touched=Do(()=>this.touchedReactive());touchedReactive=It(!1);get untouched(){return!this.touched}_events=new re;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(vb(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(vb(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(yb(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(yb(t,this._rawAsyncValidators))}hasValidator(t){return hd(this._rawValidators,t)}hasAsyncValidator(t){return hd(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(S(m({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new Pa(!0,r))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),n&&t.emitEvent!==!1&&this._events.next(new Pa(!1,r))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(S(m({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new ka(!1,r))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),n&&t.emitEvent!==!1&&this._events.next(new ka(!0,r))}markAsPending(t={}){this.status=Ho;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new $o(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(S(m({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Oa,this.errors=null,this._forEachChild(i=>{i.disable(S(m({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new md(this.value,r)),this._events.next(new $o(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(S(m({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=xa,this._forEachChild(r=>{r.enable(S(m({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(S(m({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===xa||this.status===Ho)&&this._runAsyncValidator(r,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new md(this.value,n)),this._events.next(new $o(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(S(m({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Oa:xa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=Ho,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:t!==!1};let r=Nb(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new $o(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,r)}_initObservables(){this.valueChanges=new we,this.statusChanges=new we}_calculateStatus(){return this._allControlsDisabled()?Oa:this.errors?dd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ho)?Ho:this._anyControlsHaveStatus(dd)?dd:xa}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),i&&this._events.next(new ka(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new Pa(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Cd(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=K1(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=Z1(this._rawAsyncValidators)}},vd=class extends zo{constructor(t,n,r){super(Wm(n),zm(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){$b(this,!0,t),Object.keys(t).forEach(r=>{Hb(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new La(this))}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var jm=class extends vd{};var Wb=new b("",{providedIn:"root",factory:()=>Gm}),Gm="always";function Q1(e,t){return[...t.path,e]}function _b(e,t,n=Gm){qm(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),X1(e,t),tF(e,t),eF(e,t),J1(e,t)}function Eb(e,t,n=!0){let r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),_d(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function yd(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function J1(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function qm(e,t){let n=Vb(e);t.validator!==null?e.setValidators(mb(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=jb(e);t.asyncValidator!==null?e.setAsyncValidators(mb(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();yd(t._rawValidators,i),yd(t._rawAsyncValidators,i)}function _d(e,t){let n=!1;if(e!==null){if(t.validator!==null){let i=Vb(e);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.validator);o.length!==i.length&&(n=!0,e.setValidators(o))}}if(t.asyncValidator!==null){let i=jb(e);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.asyncValidator);o.length!==i.length&&(n=!0,e.setAsyncValidators(o))}}}let r=()=>{};return yd(t._rawValidators,r),yd(t._rawAsyncValidators,r),n}function X1(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&zb(e,t)})}function eF(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&zb(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function zb(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function tF(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function nF(e,t){e==null,qm(e,t)}function rF(e,t){return _d(e,t)}function iF(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function oF(e){return Object.getPrototypeOf(e.constructor)===Bm}function sF(e,t){e._syncPendingControls(),t.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function aF(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(o=>{o.constructor===Id?n=o:oF(o)?r=o:i=o}),i||r||n||null}function cF(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Ib(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Cb(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var fd=class extends zo{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,n,r){super(Wm(n),zm(r,n)),this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Cd(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Cb(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new La(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Ib(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Ib(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Cb(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var lF=e=>e instanceof fd;var Gb=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275dir=ue({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return e})();var qb=new b("");var uF={provide:Wo,useExisting:gn(()=>Ym)},Ym=(()=>{class e extends Wo{callSetDisabledState;get submitted(){return Re(this._submittedReactive)}set submitted(n){this._submittedReactive.set(n)}_submitted=Do(()=>this._submittedReactive());_submittedReactive=It(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new we;constructor(n,r,i){super(),this.callSetDisabledState=i,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(_d(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){let r=this.form.get(n.path);return _b(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){Eb(n.control||null,n,!1),cF(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this._submittedReactive.set(!0),sF(this.form,this.directives),this.ngSubmit.emit(n),this.form._events.next(new Vm(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0,r={}){this.form.reset(n,r),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(n=>{let r=n.control,i=this.form.get(n.path);r!==i&&(Eb(r||null,n),lF(i)&&(_b(i,n,this.callSetDisabledState),n.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){let r=this.form.get(n.path);nF(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){let r=this.form.get(n.path);r&&rF(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){qm(this.form,this),this._oldForm&&_d(this._oldForm,this)}static \u0275fac=function(r){return new(r||e)(C(Tb,10),C(Sb,10),C(Wb,8))};static \u0275dir=ue({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&fe("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[hi([uF]),tn,qn]})}return e})();var dF={provide:Fa,useExisting:gn(()=>Km)},Km=(()=>{class e extends Fa{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(n){}model;update=new we;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=aF(this,o)}ngOnChanges(n){this._added||this._setUpControl(),iF(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return Q1(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||e)(C(Wo,13),C(Tb,10),C(Sb,10),C(Ed,10),C(qb,8))};static \u0275dir=ue({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[hi([dF]),tn,qn]})}return e})();var fF={provide:Ed,useExisting:gn(()=>wd),multi:!0};function Yb(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function hF(e){return e.split(":")[0]}var wd=(()=>{class e extends Bm{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=v(Yn).injector;destroyRef=v(_n);cdr=v(pi);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Ks({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let r=this._getOptionId(n),i=Yb(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=hF(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=yr(e)))(i||e)}})();static \u0275dir=ue({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&fe("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[hi([fF]),tn]})}return e})(),Kb=(()=>{class e{_element;_renderer;_select;id;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(Yb(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||e)(C(Pt),C(en),C(wd,9))};static \u0275dir=ue({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})(),pF={provide:Ed,useExisting:gn(()=>Zb),multi:!0};function wb(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function gF(e){return e.split(":")[0]}var Zb=(()=>{class e extends Bm{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=gF(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=yr(e)))(i||e)}})();static \u0275dir=ue({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&fe("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[hi([pF]),tn]})}return e})(),Qb=(()=>{class e{_element;_renderer;_select;id;_value;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(wb(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(wb(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||e)(C(Pt),C(en),C(Zb,9))};static \u0275dir=ue({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})();var mF=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=Cn({type:e});static \u0275inj=Yt({})}return e})(),Um=class extends zo{constructor(t,n,r){super(Wm(n),zm(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,n={}){Array.isArray(t)?t.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(t,n,r={}){this.controls.splice(t,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,n={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(t,n,r={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,n={}){$b(this,!1,t),t.forEach((r,i)=>{Hb(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t=[],n={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new La(this))}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((n,r)=>{t(n,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(n=>n.enabled&&t(n))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function Db(e){return!!e&&(e.asyncValidators!==void 0||e.validators!==void 0||e.updateOn!==void 0)}var Jb=(()=>{class e{useNonNullable=!1;get nonNullable(){let n=new e;return n.useNonNullable=!0,n}group(n,r=null){let i=this._reduceControls(n),o={};return Db(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new vd(i,o)}record(n,r=null){let i=this._reduceControls(n);return new jm(i,r)}control(n,r,i){let o={};return this.useNonNullable?(Db(r)?o=r:(o.validators=r,o.asyncValidators=i),new fd(n,S(m({},o),{nonNullable:!0}))):new fd(n,r,i)}array(n,r,i){let o=n.map(s=>this._createControl(s));return new Um(o,r,i)}_reduceControls(n){let r={};return Object.keys(n).forEach(i=>{r[i]=this._createControl(n[i])}),r}_createControl(n){if(n instanceof fd)return n;if(n instanceof zo)return n;if(Array.isArray(n)){let r=n[0],i=n.length>1?n[1]:null,o=n.length>2?n[2]:null;return this.control(r,i,o)}else return this.control(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Xb=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:qb,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:Wb,useValue:n.callSetDisabledState??Gm}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=Cn({type:e});static \u0275inj=Yt({imports:[mF]})}return e})();function eT(e=6){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="";for(let r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}var tT=()=>{};var Qm={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var y=function(e,t){if(!e)throw Di(t)},Di=function(e){return new Error("Firebase Database ("+Qm.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};var iT=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},yF=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=e[n++],s=e[n++],a=e[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let o=e[n++],s=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return t.join("")},bd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){let o=e[i],s=i+1<e.length,a=s?e[i+1]:0,c=i+2<e.length,l=c?e[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4,f=(a&15)<<2|l>>6,h=l&63;c||(h=64,s||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(iT(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):yF(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){let o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;let l=i<e.length?n[e.charAt(i)]:64;++i;let d=i<e.length?n[e.charAt(i)]:64;if(++i,o==null||a==null||l==null||d==null)throw new Jm;let f=o<<2|a>>4;if(r.push(f),l!==64){let h=a<<4&240|l>>2;if(r.push(h),d!==64){let g=l<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Jm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},ev=function(e){let t=iT(e);return bd.encodeByteArray(t,!0)},ja=function(e){return ev(e).replace(/\./g,"")},Go=function(e){try{return bd.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function oT(e){return sT(void 0,e)}function sT(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:let n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(let n in t)!t.hasOwnProperty(n)||!_F(n)||(e[n]=sT(e[n],t[n]));return e}function _F(e){return e!=="__proto__"}function EF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var IF=()=>EF().__FIREBASE_DEFAULTS__,CF=()=>{if(typeof process>"u"||typeof process.env>"u")return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},wF=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&Go(e[1]);return t&&JSON.parse(t)},tv=()=>{try{return tT()||IF()||CF()||wF()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},nv=e=>tv()?.emulatorHosts?.[e],aT=e=>{let t=nv(e);if(!t)return;let n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},rv=()=>tv()?.config,iv=e=>tv()?.[`_${e}`];var Jn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}};function Ar(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}function Td(e){return p(this,null,function*(){return(yield fetch(e,{credentials:"include"})).ok})}function cT(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=m({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ja(JSON.stringify(n)),ja(JSON.stringify(s)),""].join(".")}var Va={};function DF(){let e={prod:[],emulator:[]};for(let t of Object.keys(Va))Va[t]?e.emulator.push(t):e.prod.push(t);return e}function bF(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}var nT=!1;function Sd(e,t){if(typeof window>"u"||typeof document>"u"||!Ar(window.location.host)||Va[e]===t||Va[e]||nT)return;Va[e]=t;function n(f){return`__firebase__banner__${f}`}let r="__firebase__banner",o=DF().prod.length>0;function s(){let f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,h){f.setAttribute("width","24"),f.setAttribute("id",h),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function l(){let f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{nT=!0,s()},f}function u(f,h){f.setAttribute("id",h),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){let f=bF(r),h=n("text"),g=document.getElementById(h)||document.createElement("span"),_=n("learnmore"),T=document.getElementById(_)||document.createElement("a"),N=n("preprendIcon"),pt=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){let At=f.element;a(At),u(T,_);let Yf=l();c(pt,N),At.append(pt,g,T,Yf),document.body.appendChild(At)}o?(g.innerText="Preview backend disconnected.",pt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(pt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function Ge(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ua(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ge())}function lT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ad(){let e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Md(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uT(){let e=Ge();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Sn(){return Qm.NODE_CLIENT===!0||Qm.NODE_ADMIN===!0}function Nd(){try{return typeof indexedDB=="object"}catch{return!1}}function Rd(){return new Promise((e,t)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(n){t(n)}})}function dT(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var TF="FirebaseError",Je=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=TF,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bt.prototype.create)}},bt=class{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){let r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],s=o?SF(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Je(i,a,r)}};function SF(e,t){return e.replace(AF,(n,r)=>{let i=t[r];return i!=null?String(i):`<${r}?>`})}var AF=/\{\$([^}]+)}/g;function qo(e){return JSON.parse(e)}function be(e){return JSON.stringify(e)}var fT=function(e){let t={},n={},r={},i="";try{let o=e.split(".");t=qo(Go(o[0])||""),n=qo(Go(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}};var hT=function(e){let t=fT(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},pT=function(e){let t=fT(e).claims;return typeof t=="object"&&t.admin===!0};function cn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function bi(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function Ba(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ha(e,t,n){let r={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Bt(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let o=e[i],s=t[i];if(rT(o)&&rT(s)){if(!Bt(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function rT(e){return e!==null&&typeof e=="object"}function Mr(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}var Dd=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);let r=this.W_;if(typeof t=="string")for(let d=0;d<16;d++)r[d]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^o&(s^a),u=1518500249):(l=o^s^a,u=1859775393):d<60?(l=o&s|a&(o|s),u=2400959708):(l=o^s^a,u=3395469782);let f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);let r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(o[s]=t.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=t[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let t=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)t[r]=this.chain_[i]>>o&255,++r;return t}};function gT(e,t){let n=new Xm(e,t);return n.subscribe.bind(n)}var Xm=class{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");MF(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=Zm),i.error===void 0&&(i.error=Zm),i.complete===void 0&&(i.complete=Zm);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function MF(e,t){if(typeof e!="object"||e===null)return!1;for(let n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Zm(){}function Yo(e,t){return`${e} failed: ${t} argument `}var mT=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,y(r<e.length,"Surrogate pair missing trail surrogate.");let s=e.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},$a=function(e){let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};var NF=1e3,RF=2,xF=14400*1e3,OF=.5;function ov(e,t=NF,n=RF){let r=t*Math.pow(n,e),i=Math.round(OF*r*(Math.random()-.5)*2);return Math.min(xF,r+i)}function Ee(e){return e&&e._delegate?e._delegate:e}var xe=class{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var Ti="[DEFAULT]";var xd=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){let r=new Jn;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){let n=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(PF(t))try{this.getOrInitializeService({instanceIdentifier:Ti})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=Ti){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return p(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=Ti){return this.instances.has(t)}getOptions(t=Ti){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(t,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(t),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&t(o,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:kF(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Ti){return this.component?this.component.multipleInstances?t:Ti:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function kF(e){return e===Ti?void 0:e}function PF(e){return e.instantiationMode==="EAGER"}var Wa=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let n=new xd(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}};var FF=[],te=(function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e})(te||{}),LF={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},VF=te.INFO,jF={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},UF=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=jF[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},An=class{constructor(t){this.name=t,this._logLevel=VF,this._logHandler=UF,this._userLogHandler=null,FF.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in te))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?LF[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...t),this._logHandler(this,te.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...t),this._logHandler(this,te.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,te.INFO,...t),this._logHandler(this,te.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,te.WARN,...t),this._logHandler(this,te.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...t),this._logHandler(this,te.ERROR,...t)}};var BF=(e,t)=>t.some(n=>e instanceof n),vT,yT;function HF(){return vT||(vT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $F(){return yT||(yT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var _T=new WeakMap,av=new WeakMap,ET=new WeakMap,sv=new WeakMap,lv=new WeakMap;function WF(e){let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{n(Mn(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)});return t.then(n=>{n instanceof IDBCursor&&_T.set(n,e)}).catch(()=>{}),lv.set(t,e),t}function zF(e){if(av.has(e))return;let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});av.set(e,t)}var cv={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return av.get(e);if(t==="objectStoreNames")return e.objectStoreNames||ET.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function IT(e){cv=e(cv)}function GF(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){let r=e.call(Od(this),t,...n);return ET.set(r,t.sort?t.sort():[t]),Mn(r)}:$F().includes(e)?function(...t){return e.apply(Od(this),t),Mn(_T.get(this))}:function(...t){return Mn(e.apply(Od(this),t))}}function qF(e){return typeof e=="function"?GF(e):(e instanceof IDBTransaction&&zF(e),BF(e,HF())?new Proxy(e,cv):e)}function Mn(e){if(e instanceof IDBRequest)return WF(e);if(sv.has(e))return sv.get(e);let t=qF(e);return t!==e&&(sv.set(e,t),lv.set(t,e)),t}var Od=e=>lv.get(e);function kd(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(e,t),a=Mn(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Mn(s.result),c.oldVersion,c.newVersion,Mn(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var YF=["get","getKey","getAll","getAllKeys","count"],KF=["put","add","delete","clear"],uv=new Map;function CT(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(uv.get(t))return uv.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,i=KF.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||YF.includes(n)))return;let o=function(s,...a){return p(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return uv.set(t,o),o}IT(e=>S(m({},e),{get:(t,n,r)=>CT(t,n)||e.get(t,n,r),has:(t,n)=>!!CT(t,n)||e.has(t,n)}));var fv=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ZF(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function ZF(e){return e.getComponent()?.type==="VERSION"}var hv="@firebase/app",wT="0.14.6";var Xn=new An("@firebase/app"),QF="@firebase/app-compat",JF="@firebase/analytics-compat",XF="@firebase/analytics",eL="@firebase/app-check-compat",tL="@firebase/app-check",nL="@firebase/auth",rL="@firebase/auth-compat",iL="@firebase/database",oL="@firebase/data-connect",sL="@firebase/database-compat",aL="@firebase/functions",cL="@firebase/functions-compat",lL="@firebase/installations",uL="@firebase/installations-compat",dL="@firebase/messaging",fL="@firebase/messaging-compat",hL="@firebase/performance",pL="@firebase/performance-compat",gL="@firebase/remote-config",mL="@firebase/remote-config-compat",vL="@firebase/storage",yL="@firebase/storage-compat",_L="@firebase/firestore",EL="@firebase/ai",IL="@firebase/firestore-compat",CL="firebase",wL="12.6.0";var pv="[DEFAULT]",DL={[hv]:"fire-core",[QF]:"fire-core-compat",[XF]:"fire-analytics",[JF]:"fire-analytics-compat",[tL]:"fire-app-check",[eL]:"fire-app-check-compat",[nL]:"fire-auth",[rL]:"fire-auth-compat",[iL]:"fire-rtdb",[oL]:"fire-data-connect",[sL]:"fire-rtdb-compat",[aL]:"fire-fn",[cL]:"fire-fn-compat",[lL]:"fire-iid",[uL]:"fire-iid-compat",[dL]:"fire-fcm",[fL]:"fire-fcm-compat",[hL]:"fire-perf",[pL]:"fire-perf-compat",[gL]:"fire-rc",[mL]:"fire-rc-compat",[vL]:"fire-gcs",[yL]:"fire-gcs-compat",[_L]:"fire-fst",[IL]:"fire-fst-compat",[EL]:"fire-vertex","fire-js":"fire-js",[CL]:"fire-js-all"};var Pd=new Map,bL=new Map,gv=new Map;function DT(e,t){try{e.container.addComponent(t)}catch(n){Xn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ht(e){let t=e.name;if(gv.has(t))return Xn.debug(`There were multiple attempts to register component ${t}.`),!1;gv.set(t,e);for(let n of Pd.values())DT(n,e);for(let n of bL.values())DT(n,e);return!0}function ln(e,t){let n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Tt(e){return e==null?!1:e.settings!==void 0}var TL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nr=new bt("app","Firebase",TL);var mv=class{constructor(t,n,r){this._isDeleted=!1,this._options=m({},t),this._config=m({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xe("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}};var Rr=wL;function _v(e,t={}){let n=e;typeof t!="object"&&(t={name:t});let r=m({name:pv,automaticDataCollectionEnabled:!0},t),i=r.name;if(typeof i!="string"||!i)throw Nr.create("bad-app-name",{appName:String(i)});if(n||(n=rv()),!n)throw Nr.create("no-options");let o=Pd.get(i);if(o){if(Bt(n,o.options)&&Bt(r,o.config))return o;throw Nr.create("duplicate-app",{appName:i})}let s=new Wa(i);for(let c of gv.values())s.addComponent(c);let a=new mv(n,r,s);return Pd.set(i,a),a}function Si(e=pv){let t=Pd.get(e);if(!t&&e===pv&&rv())return _v();if(!t)throw Nr.create("no-app",{appName:e});return t}function Ve(e,t,n){let r=DL[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=t.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${t}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Xn.warn(s.join(" "));return}ht(new xe(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}var SL="firebase-heartbeat-database",AL=1,za="firebase-heartbeat-store",dv=null;function AT(){return dv||(dv=kd(SL,AL,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(za)}catch(n){console.warn(n)}}}}).catch(e=>{throw Nr.create("idb-open",{originalErrorMessage:e.message})})),dv}function ML(e){return p(this,null,function*(){try{let n=(yield AT()).transaction(za),r=yield n.objectStore(za).get(MT(e));return yield n.done,r}catch(t){if(t instanceof Je)Xn.warn(t.message);else{let n=Nr.create("idb-get",{originalErrorMessage:t?.message});Xn.warn(n.message)}}})}function bT(e,t){return p(this,null,function*(){try{let r=(yield AT()).transaction(za,"readwrite");yield r.objectStore(za).put(t,MT(e)),yield r.done}catch(n){if(n instanceof Je)Xn.warn(n.message);else{let r=Nr.create("idb-set",{originalErrorMessage:n?.message});Xn.warn(r.message)}}})}function MT(e){return`${e.name}!${e.options.appId}`}var NL=1024,RL=30,vv=class{constructor(t){this.container=t,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new yv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=TT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>RL){let i=OL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Xn.warn(t)}})}getHeartbeatsHeader(){return p(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=TT(),{heartbeatsToSend:n,unsentEntries:r}=xL(this._heartbeatsCache.heartbeats),i=ja(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Xn.warn(t),""}})}};function TT(){return new Date().toISOString().substring(0,10)}function xL(e,t=NL){let n=[],r=e.slice();for(let i of e){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),ST(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ST(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var yv=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return Nd()?Rd().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield ML(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return bT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return bT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return})}};function ST(e){return ja(JSON.stringify({version:2,heartbeats:e})).length}function OL(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function kL(e){ht(new xe("platform-logger",t=>new fv(t),"PRIVATE")),ht(new xe("heartbeat",t=>new vv(t),"PRIVATE")),Ve(hv,wT,e),Ve(hv,wT,"esm2020"),Ve("fire-js","")}kL("");var NT="@firebase/database",RT="1.1.0";var by="";function PL(e){by=e}var Sv=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),be(n))}get(t){let n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:qo(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var Av=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return cn(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var cS=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Sv(t)}}catch{}return new Av},Mi=cS("localStorage"),Mv=cS("sessionStorage");var Qo=new An("@firebase/database"),FL=(function(){let e=1;return function(){return e++}})(),lS=function(e){let t=mT(e),n=new Dd;n.update(t);let r=n.digest();return bd.encodeByteArray(r)},fc=function(...e){let t="";for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=fc.apply(null,r):typeof r=="object"?t+=be(r):t+=r,t+=" "}return t},Ni=null,xT=!0,LL=function(e,t){y(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(Qo.logLevel=te.VERBOSE,Ni=Qo.log.bind(Qo),t&&Mv.set("logging_enabled",!0)):typeof e=="function"?Ni=e:(Ni=null,Mv.remove("logging_enabled"))},je=function(...e){if(xT===!0&&(xT=!1,Ni===null&&Mv.get("logging_enabled")===!0&&LL(!0)),Ni){let t=fc.apply(null,e);Ni(t)}},hc=function(e){return function(...t){je(e,...t)}},Nv=function(...e){let t="FIREBASE INTERNAL ERROR: "+fc(...e);Qo.error(t)},er=function(...e){let t=`FIREBASE FATAL ERROR: ${fc(...e)}`;throw Qo.error(t),new Error(t)},et=function(...e){let t="FIREBASE WARNING: "+fc(...e);Qo.warn(t)},VL=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&et("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Ty=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},jL=function(e){if(Sn()||document.readyState==="complete")e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},xi="[MIN_NAME]",Pr="[MAX_NAME]",ki=function(e,t){if(e===t)return 0;if(e===xi||t===Pr)return-1;if(t===xi||e===Pr)return 1;{let n=OT(e),r=OT(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1}},UL=function(e,t){return e===t?0:e<t?-1:1},Ga=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+be(t))},Sy=function(e){if(typeof e!="object"||e===null)return be(e);let t=[];for(let r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)r!==0&&(n+=","),n+=be(t[r]),n+=":",n+=Sy(e[t[r]]);return n+="}",n},uS=function(e,t){let n=e.length;if(n<=t)return[e];let r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Ue(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var dS=function(e){y(!Ty(e),"Invalid JSON number");let t=11,n=52,r=(1<<t-1)-1,i,o,s,a,c;e===0?(o=0,s=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),r),o=a+r,s=Math.round(e*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(e/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},BL=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},HL=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function $L(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");let r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}var WL=new RegExp("^-?(0*)\\d{1,10}$"),zL=-2147483648,GL=2147483647,OT=function(e){if(WL.test(e)){let t=Number(e);if(t>=zL&&t<=GL)return t}return null},as=function(e){try{e()}catch(t){setTimeout(()=>{let n=t.stack||"";throw et("Exception was thrown by user callback.",n),t},Math.floor(0))}},qL=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Qa=function(e,t){let n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var Rv=class{constructor(t,n){this.appCheckProvider=n,this.appName=t.name,Tt(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.appCheckProvider?.get().then(n=>n.addTokenListener(t))}notifyForInvalidToken(){et(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var xv=class{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(je("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',et(t)}},Ja=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),Ld="5",fS="v",hS="s",pS="r",gS="f",mS=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,vS="ls",yS="p",Ov="ac",_S="websocket",ES="long_polling";var Vd=class{constructor(t,n,r,i,o=!1,s="",a=!1,c=!1,l=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Mi.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Mi.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}};function YL(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function IS(e,t,n){y(typeof t=="string","typeof type must == string"),y(typeof n=="object","typeof params must == object");let r;if(t===_S)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===ES)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);YL(e)&&(n.ns=e.namespace);let i=[];return Ue(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var kv=class{constructor(){this.counters_={}}incrementCounter(t,n=1){cn(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return oT(this.counters_)}};var Ev={},Iv={};function Ay(e){let t=e.toString();return Ev[t]||(Ev[t]=new kv),Ev[t]}function KL(e,t){let n=e.toString();return Iv[n]||(Iv[n]=t()),Iv[n]}var Pv=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&as(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var kT="start",ZL="close",QL="pLPCommand",JL="pRTLPCB",CS="id",wS="pw",DS="ser",XL="cb",eV="seg",tV="ts",nV="d",rV="dframe",bS=1870,TS=30,iV=bS-TS,oV=25e3,sV=3e4,Fv=class e{constructor(t,n,r,i,o,s,a){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hc(t),this.stats_=Ay(n),this.urlFn=c=>(this.appCheckToken&&(c[Ov]=this.appCheckToken),IS(n,ES,c))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Pv(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(sV)),jL(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Lv((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===kT)this.id=a,this.password=c;else if(s===ZL)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[kT]="t",r[DS]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[XL]=this.scriptTagHolder.uniqueCallbackIdentifier),r[fS]=Ld,this.transportSessionId&&(r[hS]=this.transportSessionId),this.lastSessionId&&(r[vS]=this.lastSessionId),this.applicationId&&(r[yS]=this.applicationId),this.appCheckToken&&(r[Ov]=this.appCheckToken),typeof location<"u"&&location.hostname&&mS.test(location.hostname)&&(r[pS]=gS);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return Sn()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!BL()&&!HL()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let n=be(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=ev(n),i=uS(r,iV);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,n){if(Sn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[rV]="t",r[CS]=t,r[wS]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let n=be(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Lv=class e{constructor(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Sn())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=FL(),window[QL+this.uniqueCallbackIdentifier]=t,window[JL+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){je("frame writing exception"),a.stack&&je(a.stack),je(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||je("No IE domain setting required")}catch{let r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[CS]=this.myID,t[wS]=this.myPW,t[DS]=this.currentSerial;let n=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+TS+r.length<=bS;){let s=this.pendingSegs.shift();r=r+"&"+eV+i+"="+s.seg+"&"+tV+i+"="+s.ts+"&"+nV+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(oV)),o=()=>{clearTimeout(i),r()};this.addTag(t,o)}addTag(t,n){Sn()?this.doNodeLongPoll(t,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{je("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var aV=16384,cV=45e3,jd=null;typeof MozWebSocket<"u"?jd=MozWebSocket:typeof WebSocket<"u"&&(jd=WebSocket);var qa=(()=>{class e{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hc(this.connId),this.stats_=Ay(r),this.connURL=e.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[fS]=Ld,!Sn()&&typeof location<"u"&&location.hostname&&mS.test(location.hostname)&&(a[pS]=gS),r&&(a[hS]=r),i&&(a[vS]=i),o&&(a[Ov]=o),s&&(a[yS]=s),IS(n,_S,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Mi.set("previous_websocket_failure",!0);try{let i;if(Sn()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Ld}/${by}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new jd(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&jd!==null&&!e.forceDisallow_}static previouslyFailed(){return Mi.isInMemoryStorage||Mi.get("previous_websocket_failure")===!0}markConnectionHealthy(){Mi.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=qo(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(y(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=be(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=uS(r,aV);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(cV))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),lV=(()=>{class e{static get ALL_TRANSPORTS(){return[Fv,qa]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(n){this.initTransports_(n)}initTransports_(n){let r=qa&&qa.isAvailable(),i=r&&!qa.previouslyFailed();if(n.webSocketOnly&&(r||et("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[qa];else{let o=this.transports_=[];for(let s of e.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),uV=6e4,dV=5e3,fV=10*1024,hV=100*1024,Cv="t",PT="d",pV="s",FT="r",gV="e",LT="o",VT="a",jT="n",UT="p",mV="h",Vv=class{constructor(t,n,r,i,o,s,a,c,l,u){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hc("c:"+this.id+":"),this.transportManager_=new lV(n),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Qa(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>hV?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>fV?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){let n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Cv in t){let n=t[Cv];n===VT?this.upgradeIfSecondaryHealthy_():n===FT?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===LT&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let n=Ga("t",t),r=Ga("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:UT,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:VT,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:jT,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let n=Ga("t",t),r=Ga("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let n=Ga(Cv,t);if(PT in t){let r=t[PT];if(n===mV){let i=m({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===jT){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===pV?this.onConnectionShutdown_(r):n===FT?this.onReset_(r):n===gV?Nv("Server Error: "+r):n===LT?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Nv("Unknown control packet command: "+n)}}onHandshake_(t){let n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Ld!==r&&et("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Qa(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(uV))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Qa(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(dV))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:UT,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Mi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Ud=class{put(t,n,r,i){}merge(t,n,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}};var Bd=class{constructor(t){this.allowedEvents_=t,this.listeners_={},y(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){let r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});let i=this.getInitialEvent(t);i&&n.apply(r,i)}off(t,n,r){this.validateEventType_(t);let i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(t){y(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}};var Hd=class e extends Bd{static getInstance(){return new e}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ua()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return y(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var BT=32,HT=768,Q=class{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}};function K(){return new Q("")}function $(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Fr(e){return e.pieces_.length-e.pieceNum_}function oe(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Q(e.pieces_,t)}function My(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function vV(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function nc(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function SS(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Q(t,0)}function he(e,t){let n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Q)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{let r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Q(n,0)}function W(e){return e.pieceNum_>=e.pieces_.length}function Xe(e,t){let n=$(e),r=$(t);if(n===null)return t;if(n===r)return Xe(oe(e),oe(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function yV(e,t){let n=nc(e,0),r=nc(t,0);for(let i=0;i<n.length&&i<r.length;i++){let o=ki(n[i],r[i]);if(o!==0)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Ny(e,t){if(Fr(e)!==Fr(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Ht(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Fr(e)>Fr(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var jv=class{constructor(t,n){this.errorPrefix_=n,this.parts_=nc(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=$a(this.parts_[r]);AS(this)}};function _V(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=$a(t),AS(e)}function EV(e){let t=e.parts_.pop();e.byteLength_-=$a(t),e.parts_.length>0&&(e.byteLength_-=1)}function AS(e){if(e.byteLength_>HT)throw new Error(e.errorPrefix_+"has a key path longer than "+HT+" bytes ("+e.byteLength_+").");if(e.parts_.length>BT)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+BT+") or object contains a cycle "+Ai(e))}function Ai(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var Uv=class e extends Bd{static getInstance(){return new e}constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(t){return y(t==="visible","Unknown event type: "+t),[this.visible_]}};var Ya=1e3,IV=300*1e3,$T=30*1e3,CV=1.3,wV=3e4,DV="server_kill",WT=3,Ry=(()=>{class e extends Ud{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=e.nextPersistentConnectionId_++,this.log_=hc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ya,this.maxReconnectDelay_=IV,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Sn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Uv.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Hd.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(be(s)),y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new Jn,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),y(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;e.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&cn(n,"w")){let i=bi(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();et(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||pT(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=$T)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=hT(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+be(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):Nv("Unrecognized action received from server: "+be(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ya,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Ya,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>wV&&(this.reconnectDelay_=Ya),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*CV)}this.onConnectStatus_(!1)}establishConnection_(){return p(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){y(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?je("getToken() completed but was canceled"):(je("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new Vv(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,g=>{et(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(DV)},s))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&et(f),l())}}})}interrupt(n){je("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){je("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Ba(this.interruptReasons_)&&(this.reconnectDelay_=Ya,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>Sy(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new Q(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){je("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=WT&&(this.reconnectDelay_=$T,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){je("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=WT&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Sn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+by.replace(/\./g,"-")]=1,Ua()?n["framework.cordova"]=1:Md()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Hd.getInstance().currentlyOnline();return Ba(this.interruptReasons_)&&n}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),z=class e{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new e(t,n)}};var Jo=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){let r=new z(xi,t),i=new z(xi,n);return this.compare(r,i)!==0}minPost(){return z.MIN}};var Fd,$d=class extends Jo{static get __EMPTY_NODE(){return Fd}static set __EMPTY_NODE(t){Fd=t}compare(t,n){return ki(t.name,n.name)}isDefinedOn(t){throw Di("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return z.MIN}maxPost(){return new z(Pr,Fd)}makePost(t,n){return y(typeof t=="string","KeyIndex indexValue must always be a string."),new z(t,Fd)}toString(){return".key"}},Ri=new $d;var Zo=class{constructor(t,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(t=t,s=n?r(t.key,n):1,i&&(s*=-1),s<0)this.isReverse_?t=t.left:t=t.right;else if(s===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},un=(()=>{class e{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??e.RED,this.left=o??$t.EMPTY_NODE,this.right=s??$t.EMPTY_NODE}copy(n,r,i,o,s){return new e(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return $t.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return $t.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),Bv=class{copy(t,n,r,i,o){return this}insert(t,n,r){return new un(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},$t=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,un.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,un.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Zo(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new Zo(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new Zo(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new Zo(this.root_,null,this.comparator_,!0,t)}};$t.EMPTY_NODE=new Bv;function bV(e,t){return ki(e.name,t.name)}function xy(e,t){return ki(e,t)}var Hv;function TV(e){Hv=e}var MS=function(e){return typeof e=="number"?"number:"+dS(e):"string:"+e},NS=function(e){if(e.isLeafNode()){let t=e.val();y(typeof t=="string"||typeof t=="number"||typeof t=="object"&&cn(t,".sv"),"Priority must be a string or number.")}else y(e===Hv||e.isEmpty(),"priority of unexpected type.");y(e===Hv||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var zT,Xo=(()=>{class e{static set __childrenNodeConstructor(n){zT=n}static get __childrenNodeConstructor(){return zT}constructor(n,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,y(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),NS(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return W(n)?this:$(n)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=$(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(y(i!==".priority"||Fr(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(oe(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+MS(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=dS(this.value_):n+=this.value_,this.lazyHash_=lS(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(y(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(r),s=e.VALUE_TYPE_ORDER.indexOf(i);return y(o>=0,"Unknown leaf type: "+r),y(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),RS,xS;function SV(e){RS=e}function AV(e){xS=e}var $v=class extends Jo{compare(t,n){let r=t.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?ki(t.name,n.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return z.MIN}maxPost(){return new z(Pr,new Xo("[PRIORITY-POST]",xS))}makePost(t,n){let r=RS(t);return new z(n,new Xo("[PRIORITY-POST]",r))}toString(){return".priority"}},ce=new $v;var MV=Math.log(2),Wv=class{constructor(t){let n=o=>parseInt(Math.log(o)/MV,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;let i=r(this.count);this.bits_=t+1&i}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},Wd=function(e,t,n,r){e.sort(t);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=e[c],f=n?n(d):d,new un(f,d.node,un.BLACK,null,null);{let h=parseInt(u/2,10)+c,g=i(c,h),_=i(h+1,l);return d=e[h],f=n?n(d):d,new un(f,d.node,un.BLACK,g,_)}},o=function(c){let l=null,u=null,d=e.length,f=function(g,_){let T=d-g,N=d;d-=g;let pt=i(T+1,N),At=e[T],Yf=n?n(At):At;h(new un(Yf,At.node,_,null,pt))},h=function(g){l?(l.left=g,l=g):(u=g,l=g)};for(let g=0;g<c.count;++g){let _=c.nextBitIsOne(),T=Math.pow(2,c.count-(g+1));_?f(T,un.BLACK):(f(T,un.BLACK),f(T,un.RED))}return u},s=new Wv(e.length),a=o(s);return new $t(r||t,a)};var wv,Ko={},es=class e{static get Default(){return y(Ko&&ce,"ChildrenNode.ts has not been loaded"),wv=wv||new e({".priority":Ko},{".priority":ce}),wv}constructor(t,n){this.indexes_=t,this.indexSet_=n}get(t){let n=bi(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof $t?n:null}hasIndex(t){return cn(this.indexSet_,t.toString())}addIndex(t,n){y(t!==Ri,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(z.Wrap),s=o.getNext();for(;s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=Wd(r,t.getCompare()):a=Ko;let c=t.toString(),l=m({},this.indexSet_);l[c]=t;let u=m({},this.indexes_);return u[c]=a,new e(u,l)}addToIndexes(t,n){let r=Ha(this.indexes_,(i,o)=>{let s=bi(this.indexSet_,o);if(y(s,"Missing index implementation for "+o),i===Ko)if(s.isDefinedOn(t.node)){let a=[],c=n.getIterator(z.Wrap),l=c.getNext();for(;l;)l.name!==t.name&&a.push(l),l=c.getNext();return a.push(t),Wd(a,s.getCompare())}else return Ko;else{let a=n.get(t.name),c=i;return a&&(c=c.remove(new z(t.name,a))),c.insert(t,t.node)}});return new e(r,this.indexSet_)}removeFromIndexes(t,n){let r=Ha(this.indexes_,i=>{if(i===Ko)return i;{let o=n.get(t.name);return o?i.remove(new z(t.name,o)):i}});return new e(r,this.indexSet_)}};var Ka,j=(()=>{class e{static get EMPTY_NODE(){return Ka||(Ka=new e(new $t(xy),null,es.Default))}constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&NS(this.priorityNode_),this.children_.isEmpty()&&y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ka}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Ka:r}}getChild(n){let r=$(n);return r===null?this:this.getImmediateChild(r).getChild(oe(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(y(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new z(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?Ka:this.priorityNode_;return new e(o,a,s)}}updateChild(n,r){let i=$(n);if(i===null)return r;{y($(n)!==".priority"||Fr(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(oe(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(ce,(a,c)=>{r[a]=c.val(n),i++,s&&e.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+MS(this.getPriority().val())+":"),this.forEachChild(ce,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":lS(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new z(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new z(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new z(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,z.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,z.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===pc?-1:0}withIndex(n){if(n===Ri||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Ri||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(ce),o=r.getIterator(ce),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Ri?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),zv=class extends j{constructor(){super(new $t(xy),j.EMPTY_NODE,es.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return j.EMPTY_NODE}isEmpty(){return!1}},pc=new zv;Object.defineProperties(z,{MIN:{value:new z(xi,j.EMPTY_NODE)},MAX:{value:new z(Pr,pc)}});$d.__EMPTY_NODE=j.EMPTY_NODE;Xo.__childrenNodeConstructor=j;TV(pc);AV(pc);var NV=!0;function Ae(e,t=null){if(e===null)return j.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),y(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let n=e;return new Xo(n,Ae(t))}if(!(e instanceof Array)&&NV){let n=[],r=!1;if(Ue(e,(s,a)=>{if(s.substring(0,1)!=="."){let c=Ae(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new z(s,c)))}}),n.length===0)return j.EMPTY_NODE;let o=Wd(n,bV,s=>s.name,xy);if(r){let s=Wd(n,ce.getCompare());return new j(o,Ae(t),new es({".priority":s},{".priority":ce}))}else return new j(o,Ae(t),es.Default)}else{let n=j.EMPTY_NODE;return Ue(e,(r,i)=>{if(cn(e,r)&&r.substring(0,1)!=="."){let o=Ae(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(Ae(t))}}SV(Ae);var rc=class extends Jo{constructor(t){super(),this.indexPath_=t,y(!W(t)&&$(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){let r=this.extractChild(t.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?ki(t.name,n.name):o}makePost(t,n){let r=Ae(t),i=j.EMPTY_NODE.updateChild(this.indexPath_,r);return new z(n,i)}maxPost(){let t=j.EMPTY_NODE.updateChild(this.indexPath_,pc);return new z(Pr,t)}toString(){return nc(this.indexPath_,0).join("/")}};var Gv=class extends Jo{compare(t,n){let r=t.node.compareTo(n.node);return r===0?ki(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return z.MIN}maxPost(){return z.MAX}makePost(t,n){let r=Ae(t);return new z(n,r)}toString(){return".value"}},OS=new Gv;function kS(e){return{type:"value",snapshotNode:e}}function ts(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function ic(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function oc(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function RV(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var sc=class{constructor(t){this.index_=t}updateChild(t,n,r,i,o,s){y(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=t.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?t.hasChild(n)?s.trackChildChange(ic(n,a)):y(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ts(n,r)):s.trackChildChange(oc(n,r,a))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(ce,(i,o)=>{n.hasChild(i)||r.trackChildChange(ic(i,o))}),n.isLeafNode()||n.forEachChild(ce,(i,o)=>{if(t.hasChild(i)){let s=t.getImmediateChild(i);s.equals(o)||r.trackChildChange(oc(i,o,s))}else r.trackChildChange(ts(i,o))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?j.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var zd=class e{constructor(t){this.indexedFilter_=new sc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,i,o,s){return this.matches(new z(n,r))||(r=j.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,o,s)}updateFullNode(t,n,r){n.isLeafNode()&&(n=j.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(j.EMPTY_NODE);let o=this;return n.forEachChild(ce,(s,a)=>{o.matches(new z(s,a))||(i=i.updateImmediateChild(s,j.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}};var qv=class{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new zd(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,i,o,s){return this.rangedFilter_.matches(new z(n,r))||(r=j.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,o,s):this.fullLimitUpdateChild_(t,n,r,o,s)}updateFullNode(t,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=j.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=j.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(j.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,j.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(f,h)=>d(h,f)}else s=this.index_.getCompare();let a=t;y(a.numChildren()===this.limit_,"");let c=new z(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:s(f,c);if(u&&!r.isEmpty()&&h>=0)return o?.trackChildChange(oc(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(ic(n,d));let _=a.updateImmediateChild(n,j.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(o?.trackChildChange(ts(f.name,f.node)),_.updateImmediateChild(f.name,f.node)):_}}else return r.isEmpty()?t:u&&s(l,c)>=0?(o!=null&&(o.trackChildChange(ic(l.name,l.node)),o.trackChildChange(ts(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,j.EMPTY_NODE)):t}};var Yv=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ce}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:xi}hasEnd(){return this.endSet_}getIndexEndValue(){return y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Pr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return y(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ce}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function xV(e){return e.loadsAllData()?new sc(e.getIndex()):e.hasLimit()?new qv(e):new zd(e)}function OV(e,t,n){let r=e.copy();return r.startSet_=!0,t===void 0&&(t=null),r.indexStartValue_=t,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function kV(e,t,n){let r=e.copy();return r.endSet_=!0,t===void 0&&(t=null),r.indexEndValue_=t,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function PV(e,t){let n=e.copy();return n.index_=t,n}function GT(e){let t={};if(e.isDefault())return t;let n;if(e.index_===ce?n="$priority":e.index_===OS?n="$value":e.index_===Ri?n="$key":(y(e.index_ instanceof rc,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=be(n),e.startSet_){let r=e.startAfterSet_?"startAfter":"startAt";t[r]=be(e.indexStartValue_),e.startNameSet_&&(t[r]+=","+be(e.indexStartName_))}if(e.endSet_){let r=e.endBeforeSet_?"endBefore":"endAt";t[r]=be(e.indexEndValue_),e.endNameSet_&&(t[r]+=","+be(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function qT(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==ce&&(t.i=e.index_.toString()),t}var Kv=class e extends Ud{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(y(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,n,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=hc("p:rest:"),this.listens_={}}listen(t,n,r,i){let o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);let s=e.getListenId_(t,r),a={};this.listens_[s]=a;let c=GT(t._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),bi(this.listens_,s)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(t,n){let r=e.getListenId_(t,n);delete this.listens_[r]}get(t){let n=GT(t._queryParams),r=t._path.toString(),i=new Jn;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Mr(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=qo(a.responseText)}catch{et("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&et("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var Zv=class{constructor(){this.rootNode_=j.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}};function Gd(){return{value:null,children:new Map}}function PS(e,t,n){if(W(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let r=$(t);e.children.has(r)||e.children.set(r,Gd());let i=e.children.get(r);t=oe(t),PS(i,t,n)}}function Qv(e,t,n){e.value!==null?n(t,e.value):FV(e,(r,i)=>{let o=new Q(t.toString()+"/"+r);Qv(i,o,n)})}function FV(e,t){e.children.forEach((n,r)=>{t(r,n)})}var Jv=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),n=m({},t);return this.last_&&Ue(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=t,n}};var YT=10*1e3,LV=30*1e3,VV=300*1e3,Xv=class{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Jv(t);let r=YT+(LV-YT)*Math.random();Qa(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let t=this.statsListener_.get(),n={},r=!1;Ue(t,(i,o)=>{o>0&&cn(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Qa(this.reportStats_.bind(this),Math.floor(Math.random()*2*VV))}};var Nn=(function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e})(Nn||{});function Oy(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function ky(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Py(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var ey=class e{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=Nn.ACK_USER_WRITE,this.source=Oy()}operationForChild(t){if(W(this.path)){if(this.affectedTree.value!=null)return y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Q(t));return new e(K(),n,this.revert)}}else return y($(this.path)===t,"operationForChild called for unrelated child."),new e(oe(this.path),this.affectedTree,this.revert)}};var qd=class e{constructor(t,n){this.source=t,this.path=n,this.type=Nn.LISTEN_COMPLETE}operationForChild(t){return W(this.path)?new e(this.source,K()):new e(this.source,oe(this.path))}};var ns=class e{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=Nn.OVERWRITE}operationForChild(t){return W(this.path)?new e(this.source,K(),this.snap.getImmediateChild(t)):new e(this.source,oe(this.path),this.snap)}};var ac=class e{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=Nn.MERGE}operationForChild(t){if(W(this.path)){let n=this.children.subtree(new Q(t));return n.isEmpty()?null:n.value?new ns(this.source,K(),n.value):new e(this.source,K(),n)}else return y($(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,oe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Rn=class{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(W(t))return this.isFullyInitialized()&&!this.filtered_;let n=$(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var ty=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function jV(e,t,n,r){let i=[],o=[];return t.forEach(s=>{s.type==="child_changed"&&e.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(RV(s.childName,s.snapshotNode))}),Za(e,i,"child_removed",t,r,n),Za(e,i,"child_added",t,r,n),Za(e,i,"child_moved",o,r,n),Za(e,i,"child_changed",t,r,n),Za(e,i,"value",t,r,n),i}function Za(e,t,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>BV(e,a,c)),s.forEach(a=>{let c=UV(e,a,o);i.forEach(l=>{l.respondsTo(a.type)&&t.push(l.createEvent(c,e.query_))})})}function UV(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function BV(e,t,n){if(t.childName==null||n.childName==null)throw Di("Should only compare child_ events.");let r=new z(t.childName,t.snapshotNode),i=new z(n.childName,n.snapshotNode);return e.index_.compare(r,i)}function lf(e,t){return{eventCache:e,serverCache:t}}function Xa(e,t,n,r){return lf(new Rn(t,n,r),e.serverCache)}function FS(e,t,n,r){return lf(e.eventCache,new Rn(t,n,r))}function Yd(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Oi(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Dv,HV=()=>(Dv||(Dv=new $t(UL)),Dv),tt=class e{static fromObject(t){let n=new e(null);return Ue(t,(r,i)=>{n=n.set(new Q(r),i)}),n}constructor(t,n=HV()){this.value=t,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:K(),value:this.value};if(W(t))return null;{let r=$(t),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(oe(t),n);return o!=null?{path:he(new Q(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(W(t))return this;{let n=$(t),r=this.children.get(n);return r!==null?r.subtree(oe(t)):new e(null)}}set(t,n){if(W(t))return new e(n,this.children);{let r=$(t),o=(this.children.get(r)||new e(null)).set(oe(t),n),s=this.children.insert(r,o);return new e(this.value,s)}}remove(t){if(W(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=$(t),r=this.children.get(n);if(r){let i=r.remove(oe(t)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new e(null):new e(this.value,o)}else return this}}get(t){if(W(t))return this.value;{let n=$(t),r=this.children.get(n);return r?r.get(oe(t)):null}}setTree(t,n){if(W(t))return n;{let r=$(t),o=(this.children.get(r)||new e(null)).setTree(oe(t),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new e(this.value,s)}}fold(t){return this.fold_(K(),t)}fold_(t,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(he(t,i),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,K(),n)}findOnPath_(t,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(W(t))return null;{let o=$(t),s=this.children.get(o);return s?s.findOnPath_(oe(t),he(n,o),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,K(),n)}foreachOnPath_(t,n,r){if(W(t))return this;{this.value&&r(n,this.value);let i=$(t),o=this.children.get(i);return o?o.foreachOnPath_(oe(t),he(n,i),r):new e(null)}}foreach(t){this.foreach_(K(),t)}foreach_(t,n){this.children.inorderTraversal((r,i)=>{i.foreach_(he(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}};var dn=class e{constructor(t){this.writeTree_=t}static empty(){return new e(new tt(null))}};function ec(e,t,n){if(W(t))return new dn(new tt(n));{let r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){let i=r.path,o=r.value,s=Xe(i,t);return o=o.updateChild(s,n),new dn(e.writeTree_.set(i,o))}else{let i=new tt(n),o=e.writeTree_.setTree(t,i);return new dn(o)}}}function ny(e,t,n){let r=e;return Ue(n,(i,o)=>{r=ec(r,he(t,i),o)}),r}function KT(e,t){if(W(t))return dn.empty();{let n=e.writeTree_.setTree(t,new tt(null));return new dn(n)}}function ry(e,t){return Pi(e,t)!=null}function Pi(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(Xe(n.path,t)):null}function ZT(e){let t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ce,(r,i)=>{t.push(new z(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&t.push(new z(r,i.value))}),t}function Or(e,t){if(W(t))return e;{let n=Pi(e,t);return n!=null?new dn(new tt(n)):new dn(e.writeTree_.subtree(t))}}function iy(e){return e.writeTree_.isEmpty()}function rs(e,t){return LS(K(),e.writeTree_,t)}function LS(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((i,o)=>{i===".priority"?(y(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=LS(he(e,i),o,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(he(e,".priority"),r)),n}}function uf(e,t){return BS(t,e)}function $V(e,t,n,r,i){y(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=ec(e.visibleWrites,t,n)),e.lastWriteId=r}function WV(e,t,n,r){y(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=ny(e.visibleWrites,t,n),e.lastWriteId=r}function zV(e,t){for(let n=0;n<e.allWrites.length;n++){let r=e.allWrites[n];if(r.writeId===t)return r}return null}function GV(e,t){let n=e.allWrites.findIndex(a=>a.writeId===t);y(n>=0,"removeWrite called with nonexistent writeId.");let r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,s=e.allWrites.length-1;for(;i&&s>=0;){let a=e.allWrites[s];a.visible&&(s>=n&&qV(a,r.path)?i=!1:Ht(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return YV(e),!0;if(r.snap)e.visibleWrites=KT(e.visibleWrites,r.path);else{let a=r.children;Ue(a,c=>{e.visibleWrites=KT(e.visibleWrites,he(r.path,c))})}return!0}else return!1}function qV(e,t){if(e.snap)return Ht(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&Ht(he(e.path,n),t))return!0;return!1}function YV(e){e.visibleWrites=VS(e.allWrites,KV,K()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function KV(e){return e.visible}function VS(e,t,n){let r=dn.empty();for(let i=0;i<e.length;++i){let o=e[i];if(t(o)){let s=o.path,a;if(o.snap)Ht(n,s)?(a=Xe(n,s),r=ec(r,a,o.snap)):Ht(s,n)&&(a=Xe(s,n),r=ec(r,K(),o.snap.getChild(a)));else if(o.children){if(Ht(n,s))a=Xe(n,s),r=ny(r,a,o.children);else if(Ht(s,n))if(a=Xe(s,n),W(a))r=ny(r,K(),o.children);else{let c=bi(o.children,$(a));if(c){let l=c.getChild(oe(a));r=ec(r,K(),l)}}}else throw Di("WriteRecord should have .snap or .children")}}return r}function jS(e,t,n,r,i){if(!r&&!i){let o=Pi(e.visibleWrites,t);if(o!=null)return o;{let s=Or(e.visibleWrites,t);if(iy(s))return n;if(n==null&&!ry(s,K()))return null;{let a=n||j.EMPTY_NODE;return rs(s,a)}}}else{let o=Or(e.visibleWrites,t);if(!i&&iy(o))return n;if(!i&&n==null&&!ry(o,K()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Ht(l.path,t)||Ht(t,l.path))},a=VS(e.allWrites,s,t),c=n||j.EMPTY_NODE;return rs(a,c)}}}function ZV(e,t,n){let r=j.EMPTY_NODE,i=Pi(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(ce,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=Or(e.visibleWrites,t);return n.forEachChild(ce,(s,a)=>{let c=rs(Or(o,new Q(s)),a);r=r.updateImmediateChild(s,c)}),ZT(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=Or(e.visibleWrites,t);return ZT(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function QV(e,t,n,r,i){y(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=he(t,n);if(ry(e.visibleWrites,o))return null;{let s=Or(e.visibleWrites,o);return iy(s)?i.getChild(n):rs(s,i.getChild(n))}}function JV(e,t,n,r){let i=he(t,n),o=Pi(e.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=Or(e.visibleWrites,i);return rs(s,r.getNode().getImmediateChild(n))}else return null}function XV(e,t){return Pi(e.visibleWrites,t)}function ej(e,t,n,r,i,o,s){let a,c=Or(e.visibleWrites,t),l=Pi(c,K());if(l!=null)a=l;else if(n!=null)a=rs(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function tj(){return{visibleWrites:dn.empty(),allWrites:[],lastWriteId:-1}}function Kd(e,t,n,r){return jS(e.writeTree,e.treePath,t,n,r)}function Fy(e,t){return ZV(e.writeTree,e.treePath,t)}function QT(e,t,n,r){return QV(e.writeTree,e.treePath,t,n,r)}function Zd(e,t){return XV(e.writeTree,he(e.treePath,t))}function nj(e,t,n,r,i,o){return ej(e.writeTree,e.treePath,t,n,r,i,o)}function Ly(e,t,n){return JV(e.writeTree,e.treePath,t,n)}function US(e,t){return BS(he(e.treePath,t),e.writeTree)}function BS(e,t){return{treePath:e,writeTree:t}}var oy=class{constructor(){this.changeMap=new Map}trackChildChange(t){let n=t.type,r=t.childName;y(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),y(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,oc(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,ic(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,ts(r,t.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,oc(r,t.snapshotNode,i.oldSnap));else throw Di("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}};var sy=class{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}},HS=new sy,cc=class{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{let r=this.optCompleteServerCache_!=null?new Rn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ly(this.writes_,t,r)}}getChildAfterChild(t,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Oi(this.viewCache_),o=nj(this.writes_,i,n,1,r,t);return o.length===0?null:o[0]}};function rj(e){return{filter:e}}function ij(e,t){y(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),y(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function oj(e,t,n,r,i){let o=new oy,s,a;if(n.type===Nn.OVERWRITE){let l=n;l.source.fromUser?s=ay(e,t,l.path,l.snap,r,i,o):(y(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!W(l.path),s=Qd(e,t,l.path,l.snap,r,i,a,o))}else if(n.type===Nn.MERGE){let l=n;l.source.fromUser?s=aj(e,t,l.path,l.children,r,i,o):(y(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),s=cy(e,t,l.path,l.children,r,i,a,o))}else if(n.type===Nn.ACK_USER_WRITE){let l=n;l.revert?s=uj(e,t,l.path,r,i,o):s=cj(e,t,l.path,l.affectedTree,r,i,o)}else if(n.type===Nn.LISTEN_COMPLETE)s=lj(e,t,n.path,r,o);else throw Di("Unknown operation type: "+n.type);let c=o.getChanges();return sj(t,s,c),{viewCache:s,changes:c}}function sj(e,t,n){let r=t.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Yd(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(kS(Yd(t)))}}function $S(e,t,n,r,i,o){let s=t.eventCache;if(Zd(r,n)!=null)return t;{let a,c;if(W(n))if(y(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let l=Oi(t),u=l instanceof j?l:j.EMPTY_NODE,d=Fy(r,u);a=e.filter.updateFullNode(t.eventCache.getNode(),d,o)}else{let l=Kd(r,Oi(t));a=e.filter.updateFullNode(t.eventCache.getNode(),l,o)}else{let l=$(n);if(l===".priority"){y(Fr(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=t.serverCache.getNode();let d=QT(r,n,u,c);d!=null?a=e.filter.updatePriority(u,d):a=s.getNode()}else{let u=oe(n),d;if(s.isCompleteForChild(l)){c=t.serverCache.getNode();let f=QT(r,n,s.getNode(),c);f!=null?d=s.getNode().getImmediateChild(l).updateChild(u,f):d=s.getNode().getImmediateChild(l)}else d=Ly(r,l,t.serverCache);d!=null?a=e.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return Xa(t,a,s.isFullyInitialized()||W(n),e.filter.filtersNodes())}}function Qd(e,t,n,r,i,o,s,a){let c=t.serverCache,l,u=s?e.filter:e.filter.getIndexedFilter();if(W(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=$(n);if(!c.isCompleteForPath(n)&&Fr(n)>1)return t;let g=oe(n),T=c.getNode().getImmediateChild(h).updateChild(g,r);h===".priority"?l=u.updatePriority(c.getNode(),T):l=u.updateChild(c.getNode(),h,T,g,HS,null)}let d=FS(t,l,c.isFullyInitialized()||W(n),u.filtersNodes()),f=new cc(i,d,o);return $S(e,d,n,i,f,a)}function ay(e,t,n,r,i,o,s){let a=t.eventCache,c,l,u=new cc(i,t,o);if(W(n))l=e.filter.updateFullNode(t.eventCache.getNode(),r,s),c=Xa(t,l,!0,e.filter.filtersNodes());else{let d=$(n);if(d===".priority")l=e.filter.updatePriority(t.eventCache.getNode(),r),c=Xa(t,l,a.isFullyInitialized(),a.isFiltered());else{let f=oe(n),h=a.getNode().getImmediateChild(d),g;if(W(f))g=r;else{let _=u.getCompleteChild(d);_!=null?My(f)===".priority"&&_.getChild(SS(f)).isEmpty()?g=_:g=_.updateChild(f,r):g=j.EMPTY_NODE}if(h.equals(g))c=t;else{let _=e.filter.updateChild(a.getNode(),d,g,f,u,s);c=Xa(t,_,a.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function JT(e,t){return e.eventCache.isCompleteForChild(t)}function aj(e,t,n,r,i,o,s){let a=t;return r.foreach((c,l)=>{let u=he(n,c);JT(t,$(u))&&(a=ay(e,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=he(n,c);JT(t,$(u))||(a=ay(e,a,u,l,i,o,s))}),a}function XT(e,t,n){return n.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function cy(e,t,n,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,l;W(n)?l=r:l=new tt(null).setTree(n,r);let u=t.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=t.serverCache.getNode().getImmediateChild(d),g=XT(e,h,f);c=Qd(e,c,new Q(d),g,i,o,s,a)}}),l.children.inorderTraversal((d,f)=>{let h=!t.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let g=t.serverCache.getNode().getImmediateChild(d),_=XT(e,g,f);c=Qd(e,c,new Q(d),_,i,o,s,a)}}),c}function cj(e,t,n,r,i,o,s){if(Zd(i,n)!=null)return t;let a=t.serverCache.isFiltered(),c=t.serverCache;if(r.value!=null){if(W(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Qd(e,t,n,c.getNode().getChild(n),i,o,a,s);if(W(n)){let l=new tt(null);return c.getNode().forEachChild(Ri,(u,d)=>{l=l.set(new Q(u),d)}),cy(e,t,n,l,i,o,a,s)}else return t}else{let l=new tt(null);return r.foreach((u,d)=>{let f=he(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),cy(e,t,n,l,i,o,a,s)}}function lj(e,t,n,r,i){let o=t.serverCache,s=FS(t,o.getNode(),o.isFullyInitialized()||W(n),o.isFiltered());return $S(e,s,n,r,HS,i)}function uj(e,t,n,r,i,o){let s;if(Zd(r,n)!=null)return t;{let a=new cc(r,t,i),c=t.eventCache.getNode(),l;if(W(n)||$(n)===".priority"){let u;if(t.serverCache.isFullyInitialized())u=Kd(r,Oi(t));else{let d=t.serverCache.getNode();y(d instanceof j,"serverChildren would be complete if leaf node"),u=Fy(r,d)}u=u,l=e.filter.updateFullNode(c,u,o)}else{let u=$(n),d=Ly(r,u,t.serverCache);d==null&&t.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=e.filter.updateChild(c,u,d,oe(n),a,o):t.eventCache.getNode().hasChild(u)?l=e.filter.updateChild(c,u,j.EMPTY_NODE,oe(n),a,o):l=c,l.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=Kd(r,Oi(t)),s.isLeafNode()&&(l=e.filter.updateFullNode(l,s,o)))}return s=t.serverCache.isFullyInitialized()||Zd(r,K())!=null,Xa(t,l,s,e.filter.filtersNodes())}}var ly=class{constructor(t,n){this.query_=t,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new sc(r.getIndex()),o=xV(r);this.processor_=rj(o);let s=n.serverCache,a=n.eventCache,c=i.updateFullNode(j.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(j.EMPTY_NODE,a.getNode(),null),u=new Rn(c,s.isFullyInitialized(),i.filtersNodes()),d=new Rn(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=lf(d,u),this.eventGenerator_=new ty(this.query_)}get query(){return this.query_}};function dj(e){return e.viewCache_.serverCache.getNode()}function fj(e){return Yd(e.viewCache_)}function hj(e,t){let n=Oi(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!W(t)&&!n.getImmediateChild($(t)).isEmpty())?n.getChild(t):null}function eS(e){return e.eventRegistrations_.length===0}function pj(e,t){e.eventRegistrations_.push(t)}function tS(e,t,n){let r=[];if(n){y(t==null,"A cancel should cancel all event registrations.");let i=e.query._path;e.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(t){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){let s=e.eventRegistrations_[o];if(!s.matches(t))i.push(s);else if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function nS(e,t,n,r){t.type===Nn.MERGE&&t.source.queryId!==null&&(y(Oi(e.viewCache_),"We should always have a full cache before handling merges"),y(Yd(e.viewCache_),"Missing event cache, even though we have a server cache"));let i=e.viewCache_,o=oj(e.processor_,i,t,n,r);return ij(e.processor_,o.viewCache),y(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,WS(e,o.changes,o.viewCache.eventCache.getNode(),null)}function gj(e,t){let n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ce,(o,s)=>{r.push(ts(o,s))}),n.isFullyInitialized()&&r.push(kS(n.getNode())),WS(e,r,n.getNode(),t)}function WS(e,t,n,r){let i=r?[r]:e.eventRegistrations_;return jV(e.eventGenerator_,t,n,i)}var Jd,Xd=class{constructor(){this.views=new Map}};function mj(e){y(!Jd,"__referenceConstructor has already been defined"),Jd=e}function vj(){return y(Jd,"Reference.ts has not been loaded"),Jd}function yj(e){return e.views.size===0}function Vy(e,t,n,r){let i=t.source.queryId;if(i!==null){let o=e.views.get(i);return y(o!=null,"SyncTree gave us an op for an invalid query."),nS(o,t,n,r)}else{let o=[];for(let s of e.views.values())o=o.concat(nS(s,t,n,r));return o}}function zS(e,t,n,r,i){let o=t._queryIdentifier,s=e.views.get(o);if(!s){let a=Kd(n,i?r:null),c=!1;a?c=!0:r instanceof j?(a=Fy(n,r),c=!1):(a=j.EMPTY_NODE,c=!1);let l=lf(new Rn(a,c,!1),new Rn(r,i,!1));return new ly(t,l)}return s}function _j(e,t,n,r,i,o){let s=zS(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),pj(s,n),gj(s,n)}function Ej(e,t,n,r){let i=t._queryIdentifier,o=[],s=[],a=Lr(e);if(i==="default")for(let[c,l]of e.views.entries())s=s.concat(tS(l,n,r)),eS(l)&&(e.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{let c=e.views.get(i);c&&(s=s.concat(tS(c,n,r)),eS(c)&&(e.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!Lr(e)&&o.push(new(vj())(t._repo,t._path)),{removed:o,events:s}}function GS(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function kr(e,t){let n=null;for(let r of e.views.values())n=n||hj(r,t);return n}function qS(e,t){if(t._queryParams.loadsAllData())return df(e);{let r=t._queryIdentifier;return e.views.get(r)}}function YS(e,t){return qS(e,t)!=null}function Lr(e){return df(e)!=null}function df(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var ef;function Ij(e){y(!ef,"__referenceConstructor has already been defined"),ef=e}function Cj(){return y(ef,"Reference.ts has not been loaded"),ef}var wj=1,tf=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new tt(null),this.pendingWriteTree_=tj(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function KS(e,t,n,r,i){return $V(e.pendingWriteTree_,t,n,r,i),i?cs(e,new ns(Oy(),t,n)):[]}function Dj(e,t,n,r){WV(e.pendingWriteTree_,t,n,r);let i=tt.fromObject(n);return cs(e,new ac(Oy(),t,i))}function xr(e,t,n=!1){let r=zV(e.pendingWriteTree_,t);if(GV(e.pendingWriteTree_,t)){let o=new tt(null);return r.snap!=null?o=o.set(K(),!0):Ue(r.children,s=>{o=o.set(new Q(s),!0)}),cs(e,new ey(r.path,o,n))}else return[]}function gc(e,t,n){return cs(e,new ns(ky(),t,n))}function bj(e,t,n){let r=tt.fromObject(n);return cs(e,new ac(ky(),t,r))}function Tj(e,t){return cs(e,new qd(ky(),t))}function Sj(e,t,n){let r=Uy(e,n);if(r){let i=By(r),o=i.path,s=i.queryId,a=Xe(o,t),c=new qd(Py(s),a);return Hy(e,o,c)}else return[]}function nf(e,t,n,r,i=!1){let o=t._path,s=e.syncPointTree_.get(o),a=[];if(s&&(t._queryIdentifier==="default"||YS(s,t))){let c=Ej(s,t,n,r);yj(s)&&(e.syncPointTree_=e.syncPointTree_.remove(o));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=e.syncPointTree_.findOnPath(o,(f,h)=>Lr(h));if(u&&!d){let f=e.syncPointTree_.subtree(o);if(!f.isEmpty()){let h=Nj(f);for(let g=0;g<h.length;++g){let _=h[g],T=_.query,N=XS(e,_);e.listenProvider_.startListening(tc(T),lc(e,T),N.hashFn,N.onComplete)}}}!d&&l.length>0&&!r&&(u?e.listenProvider_.stopListening(tc(t),null):l.forEach(f=>{let h=e.queryToTagMap.get(ff(f));e.listenProvider_.stopListening(tc(f),h)}))}Rj(e,l)}return a}function ZS(e,t,n,r){let i=Uy(e,r);if(i!=null){let o=By(i),s=o.path,a=o.queryId,c=Xe(s,t),l=new ns(Py(a),c,n);return Hy(e,s,l)}else return[]}function Aj(e,t,n,r){let i=Uy(e,r);if(i){let o=By(i),s=o.path,a=o.queryId,c=Xe(s,t),l=tt.fromObject(n),u=new ac(Py(a),c,l);return Hy(e,s,u)}else return[]}function uy(e,t,n,r=!1){let i=t._path,o=null,s=!1;e.syncPointTree_.foreachOnPath(i,(f,h)=>{let g=Xe(f,i);o=o||kr(h,g),s=s||Lr(h)});let a=e.syncPointTree_.get(i);a?(s=s||Lr(a),o=o||kr(a,K())):(a=new Xd,e.syncPointTree_=e.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=j.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((h,g)=>{let _=kr(g,K());_&&(o=o.updateImmediateChild(h,_))}));let l=YS(a,t);if(!l&&!t._queryParams.loadsAllData()){let f=ff(t);y(!e.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=xj();e.queryToTagMap.set(f,h),e.tagToQueryMap.set(h,f)}let u=uf(e.pendingWriteTree_,i),d=_j(a,t,n,u,o,c);if(!l&&!s&&!r){let f=qS(a,t);d=d.concat(Oj(e,t,f))}return d}function jy(e,t,n){let i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(s,a)=>{let c=Xe(s,t),l=kr(a,c);if(l)return l});return jS(i,t,o,n,!0)}function Mj(e,t){let n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(l,u)=>{let d=Xe(l,n);r=r||kr(u,d)});let i=e.syncPointTree_.get(n);i?r=r||kr(i,K()):(i=new Xd,e.syncPointTree_=e.syncPointTree_.set(n,i));let o=r!=null,s=o?new Rn(r,!0,!1):null,a=uf(e.pendingWriteTree_,t._path),c=zS(i,t,a,o?s.getNode():j.EMPTY_NODE,o);return fj(c)}function cs(e,t){return QS(t,e.syncPointTree_,null,uf(e.pendingWriteTree_,K()))}function QS(e,t,n,r){if(W(e.path))return JS(e,t,n,r);{let i=t.get(K());n==null&&i!=null&&(n=kr(i,K()));let o=[],s=$(e.path),a=e.operationForChild(s),c=t.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=US(r,s);o=o.concat(QS(a,c,l,u))}return i&&(o=o.concat(Vy(i,e,r,n))),o}}function JS(e,t,n,r){let i=t.get(K());n==null&&i!=null&&(n=kr(i,K()));let o=[];return t.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=US(r,s),u=e.operationForChild(s);u&&(o=o.concat(JS(u,a,c,l)))}),i&&(o=o.concat(Vy(i,e,r,n))),o}function XS(e,t){let n=t.query,r=lc(e,n);return{hashFn:()=>(dj(t)||j.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?Sj(e,n._path,r):Tj(e,n._path);{let o=$L(i,n);return nf(e,n,null,o)}}}}function lc(e,t){let n=ff(t);return e.queryToTagMap.get(n)}function ff(e){return e._path.toString()+"$"+e._queryIdentifier}function Uy(e,t){return e.tagToQueryMap.get(t)}function By(e){let t=e.indexOf("$");return y(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Q(e.substr(0,t))}}function Hy(e,t,n){let r=e.syncPointTree_.get(t);y(r,"Missing sync point for query tag that we're tracking");let i=uf(e.pendingWriteTree_,t);return Vy(r,n,i,null)}function Nj(e){return e.fold((t,n,r)=>{if(n&&Lr(n))return[df(n)];{let i=[];return n&&(i=GS(n)),Ue(r,(o,s)=>{i=i.concat(s)}),i}})}function tc(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Cj())(e._repo,e._path):e}function Rj(e,t){for(let n=0;n<t.length;++n){let r=t[n];if(!r._queryParams.loadsAllData()){let i=ff(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}function xj(){return wj++}function Oj(e,t,n){let r=t._path,i=lc(e,t),o=XS(e,n),s=e.listenProvider_.startListening(tc(t),i,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(r);if(i)y(!Lr(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!W(l)&&u&&Lr(u))return[df(u).query];{let f=[];return u&&(f=f.concat(GS(u).map(h=>h.query))),Ue(d,(h,g)=>{f=f.concat(g)}),f}});for(let l=0;l<c.length;++l){let u=c[l];e.listenProvider_.stopListening(tc(u),lc(e,u))}}return s}var dy=class e{constructor(t){this.node_=t}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},fy=class e{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){let n=he(this.path_,t);return new e(this.syncTree_,n)}node(){return jy(this.syncTree_,this.path_)}},kj=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},rS=function(e,t,n){if(!e||typeof e!="object")return e;if(y(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return Pj(e[".sv"],t,n);if(typeof e[".sv"]=="object")return Fj(e[".sv"],t);y(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},Pj=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:y(!1,"Unexpected server value: "+e)}},Fj=function(e,t,n){e.hasOwnProperty("increment")||y(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let r=e.increment;typeof r!="number"&&y(!1,"Unexpected increment value: "+r);let i=t.node();if(y(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},e0=function(e,t,n,r){return $y(t,new fy(n,e),r)},t0=function(e,t,n){return $y(e,new dy(t),n)};function $y(e,t,n){let r=e.getPriority().val(),i=rS(r,t.getImmediateChild(".priority"),n),o;if(e.isLeafNode()){let s=e,a=rS(s.getValue(),t,n);return a!==s.getValue()||i!==s.getPriority().val()?new Xo(a,Ae(i)):e}else{let s=e;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Xo(i))),s.forEachChild(ce,(a,c)=>{let l=$y(c,t.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var uc=class{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}};function Wy(e,t){let n=t instanceof Q?t:new Q(t),r=e,i=$(n);for(;i!==null;){let o=bi(r.node.children,i)||{children:{},childCount:0};r=new uc(i,r,o),n=oe(n),i=$(n)}return r}function ls(e){return e.node.value}function n0(e,t){e.node.value=t,hy(e)}function r0(e){return e.node.childCount>0}function Lj(e){return ls(e)===void 0&&!r0(e)}function hf(e,t){Ue(e.node.children,(n,r)=>{t(new uc(n,e,r))})}function i0(e,t,n,r){n&&!r&&t(e),hf(e,i=>{i0(i,t,!0,r)}),n&&r&&t(e)}function Vj(e,t,n){let r=n?e:e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function mc(e){return new Q(e.parent===null?e.name:mc(e.parent)+"/"+e.name)}function hy(e){e.parent!==null&&jj(e.parent,e.name,e)}function jj(e,t,n){let r=Lj(n),i=cn(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,hy(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,hy(e))}var Uj=/[\[\].#$\/\u0000-\u001F\u007F]/,Bj=/[\[\].#$\u0000-\u001F\u007F]/,bv=10*1024*1024,pf=function(e){return typeof e=="string"&&e.length!==0&&!Uj.test(e)},o0=function(e){return typeof e=="string"&&e.length!==0&&!Bj.test(e)},Hj=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),o0(e)},py=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!Ty(e)||e&&typeof e=="object"&&cn(e,".sv")},gf=function(e,t,n,r){r&&t===void 0||mf(Yo(e,"value"),t,n)},mf=function(e,t,n){let r=n instanceof Q?new jv(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+Ai(r));if(typeof t=="function")throw new Error(e+"contains a function "+Ai(r)+" with contents = "+t.toString());if(Ty(t))throw new Error(e+"contains "+t.toString()+" "+Ai(r));if(typeof t=="string"&&t.length>bv/3&&$a(t)>bv)throw new Error(e+"contains a string greater than "+bv+" utf8 bytes "+Ai(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let i=!1,o=!1;if(Ue(t,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!pf(s)))throw new Error(e+" contains an invalid key ("+s+") "+Ai(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);_V(r,s),mf(e,a,r),EV(r)}),i&&o)throw new Error(e+' contains ".value" child '+Ai(r)+" in addition to actual children.")}},$j=function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];let o=nc(r);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!pf(o[s]))throw new Error(e+"contains an invalid key ("+o[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(yV);let i=null;for(n=0;n<t.length;n++){if(r=t[n],i!==null&&Ht(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},Wj=function(e,t,n,r){if(r&&t===void 0)return;let i=Yo(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");let o=[];Ue(t,(s,a)=>{let c=new Q(s);if(mf(i,a,he(n,c)),My(c)===".priority"&&!py(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(c)}),$j(i,o)};var zj=function(e,t,n,r){if(!(r&&n===void 0)&&!pf(n))throw new Error(Yo(e,t)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},zy=function(e,t,n,r){if(!(r&&n===void 0)&&!o0(n))throw new Error(Yo(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Gj=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),zy(e,t,n,r)},s0=function(e,t){if($(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},qj=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!pf(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Hj(n))throw new Error(Yo(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var gy=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function vf(e,t){let n=null;for(let r=0;r<t.length;r++){let i=t[r],o=i.getPath();n!==null&&!Ny(o,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function a0(e,t,n){vf(e,n),c0(e,r=>Ny(r,t))}function Wt(e,t,n){vf(e,n),c0(e,r=>Ht(r,t)||Ht(t,r))}function c0(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){let i=e.eventLists_[r];if(i){let o=i.path;t(o)?(Yj(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Yj(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let r=n.getEventRunner();Ni&&je("event: "+n.toString()),as(r)}}}var Kj="repo_interrupt",Zj=25,my=class{constructor(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new gy,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Gd(),this.transactionQueueTree_=new uc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function Qj(e,t,n){if(e.stats_=Ay(e.repoInfo_),e.forceRestClient_||qL())e.server_=new Kv(e.repoInfo_,(r,i,o,s)=>{iS(e,r,i,o,s)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>oS(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{be(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Ry(e.repoInfo_,t,(r,i,o,s)=>{iS(e,r,i,o,s)},r=>{oS(e,r)},r=>{Xj(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=KL(e.repoInfo_,()=>new Xv(e.stats_,e.server_)),e.infoData_=new Zv,e.infoSyncTree_=new tf({startListening:(r,i,o,s)=>{let a=[],c=e.infoData_.getNode(r._path);return c.isEmpty()||(a=gc(e.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),Gy(e,"connected",!1),e.serverSyncTree_=new tf({startListening:(r,i,o,s)=>(e.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);Wt(e.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}function Jj(e){let n=e.infoData_.getNode(new Q(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function yf(e){return kj({timestamp:Jj(e)})}function iS(e,t,n,r,i){e.dataUpdateCount++;let o=new Q(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i)if(r){let c=Ha(n,l=>Ae(l));s=Aj(e.serverSyncTree_,o,c,i)}else{let c=Ae(n);s=ZS(e.serverSyncTree_,o,c,i)}else if(r){let c=Ha(n,l=>Ae(l));s=bj(e.serverSyncTree_,o,c)}else{let c=Ae(n);s=gc(e.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=is(e,o)),Wt(e.eventQueue_,a,s)}function oS(e,t){Gy(e,"connected",t),t===!1&&rU(e)}function Xj(e,t){Ue(t,(n,r)=>{Gy(e,n,r)})}function Gy(e,t,n){let r=new Q("/.info/"+t),i=Ae(n);e.infoData_.updateSnapshot(r,i);let o=gc(e.infoSyncTree_,r,i);Wt(e.eventQueue_,r,o)}function qy(e){return e.nextWriteId_++}function eU(e,t,n){let r=Mj(e.serverSyncTree_,t);return r!=null?Promise.resolve(r):e.server_.get(t).then(i=>{let o=Ae(i).withIndex(t._queryParams.getIndex());uy(e.serverSyncTree_,t,n,!0);let s;if(t._queryParams.loadsAllData())s=gc(e.serverSyncTree_,t._path,o);else{let a=lc(e.serverSyncTree_,t);s=ZS(e.serverSyncTree_,t._path,o,a)}return Wt(e.eventQueue_,t._path,s),nf(e.serverSyncTree_,t,n,null,!0),o},i=>(vc(e,"get for query "+be(t)+" failed: "+i),Promise.reject(new Error(i))))}function tU(e,t,n,r,i){vc(e,"set",{path:t.toString(),value:n,priority:r});let o=yf(e),s=Ae(n,r),a=jy(e.serverSyncTree_,t),c=t0(s,a,o),l=qy(e),u=KS(e.serverSyncTree_,t,c,l,!0);vf(e.eventQueue_,u),e.server_.put(t.toString(),s.val(!0),(f,h)=>{let g=f==="ok";g||et("set at "+t+" failed: "+f);let _=xr(e.serverSyncTree_,l,!g);Wt(e.eventQueue_,t,_),vy(e,i,f,h)});let d=Ky(e,t);is(e,d),Wt(e.eventQueue_,d,[])}function nU(e,t,n,r){vc(e,"update",{path:t.toString(),value:n});let i=!0,o=yf(e),s={};if(Ue(n,(a,c)=>{i=!1,s[a]=e0(he(t,a),Ae(c),e.serverSyncTree_,o)}),i)je("update() called with empty data.  Don't do anything."),vy(e,r,"ok",void 0);else{let a=qy(e),c=Dj(e.serverSyncTree_,t,s,a);vf(e.eventQueue_,c),e.server_.merge(t.toString(),n,(l,u)=>{let d=l==="ok";d||et("update at "+t+" failed: "+l);let f=xr(e.serverSyncTree_,a,!d),h=f.length>0?is(e,t):t;Wt(e.eventQueue_,h,f),vy(e,r,l,u)}),Ue(n,l=>{let u=Ky(e,he(t,l));is(e,u)}),Wt(e.eventQueue_,t,[])}}function rU(e){vc(e,"onDisconnectEvents");let t=yf(e),n=Gd();Qv(e.onDisconnect_,K(),(i,o)=>{let s=e0(i,o,e.serverSyncTree_,t);PS(n,i,s)});let r=[];Qv(n,K(),(i,o)=>{r=r.concat(gc(e.serverSyncTree_,i,o));let s=Ky(e,i);is(e,s)}),e.onDisconnect_=Gd(),Wt(e.eventQueue_,K(),r)}function iU(e,t,n){let r;$(t._path)===".info"?r=uy(e.infoSyncTree_,t,n):r=uy(e.serverSyncTree_,t,n),a0(e.eventQueue_,t._path,r)}function sS(e,t,n){let r;$(t._path)===".info"?r=nf(e.infoSyncTree_,t,n):r=nf(e.serverSyncTree_,t,n),a0(e.eventQueue_,t._path,r)}function oU(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Kj)}function vc(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),je(n,...t)}function vy(e,t,n,r){t&&as(()=>{if(n==="ok")t(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,t(s)}})}function l0(e,t,n){return jy(e.serverSyncTree_,t,n)||j.EMPTY_NODE}function Yy(e,t=e.transactionQueueTree_){if(t||_f(e,t),ls(t)){let n=d0(e,t);y(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&sU(e,mc(t),n)}else r0(t)&&hf(t,n=>{Yy(e,n)})}function sU(e,t,n){let r=n.map(l=>l.currentWriteId),i=l0(e,t,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];y(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Xe(t,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=t;e.server_.put(c.toString(),a,l=>{vc(e,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(xr(e.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();_f(e,Wy(e.transactionQueueTree_,t)),Yy(e,e.transactionQueueTree_),Wt(e.eventQueue_,t,u);for(let f=0;f<d.length;f++)as(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{et("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}is(e,t)}},s)}function is(e,t){let n=u0(e,t),r=mc(n),i=d0(e,n);return aU(e,i,r),r}function aU(e,t,n){if(t.length===0)return;let r=[],i=[],s=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let c=t[a],l=Xe(n,c.path),u=!1,d;if(y(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(xr(e.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Zj)u=!0,d="maxretry",i=i.concat(xr(e.serverSyncTree_,c.currentWriteId,!0));else{let f=l0(e,c.path,s);c.currentInputSnapshot=f;let h=t[a].update(f.val());if(h!==void 0){mf("transaction failed: Data returned ",h,c.path);let g=Ae(h);typeof h=="object"&&h!=null&&cn(h,".priority")||(g=g.updatePriority(f.getPriority()));let T=c.currentWriteId,N=yf(e),pt=t0(g,f,N);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=pt,c.currentWriteId=qy(e),s.splice(s.indexOf(T),1),i=i.concat(KS(e.serverSyncTree_,c.path,pt,c.currentWriteId,c.applyLocally)),i=i.concat(xr(e.serverSyncTree_,T,!0))}else u=!0,d="nodata",i=i.concat(xr(e.serverSyncTree_,c.currentWriteId,!0))}Wt(e.eventQueue_,n,i),i=[],u&&(t[a].status=2,(function(f){setTimeout(f,Math.floor(0))})(t[a].unwatcher),t[a].onComplete&&(d==="nodata"?r.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):r.push(()=>t[a].onComplete(new Error(d),!1,null))))}_f(e,e.transactionQueueTree_);for(let a=0;a<r.length;a++)as(r[a]);Yy(e,e.transactionQueueTree_)}function u0(e,t){let n,r=e.transactionQueueTree_;for(n=$(t);n!==null&&ls(r)===void 0;)r=Wy(r,n),t=oe(t),n=$(t);return r}function d0(e,t){let n=[];return f0(e,t,n),n.sort((r,i)=>r.order-i.order),n}function f0(e,t,n){let r=ls(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);hf(t,i=>{f0(e,i,n)})}function _f(e,t){let n=ls(t);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,n0(t,n.length>0?n:void 0)}hf(t,r=>{_f(e,r)})}function Ky(e,t){let n=mc(u0(e,t)),r=Wy(e.transactionQueueTree_,t);return Vj(r,i=>{Tv(e,i)}),Tv(e,r),i0(r,i=>{Tv(e,i)}),n}function Tv(e,t){let n=ls(t);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(y(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(y(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(xr(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?n0(t,void 0):n.length=o+1,Wt(e.eventQueue_,mc(t),i);for(let s=0;s<r.length;s++)as(r[s])}}function cU(e){let t="",n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function lU(e){let t={};e.charAt(0)==="?"&&(e=e.substring(1));for(let n of e.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):et(`Invalid query segment '${n}' in query '${e}'`)}return t}var aS=function(e,t){let n=uU(e),r=n.namespace;n.domain==="firebase.com"&&er(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&er("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||VL();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Vd(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Q(n.pathString)}},uU=function(e){let t="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof e=="string"){let l=e.indexOf("//");l>=0&&(a=e.substring(0,l-1),e=e.substring(l+2));let u=e.indexOf("/");u===-1&&(u=e.length);let d=e.indexOf("?");d===-1&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=cU(e.substring(u,d)));let f=lU(e.substring(Math.min(e.length,d)));l=t.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(t.substring(l+1),10)):l=t.length;let h=t.slice(0,l);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let g=t.indexOf(".");r=t.substring(0,g).toLowerCase(),n=t.substring(g+1),o=r}"ns"in f&&(o=f.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var rf=class{constructor(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+be(this.snapshot.exportVal())}},of=class{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var sf=class{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return y(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var os=class e{constructor(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return W(this._path)?null:My(this._path)}get ref(){return new xn(this._repo,this._path)}get _queryIdentifier(){let t=qT(this._queryParams),n=Sy(t);return n==="{}"?"default":n}get _queryObject(){return qT(this._queryParams)}isEqual(t){if(t=Ee(t),!(t instanceof e))return!1;let n=this._repo===t._repo,r=Ny(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+vV(this._path)}};function dU(e,t){if(e._orderByCalled===!0)throw new Error(t+": You can't combine multiple orderBy calls.")}function Zy(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Ri){let r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==xi)throw new Error(r);if(typeof t!="string")throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==Pr)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(e.getIndex()===ce){if(t!=null&&!py(t)||n!=null&&!py(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(y(e.getIndex()instanceof rc||e.getIndex()===OS,"unknown index type."),t!=null&&typeof t=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function h0(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var xn=class e extends os{constructor(t,n){super(t,n,new Yv,!1)}get parent(){let t=SS(this._path);return t===null?null:new e(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},dc=class e{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let n=new Q(t),r=af(this.ref,t);return new e(this._node.getChild(n),r,ce)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>t(new e(i,af(this.ref,r),ce)))}hasChild(t){let n=new Q(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function zt(e,t){return e=Ee(e),e._checkNotDeleted("ref"),t!==void 0?af(e._root,t):e._root}function af(e,t){return e=Ee(e),$(e._path)===null?Gj("child","path",t,!1):zy("child","path",t,!1),new xn(e._repo,he(e._path,t))}function Qy(e){return s0("remove",e._path),Ef(e,null)}function Ef(e,t){e=Ee(e),s0("set",e._path),gf("set",t,e._path,!1);let n=new Jn;return tU(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function If(e,t){Wj("update",t,e._path,!1);let n=new Jn;return nU(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}function p0(e){e=Ee(e);let t=new sf(()=>{}),n=new cf(t);return eU(e._repo,e,n).then(r=>new dc(r,new xn(e._repo,e._path),e._queryParams.getIndex()))}var cf=class e{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){let r=n._queryParams.getIndex();return new rf("value",this,new dc(t.snapshotNode,new xn(n._repo,n._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new of(this,t,n):null}matches(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},yy=class e{constructor(t,n){this.eventType=t,this.callbackContext=n}respondsTo(t){let n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new of(this,t,n):null}createEvent(t,n){y(t.childName!=null,"Child events should have a childName.");let r=af(new xn(n._repo,n._path),t.childName),i=n._queryParams.getIndex();return new rf(t.type,this,new dc(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function fU(e,t,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{sS(e._repo,e,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let s=new sf(n,o||void 0),a=t==="value"?new cf(s):new yy(t,s);return iU(e._repo,e,a),()=>sS(e._repo,e,a)}function yc(e,t,n,r){return fU(e,"value",t,n,r)}var ss=class{},_y=class extends ss{constructor(t,n){super(),this._value=t,this._key=n,this.type="endAt"}_apply(t){gf("endAt",this._value,t._path,!0);let n=kV(t._queryParams,this._value,this._key);if(h0(n),Zy(n),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new os(t._repo,t._path,n,t._orderByCalled)}};var Ey=class extends ss{constructor(t,n){super(),this._value=t,this._key=n,this.type="startAt"}_apply(t){gf("startAt",this._value,t._path,!0);let n=OV(t._queryParams,this._value,this._key);if(h0(n),Zy(n),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new os(t._repo,t._path,n,t._orderByCalled)}};var Iy=class extends ss{constructor(t){super(),this._path=t,this.type="orderByChild"}_apply(t){dU(t,"orderByChild");let n=new Q(this._path);if(W(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let r=new rc(n),i=PV(t._queryParams,r);return Zy(i),new os(t._repo,t._path,i,!0)}};function g0(e){if(e==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(e==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(e==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return zy("orderByChild","path",e,!1),new Iy(e)}var Cy=class extends ss{constructor(t,n){super(),this._value=t,this._key=n,this.type="equalTo"}_apply(t){if(gf("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new _y(this._value,this._key)._apply(new Ey(this._value,this._key)._apply(t))}};function m0(e,t){return zj("equalTo","key",t,!0),new Cy(e,t)}function v0(e,...t){let n=Ee(e);for(let r of t)n=r._apply(n);return n}mj(xn);Ij(xn);var hU="FIREBASE_DATABASE_EMULATOR_HOST",wy={},pU=!1;function gU(e,t,n,r){let i=t.lastIndexOf(":"),o=t.substring(0,i),s=Ar(o);e.repoInfo_=new Vd(t,s,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}function mU(e,t,n,r,i){let o=r||e.options.databaseURL;o===void 0&&(e.options.projectId||er("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),je("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let s=aS(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[hU]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=aS(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new Ja(Ja.OWNER):new xv(e.name,e.options,t);qj("Invalid Firebase Database URL",s),W(s.path)||er("Database URL must point to the root of a Firebase Database (not including a child path).");let d=yU(a,e,u,new Rv(e,n));return new Dy(d,e)}function vU(e,t){let n=wy[t];(!n||n[e.key]!==e)&&er(`Database ${t}(${e.repoInfo_}) has already been deleted.`),oU(e),delete n[e.key]}function yU(e,t,n,r){let i=wy[t.name];i||(i={},wy[t.name]=i);let o=i[e.toURLString()];return o&&er("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new my(e,pU,n,r),i[e.toURLString()]=o,o}var Dy=class{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Qj(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new xn(this._repo,K())),this._rootInternal}_delete(){return this._rootInternal!==null&&(vU(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&er("Cannot call "+t+" on a deleted database.")}};function y0(e=Si(),t){let n=ln(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){let r=aT("database");r&&_U(n,...r)}return n}function _U(e,t,n,r={}){e=Ee(e),e._checkNotDeleted("useEmulator");let i=`${t}:${n}`,o=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&Bt(r,o.repoInfo_.emulatorOptions))return;er("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let s;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&er('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ja(Ja.OWNER);else if(r.mockUserToken){let a=typeof r.mockUserToken=="string"?r.mockUserToken:cT(r.mockUserToken,e.app.options.projectId);s=new Ja(a)}Ar(t)&&(Td(t),Sd("Database",!0)),gU(o,i,r,s)}function EU(e){PL(Rr),ht(new xe("database",(t,{instanceIdentifier:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return mU(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),Ve(NT,RT,e),Ve(NT,RT,"esm2020")}Ry.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};Ry.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};EU();var IU="firebase",CU="12.7.0";Ve(IU,CU,"app");var I0="@firebase/installations",t_="0.6.19";var C0=1e4,w0=`w:${t_}`,D0="FIS_v2",wU="https://firebaseinstallations.googleapis.com/v1",DU=3600*1e3,bU="installations",TU="Installations";var SU={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Li=new bt(bU,TU,SU);function b0(e){return e instanceof Je&&e.code.includes("request-failed")}function T0({projectId:e}){return`${wU}/projects/${e}/installations`}function S0(e){return{token:e.token,requestStatus:2,expiresIn:MU(e.expiresIn),creationTime:Date.now()}}function A0(e,t){return p(this,null,function*(){let r=(yield t.json()).error;return Li.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function M0({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function AU(e,{refreshToken:t}){let n=M0(e);return n.append("Authorization",NU(t)),n}function N0(e){return p(this,null,function*(){let t=yield e();return t.status>=500&&t.status<600?e():t})}function MU(e){return Number(e.replace("s","000"))}function NU(e){return`${D0} ${e}`}function RU(r,i){return p(this,arguments,function*({appConfig:e,heartbeatServiceProvider:t},{fid:n}){let o=T0(e),s=M0(e),a=t.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}let c={fid:n,authVersion:D0,appId:e.appId,sdkVersion:w0},l={method:"POST",headers:s,body:JSON.stringify(c)},u=yield N0(()=>fetch(o,l));if(u.ok){let d=yield u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:S0(d.authToken)}}else throw yield A0("Create Installation",u)})}function R0(e){return new Promise(t=>{setTimeout(t,e)})}function xU(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}var OU=/^[cdef][\w-]{21}$/,e_="";function kU(){try{let e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;let n=PU(e);return OU.test(n)?n:e_}catch{return e_}}function PU(e){return xU(e).substr(0,22)}function wf(e){return`${e.appName}!${e.appId}`}var x0=new Map;function O0(e,t){let n=wf(e);k0(n,t),FU(n,t)}function k0(e,t){let n=x0.get(e);if(n)for(let r of n)r(t)}function FU(e,t){let n=LU();n&&n.postMessage({key:e,fid:t}),VU()}var Fi=null;function LU(){return!Fi&&"BroadcastChannel"in self&&(Fi=new BroadcastChannel("[Firebase] FID Change"),Fi.onmessage=e=>{k0(e.data.key,e.data.fid)}),Fi}function VU(){x0.size===0&&Fi&&(Fi.close(),Fi=null)}var jU="firebase-installations-database",UU=1,Vi="firebase-installations-store",Jy=null;function n_(){return Jy||(Jy=kd(jU,UU,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Vi)}}})),Jy}function Cf(e,t){return p(this,null,function*(){let n=wf(e),i=(yield n_()).transaction(Vi,"readwrite"),o=i.objectStore(Vi),s=yield o.get(n);return yield o.put(t,n),yield i.done,(!s||s.fid!==t.fid)&&O0(e,t.fid),t})}function P0(e){return p(this,null,function*(){let t=wf(e),r=(yield n_()).transaction(Vi,"readwrite");yield r.objectStore(Vi).delete(t),yield r.done})}function Df(e,t){return p(this,null,function*(){let n=wf(e),i=(yield n_()).transaction(Vi,"readwrite"),o=i.objectStore(Vi),s=yield o.get(n),a=t(s);return a===void 0?yield o.delete(n):yield o.put(a,n),yield i.done,a&&(!s||s.fid!==a.fid)&&O0(e,a.fid),a})}function r_(e){return p(this,null,function*(){let t,n=yield Df(e.appConfig,r=>{let i=BU(r),o=HU(e,i);return t=o.registrationPromise,o.installationEntry});return n.fid===e_?{installationEntry:yield t}:{installationEntry:n,registrationPromise:t}})}function BU(e){let t=e||{fid:kU(),registrationStatus:0};return F0(t)}function HU(e,t){if(t.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(Li.create("app-offline"));return{installationEntry:t,registrationPromise:i}}let n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=$U(e,n);return{installationEntry:n,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:WU(e)}:{installationEntry:t}}function $U(e,t){return p(this,null,function*(){try{let n=yield RU(e,t);return Cf(e.appConfig,n)}catch(n){throw b0(n)&&n.customData.serverCode===409?yield P0(e.appConfig):yield Cf(e.appConfig,{fid:t.fid,registrationStatus:0}),n}})}function WU(e){return p(this,null,function*(){let t=yield _0(e.appConfig);for(;t.registrationStatus===1;)yield R0(100),t=yield _0(e.appConfig);if(t.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield r_(e);return r||n}return t})}function _0(e){return Df(e,t=>{if(!t)throw Li.create("installation-not-found");return F0(t)})}function F0(e){return zU(e)?{fid:e.fid,registrationStatus:0}:e}function zU(e){return e.registrationStatus===1&&e.registrationTime+C0<Date.now()}function GU(r,i){return p(this,arguments,function*({appConfig:e,heartbeatServiceProvider:t},n){let o=qU(e,n),s=AU(e,n),a=t.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}let c={installation:{sdkVersion:w0,appId:e.appId}},l={method:"POST",headers:s,body:JSON.stringify(c)},u=yield N0(()=>fetch(o,l));if(u.ok){let d=yield u.json();return S0(d)}else throw yield A0("Generate Auth Token",u)})}function qU(e,{fid:t}){return`${T0(e)}/${t}/authTokens:generate`}function i_(e,t=!1){return p(this,null,function*(){let n,r=yield Df(e.appConfig,o=>{if(!L0(o))throw Li.create("not-registered");let s=o.authToken;if(!t&&ZU(s))return o;if(s.requestStatus===1)return n=YU(e,t),o;{if(!navigator.onLine)throw Li.create("app-offline");let a=JU(o);return n=KU(e,a),a}});return n?yield n:r.authToken})}function YU(e,t){return p(this,null,function*(){let n=yield E0(e.appConfig);for(;n.authToken.requestStatus===1;)yield R0(100),n=yield E0(e.appConfig);let r=n.authToken;return r.requestStatus===0?i_(e,t):r})}function E0(e){return Df(e,t=>{if(!L0(t))throw Li.create("not-registered");let n=t.authToken;return XU(n)?S(m({},t),{authToken:{requestStatus:0}}):t})}function KU(e,t){return p(this,null,function*(){try{let n=yield GU(e,t),r=S(m({},t),{authToken:n});return yield Cf(e.appConfig,r),n}catch(n){if(b0(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield P0(e.appConfig);else{let r=S(m({},t),{authToken:{requestStatus:0}});yield Cf(e.appConfig,r)}throw n}})}function L0(e){return e!==void 0&&e.registrationStatus===2}function ZU(e){return e.requestStatus===2&&!QU(e)}function QU(e){let t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+DU}function JU(e){let t={requestStatus:1,requestTime:Date.now()};return S(m({},e),{authToken:t})}function XU(e){return e.requestStatus===1&&e.requestTime+C0<Date.now()}function eB(e){return p(this,null,function*(){let t=e,{installationEntry:n,registrationPromise:r}=yield r_(t);return r?r.catch(console.error):i_(t).catch(console.error),n.fid})}function tB(e,t=!1){return p(this,null,function*(){let n=e;return yield nB(n),(yield i_(n,t)).token})}function nB(e){return p(this,null,function*(){let{registrationPromise:t}=yield r_(e);t&&(yield t)})}function rB(e){if(!e||!e.options)throw Xy("App Configuration");if(!e.name)throw Xy("App Name");let t=["projectId","apiKey","appId"];for(let n of t)if(!e.options[n])throw Xy(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function Xy(e){return Li.create("missing-app-config-values",{valueName:e})}var V0="installations",iB="installations-internal",oB=e=>{let t=e.getProvider("app").getImmediate(),n=rB(t),r=ln(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},sB=e=>{let t=e.getProvider("app").getImmediate(),n=ln(t,V0).getImmediate();return{getId:()=>eB(n),getToken:i=>tB(n,i)}};function aB(){ht(new xe(V0,oB,"PUBLIC")),ht(new xe(iB,sB,"PRIVATE"))}aB();Ve(I0,t_);Ve(I0,t_,"esm2020");var bf="analytics",cB="firebase_id",lB="origin",uB=60*1e3,dB="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",d_="https://www.googletagmanager.com/gtag/js";var nt=new An("@firebase/analytics");var fB={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},St=new bt("analytics","Analytics",fB);function hB(e){if(!e.startsWith(d_)){let t=St.create("invalid-gtag-resource",{gtagURL:e});return nt.warn(t.message),""}return e}function z0(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function pB(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function gB(e,t){let n=pB("firebase-js-sdk-policy",{createScriptURL:hB}),r=document.createElement("script"),i=`${d_}?l=${e}&id=${t}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function mB(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}function vB(e,t,n,r,i,o){return p(this,null,function*(){let s=r[i];try{if(s)yield t[s];else{let c=(yield z0(n)).find(l=>l.measurementId===i);c&&(yield t[c.appId])}}catch(a){nt.error(a)}e("config",i,o)})}function yB(e,t,n,r,i){return p(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield z0(n);for(let c of s){let l=a.find(d=>d.measurementId===c),u=l&&t[l.appId];if(u)o.push(u);else{o=[];break}}}o.length===0&&(o=Object.values(t)),yield Promise.all(o),e("event",r,i||{})}catch(o){nt.error(o)}})}function _B(e,t,n,r){function i(o,...s){return p(this,null,function*(){try{if(o==="event"){let[a,c]=s;yield yB(e,t,n,a,c)}else if(o==="config"){let[a,c]=s;yield vB(e,t,n,r,a,c)}else if(o==="consent"){let[a,c]=s;e("consent",a,c)}else if(o==="get"){let[a,c,l]=s;e("get",a,c,l)}else if(o==="set"){let[a]=s;e("set",a)}else e(o,...s)}catch(a){nt.error(a)}})}return i}function EB(e,t,n,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=_B(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}function IB(e){let t=window.document.getElementsByTagName("script");for(let n of Object.values(t))if(n.src&&n.src.includes(d_)&&n.src.includes(e))return n;return null}var CB=30,wB=1e3,s_=class{constructor(t={},n=wB){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}},G0=new s_;function DB(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function bB(e){return p(this,null,function*(){let{appId:t,apiKey:n}=e,r={method:"GET",headers:DB(n)},i=dB.replace("{app-id}",t),o=yield fetch(i,r);if(o.status!==200&&o.status!==304){let s="";try{let a=yield o.json();a.error?.message&&(s=a.error.message)}catch{}throw St.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s})}return o.json()})}function TB(r){return p(this,arguments,function*(e,t=G0,n){let{appId:i,apiKey:o,measurementId:s}=e.options;if(!i)throw St.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw St.create("no-api-key")}let a=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new a_;return setTimeout(()=>p(null,null,function*(){c.abort()}),n!==void 0?n:uB),q0({appId:i,apiKey:o,measurementId:s},a,c,t)})}function q0(o,s,a){return p(this,arguments,function*(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=G0){let{appId:c,measurementId:l}=e;try{yield SB(r,t)}catch(u){if(l)return nt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:c,measurementId:l};throw u}try{let u=yield bB(e);return i.deleteThrottleMetadata(c),u}catch(u){let d=u;if(!AB(d)){if(i.deleteThrottleMetadata(c),l)return nt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:c,measurementId:l};throw u}let f=Number(d?.customData?.httpStatus)===503?ov(n,i.intervalMillis,CB):ov(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return i.setThrottleMetadata(c,h),nt.debug(`Calling attemptFetch again in ${f} millis`),q0(e,h,r,i)}})}function SB(e,t){return new Promise((n,r)=>{let i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(o),r(St.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function AB(e){if(!(e instanceof Je)||!e.customData)return!1;let t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var a_=class{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}};var c_;function MB(e,t,n,r,i){return p(this,null,function*(){if(i&&i.global){e("event",n,r);return}else{let o=yield t,s=S(m({},r),{send_to:o});e("event",n,s)}})}function NB(e,t,n,r){return p(this,null,function*(){if(r&&r.global){let i={};for(let o of Object.keys(n))i[`user_properties.${o}`]=n[o];return e("set",i),Promise.resolve()}else{let i=yield t;e("config",i,{update:!0,user_properties:n})}})}var l_;function RB(e){l_=e}function xB(e){c_=e}function OB(){return p(this,null,function*(){if(Nd())try{yield Rd()}catch(e){return nt.warn(St.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}else return nt.warn(St.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function kB(e,t,n,r,i,o,s){return p(this,null,function*(){let a=TB(e);a.then(f=>{n[f.measurementId]=f.appId,e.options.measurementId&&f.measurementId!==e.options.measurementId&&nt.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>nt.error(f)),t.push(a);let c=OB().then(f=>{if(f)return r.getId()}),[l,u]=yield Promise.all([a,c]);IB(o)||gB(o,l.measurementId),l_&&(i("consent","default",l_),RB(void 0)),i("js",new Date);let d=s?.config??{};return d[lB]="firebase",d.update=!0,u!=null&&(d[cB]=u),i("config",l.measurementId,d),c_&&(i("set",c_),xB(void 0)),l.measurementId})}var u_=class{constructor(t){this.app=t}_delete(){return delete us[this.app.options.appId],Promise.resolve()}},us={},j0=[],U0={},o_="dataLayer",PB="gtag",B0,f_,H0=!1;function FB(){let e=[];if(Ad()&&e.push("This is a browser extension environment."),dT()||e.push("Cookies are not available."),e.length>0){let t=e.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=St.create("invalid-analytics-context",{errorInfo:t});nt.warn(n.message)}}function LB(e,t,n){FB();let r=e.options.appId;if(!r)throw St.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)nt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw St.create("no-api-key");if(us[r]!=null)throw St.create("already-exists",{id:r});if(!H0){mB(o_);let{wrappedGtag:o,gtagCore:s}=EB(us,j0,U0,o_,PB);f_=o,B0=s,H0=!0}return us[r]=kB(e,j0,U0,t,B0,o_,n),new u_(e)}function Y0(e=Si()){e=Ee(e);let t=ln(e,bf);return t.isInitialized()?t.getImmediate():VB(e)}function VB(e,t={}){let n=ln(e,bf);if(n.isInitialized()){let i=n.getImmediate();if(Bt(t,n.getOptions()))return i;throw St.create("already-initialized")}return n.initialize({options:t})}function jB(e,t,n){e=Ee(e),NB(f_,us[e.app.options.appId],t,n).catch(r=>nt.error(r))}function UB(e,t,n,r){e=Ee(e),MB(f_,us[e.app.options.appId],t,n,r).catch(i=>nt.error(i))}var $0="@firebase/analytics",W0="0.10.19";function BB(){ht(new xe(bf,(t,{options:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return LB(r,i,n)},"PUBLIC")),ht(new xe("analytics-internal",e,"PRIVATE")),Ve($0,W0),Ve($0,W0,"esm2020");function e(t){try{let n=t.getProvider(bf).getImmediate();return{logEvent:(r,i,o)=>UB(n,r,i,o),setUserProperties:(r,i)=>jB(n,r,i)}}catch(n){throw St.create("interop-component-reg-failed",{reason:n})}}}BB();function lA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var uA=lA,dA=new bt("auth","Firebase",lA());var Rf=new An("@firebase/auth");function HB(e,...t){Rf.logLevel<=te.WARN&&Rf.warn(`Auth (${Rr}): ${e}`,...t)}function Sf(e,...t){Rf.logLevel<=te.ERROR&&Rf.error(`Auth (${Rr}): ${e}`,...t)}function kn(e,...t){throw N_(e,...t)}function fn(e,...t){return N_(e,...t)}function M_(e,t,n){let r=S(m({},uA()),{[t]:n});return new bt("auth","Firebase",r).create(t,{appName:e.name})}function ji(e){return M_(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $B(e,t,n){let r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&kn(e,"argument-error"),M_(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function N_(e,...t){if(typeof e!="string"){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return dA.create(e,...t)}function x(e,t,...n){if(!e)throw N_(t,...n)}function tr(e){let t="INTERNAL ASSERTION FAILED: "+e;throw Sf(t),new Error(t)}function rr(e,t){e||tr(t)}function g_(){return typeof self<"u"&&self.location?.href||""}function WB(){return K0()==="http:"||K0()==="https:"}function K0(){return typeof self<"u"&&self.location?.protocol||null}function zB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WB()||Ad()||"connection"in navigator)?navigator.onLine:!0}function GB(){if(typeof navigator>"u")return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var Ui=class{constructor(t,n){this.shortDelay=t,this.longDelay=n,rr(n>t,"Short delay should be less than long delay!"),this.isMobile=Ua()||Md()}get(){return zB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function R_(e,t){rr(e.emulator,"Emulator should always be set here");let{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}var xf=class{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var qB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var YB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],KB=new Ui(3e4,6e4);function x_(e,t){return e.tenantId&&!t.tenantId?S(m({},t),{tenantId:e.tenantId}):t}function fs(o,s,a,c){return p(this,arguments,function*(e,t,n,r,i={}){return fA(e,i,()=>p(null,null,function*(){let l={},u={};r&&(t==="GET"?u=r:l={body:JSON.stringify(r)});let d=Mr(m({key:e.config.apiKey},u)).slice(1),f=yield e._getAdditionalHeaders();f["Content-Type"]="application/json",e.languageCode&&(f["X-Firebase-Locale"]=e.languageCode);let h=m({method:t,headers:f},l);return lT()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&Ar(e.emulatorConfig.host)&&(h.credentials="include"),xf.fetch()(yield hA(e,e.config.apiHost,n,d),h)}))})}function fA(e,t,n){return p(this,null,function*(){e._canInitEmulator=!1;let r=m(m({},qB),t);try{let i=new m_(e),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Tf(e,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tf(e,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Tf(e,"email-already-in-use",s);if(c==="USER_DISABLED")throw Tf(e,"user-disabled",s);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw M_(e,u,l);kn(e,u)}}catch(i){if(i instanceof Je)throw i;kn(e,"network-request-failed",{message:String(i)})}})}function ZB(o,s,a,c){return p(this,arguments,function*(e,t,n,r,i={}){let l=yield fs(e,t,n,r,i);return"mfaPendingCredential"in l&&kn(e,"multi-factor-auth-required",{_serverResponse:l}),l})}function hA(e,t,n,r){return p(this,null,function*(){let i=`${t}${n}?${r}`,o=e,s=o.config.emulator?R_(e.config,i):`${e.config.apiScheme}://${i}`;return YB.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var m_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(fn(this.auth,"network-request-failed")),KB.get())})}};function Tf(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=fn(e,t,r);return i.customData._tokenResponse=n,i}function QB(e,t){return p(this,null,function*(){return fs(e,"POST","/v1/accounts:delete",t)})}function Of(e,t){return p(this,null,function*(){return fs(e,"POST","/v1/accounts:lookup",t)})}function _c(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function pA(e,t=!1){return p(this,null,function*(){let n=Ee(e),r=yield n.getIdToken(t),i=O_(r);x(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:_c(h_(i.auth_time)),issuedAtTime:_c(h_(i.iat)),expirationTime:_c(h_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function h_(e){return Number(e)*1e3}function O_(e){let[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return Sf("JWT malformed, contained fewer than 3 sections"),null;try{let i=Go(n);return i?JSON.parse(i):(Sf("Failed to decode base64 JWT payload"),null)}catch(i){return Sf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Z0(e){let t=O_(e);return x(t,"internal-error"),x(typeof t.exp<"u","internal-error"),x(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}function Ic(e,t,n=!1){return p(this,null,function*(){if(n)return t;try{return yield t}catch(r){throw r instanceof Je&&JB(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})}function JB({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}var v_=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;let n=this.getInterval(t);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),n)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Cc=class{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=_c(this.lastLoginAt),this.creationTime=_c(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function kf(e){return p(this,null,function*(){let t=e.auth,n=yield e.getIdToken(),r=yield Ic(e,Of(t,{idToken:n}));x(r?.users.length,t,"internal-error");let i=r.users[0];e._notifyReloadListener(i);let o=i.providerUserInfo?.length?mA(i.providerUserInfo):[],s=XB(e.providerData,o),a=e.isAnonymous,c=!(e.email&&i.passwordHash)&&!s?.length,l=a?c:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Cc(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(e,u)})}function gA(e){return p(this,null,function*(){let t=Ee(e);yield kf(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})}function XB(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function mA(e){return e.map(r=>{var i=r,{providerId:t}=i,n=Nc(i,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function e2(e,t){return p(this,null,function*(){let n=yield fA(e,{},()=>p(null,null,function*(){let r=Mr({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=e.config,s=yield hA(e,i,"/v1/token",`key=${o}`),a=yield e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return e.emulatorConfig&&Ar(e.emulatorConfig.host)&&(c.credentials="include"),xf.fetch()(s,c)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function t2(e,t){return p(this,null,function*(){return fs(e,"POST","/v2/accounts:revokeToken",x_(e,t))})}var Ec=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){x(t.idToken,"internal-error"),x(typeof t.idToken<"u","internal-error"),x(typeof t.refreshToken<"u","internal-error");let n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Z0(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){x(t.length!==0,"internal-error");let n=Z0(t);this.updateTokensAndExpiration(t,null,n)}getToken(t,n=!1){return p(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(x(this.refreshToken,t,"user-token-expired"),this.refreshToken?(yield this.refresh(t,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(t,n){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield e2(t,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new e;return r&&(x(typeof r=="string","internal-error",{appName:t}),s.refreshToken=r),i&&(x(typeof i=="string","internal-error",{appName:t}),s.accessToken=i),o&&(x(typeof o=="number","internal-error",{appName:t}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return tr("not implemented")}};function Vr(e,t){x(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}var jr=class e{constructor(o){var s=o,{uid:t,auth:n,stsTokenManager:r}=s,i=Nc(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new v_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Cc(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(t){return p(this,null,function*(){let n=yield Ic(this,this.stsTokenManager.getToken(this.auth,t));return x(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(t){return pA(this,t)}reload(){return gA(this)}_assign(t){this!==t&&(x(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>m({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let n=new e(S(m({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){x(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,n=!1){return p(this,null,function*(){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&(yield kf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){if(Tt(this.auth.app))return Promise.reject(ji(this.auth));let t=yield this.getIdToken();return yield Ic(this,QB(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return S(m({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>m({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){let r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:h,providerData:g,stsTokenManager:_}=n;x(d&&_,t,"internal-error");let T=Ec.fromJSON(this.name,_);x(typeof d=="string",t,"internal-error"),Vr(r,t.name),Vr(i,t.name),x(typeof f=="boolean",t,"internal-error"),x(typeof h=="boolean",t,"internal-error"),Vr(o,t.name),Vr(s,t.name),Vr(a,t.name),Vr(c,t.name),Vr(l,t.name),Vr(u,t.name);let N=new e({uid:d,auth:t,email:i,emailVerified:f,displayName:r,isAnonymous:h,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:T,createdAt:l,lastLoginAt:u});return g&&Array.isArray(g)&&(N.providerData=g.map(pt=>m({},pt))),c&&(N._redirectEventId=c),N}static _fromIdTokenResponse(t,n,r=!1){return p(this,null,function*(){let i=new Ec;i.updateFromServerResponse(n);let o=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return yield kf(o),o})}static _fromGetAccountInfoResponse(t,n,r){return p(this,null,function*(){let i=n.users[0];x(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?mA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Ec;a.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Cc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var Q0=new Map;function nr(e){rr(e instanceof Function,"Expected a class definition");let t=Q0.get(e);return t?(rr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Q0.set(e,t),t)}var n2=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(n,r){return p(this,null,function*(){this.storage[n]=r})}_get(n){return p(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return p(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return e.type="NONE",e})(),y_=n2;function Af(e,t,n){return`firebase:${e}:${t}:${n}`}var Pf=class e{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Af(this.userKey,i.apiKey,o),this.fullPersistenceKey=Af("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){return p(this,null,function*(){let t=yield this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){let n=yield Of(this.auth,{idToken:t}).catch(()=>{});return n?jr._fromGetAccountInfoResponse(this.auth,n,t):null}return jr._fromJSON(this.auth,t)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){return p(this,null,function*(){if(this.persistence===t)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,n,r="authUser"){return p(this,null,function*(){if(!n.length)return new e(nr(y_),t,r);let i=(yield Promise.all(n.map(l=>p(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||nr(y_),s=Af(r,t.config.apiKey,t.name),a=null;for(let l of n)try{let u=yield l._get(s);if(u){let d;if(typeof u=="string"){let f=yield Of(t,{idToken:u}).catch(()=>{});if(!f)break;d=yield jr._fromGetAccountInfoResponse(t,f,u)}else d=jr._fromJSON(t,u);l!==o&&(a=d),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new e(o,t,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>p(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new e(o,t,r))})}};function J0(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(EA(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(vA(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(CA(t))return"Blackberry";if(wA(t))return"Webos";if(yA(t))return"Safari";if((t.includes("chrome/")||_A(t))&&!t.includes("edge/"))return"Chrome";if(IA(t))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if(r?.length===2)return r[1]}return"Other"}function vA(e=Ge()){return/firefox\//i.test(e)}function yA(e=Ge()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function _A(e=Ge()){return/crios\//i.test(e)}function EA(e=Ge()){return/iemobile/i.test(e)}function IA(e=Ge()){return/android/i.test(e)}function CA(e=Ge()){return/blackberry/i.test(e)}function wA(e=Ge()){return/webos/i.test(e)}function k_(e=Ge()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function r2(e=Ge()){return k_(e)&&!!window.navigator?.standalone}function i2(){return uT()&&document.documentMode===10}function DA(e=Ge()){return k_(e)||IA(e)||wA(e)||CA(e)||/windows phone/i.test(e)||EA(e)}function bA(e,t=[]){let n;switch(e){case"Browser":n=J0(Ge());break;case"Worker":n=`${J0(Ge())}-${e}`;break;default:n=e}let r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Rr}/${r}`}var __=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){let r=o=>new Promise((s,a)=>{try{let c=t(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(t){return p(this,null,function*(){if(this.auth.currentUser===t)return;let n=[];try{for(let r of this.queue)yield r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function o2(n){return p(this,arguments,function*(e,t={}){return fs(e,"GET","/v2/passwordPolicy",x_(e,t))})}var s2=6,E_=class{constructor(t){let n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??s2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){let n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}};var I_=class{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ff(this),this.idTokenSubscription=new Ff(this),this.beforeStateQueue=new __(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=nr(n)),this._initializationPromise=this.queue(()=>p(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield Pf.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let t=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(t,!0)}})}initializeCurrentUserFromIdToken(t){return p(this,null,function*(){try{let n=yield Of(this,{idToken:t}),r=yield jr._fromGetAccountInfoResponse(this,n,t);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(t){return p(this,null,function*(){if(Tt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let n=yield this.assertedPersistence.getCurrentUser(),r=n,i=!1;if(t&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=yield this.tryRedirectSignIn(t);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return x(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(t){return p(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(t){return p(this,null,function*(){try{yield kf(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)})}useDeviceLanguage(){this.languageCode=GB()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(t){return p(this,null,function*(){if(Tt(this.app))return Promise.reject(ji(this));let n=t?Ee(t):null;return n&&x(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(t,n=!1){return p(this,null,function*(){if(!this._deleted)return t&&x(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(t)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(t),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return Tt(this.app)?Promise.reject(ji(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(t){return Tt(this.app)?Promise.reject(ji(this)):this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(nr(t))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(t){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let t=yield o2(this),n=new E_(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new bt("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{let r=this.onAuthStateChanged(()=>{r(),t()},n)}})}revokeAccessToken(t){return p(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield t2(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(t,n){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)})}getOrInitRedirectPersistenceManager(t){return p(this,null,function*(){if(!this.redirectPersistenceManager){let n=t&&nr(t)||this._popupRedirectResolver;x(n,this,"argument-error"),this.redirectPersistenceManager=yield Pf.create(this,[nr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(t){return p(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null})}_persistUserIfCurrent(t){return p(this,null,function*(){if(t===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(t)}))})}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(x(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=t.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=t.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(t){return p(this,null,function*(){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?yield this.assertedPersistence.setCurrentUser(t):yield this.assertedPersistence.removeCurrentUser()})}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return x(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=bA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let n=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return p(this,null,function*(){if(Tt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&HB(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Wf(e){return Ee(e)}var Ff=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=gT(n=>this.observer=n)}get next(){return x(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var P_={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function a2(e){P_=e}function c2(e){return P_.loadJS(e)}function l2(){return P_.gapiScript}function TA(e){return`__${e}${Math.floor(Math.random()*1e6)}`}function SA(e,t){let n=ln(e,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Bt(o,t??{}))return i;kn(i,"already-initialized")}return n.initialize({options:t})}function u2(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(nr);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function AA(e,t,n){let r=Wf(e);x(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=MA(t),{host:s,port:a}=d2(t),c=a===null?"":`:${a}`,l={url:`${o}//${s}${c}/`},u=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){x(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),x(Bt(l,r.config.emulator)&&Bt(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Ar(s)?(Td(`${o}//${s}${c}`),Sd("Auth",!0)):i||f2()}function MA(e){let t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function d2(e){let t=MA(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:X0(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:X0(s)}}}function X0(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function f2(){function e(){let t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}var wc=class{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return tr("not implemented")}_getIdTokenResponse(t){return tr("not implemented")}_linkToIdToken(t,n){return tr("not implemented")}_getReauthenticationResolver(t){return tr("not implemented")}};function ds(e,t){return p(this,null,function*(){return ZB(e,"POST","/v1/accounts:signInWithIdp",x_(e,t))})}var h2="http://localhost",Lf=class e extends wc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){let n=new e(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):kn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){let a=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=a,o=Nc(a,["providerId","signInMethod"]);if(!r||!i)return null;let s=new e(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(t){let n=this.buildRequest();return ds(t,n)}_linkToIdToken(t,n){let r=this.buildRequest();return r.idToken=n,ds(t,r)}_getReauthenticationResolver(t){let n=this.buildRequest();return n.autoCreate=!1,ds(t,n)}buildRequest(){let t={requestUri:h2,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Mr(n)}return t}};var Dc=class{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}};var Vf=class extends Dc{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}};var F_=(()=>{class e extends Vf{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return Lf._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return e.credentialFromTaggedObject(n)}static credentialFromError(n){return e.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return e.credential(r,i)}catch{return null}}}e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com";return e})();var bc=class e{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static _fromIdTokenResponse(t,n,r,i=!1){return p(this,null,function*(){let o=yield jr._fromIdTokenResponse(t,r,i),s=eA(r);return new e({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(t,n,r){return p(this,null,function*(){yield t._updateTokensIfNecessary(r,!0);let i=eA(r);return new e({user:t,providerId:i,_tokenResponse:r,operationType:n})})}};function eA(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var C_=class e extends Je{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new e(t,n,r,i)}};function NA(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?C_._fromErrorAndOperation(e,o,t,r):o})}function p2(e,t,n=!1){return p(this,null,function*(){let r=yield Ic(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return bc._forOperation(e,"link",r)})}function g2(e,t,n=!1){return p(this,null,function*(){let{auth:r}=e;if(Tt(r.app))return Promise.reject(ji(r));let i="reauthenticate";try{let o=yield Ic(e,NA(r,i,t,e),n);x(o.idToken,r,"internal-error");let s=O_(o.idToken);x(s,r,"internal-error");let{sub:a}=s;return x(e.uid===a,r,"user-mismatch"),bc._forOperation(e,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&kn(r,"user-mismatch"),o}})}function m2(e,t,n=!1){return p(this,null,function*(){if(Tt(e.app))return Promise.reject(ji(e));let r="signIn",i=yield NA(e,r,t),o=yield bc._fromIdTokenResponse(e,r,i);return n||(yield e._updateCurrentUser(o.user)),o})}function RA(e,t,n,r){return Ee(e).onIdTokenChanged(t,n,r)}function xA(e,t,n){return Ee(e).beforeAuthStateChanged(t,n)}function L_(e,t,n,r){return Ee(e).onAuthStateChanged(t,n,r)}function V_(e){return Ee(e).signOut()}var jf="__sak";var Uf=class{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(jf,"1"),this.storage.removeItem(jf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){let n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}};var v2=1e3,y2=10,_2=(()=>{class e extends Uf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=DA(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);i2()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,y2):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},v2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return p(this,null,function*(){yield Ur(e.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return p(this,null,function*(){let r=yield Ur(e.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return p(this,null,function*(){yield Ur(e.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return e.type="LOCAL",e})(),OA=_2;var E2=(()=>{class e extends Uf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return e.type="SESSION",e})(),j_=E2;function I2(e){return Promise.all(e.map(t=>p(null,null,function*(){try{return{fulfilled:!0,value:yield t}}catch(n){return{fulfilled:!1,reason:n}}})))}var C2=(()=>{class e{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new e(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return p(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(u=>p(this,null,function*(){return u(r.origin,s)})),l=yield I2(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}e.receivers=[];return e})();function U_(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}var w_=class{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}_send(t,n,r=50){return p(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=U_("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(d){let f=d;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(f.data.response);break;default:clearTimeout(u),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function On(){return window}function w2(e){On().location.href=e}function kA(){return typeof On().WorkerGlobalScope<"u"&&typeof On().importScripts=="function"}function D2(){return p(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function b2(){return navigator?.serviceWorker?.controller||null}function T2(){return kA()?self:null}var PA="firebaseLocalStorageDb",S2=1,Bf="firebaseLocalStorage",FA="fbase_key",Bi=class{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function zf(e,t){return e.transaction([Bf],t?"readwrite":"readonly").objectStore(Bf)}function A2(){let e=indexedDB.deleteDatabase(PA);return new Bi(e).toPromise()}function D_(){let e=indexedDB.open(PA,S2);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{let r=e.result;try{r.createObjectStore(Bf,{keyPath:FA})}catch(i){n(i)}}),e.addEventListener("success",()=>p(null,null,function*(){let r=e.result;r.objectStoreNames.contains(Bf)?t(r):(r.close(),yield A2(),t(yield D_()))}))})}function tA(e,t,n){return p(this,null,function*(){let r=zf(e,!0).put({[FA]:t,value:n});return new Bi(r).toPromise()})}function M2(e,t){return p(this,null,function*(){let n=zf(e,!1).get(t),r=yield new Bi(n).toPromise();return r===void 0?null:r.value})}function nA(e,t){let n=zf(e,!0).delete(t);return new Bi(n).toPromise()}var N2=800,R2=3,x2=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return p(this,null,function*(){return this.db?this.db:(this.db=yield D_(),this.db)})}_withRetries(n){return p(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>R2)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return p(this,null,function*(){return kA()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return p(this,null,function*(){this.receiver=C2._getInstance(T2()),this.receiver._subscribe("keyChanged",(n,r)=>p(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>p(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return p(this,null,function*(){if(this.activeServiceWorker=yield D2(),!this.activeServiceWorker)return;this.sender=new w_(this.activeServiceWorker);let n=yield this.sender._send("ping",{},800);n&&n[0]?.fulfilled&&n[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return p(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||b2()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return p(this,null,function*(){try{if(!indexedDB)return!1;let n=yield D_();return yield tA(n,jf,"1"),yield nA(n,jf),!0}catch{}return!1})}_withPendingWrite(n){return p(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(i=>tA(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return p(this,null,function*(){let r=yield this._withRetries(i=>M2(i,n));return this.localCache[n]=r,r})}_remove(n){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(r=>nA(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return p(this,null,function*(){let n=yield this._withRetries(o=>{let s=zf(o,!1).getAll();return new Bi(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>p(this,null,function*(){return this._poll()}),N2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return e.type="LOCAL",e})(),LA=x2;var Dee=TA("rcb"),bee=new Ui(3e4,6e4);function VA(e,t){return t?nr(t):(x(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}var Tc=class extends wc{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return ds(t,this._buildIdpRequest())}_linkToIdToken(t,n){return ds(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return ds(t,this._buildIdpRequest())}_buildIdpRequest(t){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}};function O2(e){return m2(e.auth,new Tc(e),e.bypassAuthState)}function k2(e){let{auth:t,user:n}=e;return x(n,t,"internal-error"),g2(n,new Tc(e),e.bypassAuthState)}function P2(e){return p(this,null,function*(){let{auth:t,user:n}=e;return x(n,t,"internal-error"),p2(n,new Tc(e),e.bypassAuthState)})}var Hf=class{constructor(t,n,r,i,o=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((t,n)=>p(this,null,function*(){this.pendingPromise={resolve:t,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(t){return p(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=t;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return O2;case"linkViaPopup":case"linkViaRedirect":return P2;case"reauthViaPopup":case"reauthViaRedirect":return k2;default:kn(this.auth,"internal-error")}}resolve(t){rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var F2=new Ui(2e3,1e4);function B_(e,t,n){return p(this,null,function*(){if(Tt(e.app))return Promise.reject(fn(e,"operation-not-supported-in-this-environment"));let r=Wf(e);$B(e,t,Dc);let i=VA(r,n);return new L2(r,"signInViaPopup",t,i).executeNotNull()})}var L2=(()=>{class e extends Hf{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}executeNotNull(){return p(this,null,function*(){let n=yield this.execute();return x(n,this.auth,"internal-error"),n})}onExecution(){return p(this,null,function*(){rr(this.filter.length===1,"Popup operations only handle one event");let n=U_();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){let n=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,F2.get())};n()}}e.currentPopupAction=null;return e})(),V2="pendingRedirect",Mf=new Map,b_=class e extends Hf{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return p(this,null,function*(){let t=Mf.get(this.auth._key());if(!t){try{let r=(yield j2(this.resolver,this.auth))?yield Ur(e.prototype,this,"execute").call(this):null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}Mf.set(this.auth._key(),t)}return this.bypassAuthState||Mf.set(this.auth._key(),()=>Promise.resolve(null)),t()})}onAuthEvent(t){return p(this,null,function*(){if(t.type==="signInViaRedirect")return Ur(e.prototype,this,"onAuthEvent").call(this,t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){let n=yield this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,Ur(e.prototype,this,"onAuthEvent").call(this,t);this.resolve(null)}})}onExecution(){return p(this,null,function*(){})}cleanUp(){}};function j2(e,t){return p(this,null,function*(){let n=H2(t),r=B2(e);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function U2(e,t){Mf.set(e._key(),t)}function B2(e){return nr(e._redirectPersistence)}function H2(e){return Af(V2,e.config.apiKey,e.name)}function $2(e,t,n=!1){return p(this,null,function*(){if(Tt(e.app))return Promise.reject(ji(e));let r=Wf(e),i=VA(r,t),s=yield new b_(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,t)),s})}var W2=600*1e3,T_=class{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!z2(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!jA(t)){let r=t.error.code?.split("auth/")[1]||"internal-error";n.onError(fn(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){let r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=W2&&this.cachedEventUids.clear(),this.cachedEventUids.has(rA(t))}saveEventToCache(t){this.cachedEventUids.add(rA(t)),this.lastProcessedEventTime=Date.now()}};function rA(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function jA({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function z2(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jA(e);default:return!1}}function G2(n){return p(this,arguments,function*(e,t={}){return fs(e,"GET","/v1/projects",t)})}var q2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Y2=/^https?/;function K2(e){return p(this,null,function*(){if(e.config.emulator)return;let{authorizedDomains:t}=yield G2(e);for(let n of t)try{if(Z2(n))return}catch{}kn(e,"unauthorized-domain")})}function Z2(e){let t=g_(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){let s=new URL(e);return s.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!Y2.test(n))return!1;if(q2.test(e))return r===e;let i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Q2=new Ui(3e4,6e4);function iA(){let e=On().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function J2(e){return new Promise((t,n)=>{function r(){iA(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{iA(),n(fn(e,"network-request-failed"))},timeout:Q2.get()})}if(On().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(On().gapi?.load)r();else{let i=TA("iframefcb");return On()[i]=()=>{gapi.load?r():n(fn(e,"network-request-failed"))},c2(`${l2()}?onload=${i}`).catch(o=>n(o))}}).catch(t=>{throw Nf=null,t})}var Nf=null;function X2(e){return Nf=Nf||J2(e),Nf}var eH=new Ui(5e3,15e3),tH="__/auth/iframe",nH="emulator/auth/iframe",rH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oH(e){let t=e.config;x(t.authDomain,e,"auth-domain-config-required");let n=t.emulator?R_(t,nH):`https://${e.config.authDomain}/${tH}`,r={apiKey:t.apiKey,appName:e.name,v:Rr},i=iH.get(e.config.apiHost);i&&(r.eid=i);let o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Mr(r).slice(1)}`}function sH(e){return p(this,null,function*(){let t=yield X2(e),n=On().gapi;return x(n,e,"internal-error"),t.open({where:document.body,url:oH(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rH,dontclear:!0},r=>new Promise((i,o)=>p(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=fn(e,"network-request-failed"),a=On().setTimeout(()=>{o(s)},eH.get());function c(){On().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var aH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cH=500,lH=600,uH="_blank",dH="http://localhost",$f=class{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function fH(e,t,n,r=cH,i=lH){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=S(m({},aH),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Ge().toLowerCase();n&&(a=_A(l)?uH:n),vA(l)&&(t=t||dH,c.scrollbars="yes");let u=Object.entries(c).reduce((f,[h,g])=>`${f}${h}=${g},`,"");if(r2(l)&&a!=="_self")return hH(t||"",a),new $f(null);let d=window.open(t||"",a,u);x(d,e,"popup-blocked");try{d.focus()}catch{}return new $f(d)}function hH(e,t){let n=document.createElement("a");n.href=e,n.target=t;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var pH="__/auth/handler",gH="emulator/auth/handler",mH=encodeURIComponent("fac");function oA(e,t,n,r,i,o){return p(this,null,function*(){x(e.config.authDomain,e,"auth-domain-config-required"),x(e.config.apiKey,e,"invalid-api-key");let s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Rr,eventId:i};if(t instanceof Dc){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",Ba(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(let[u,d]of Object.entries(o||{}))s[u]=d}if(t instanceof Vf){let u=t.getScopes().filter(d=>d!=="");u.length>0&&(s.scopes=u.join(","))}e.tenantId&&(s.tid=e.tenantId);let a=s;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield e._getAppCheckToken(),l=c?`#${mH}=${encodeURIComponent(c)}`:"";return`${vH(e)}?${Mr(a).slice(1)}${l}`})}function vH({config:e}){return e.emulator?R_(e,gH):`https://${e.authDomain}/${pH}`}var p_="webStorageSupport",S_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=j_,this._completeRedirectFn=$2,this._overrideRedirectResult=U2}_openPopup(t,n,r,i){return p(this,null,function*(){rr(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");let o=yield oA(t,n,r,g_(),i);return fH(t,o,U_())})}_openRedirect(t,n,r,i){return p(this,null,function*(){yield this._originValidation(t);let o=yield oA(t,n,r,g_(),i);return w2(o),new Promise(()=>{})})}_initialize(t){let n=t._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(rr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(t){return p(this,null,function*(){let n=yield sH(t),r=new T_(t);return n.register("authEvent",i=>(x(i?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r})}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(p_,{type:p_},i=>{let o=i?.[0]?.[p_];o!==void 0&&n(!!o),kn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){let n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=K2(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return DA()||yA()||k_()}},UA=S_;var sA="@firebase/auth",aA="1.12.0";var A_=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(t){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(t)}:null})}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){x(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function yH(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _H(e){ht(new xe("auth",(t,{options:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;x(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bA(e)},l=new I_(r,i,o,c);return u2(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),ht(new xe("auth-internal",t=>{let n=Wf(t.getProvider("auth").getImmediate());return(r=>new A_(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ve(sA,aA,yH(e)),Ve(sA,aA,"esm2020")}var EH=300,IH=iv("authIdTokenMaxAge")||EH,cA=null,CH=e=>t=>p(null,null,function*(){let n=t&&(yield t.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>IH)return;let i=n?.token;cA!==i&&(cA=i,yield fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function H_(e=Si()){let t=ln(e,"auth");if(t.isInitialized())return t.getImmediate();let n=SA(e,{popupRedirectResolver:UA,persistence:[LA,OA,j_]}),r=iv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=CH(o.toString());xA(n,s,()=>s(n.currentUser)),RA(n,a=>s(a))}}let i=nv("auth");return i&&AA(n,`http://${i}`),n}function wH(){return document.getElementsByTagName("head")?.[0]??document}a2({loadJS(e){return new Promise((t,n)=>{let r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{let o=fn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",wH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_H("Browser");var DH={apiKey:"AIzaSyDgBCejpvZHSbQYGXSfSlLfAbzSzqjWouY",authDomain:"animatic-7d235.firebaseapp.com",databaseURL:"https://animatic-7d235-default-rtdb.firebaseio.com",projectId:"animatic-7d235",storageBucket:"animatic-7d235.firebasestorage.app",messagingSenderId:"737458226045",appId:"1:737458226045:web:8da82aec2fa8c12a18c214",measurementId:"G-KDGHMVCXKH"},Gf=_v(DH),Qte=typeof window<"u"?Y0(Gf):null,ir=typeof window<"u"?H_(Gf):null;var Pn=(()=>{class e{collectionName="cards";db=y0(Gf);cardsCache=new Map;cardUpdates$=new re;saveUserProfile(n,r){return p(this,null,function*(){let i=zt(this.db,`users/${n}`),o=yield p0(i),s=o.exists()?o.val():void 0,a={displayName:r.displayName??s?.displayName??"",email:r.email??s?.email??"",profilePic:r.profilePic??s?.profilePic??null,lastLogin:r.lastLogin??Math.floor(Date.now()/1e3),createdAt:s?.createdAt??Date.now()};return If(i,a)})}removeUndefined(n){return Object.fromEntries(Object.entries(n).filter(([r,i])=>i!==void 0))}createCard(n){return p(this,null,function*(){let r={title:n.title,description:n.description??"",animationType:n.animationType,template:n.template,theme:n.theme,createdAt:n.createdAt?n.createdAt.getTime():Date.now(),createdBy:n.createdBy},i={revealTime:n.revealTime?n.revealTime.getTime():null,createdBy:n.createdBy},o=this.removeUndefined(r),s=this.removeUndefined(i),a=zt(this.db,`${this.collectionName}/${n.code}`),c=zt(this.db,`cardsMeta/${n.code}`);return yield Ef(a,o),Ef(c,s)})}getCardMeta(n){return new O(r=>{let i=zt(this.db,`cardsMeta/${n}`),o=yc(i,s=>{r.next(s.exists()?s.val():null)},s=>r.error(s));return()=>o()})}getCardByCode(n,r){let i=new O(s=>{let a=zt(this.db,`${this.collectionName}/${n}`),c=yc(a,l=>s.next(l.exists()?l.val():null),l=>s.error(l));return()=>c()}),o=new O(s=>{let a=zt(this.db,`cardsMeta/${n}`),c=yc(a,l=>s.next(l.exists()?l.val():null),l=>s.error(l));return()=>c()});return zr([i,o]).pipe(B(([s,a])=>{if(!s)return null;let c=a&&a.createdBy||s.createdBy||null,l=a&&typeof a.revealTime<"u"?a.revealTime:null;return!(l!==null&&Date.now()>=l||l===null)&&!(!!r&&r===c)?null:{title:s.title,description:s.description,animationType:s.animationType,template:s.template,theme:s.theme,revealTime:l?new Date(l):void 0,code:n,createdBy:s.createdBy,createdAt:s.createdAt?new Date(s.createdAt):new Date(0)}}))}getUserCards(n){return this.cardsCache.has(n)?A(this.cardsCache.get(n)):new O(r=>{let i=v0(zt(this.db,this.collectionName),g0("createdBy"),m0(n)),o=yc(i,s=>{let a=s.exists()?s.val():{},c=Object.keys(a).map(l=>{let u=a[l];return{title:u.title,description:u.description,animationType:u.animationType,template:u.template,theme:u.theme,revealTime:u.revealTime?new Date(u.revealTime):void 0,code:l,createdBy:u.createdBy,createdAt:u.createdAt?new Date(u.createdAt):new Date(0)}}).sort((l,u)=>u.createdAt.getTime()-l.createdAt.getTime());this.cardsCache.set(n,c),r.next(c)});return()=>o()})}refreshUserCards(n){this.cardsCache.delete(n),this.cardUpdates$.next()}updateCard(n){return p(this,null,function*(){let r={title:n.title,description:n.description??"",animationType:n.animationType,template:n.template,theme:n.theme,createdAt:n.createdAt?n.createdAt.getTime():Date.now(),createdBy:n.createdBy},i={createdBy:n.createdBy};n.revealTime!==void 0&&(i.revealTime=n.revealTime?n.revealTime.getTime():null);let o=this.removeUndefined(r),s=this.removeUndefined(i),a=zt(this.db,`${this.collectionName}/${n.code}`),c=zt(this.db,`cardsMeta/${n.code}`);return yield If(a,o),If(c,s)})}deleteCard(n){return p(this,null,function*(){let r=zt(this.db,`${this.collectionName}/${n}`),i=zt(this.db,`cardsMeta/${n}`);return yield Qy(r),Qy(i)})}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var hn=(()=>{class e{provider=new F_;user$=this.authState();signInWithGoogle(){return p(this,null,function*(){return ir?(yield B_(ir,this.provider)).user:Promise.reject(new Error("Auth not initialized"))})}googleSignIn(){return this.signInWithGoogle()}signOut(){return ir?V_(ir):Promise.reject(new Error("Auth not initialized"))}authState(){return new O(n=>{if(!ir){n.next(null),n.complete();return}let r=L_(ir,i=>n.next(i),i=>n.error(i));return()=>r()})}getCurrentUser(){return ir?ir.currentUser??null:null}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function bH(e,t){if(e&1&&(w(0,"div",23)(1,"h3"),R(2),D(),w(3,"p"),R(4),D()()),e&2){let n=ae();Y("ngClass",n.previewCard.animationType),F(),Ft("font-family",n.previewCard.font),F(),Lt(n.previewCard.title||"Preview Title"),F(),Ft("font-family",n.previewCard.font),F(),Lt(n.previewCard.description||"Description will appear here...")}}var $_=(()=>{class e{fb;firebaseService;authService;router;route;cardForm;previewCard={};editMode=!1;cardCode=null;fonts=["Roboto","Open Sans","Bradley Hand","Cursive","Monospace"];animations=["fade-in","slide","typewriter"];constructor(n,r,i,o,s){this.fb=n,this.firebaseService=r,this.authService=i,this.router=o,this.route=s}ngOnInit(){this.cardForm=this.fb.group({title:["",wi.required],description:[""],animationType:["",wi.required],template:["hero",wi.required],theme:["white",wi.required],revealTime:[""]}),this.route.paramMap.subscribe(n=>{this.cardCode=n.get("code"),this.editMode=!!this.cardCode,this.editMode&&this.cardCode&&this.firebaseService.getCardByCode(this.cardCode,this.authService.getCurrentUser()?.uid).subscribe(r=>{r&&(this.cardForm.patchValue({title:r.title,description:r.description,animationType:r.animationType,template:r.template,theme:r.theme,revealTime:r.revealTime?this.formatDate(r.revealTime):""}),this.previewCard=r)})}),this.cardForm.valueChanges.subscribe(n=>this.previewCard=n)}formatDate(n){return new Date(n).toISOString().slice(0,16)}onSubmit(){return p(this,null,function*(){if(this.cardForm.invalid)return;let n=this.authService.getCurrentUser(),r=this.cardForm.value,i={code:this.editMode?this.cardCode:eT(),title:r.title,description:r.description,animationType:r.animationType,template:this.cardForm.value.template,theme:this.cardForm.value.theme,revealTime:r.revealTime?new Date(r.revealTime):void 0,createdBy:n?.uid||"anonymous",createdAt:new Date};this.editMode?(yield this.firebaseService.updateCard(i),this.firebaseService.refreshUserCards(n?.uid||""),this.router.navigate(["/dashboard"])):(yield this.firebaseService.createCard(i),this.firebaseService.refreshUserCards(n?.uid||""),this.router.navigate(["/view",i.code]))})}static \u0275fac=function(r){return new(r||e)(C(Jb),C(Pn),C(hn),C(_e),C(ft))};static \u0275cmp=Ze({type:e,selectors:[["app-creator-page"]],decls:48,vars:4,consts:[[1,"creator-container","container","py-5"],[1,"row","justify-content-center","g-4"],[1,"col-lg-5"],[1,"creator-form",3,"ngSubmit","formGroup"],[1,"form-group"],["formControlName","title","type","text","placeholder","Amazing Surprise!",1,"form-control","premium-input"],["formControlName","description","rows","2",1,"form-control","premium-input"],["formControlName","animationType",1,"form-control","premium-input"],["value","fade-in"],["value","slide"],["value","typewriter"],[1,"mb-3"],[1,"form-label"],["formControlName","template",1,"form-select"],["value","hero"],["value","minimal"],["formControlName","theme",1,"form-select"],["value","white"],["value","dark"],["value","neon"],["formControlName","revealTime","type","datetime-local",1,"form-control","premium-input"],[1,"btn","create-btn","w-100","mt-3",3,"disabled"],["class","preview-box",3,"ngClass",4,"ngIf"],[1,"preview-box",3,"ngClass"]],template:function(r,i){r&1&&(w(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),fe("ngSubmit",function(){return i.onSubmit()}),w(4,"div",4)(5,"label"),R(6,"Title"),D(),de(7,"input",5),D(),w(8,"div",4)(9,"label"),R(10,"Description"),D(),de(11,"textarea",6),D(),w(12,"div",4)(13,"label"),R(14,"Animation Style"),D(),w(15,"select",7)(16,"option",8),R(17,"Fade In"),D(),w(18,"option",9),R(19,"Slide"),D(),w(20,"option",10),R(21,"Typewriter"),D()()(),w(22,"div",11)(23,"label",12),R(24,"Template Style"),D(),w(25,"select",13)(26,"option",14),R(27,"\u{1F3AC} Hero Zoom"),D(),w(28,"option",15),R(29,"\u{1F32B} Minimal Fade"),D()()(),w(30,"div",11)(31,"label",12),R(32,"Theme"),D(),w(33,"select",16)(34,"option",17),R(35,"White Clean"),D(),w(36,"option",18),R(37,"Dark Mode"),D(),w(38,"option",19),R(39,"\u26A1 Neon Glow"),D()()(),w(40,"div",4)(41,"label"),R(42,"Reveal Time (Optional)"),D(),de(43,"input",20),D(),w(44,"button",21),R(45),D()()(),w(46,"div",2),Ne(47,bH,5,7,"div",22),D()()()),r&2&&(F(3),Y("formGroup",i.cardForm),F(41),Y("disabled",i.cardForm.invalid),F(),Vt(" ",i.editMode?"Update":"Create"," Card "),F(2),Y("ngIf",i.previewCard))},dependencies:[ut,ca,sn,Xb,Gb,Kb,Qb,Id,wd,Ub,Bb,Ym,Km],styles:[".creator-container[_ngcontent-%COMP%]{color:#fff}.page-title[_ngcontent-%COMP%]{font-size:2.4rem;font-weight:700;background:linear-gradient(90deg,#805bff,#3b82f6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 18px rgba(128,91,255,.7)}.creator-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-bottom:.3rem;color:#dcdcff}.premium-input[_ngcontent-%COMP%]{background:#181818!important;color:#fff!important;border:1px solid rgba(128,91,255,.3);border-radius:12px;transition:.25s ease}.premium-input[_ngcontent-%COMP%]:focus{border-color:#8f7aff;box-shadow:0 0 12px #805bffa6}.create-btn[_ngcontent-%COMP%]{background:linear-gradient(90deg,#6e42ff,#4d8dff);font-weight:700;border-radius:10px;padding:12px;box-shadow:0 0 22px #7846ffa6;transition:.25s ease}.create-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.preview-box[_ngcontent-%COMP%]{background:#101010;padding:25px;border-radius:16px;min-height:250px;text-align:center;border:1px solid rgba(128,91,255,.35);box-shadow:0 0 22px #805bff99;transition:transform .4s}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .8s ease both}.slide[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .8s ease both}.typewriter[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;border-right:3px solid #fff;animation:_ngcontent-%COMP%_typing 2.5s steps(25) infinite,_ngcontent-%COMP%_blink .75s step-end infinite}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px);opacity:0}}@keyframes _ngcontent-%COMP%_typing{0%{width:0}to{width:100%}}@keyframes _ngcontent-%COMP%_blink{50%{border-color:transparent}}"]})}return e})();var TH=(e,t)=>[e,t];function SH(e,t){e&1&&(w(0,"div",6)(1,"h1",7),R(2,"Animatic"),D(),w(3,"p",8),R(4,"Loading your surprise..."),D()())}function AH(e,t){if(e&1&&(w(0,"div",9)(1,"h1",10),R(2),D()()),e&2){let n=ae();F(2),Lt(n.countdown)}}function MH(e,t){e&1&&(w(0,"div",11),de(1,"i",12),w(2,"span"),R(3,"Double Tap / Swipe Up to View"),D()())}function NH(e,t){if(e&1&&(w(0,"div",13)(1,"h1",14),R(2),D(),w(3,"p",15),R(4),D()()),e&2){let n=ae();Y("ngClass",Ng(7,TH,n.card.template,n.card.theme)),F(),Ft("font-family",n.card.font),F(),Vt(" ",n.card.title," "),F(),Ft("font-family",n.card.font),F(),Vt(" ",n.card.description," ")}}function RH(e,t){e&1&&de(0,"div",16)}var BA=(()=>{class e{route;firebaseService;card=null;showFullscreenBtn=!0;countdown=null;timerSub=null;revealReady=!1;loading=!0;code=null;showFlash=!1;lastTap=0;touchStartY=0;constructor(n,r){this.route=n,this.firebaseService=r}ngOnInit(){this.route.params.subscribe(n=>{let r=n.code;this.code=r,this.firebaseService.getCardMeta(r).subscribe(i=>{if(!i)return;let o=i.revealTime?new Date(i.revealTime):null;o&&o>new Date?(this.revealReady=!1,this.startCountdown(o)):(this.revealReady=!0,this.loading=!1,this.loadCard(r))})})}loadCard(n){this.firebaseService.getCardByCode(n).subscribe(r=>{this.card=r,this.showFlash=!0,this.initGestures(),console.log("Card Loaded:",r)})}startCountdown(n){this.updateCountdown(n),this.loading=!1,this.timerSub=mh(1e3).subscribe(()=>{this.updateCountdown(n)})}updateCountdown(n){let r=new Date,i=n.getTime()-r.getTime();if(i<=0){this.countdown=null,this.revealReady=!0,this.showFullscreenBtn=!0,this.showFlash=!0,this.initGestures(),setTimeout(()=>{document.querySelector(".reveal-title")?.classList.add("light-burst")},100),this.timerSub&&(this.timerSub.unsubscribe(),this.timerSub=null,this.loadCard(this.code));return}let o=Math.floor(i/36e5),s=Math.floor(i%36e5/6e4),a=Math.floor(i%6e4/1e3),c=o>0?String(o).padStart(2,"0"):null,l=String(s).padStart(2,"0"),u=String(a).padStart(2,"0");this.countdown=c?`${c}:${l}:${u}`:`${l}:${u}`}goFullscreen(){document.fullscreenElement||document.documentElement.requestFullscreen(),this.showFullscreenBtn=!1,this.showFlash=!1}getAnimationClass(){if(!this.card)return"";switch(this.card.animationType){case"fade-in":return"fade-in";case"slide":return"slide";case"typewriter":return"typewriter";default:return""}}initGestures(){let n=document.querySelector(".view-container");n&&(console.log("Gesture Listeners Attached \u2714\uFE0F"),n.addEventListener("touchend",r=>{let i=Date.now();this.revealReady&&i-this.lastTap<300&&this.goFullscreen(),this.lastTap=i}),n.addEventListener("touchstart",r=>{this.touchStartY=r.changedTouches[0].clientY}),n.addEventListener("touchend",r=>{let i=r.changedTouches[0].clientY;this.revealReady&&this.touchStartY-i>80&&this.goFullscreen()}),n.addEventListener("dblclick",()=>{this.revealReady&&this.goFullscreen()}))}ngAfterViewInit(){setTimeout(()=>this.initGestures(),300)}ngOnDestroy(){this.timerSub&&this.timerSub.unsubscribe()}static \u0275fac=function(r){return new(r||e)(C(ft),C(Pn))};static \u0275cmp=Ze({type:e,selectors:[["app-view-page"]],decls:6,vars:5,consts:[[1,"view-container"],["class","center-box",4,"ngIf"],["class","countdown-box center-box",4,"ngIf"],["class","tap-hint center-box",4,"ngIf"],["class","reveal-box",3,"ngClass",4,"ngIf"],["class","flash-beam",4,"ngIf"],[1,"center-box"],[1,"loading-text"],[1,"loading-subtext"],[1,"countdown-box","center-box"],[1,"countdown-timer"],[1,"tap-hint","center-box"],[1,"bi","bi-arrows-fullscreen"],[1,"reveal-box",3,"ngClass"],[1,"reveal-title"],[1,"reveal-desc"],[1,"flash-beam"]],template:function(r,i){r&1&&(w(0,"div",0),Ne(1,SH,5,0,"div",1)(2,AH,3,1,"div",2)(3,MH,4,0,"div",3)(4,NH,5,10,"div",4)(5,RH,1,0,"div",5),D()),r&2&&(F(),Y("ngIf",i.loading),F(),Y("ngIf",!i.loading&&i.countdown&&!i.revealReady),F(),Y("ngIf",!i.loading&&i.card&&i.revealReady&&i.showFullscreenBtn),F(),Y("ngIf",i.card&&i.revealReady&&!i.showFullscreenBtn),F(),Y("ngIf",i.showFlash))},dependencies:[ut,ca,sn],styles:[".view-container[_ngcontent-%COMP%]{height:100vh;width:100vw;display:flex;justify-content:center;align-items:center;background:#000;overflow:hidden;position:relative}.center-box[_ngcontent-%COMP%]{text-align:center;color:#fff}.loading-text[_ngcontent-%COMP%]{font-size:3rem;font-weight:900;background:linear-gradient(90deg,#914eff,#00e1ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.loading-subtext[_ngcontent-%COMP%]{margin-top:10px;font-size:1rem;opacity:.7}.countdown-timer[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-size:4rem;font-weight:900;color:#00ffe0;text-shadow:0 0 20px rgba(0,255,224,.6);animation:_ngcontent-%COMP%_glowPulse 1s ease-in-out infinite alternate}@keyframes _ngcontent-%COMP%_glowPulse{0%{opacity:.85}to{opacity:1}}.tap-hint[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_hintFloat 1.4s infinite ease-in-out alternate;display:flex;flex-direction:column;align-items:center;color:#fff;gap:6px;font-size:1rem;opacity:.9}@keyframes _ngcontent-%COMP%_hintFloat{0%{transform:translateY(6px)}to{transform:translateY(-6px)}}.reveal-box[_ngcontent-%COMP%]{text-align:center;padding:20px;width:100%;transform-style:preserve-3d}.reveal-title[_ngcontent-%COMP%]{font-size:3.6rem;font-weight:900;color:#fff;opacity:0;animation:_ngcontent-%COMP%_fadeSlide .9s ease forwards}@keyframes _ngcontent-%COMP%_fadeSlide{0%{opacity:0;transform:translateY(-40px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.reveal-desc[_ngcontent-%COMP%]{font-size:1.5rem;opacity:0;color:#dcdcdc;padding:10px 25px;margin-top:12px;animation:_ngcontent-%COMP%_fadeInDesc .9s ease forwards .4s}@keyframes _ngcontent-%COMP%_fadeInDesc{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.flash-beam[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle,rgba(255,255,255,.35),transparent 70%);animation:_ngcontent-%COMP%_flashReveal .7s ease forwards}@keyframes _ngcontent-%COMP%_flashReveal{0%{opacity:1}to{opacity:0;visibility:hidden}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeSlide .9s ease forwards}.slide[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp 1.2s ease forwards}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(60px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 600px){.reveal-title[_ngcontent-%COMP%]{font-size:2.4rem}.reveal-desc[_ngcontent-%COMP%]{font-size:1.2rem;padding:10px}.countdown-timer[_ngcontent-%COMP%]{font-size:3rem}}.hero[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_heroZoom 1.6s ease-out forwards}@keyframes _ngcontent-%COMP%_heroZoom{0%{transform:scale(.6);opacity:0}to{transform:scale(1);opacity:1}}.minimal[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_softFade 1.2s ease-in-out forwards}@keyframes _ngcontent-%COMP%_softFade{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.neon[_ngcontent-%COMP%]{background:#000;color:#0ff;text-shadow:0 0 12px #0ff,0 0 25px #0ff;animation:_ngcontent-%COMP%_neonGlow 1.4s alternate infinite}@keyframes _ngcontent-%COMP%_neonGlow{0%{filter:drop-shadow(0 0 8px #0ff)}to{filter:drop-shadow(0 0 22px #00e6ff)}}"]})}return e})();function xH(e,t){if(e&1&&(w(0,"span"),R(1),D()),e&2){let n=t.$implicit,r=t.index;Ft("animation-delay",r*.12+"s"),F(),Vt(" ",n," ")}}var HA=(()=>{class e{name="Angular User";titleLetters="ANIMATIC".split("");ngOnInit(){console.log("AnimaticLoaderComponent initialized")}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Ze({type:e,selectors:[["app-animatic-loader"]],decls:3,vars:1,consts:[[1,"animatic-loader"],[1,"animatic-title"],[3,"animationDelay",4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(w(0,"div",0)(1,"h1",1),Ne(2,xH,2,3,"span",2),D()()),r&2&&(F(2),Y("ngForOf",i.titleLetters))},dependencies:[ut,To,Ci],styles:['@charset "UTF-8";.animatic-loader[_ngcontent-%COMP%]{position:fixed;inset:0;background:var(--bg-color);display:flex;align-items:center;justify-content:center;z-index:9999}.animatic-title[_ngcontent-%COMP%]{display:flex;gap:8px;font-size:4rem;font-weight:900}.animatic-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_letterPop .45s ease forwards,_ngcontent-%COMP%_colorShift 2.2s linear infinite alternate}@keyframes _ngcontent-%COMP%_letterPop{0%{transform:translateY(20px) scale(.6);opacity:0}60%{transform:translateY(-5px) scale(1.1);opacity:1}to{transform:translateY(0) scale(1);opacity:1}}@keyframes _ngcontent-%COMP%_colorShift{0%{color:#7b61ff;text-shadow:0 0 10px #7b61ff}50%{color:#67e8f9;text-shadow:0 0 12px #67e8f9}to{color:#ff80bf;text-shadow:0 0 14px #ff80bf}}.animatic-title[_ngcontent-%COMP%]{font-size:4rem;gap:8px}@media (max-width: 992px){.animatic-title[_ngcontent-%COMP%]{font-size:3rem;gap:6px}}@media (max-width: 600px){.animatic-title[_ngcontent-%COMP%]{font-size:2.3rem;gap:4px}}@media (max-width: 380px){.animatic-title[_ngcontent-%COMP%]{font-size:2rem;gap:3px}}']})}return e})();function OH(e,t){e&1&&de(0,"app-animatic-loader")}function kH(e,t){if(e&1){let n=Er();w(0,"div",11),fe("click",function(){let i=_t(n).$implicit,o=ae(4);return Et(o.viewCard(i.code))}),w(1,"div",12)(2,"h4",13),R(3),D(),w(4,"p",14),R(5),D(),w(6,"span",15),R(7),Rg(8,"date"),D(),w(9,"div",16)(10,"button",17),fe("click",function(i){let o=_t(n).$implicit;return ae(4).editCard(o.code),Et(i.stopPropagation())}),de(11,"i",18),D(),w(12,"button",17),fe("click",function(i){let o=_t(n).$implicit;return ae(4).copyShareLink(o.code),Et(i.stopPropagation())}),de(13,"i",19),D(),w(14,"button",20),fe("click",function(i){let o=_t(n).$implicit;return ae(4).deleteCard(o.code),Et(i.stopPropagation())}),de(15,"i",21),D()()()()}if(e&2){let n=t.$implicit;F(2),Ft("font-family",n.font),F(),Vt(" ",n.title," "),F(2),Lt(n.description||"No description yet"),F(2),Lt(xg(8,5,n.createdAt,"medium"))}}function PH(e,t){if(e&1&&(w(0,"div",9),Ne(1,kH,16,8,"div",10),D()),e&2){let n=ae(3);F(),Y("ngForOf",n.cards)}}function FH(e,t){e&1&&(w(0,"div",22)(1,"p",23),R(2,"No Cards Yet"),D(),w(3,"button",6),R(4,"+ Create Card"),D()())}function LH(e,t){if(e&1&&(gu(0),Ne(1,PH,2,1,"div",8)(2,FH,5,0,"ng-template",null,0,_u),mu()),e&2){let n=vu(3),r=ae(2);F(),Y("ngIf",r.cards.length>0)("ngIfElse",n)}}function VH(e,t){e&1&&(w(0,"div",22)(1,"p",23),R(2,"No Cards Yet"),D(),w(3,"button",6),R(4,"+ Create Card"),D()())}function jH(e,t){if(e&1&&(w(0,"div",3)(1,"div",4)(2,"h2",5),R(3,"Your Cards"),D(),w(4,"button",6),R(5," Create + "),D()(),Ne(6,LH,4,2,"ng-container",7)(7,VH,5,0,"ng-template",null,0,_u),D()),e&2){let n=vu(8),r=ae();F(6),Y("ngIf",r.cards&&r.cards.length)("ngIfElse",n)}}var $A=(()=>{class e{firebaseService;auth;router;cards=[];loggedInUser=null;isLoading=!0;destroy$=new re;constructor(n,r,i){this.firebaseService=n,this.auth=r,this.router=i}ngOnInit(){this.auth.user$.pipe(jn(this.destroy$),Me(n=>n?(this.loggedInUser={uid:n.uid,displayName:n.displayName||"",email:n.email||"",profilePic:n.photoURL||null},this.firebaseService.getUserCards(n.uid)):(this.isLoading=!1,this.cards=[],A([])))).subscribe({next:n=>{this.cards=n,this.isLoading=!1},error:n=>{console.error("Failed to fetch cards:",n),this.isLoading=!1}})}editCard(n){console.log("Editing card:",n),this.router.navigate(["/creator",n])}deleteCard(n){return p(this,null,function*(){if(confirm("Are you sure you want to delete this card?"))try{yield this.firebaseService.deleteCard(n),this.firebaseService.refreshUserCards(this.loggedInUser.uid),console.log(`Deleted card: ${n}`)}catch(r){console.error("Failed to delete card:",r)}})}isLocked(n){if(!n.revealTime)return!1;let r=new Date;return new Date(n.revealTime)>r}viewCard(n){this.router.navigate(["/view",n])}copyShareLink(n){let r=`${location.origin}/Animatic/view/${n}`;navigator.clipboard.writeText(r),alert("Link copied! \u{1F4CB}")}static \u0275fac=function(r){return new(r||e)(C(Pn),C(hn),C(_e))};static \u0275cmp=Ze({type:e,selectors:[["app-dashboard"]],decls:2,vars:2,consts:[["noCards",""],[4,"ngIf"],["class","dashboard-container container py-5",4,"ngIf"],[1,"dashboard-container","container","py-5"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"dashboard-title"],["routerLink","/creator",1,"btn","create-btn"],[4,"ngIf","ngIfElse"],["class","row g-4",4,"ngIf","ngIfElse"],[1,"row","g-4"],["class","col-12 col-sm-6 col-xl-4",3,"click",4,"ngFor","ngForOf"],[1,"col-12","col-sm-6","col-xl-4",3,"click"],[1,"animatic-card"],[1,"card-title"],[1,"card-desc"],[1,"card-date"],[1,"actions"],[3,"click"],[1,"bi","bi-pencil-square"],[1,"bi","bi-share-fill"],[1,"del",3,"click"],[1,"bi","bi-trash-fill"],[1,"text-center","mt-5"],[1,"text-secondary","fw-semibold"]],template:function(r,i){r&1&&Ne(0,OH,1,0,"app-animatic-loader",1)(1,jH,9,2,"div",2),r&2&&(Y("ngIf",i.isLoading),F(),Y("ngIf",!i.isLoading))},dependencies:[ut,To,sn,Ci,Uo,HA,Zg],styles:[".dashboard-title[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:800;letter-spacing:-1px}.create-btn[_ngcontent-%COMP%]{background:linear-gradient(90deg,#805bff,#3b82f6);color:#fff;border-radius:10px;padding:10px 22px;font-weight:600;border:none;transition:.3s ease;box-shadow:0 4px 12px #805bff59}.create-btn[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 10px 20px #805bff73}.premium-card[_ngcontent-%COMP%]{border-radius:18px;background:#ffffffd9;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:transform .25s ease,box-shadow .25s ease}.premium-card[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 15px 35px #0000001f}.card-preview[_ngcontent-%COMP%]{height:140px;border-radius:18px 18px 0 0;padding:14px;color:#000;position:relative}.badge-status[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:.75rem;padding:4px 8px;border-radius:6px}.preview-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;bottom:12px;text-shadow:0 2px 6px rgba(255,255,255,.8)}.preview-description[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500}.btn-action[_ngcontent-%COMP%]{border-radius:8px;padding:5px 10px;font-size:.8rem;transition:.25s}.view-btn[_ngcontent-%COMP%]{border:1px solid #16a34a;color:#16a34a}.view-btn[_ngcontent-%COMP%]:hover{background:#16a34a;color:#fff}.edit-btn[_ngcontent-%COMP%]{border:1px solid #2563eb;color:#2563eb}.edit-btn[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}.share-btn[_ngcontent-%COMP%]{border:1px solid #6b7280;color:#6b7280}.share-btn[_ngcontent-%COMP%]:hover{background:#6b7280;color:#fff}.delete-btn[_ngcontent-%COMP%]{border:1px solid #dc2626;color:#dc2626}.delete-btn[_ngcontent-%COMP%]:hover{background:#dc2626;color:#fff}.premium-card[_ngcontent-%COMP%]{background:#fff;border-radius:18px;padding:15px 18px;transition:.3s ease}.premium-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 15px 30px #0000001a}.status-ribbon[_ngcontent-%COMP%]{position:absolute;top:-6px;right:-6px;padding:6px 14px;border-radius:12px 12px 0;font-size:.75rem;font-weight:700;display:flex;align-items:center;gap:5px}.status-ribbon.unlocked[_ngcontent-%COMP%]{background:#10b981;color:#fff}.status-ribbon.locked[_ngcontent-%COMP%]{background:#facc15;color:#000}.card-title[_ngcontent-%COMP%]{font-weight:800;font-size:1.2rem}.btn-premium[_ngcontent-%COMP%]{background:#ffffff0d;border-radius:6px;font-size:.82rem;font-weight:600;padding:6px 12px;transition:.2s ease;color:var(--text-color)}.btn-premium[_ngcontent-%COMP%]:hover{background:var(--accent);color:#fff!important}.btn-premium.view[_ngcontent-%COMP%]{background:#10b98126;color:#064e3b}.btn-premium.view[_ngcontent-%COMP%]:hover{background:#10b981;color:#fff}.btn-premium.edit[_ngcontent-%COMP%]{background:#2563eb26;color:#1e3a8a}.btn-premium.edit[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}.btn-premium.share[_ngcontent-%COMP%]{background:#6b728026;color:#111827}.btn-premium.share[_ngcontent-%COMP%]:hover{background:#6b7280;color:#fff}.btn-premium.delete[_ngcontent-%COMP%]{background:#dc26261a;color:#991b1b}.btn-premium.delete[_ngcontent-%COMP%]:hover{background:#dc2626;color:#fff}.premium-card[_ngcontent-%COMP%]{background:var(--card-bg);color:var(--text-color);box-shadow:0 10px 25px var(--glow)}.card-title[_ngcontent-%COMP%]{color:var(--text-color)}.btn-premium.view[_ngcontent-%COMP%]{border-color:var(--accent)}.btn-premium.view[_ngcontent-%COMP%]:hover{background:var(--accent);color:#fff}.badge-status.unlocked[_ngcontent-%COMP%]{background:#00ffa5;color:#032;font-weight:700;box-shadow:0 0 10px #00ffa566}app-animatic-loader[_ngcontent-%COMP%]{transition:opacity .5s ease}.animatic-card[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:18px;padding:18px;position:relative;overflow:hidden;transition:.35s;display:flex;flex-direction:column;gap:10px;box-shadow:0 12px 25px var(--glow);border:1px solid rgba(255,255,255,.08)}.animatic-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px) scale(1.02);box-shadow:0 15px 35px var(--accent)}.card-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:800;letter-spacing:-.5px;color:var(--text-color)}.card-desc[_ngcontent-%COMP%]{font-size:.9rem;opacity:.9;color:var(--text-color)}.card-date[_ngcontent-%COMP%]{font-size:.78rem;opacity:.7;color:var(--text-color)}.status-tag[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;padding:6px 12px;border-radius:8px;font-size:.75rem;display:flex;align-items:center;gap:6px}.status-tag.unlocked[_ngcontent-%COMP%]{background:#00ffa577;color:#032;box-shadow:0 0 15px #00ffa573}.status-tag.locked[_ngcontent-%COMP%]{background:#fb07;color:#4a3000;box-shadow:0 0 15px #ffbb0073}.actions[_ngcontent-%COMP%]{margin-top:8px;display:flex;gap:12px}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#ffffff14;border:none;padding:8px 10px;border-radius:10px;cursor:pointer;transition:.3s ease;color:var(--text-color)}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--accent);color:#fff;box-shadow:0 0 12px var(--accent)}.actions[_ngcontent-%COMP%]   button.del[_ngcontent-%COMP%]{background:#ff00002e}.actions[_ngcontent-%COMP%]   button.del[_ngcontent-%COMP%]:hover{background:#f44}"]})}return e})();var qf=(()=>{class e{auth;router;constructor(n,r){this.auth=n,this.router=r}canActivate(){return this.auth.authState().pipe(Mt(1),B(n=>!!n),Ce(n=>{n||this.router.navigate(["/login"])}))}static \u0275fac=function(r){return new(r||e)(M(hn),M(_e))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),WA=(()=>{class e{auth;router;constructor(n,r){this.auth=n,this.router=r}canActivate(){return this.auth.authState().pipe(Mt(1),B(n=>n?(this.router.navigate(["/dashboard"]),!1):!0))}static \u0275fac=function(r){return new(r||e)(M(hn),M(_e))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function UH(e,t){e&1&&(w(0,"h2"),R(1,"Sign in with Google"),D())}function BH(e,t){if(e&1){let n=Er();w(0,"button",5),fe("click",function(){_t(n);let i=ae();return Et(i.signIn())}),de(1,"img",6),w(2,"span"),R(3),D()()}if(e&2){let n=ae();Y("disabled",n.loading),F(3),Lt(n.loading?"Signing in...":"Sign in with Google")}}function HH(e,t){if(e&1){let n=Er();w(0,"div",7)(1,"p"),R(2),D(),w(3,"button",8),fe("click",function(){_t(n);let i=ae();return Et(i.logout())}),R(4,"Sign out"),D()()}if(e&2){let n=ae();F(2),yu("Welcome, ",n.loggedInUser.displayName," (",n.loggedInUser.email,")")}}function $H(e,t){e&1&&(w(0,"p",9),R(1,"You will be redirected after successful sign-in."),D())}var zA=(()=>{class e{auth;router;firebaseService;loading=!1;loggedInUser=null;destroy$=new re;constructor(n,r,i){this.auth=n,this.router=r,this.firebaseService=i}ngOnInit(){this.auth.authState().pipe(jn(this.destroy$)).subscribe(n=>{this.loggedInUser=n,n&&this.router.navigate(["/dashboard"])})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}signIn(){this.loading=!0,this.auth.signInWithGoogle().then(n=>{console.log("Signed in user:",n),n?this.firebaseService.saveUserProfile(n.uid,{displayName:n.displayName||"",email:n.email||"",profilePic:n.photoURL||null,lastLogin:Math.floor(Date.now()/1e3)}).catch(r=>console.warn("saveUserProfile failed",r)).finally(()=>this.router.navigate(["/dashboard"])):this.router.navigate(["/dashboard"])}).catch(n=>{console.error("Sign-in error:",n),alert("Sign-in failed: "+(n?.message||n))}).finally(()=>this.loading=!1)}logout(){this.auth.signOut().then(()=>{this.loggedInUser=null,this.router.navigate(["/login"])}).catch(n=>console.error("Sign-out error:",n))}static \u0275fac=function(r){return new(r||e)(C(hn),C(_e),C(Pn))};static \u0275cmp=Ze({type:e,selectors:[["app-login"]],decls:5,vars:4,consts:[[1,"login-card"],[4,"ngIf"],["class","google-btn",3,"disabled","click",4,"ngIf"],["class","user-info",4,"ngIf"],["class","hint",4,"ngIf"],[1,"google-btn",3,"click","disabled"],["src","https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","alt","Google"],[1,"user-info"],[1,"btn-cancel",3,"click"],[1,"hint"]],template:function(r,i){r&1&&(w(0,"div",0),Ne(1,UH,2,0,"h2",1)(2,BH,4,2,"button",2)(3,HH,5,2,"div",3)(4,$H,2,0,"p",4),D()),r&2&&(F(),Y("ngIf",!i.loggedInUser),F(),Y("ngIf",!i.loggedInUser),F(),Y("ngIf",i.loggedInUser),F(),Y("ngIf",!i.loggedInUser))},dependencies:[ut,sn],styles:[".login-card[_ngcontent-%COMP%]{width:320px;padding:1.25rem;border-radius:8px;box-shadow:0 6px 18px #10182814;background:#fff;display:flex;flex-direction:column;gap:.75rem}[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;padding:1rem;background:#f3f4f6}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .25rem}.login-card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:.9rem;gap:.25rem}.login-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #e5e7eb;border-radius:4px}.login-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem .8rem;border:none;background:linear-gradient(90deg,#ff6b6b,#b649ff);color:#fff;border-radius:6px;cursor:pointer}.login-card[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:.8rem;color:#6b7280}.google-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.75rem;padding:.6rem .8rem;border-radius:6px;border:1px solid #e5e7eb;background:#fff;cursor:pointer}.google-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}.google-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}"]})}return e})();var GA=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:zA,canActivate:[WA]},{path:"creator",component:$_,canActivate:[qf]},{path:"creator/:code",component:$_,canActivate:[qf]},{path:"view/:code",component:BA},{path:"dashboard",component:$A,canActivate:[qf]},{path:"**",redirectTo:"dashboard"}];var qA={providers:[gp(),Pg({eventCoalescing:!0}),Pm(GA)]};function WH(e,t){e&1&&de(0,"i",9)}function zH(e,t){e&1&&de(0,"i",10)}function GH(e,t){if(e&1){let n=Er();w(0,"header",2)(1,"a",3),R(2,"Animatic"),D(),w(3,"div",4)(4,"button",5),fe("click",function(){_t(n);let i=ae();return Et(i.toggleTheme())}),Ne(5,WH,1,0,"i",6)(6,zH,1,0,"i",7),D(),w(7,"a",8),fe("click",function(){_t(n);let i=ae();return Et(i.logout())}),R(8,"Logout"),D()()()}if(e&2){let n=ae();F(5),Y("ngIf",!n.isDarkMode),F(),Y("ngIf",n.isDarkMode)}}var YA=(()=>{class e{auth;router;firebaseService;title=It("FireTest");user$;isDarkMode=!1;showHeader=!0;constructor(n,r,i){this.auth=n,this.router=r,this.firebaseService=i,this.user$=this.auth.user$,r.events.subscribe(o=>{o instanceof dt&&(this.showHeader=!o.url.startsWith("/view/"))})}ngOnInit(){localStorage.getItem("theme")==="dark"&&(this.isDarkMode=!0,document.body.classList.add("dark-theme"))}toggleTheme(){this.isDarkMode=!this.isDarkMode,document.body.classList.toggle("dark-theme",this.isDarkMode),localStorage.setItem("theme",this.isDarkMode?"dark":"light")}logout(){this.auth.signOut().then(()=>{this.router.navigate(["/login"])}).catch(n=>{console.error("Sign-out error:",n)})}static \u0275fac=function(r){return new(r||e)(C(hn),C(_e),C(Pn))};static \u0275cmp=Ze({type:e,selectors:[["app-root"]],decls:3,vars:1,consts:[[1,"content-wrapper"],["class","header-container",4,"ngIf"],[1,"header-container"],["routerLink","/",1,"brand"],[1,"actions"],[1,"theme-toggle",3,"click"],["class","bi bi-moon-stars-fill",4,"ngIf"],["class","bi bi-brightness-high-fill",4,"ngIf"],[1,"logout",3,"click"],[1,"bi","bi-moon-stars-fill"],[1,"bi","bi-brightness-high-fill"]],template:function(r,i){r&1&&(w(0,"div",0),Ne(1,GH,9,2,"header",1),de(2,"router-outlet"),D()),r&2&&(F(),Y("ngIf",i.showHeader))},dependencies:[ut,sn,Ci,Sa,Uo],styles:[".app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;font-family:Roboto,sans-serif}.content[_ngcontent-%COMP%]{flex:1;padding:1rem}.header-container[_ngcontent-%COMP%]{width:100%;padding:12px 24px;display:flex;justify-content:space-between;align-items:center;background:var(--bg-color);color:var(--text-color);border-bottom:1px solid rgba(255,255,255,.06);box-shadow:0 4px 20px var(--glow);position:sticky;top:0;z-index:999}.brand[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:900;background:linear-gradient(90deg,#a78bfa,#3b82f6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;filter:drop-shadow(0 0 12px rgba(128,91,255,.6));letter-spacing:-1px}.actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px}.theme-toggle[_ngcontent-%COMP%]{border:none;background:transparent;font-size:1.25rem;cursor:pointer;color:var(--text-color);transition:.3s}.theme-toggle[_ngcontent-%COMP%]:hover{transform:scale(1.2);color:var(--accent)}.logout[_ngcontent-%COMP%]{color:var(--accent);font-weight:600;cursor:pointer;text-decoration:none}.logout[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}return e})();am(YA,qA).catch(e=>console.error(e));
