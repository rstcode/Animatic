var iN=Object.defineProperty,oN=Object.defineProperties;var sN=Object.getOwnPropertyDescriptors;var Ac=Object.getOwnPropertySymbols,aN=Object.getPrototypeOf,nE=Object.prototype.hasOwnProperty,rE=Object.prototype.propertyIsEnumerable,cN=Reflect.get;var tE=(e,t,n)=>t in e?iN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m=(e,t)=>{for(var n in t||={})nE.call(t,n)&&tE(e,n,t[n]);if(Ac)for(var n of Ac(t))rE.call(t,n)&&tE(e,n,t[n]);return e},S=(e,t)=>oN(e,sN(t));var Nc=(e,t)=>{var n={};for(var r in e)nE.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Ac)for(var r of Ac(e))t.indexOf(r)<0&&rE.call(e,r)&&(n[r]=e[r]);return n};var jr=(e,t,n)=>cN(aN(e),n,t);var p=(e,t,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(e,t)).next())});var nh;function Mc(){return nh}function fn(e){let t=nh;return nh=e,t}var iE=Symbol("NotFound");function Bi(e){return e===iE||e?.name==="\u0275NotFound"}function Pc(e,t){return Object.is(e,t)}var He=null,Rc=!1,rh=1,lN=null,qe=Symbol("SIGNAL");function j(e){let t=He;return He=e,t}function Fc(){return He}var Hi={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function $i(e){if(Rc)throw new Error("");if(He===null)return;He.consumerOnSignalRead(e);let t=He.producersTail;if(t!==void 0&&t.producer===e)return;let n,r=He.recomputing;if(r&&(n=t!==void 0?t.nextProducer:He.producers,n!==void 0&&n.producer===e)){He.producersTail=n,n.lastReadVersion=e.version;return}let i=e.consumersTail;if(i!==void 0&&i.consumer===He&&(!r||dN(i,He)))return;let o=Gi(He),s={producer:e,consumer:He,nextProducer:n,prevConsumer:i,lastReadVersion:e.version,nextConsumer:void 0};He.producersTail=s,t!==void 0?t.nextProducer=s:He.producers=s,o&&cE(e,s)}function oE(){rh++}function Lc(e){if(!(Gi(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===rh)){if(!e.producerMustRecompute(e)&&!ms(e)){kc(e);return}e.producerRecomputeValue(e),kc(e)}}function ih(e){if(e.consumers===void 0)return;let t=Rc;Rc=!0;try{for(let n=e.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||uN(r)}}finally{Rc=t}}function oh(){return He?.consumerAllowSignalWrites!==!1}function uN(e){e.dirty=!0,ih(e),e.consumerMarkedDirty?.(e)}function kc(e){e.dirty=!1,e.lastCleanEpoch=rh}function Wi(e){return e&&sE(e),j(e)}function sE(e){e.producersTail=void 0,e.recomputing=!0}function gs(e,t){j(t),e&&aE(e)}function aE(e){e.recomputing=!1;let t=e.producersTail,n=t!==void 0?t.nextProducer:e.producers;if(n!==void 0){if(Gi(e))do n=sh(n);while(n!==void 0);t!==void 0?t.nextProducer=void 0:e.producers=void 0}}function ms(e){for(let t=e.producers;t!==void 0;t=t.nextProducer){let n=t.producer,r=t.lastReadVersion;if(r!==n.version||(Lc(n),r!==n.version))return!0}return!1}function vs(e){if(Gi(e)){let t=e.producers;for(;t!==void 0;)t=sh(t)}e.producers=void 0,e.producersTail=void 0,e.consumers=void 0,e.consumersTail=void 0}function cE(e,t){let n=e.consumersTail,r=Gi(e);if(n!==void 0?(t.nextConsumer=n.nextConsumer,n.nextConsumer=t):(t.nextConsumer=void 0,e.consumers=t),t.prevConsumer=n,e.consumersTail=t,!r)for(let i=e.producers;i!==void 0;i=i.nextProducer)cE(i.producer,i)}function sh(e){let t=e.producer,n=e.nextProducer,r=e.nextConsumer,i=e.prevConsumer;if(e.nextConsumer=void 0,e.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:t.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(t.consumers=r,!Gi(t)){let o=t.producers;for(;o!==void 0;)o=sh(o)}return n}function Gi(e){return e.consumerIsAlwaysLive||e.consumers!==void 0}function Vc(e){lN?.(e)}function dN(e,t){let n=t.producersTail;if(n!==void 0){let r=t.producers;do{if(r===e)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function jc(e,t){let n=Object.create(fN);n.computation=e,t!==void 0&&(n.equal=t);let r=()=>{if(Lc(n),$i(n),n.value===ps)throw n.error;return n.value};return r[qe]=n,Vc(n),r}var xc=Symbol("UNSET"),Oc=Symbol("COMPUTING"),ps=Symbol("ERRORED"),fN=S(m({},Hi),{value:xc,dirty:!0,error:null,equal:Pc,kind:"computed",producerMustRecompute(e){return e.value===xc||e.value===Oc},producerRecomputeValue(e){if(e.value===Oc)throw new Error("");let t=e.value;e.value=Oc;let n=Wi(e),r,i=!1;try{r=e.computation(),j(null),i=t!==xc&&t!==ps&&r!==ps&&e.equal(t,r)}catch(o){r=ps,e.error=o}finally{gs(e,n)}if(i){e.value=t;return}e.value=r,e.version++}});function hN(){throw new Error}var lE=hN;function uE(e){lE(e)}function ah(e){lE=e}var pN=null;function ch(e,t){let n=Object.create(Uc);n.value=e,t!==void 0&&(n.equal=t);let r=()=>dE(n);return r[qe]=n,Vc(n),[r,s=>zi(n,s),s=>lh(n,s)]}function dE(e){return $i(e),e.value}function zi(e,t){oh()||uE(e),e.equal(e.value,t)||(e.value=t,gN(e))}function lh(e,t){oh()||uE(e),zi(e,t(e.value))}var Uc=S(m({},Hi),{equal:Pc,value:void 0,kind:"signal"});function gN(e){e.version++,oE(),ih(e),pN?.(e)}function F(e){return typeof e=="function"}function qi(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Bc=qi(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ur(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var le=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(F(r))try{r()}catch(o){t=o instanceof Bc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{fE(o)}catch(s){t=t??[],s instanceof Bc?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Bc(t)}}add(t){var n;if(t&&t!==this)if(this.closed)fE(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Ur(n,t)}remove(t){let{_finalizers:n}=this;n&&Ur(n,t),t instanceof e&&t._removeParent(this)}};le.EMPTY=(()=>{let e=new le;return e.closed=!0,e})();var uh=le.EMPTY;function Hc(e){return e instanceof le||e&&"closed"in e&&F(e.remove)&&F(e.add)&&F(e.unsubscribe)}function fE(e){F(e)?e():e.unsubscribe()}var $t={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Yi={setTimeout(e,t,...n){let{delegate:r}=Yi;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=Yi;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function $c(e){Yi.setTimeout(()=>{let{onUnhandledError:t}=$t;if(t)t(e);else throw e})}function ys(){}var hE=dh("C",void 0,void 0);function pE(e){return dh("E",void 0,e)}function gE(e){return dh("N",e,void 0)}function dh(e,t,n){return{kind:e,value:t,error:n}}var Br=null;function Ki(e){if($t.useDeprecatedSynchronousErrorHandling){let t=!Br;if(t&&(Br={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=Br;if(Br=null,n)throw r}}else e()}function mE(e){$t.useDeprecatedSynchronousErrorHandling&&Br&&(Br.errorThrown=!0,Br.error=e)}var Hr=class extends le{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Hc(t)&&t.add(this)):this.destination=yN}static create(t,n,r){return new Zi(t,n,r)}next(t){this.isStopped?hh(gE(t),this):this._next(t)}error(t){this.isStopped?hh(pE(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?hh(hE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},mN=Function.prototype.bind;function fh(e,t){return mN.call(e,t)}var ph=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Wc(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Wc(r)}else Wc(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Wc(n)}}},Zi=class extends Hr{constructor(t,n,r){super();let i;if(F(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&$t.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&fh(t.next,o),error:t.error&&fh(t.error,o),complete:t.complete&&fh(t.complete,o)}):i=t}this.destination=new ph(i)}};function Wc(e){$t.useDeprecatedSynchronousErrorHandling?mE(e):$c(e)}function vN(e){throw e}function hh(e,t){let{onStoppedNotification:n}=$t;n&&Yi.setTimeout(()=>n(e,t))}var yN={closed:!0,next:ys,error:vN,complete:ys};var Qi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function pt(e){return e}function gh(...e){return mh(e)}function mh(e){return e.length===0?pt:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var k=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=EN(n)?n:new Zi(n,r,i);return Ki(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=vE(r),new r((i,o)=>{let s=new Zi({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Qi](){return this}pipe(...n){return mh(n)(this)}toPromise(n){return n=vE(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function vE(e){var t;return(t=e??$t.Promise)!==null&&t!==void 0?t:Promise}function _N(e){return e&&F(e.next)&&F(e.error)&&F(e.complete)}function EN(e){return e&&e instanceof Hr||_N(e)&&Hc(e)}function vh(e){return F(e?.lift)}function q(e){return t=>{if(vh(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function z(e,t,n,r,i){return new yh(e,t,n,r,i)}var yh=class extends Hr{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Ji(){return q((e,t)=>{let n=null;e._refCount++;let r=z(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var Xi=class extends k{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,vh(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new le;let n=this.getSubject();t.add(this.source.subscribe(z(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=le.EMPTY)}return t}refCount(){return Ji()(this)}};var yE=qi(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=(()=>{class e extends k{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Gc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new yE}next(n){Ki(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ki(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ki(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?uh:(this.currentObservers=null,o.push(n),new le(()=>{this.currentObservers=null,Ur(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new k;return n.source=this,n}}return e.create=(t,n)=>new Gc(t,n),e})(),Gc=class extends oe{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:uh}};var Oe=class extends oe{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var _h={now(){return(_h.delegate||Date).now()},delegate:void 0};var zc=class extends le{constructor(t,n){super()}schedule(t,n=0){return this}};var _s={setInterval(e,t,...n){let{delegate:r}=_s;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=_s;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var qc=class extends zc{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,r=0){return _s.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&_s.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r=!1,i;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ur(r,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var eo=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}};eo.now=_h.now;var Yc=class extends eo{constructor(t,n=eo.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}};var Eh=new Yc(qc),_E=Eh;var it=new k(e=>e.complete());function Kc(e){return e&&F(e.schedule)}function EE(e){return e[e.length-1]}function Zc(e){return F(EE(e))?e.pop():void 0}function ir(e){return Kc(EE(e))?e.pop():void 0}function CE(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function IE(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function $r(e){return this instanceof $r?(this.v=e,this):new $r(e)}function wE(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(h){return function(g){return Promise.resolve(g).then(h,d)}}function a(h,g){r[h]&&(i[h]=function(_){return new Promise(function(T,M){o.push([h,_,T,M])>1||c(h,_)})},g&&(i[h]=g(i[h])))}function c(h,g){try{l(r[h](g))}catch(_){f(o[0][3],_)}}function l(h){h.value instanceof $r?Promise.resolve(h.value.v).then(u,d):f(o[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,g){h(g),o.shift(),o.length&&c(o[0][0],o[0][1])}}function DE(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof IE=="function"?IE(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Qc=e=>e&&typeof e.length=="number"&&typeof e!="function";function Jc(e){return F(e?.then)}function Xc(e){return F(e[Qi])}function el(e){return Symbol.asyncIterator&&F(e?.[Symbol.asyncIterator])}function tl(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function IN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var nl=IN();function rl(e){return F(e?.[nl])}function il(e){return wE(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield $r(n.read());if(i)return yield $r(void 0);yield yield $r(r)}}finally{n.releaseLock()}})}function ol(e){return F(e?.getReader)}function Ee(e){if(e instanceof k)return e;if(e!=null){if(Xc(e))return CN(e);if(Qc(e))return wN(e);if(Jc(e))return DN(e);if(el(e))return bE(e);if(rl(e))return bN(e);if(ol(e))return TN(e)}throw tl(e)}function CN(e){return new k(t=>{let n=e[Qi]();if(F(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function wN(e){return new k(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function DN(e){return new k(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,$c)})}function bN(e){return new k(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function bE(e){return new k(t=>{SN(e,t).catch(n=>t.error(n))})}function TN(e){return bE(il(e))}function SN(e,t){var n,r,i,o;return CE(this,void 0,void 0,function*(){try{for(n=DE(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function ot(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function sl(e,t=0){return q((n,r)=>{n.subscribe(z(r,i=>ot(r,e,()=>r.next(i),t),()=>ot(r,e,()=>r.complete(),t),i=>ot(r,e,()=>r.error(i),t)))})}function al(e,t=0){return q((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function TE(e,t){return Ee(e).pipe(al(t),sl(t))}function SE(e,t){return Ee(e).pipe(al(t),sl(t))}function AE(e,t){return new k(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function NE(e,t){return new k(n=>{let r;return ot(n,t,()=>{r=e[nl](),ot(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>F(r?.return)&&r.return()})}function cl(e,t){if(!e)throw new Error("Iterable cannot be null");return new k(n=>{ot(n,t,()=>{let r=e[Symbol.asyncIterator]();ot(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function ME(e,t){return cl(il(e),t)}function RE(e,t){if(e!=null){if(Xc(e))return TE(e,t);if(Qc(e))return AE(e,t);if(Jc(e))return SE(e,t);if(el(e))return cl(e,t);if(rl(e))return NE(e,t);if(ol(e))return ME(e,t)}throw tl(e)}function se(e,t){return t?RE(e,t):Ee(e)}function N(...e){let t=ir(e);return se(e,t)}function to(e,t){let n=F(e)?e:()=>e,r=i=>i.error(n());return new k(t?i=>t.schedule(r,0,i):r)}function Ih(e){return!!e&&(e instanceof k||F(e.lift)&&F(e.subscribe))}var Pn=qi(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function xE(e){return e instanceof Date&&!isNaN(e)}function U(e,t){return q((n,r)=>{let i=0;n.subscribe(z(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:AN}=Array;function NN(e,t){return AN(t)?e(...t):e(t)}function ll(e){return U(t=>NN(e,t))}var{isArray:MN}=Array,{getPrototypeOf:RN,prototype:xN,keys:ON}=Object;function ul(e){if(e.length===1){let t=e[0];if(MN(t))return{args:t,keys:null};if(kN(t)){let n=ON(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function kN(e){return e&&typeof e=="object"&&RN(e)===xN}function dl(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function Wr(...e){let t=ir(e),n=Zc(e),{args:r,keys:i}=ul(e);if(r.length===0)return se([],t);let o=new k(PN(r,t,i?s=>dl(i,s):pt));return n?o.pipe(ll(n)):o}function PN(e,t,n=pt){return r=>{OE(t,()=>{let{length:i}=e,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)OE(t,()=>{let l=se(e[c],t),u=!1;l.subscribe(z(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function OE(e,t,n){e?ot(n,e,t):t()}function kE(e,t,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&t.complete()},h=_=>l<r?g(_):c.push(_),g=_=>{o&&t.next(_),l++;let T=!1;Ee(n(_,u++)).subscribe(z(t,M=>{i?.(M),o?h(M):t.next(M)},()=>{T=!0},void 0,()=>{if(T)try{for(l--;c.length&&l<r;){let M=c.shift();s?ot(t,s,()=>g(M)):g(M)}f()}catch(M){t.error(M)}}))};return e.subscribe(z(t,h,()=>{d=!0,f()})),()=>{a?.()}}function fe(e,t,n=1/0){return F(t)?fe((r,i)=>U((o,s)=>t(r,o,i,s))(Ee(e(r,i))),n):(typeof t=="number"&&(n=t),q((r,i)=>kE(r,i,e,n)))}function no(e=1/0){return fe(pt,e)}function PE(){return no(1)}function ro(...e){return PE()(se(e,ir(e)))}function Es(e){return new k(t=>{Ee(e()).subscribe(t)})}function Ch(...e){let t=Zc(e),{args:n,keys:r}=ul(e),i=new k(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;Ee(n[u]).subscribe(z(o,f=>{d||(d=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?dl(r,a):a),o.complete())}))}});return t?i.pipe(ll(t)):i}function FE(e=0,t,n=_E){let r=-1;return t!=null&&(Kc(t)?n=t:r=t),new k(i=>{let o=xE(e)?+e-n.now():e;o<0&&(o=0);let s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function wh(e=0,t=Eh){return e<0&&(e=0),FE(e,e,t)}function st(e,t){return q((n,r)=>{let i=0;n.subscribe(z(r,o=>e.call(t,o,i++)&&r.next(o)))})}function Fn(e){return q((t,n)=>{let r=null,i=!1,o;r=t.subscribe(z(n,void 0,void 0,s=>{o=Ee(e(s,Fn(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function LE(e,t,n,r,i){return(o,s)=>{let a=n,c=t,l=0;o.subscribe(z(s,u=>{let d=l++;c=a?e(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function or(e,t){return F(t)?fe(e,t,1):fe(e,1)}function sr(e){return q((t,n)=>{let r=!1;t.subscribe(z(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function Tt(e){return e<=0?()=>it:q((t,n)=>{let r=0;t.subscribe(z(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function fl(e=FN){return q((t,n)=>{let r=!1;t.subscribe(z(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function FN(){return new Pn}function Is(e){return q((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function Ln(e,t){let n=arguments.length>=2;return r=>r.pipe(e?st((i,o)=>e(i,o,r)):pt,Tt(1),n?sr(t):fl(()=>new Pn))}function io(e){return e<=0?()=>it:q((t,n)=>{let r=[];t.subscribe(z(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Dh(e,t){let n=arguments.length>=2;return r=>r.pipe(e?st((i,o)=>e(i,o,r)):pt,io(1),n?sr(t):fl(()=>new Pn))}function bh(e,t){return q(LE(e,t,arguments.length>=2,!0))}function Th(...e){let t=ir(e);return q((n,r)=>{(t?ro(e,n,t):ro(e,n)).subscribe(r)})}function Me(e,t){return q((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(z(r,c=>{i?.unsubscribe();let l=0,u=o++;Ee(e(c,u)).subscribe(i=z(r,d=>r.next(t?t(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function oo(e){return q((t,n)=>{Ee(e).subscribe(z(n,()=>n.complete(),ys)),!n.closed&&t.subscribe(n)})}function Ie(e,t,n){let r=F(e)||t||n?{next:e,error:t,complete:n}:e;return r?q((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(z(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):pt}function VE(e){let t=j(null);try{return e()}finally{j(t)}}var ml="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",E=class extends Error{code;constructor(t,n){super(ao(t,n)),this.code=t}};function LN(e){return`NG0${Math.abs(e)}`}function ao(e,t){return`${LN(e)}${t?": "+t:""}`}var Un=globalThis;function X(e){for(let t in e)if(e[t]===X)return t;throw Error("")}function BE(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function jn(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(jn).join(", ")}]`;if(e==null)return""+e;let t=e.overriddenName||e.name;if(t)return`${t}`;let n=e.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Vh(e,t){return e?t?`${e} ${t}`:e:t||""}var VN=X({__forward_ref__:X});function hn(e){return e.__forward_ref__=hn,e.toString=function(){return jn(this())},e}function ke(e){return jh(e)?e():e}function jh(e){return typeof e=="function"&&e.hasOwnProperty(VN)&&e.__forward_ref__===hn}function C(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Gt(e){return{providers:e.providers||[],imports:e.imports||[]}}function bs(e){return jN(e,vl)}function Uh(e){return bs(e)!==null}function jN(e,t){return e.hasOwnProperty(t)&&e[t]||null}function UN(e){let t=e?.[vl]??null;return t||null}function Ah(e){return e&&e.hasOwnProperty(pl)?e[pl]:null}var vl=X({\u0275prov:X}),pl=X({\u0275inj:X}),D=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=C({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Bh(e){return e&&!!e.\u0275providers}var Hh=X({\u0275cmp:X}),$h=X({\u0275dir:X}),Wh=X({\u0275pipe:X}),Gh=X({\u0275mod:X}),ws=X({\u0275fac:X}),Kr=X({__NG_ELEMENT_ID__:X}),jE=X({__NG_ENV_ID__:X});function Zr(e){return typeof e=="string"?e:e==null?"":String(e)}function HE(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Zr(e)}var $E=X({ngErrorCode:X}),BN=X({ngErrorMessage:X}),HN=X({ngTokenPath:X});function zh(e,t){return WE("",-200,t)}function yl(e,t){throw new E(-201,!1)}function WE(e,t,n){let r=new E(t,e);return r[$E]=t,r[BN]=e,n&&(r[HN]=n),r}function $N(e){return e[$E]}var Nh;function GE(){return Nh}function Ye(e){let t=Nh;return Nh=e,t}function qh(e,t,n){let r=bs(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(t!==void 0)return t;yl(e,"Injector")}var WN={},Gr=WN,GN="__NG_DI_FLAG__",Mh=class{injector;constructor(t){this.injector=t}retrieve(t,n){let r=zr(n)||0;try{return this.injector.get(t,r&8?null:Gr,r)}catch(i){if(Bi(i))return i;throw i}}};function zN(e,t=0){let n=Mc();if(n===void 0)throw new E(-203,!1);if(n===null)return qh(e,void 0,t);{let r=qN(t),i=n.retrieve(e,r);if(Bi(i)){if(r.optional)return null;throw i}return i}}function A(e,t=0){return(GE()||zN)(ke(e),t)}function v(e,t){return A(e,zr(t))}function zr(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function qN(e){return{optional:!!(e&8),host:!!(e&1),self:!!(e&2),skipSelf:!!(e&4)}}function Rh(e){let t=[];for(let n=0;n<e.length;n++){let r=ke(e[n]);if(Array.isArray(r)){if(r.length===0)throw new E(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=YN(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}t.push(A(i,o))}else t.push(A(r))}return t}function YN(e){return e[GN]}function ar(e,t){let n=e.hasOwnProperty(ws);return n?e[ws]:null}function _l(e,t){e.forEach(n=>Array.isArray(n)?_l(n,t):t(n))}function Yh(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Ts(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function zE(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}function qE(e,t,n){let r=co(e,t);return r>=0?e[r|1]=n:(r=~r,zE(e,r,t,n)),r}function El(e,t){let n=co(e,t);if(n>=0)return e[n|1]}function co(e,t){return KN(e,t,1)}function KN(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=e[o<<n];if(t===s)return o<<n;s>t?i=o:r=o+1}return~(i<<n)}var ur={},gt=[],Bn=new D(""),Kh=new D("",-1),Zh=new D(""),Ds=class{get(t,n=Gr){if(n===Gr){let i=WE("",-201);throw i.name="\u0275NotFound",i}return n}};function Qh(e){return e[Gh]||null}function Hn(e){return e[Hh]||null}function Jh(e){return e[$h]||null}function YE(e){return e[Wh]||null}function dr(e){return{\u0275providers:e}}function KE(e){return dr([{provide:Bn,multi:!0,useValue:e}])}function ZE(...e){return{\u0275providers:Xh(!0,e),\u0275fromNgModule:!0}}function Xh(e,...t){let n=[],r=new Set,i,o=s=>{n.push(s)};return _l(t,s=>{let a=s;gl(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&QE(i,o),n}function QE(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];ep(i,o=>{t(o,r)})}}function gl(e,t,n,r){if(e=ke(e),!e)return!1;let i=null,o=Ah(e),s=!o&&Hn(e);if(!o&&!s){let c=e.ngModule;if(o=Ah(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=e}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)gl(l,t,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{_l(o.imports,u=>{gl(u,t,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&QE(l,t)}if(!a){let l=ar(i)||(()=>new i);t({provide:i,useFactory:l,deps:gt},i),t({provide:Zh,useValue:i,multi:!0},i),t({provide:Bn,useValue:()=>A(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=e;ep(c,u=>{t(u,l)})}}else return!1;return i!==e&&e.providers!==void 0}function ep(e,t){for(let n of e)Bh(n)&&(n=n.\u0275providers),Array.isArray(n)?ep(n,t):t(n)}var ZN=X({provide:String,useValue:X});function JE(e){return e!==null&&typeof e=="object"&&ZN in e}function QN(e){return!!(e&&e.useExisting)}function JN(e){return!!(e&&e.useFactory)}function qr(e){return typeof e=="function"}function XE(e){return!!e.useClass}var Ss=new D(""),hl={},UE={},Sh;function As(){return Sh===void 0&&(Sh=new Ds),Sh}var Te=class{},Yr=class extends Te{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Oh(t,s=>this.processProvider(s)),this.records.set(Kh,so(void 0,this)),i.has("environment")&&this.records.set(Te,so(void 0,this));let o=this.records.get(Ss);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Zh,gt,{self:!0}))}retrieve(t,n){let r=zr(n)||0;try{return this.get(t,Gr,r)}catch(i){if(Bi(i))return i;throw i}}destroy(){Cs(this),this._destroyed=!0;let t=j(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),j(t)}}onDestroy(t){return Cs(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Cs(this);let n=fn(this),r=Ye(void 0),i;try{return t()}finally{fn(n),Ye(r)}}get(t,n=Gr,r){if(Cs(this),t.hasOwnProperty(jE))return t[jE](this);let i=zr(r),o,s=fn(this),a=Ye(void 0);try{if(!(i&4)){let l=this.records.get(t);if(l===void 0){let u=rM(t)&&bs(t);u&&this.injectableDefInScope(u)?l=so(xh(t),hl):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l,i)}let c=i&2?As():this.parent;return n=i&8&&n===Gr?null:n,c.get(t,n)}catch(c){let l=$N(c);throw l===-200||l===-201?new E(l,null):c}finally{Ye(a),fn(s)}}resolveInjectorInitializers(){let t=j(null),n=fn(this),r=Ye(void 0),i;try{let o=this.get(Bn,gt,{self:!0});for(let s of o)s()}finally{fn(n),Ye(r),j(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(jn(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=ke(t);let n=qr(t)?t:ke(t&&t.provide),r=eM(t);if(!qr(t)&&t.multi===!0){let i=this.records.get(n);i||(i=so(void 0,hl,!0),i.factory=()=>Rh(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n,r){let i=j(null);try{if(n.value===UE)throw zh(jn(t));return n.value===hl&&(n.value=UE,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&nM(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{j(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=ke(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function xh(e){let t=bs(e),n=t!==null?t.factory:ar(e);if(n!==null)return n;if(e instanceof D)throw new E(204,!1);if(e instanceof Function)return XN(e);throw new E(204,!1)}function XN(e){if(e.length>0)throw new E(204,!1);let n=UN(e);return n!==null?()=>n.factory(e):()=>new e}function eM(e){if(JE(e))return so(void 0,e.useValue);{let t=tp(e);return so(t,hl)}}function tp(e,t,n){let r;if(qr(e)){let i=ke(e);return ar(i)||xh(i)}else if(JE(e))r=()=>ke(e.useValue);else if(JN(e))r=()=>e.useFactory(...Rh(e.deps||[]));else if(QN(e))r=(i,o)=>A(ke(e.useExisting),o!==void 0&&o&8?8:void 0);else{let i=ke(e&&(e.useClass||e.provide));if(tM(e))r=()=>new i(...Rh(e.deps));else return ar(i)||xh(i)}return r}function Cs(e){if(e.destroyed)throw new E(205,!1)}function so(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function tM(e){return!!e.deps}function nM(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function rM(e){return typeof e=="function"||typeof e=="object"&&e.ngMetadataName==="InjectionToken"}function Oh(e,t){for(let n of e)Array.isArray(n)?Oh(n,t):n&&Bh(n)?Oh(n.\u0275providers,t):t(n)}function $e(e,t){let n;e instanceof Yr?(Cs(e),n=e):n=new Mh(e);let r,i=fn(n),o=Ye(void 0);try{return t()}finally{fn(i),Ye(o)}}function eI(){return GE()!==void 0||Mc()!=null}var zt=0,O=1,P=2,Pe=3,St=4,At=5,Ns=6,lo=7,We=8,uo=9,pn=10,he=11,fo=12,np=13,Qr=14,Nt=15,Jr=16,Xr=17,ei=18,Ms=19,rp=20,Vn=21,Il=22,Rs=23,mt=24,ti=25,Ke=26,Se=27,tI=1;var fr=7,xs=8,Os=9,ct=10;function gn(e){return Array.isArray(e)&&typeof e[tI]=="object"}function qt(e){return Array.isArray(e)&&e[tI]===!0}function ip(e){return(e.flags&4)!==0}function hr(e){return e.componentOffset>-1}function ho(e){return(e.flags&1)===1}function mn(e){return!!e.template}function po(e){return(e[P]&512)!==0}function ni(e){return(e[P]&256)===256}var nI="svg",rI="math";function Mt(e){for(;Array.isArray(e);)e=e[zt];return e}function op(e,t){return Mt(t[e])}function Yt(e,t){return Mt(t[e.index])}function Cl(e,t){return e.data[t]}function wl(e,t){return e[t]}function sp(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}function Rt(e,t){let n=t[e];return gn(n)?n:n[zt]}function Dl(e){return(e[P]&128)===128}function iI(e){return qt(e[Pe])}function ri(e,t){return t==null?null:e[t]}function ap(e){e[Xr]=0}function cp(e){e[P]&1024||(e[P]|=1024,Dl(e)&&go(e))}function oI(e,t){for(;e>0;)t=t[Qr],e--;return t}function ks(e){return!!(e[P]&9216||e[mt]?.dirty)}function bl(e){e[pn].changeDetectionScheduler?.notify(8),e[P]&64&&(e[P]|=1024),ks(e)&&go(e)}function go(e){e[pn].changeDetectionScheduler?.notify(0);let t=cr(e);for(;t!==null&&!(t[P]&8192||(t[P]|=8192,!Dl(t)));)t=cr(t)}function lp(e,t){if(ni(e))throw new E(911,!1);e[Vn]===null&&(e[Vn]=[]),e[Vn].push(t)}function sI(e,t){if(e[Vn]===null)return;let n=e[Vn].indexOf(t);n!==-1&&e[Vn].splice(n,1)}function cr(e){let t=e[Pe];return qt(t)?t[Pe]:t}function aI(e){return e[lo]??=[]}function cI(e){return e.cleanup??=[]}var H={lFrame:CI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var kh=!1;function lI(){return H.lFrame.elementDepthCount}function uI(){H.lFrame.elementDepthCount++}function up(){H.lFrame.elementDepthCount--}function Tl(){return H.bindingsEnabled}function dI(){return H.skipHydrationRootTNode!==null}function dp(e){return H.skipHydrationRootTNode===e}function fp(){H.skipHydrationRootTNode=null}function K(){return H.lFrame.lView}function vt(){return H.lFrame.tView}function xt(e){return H.lFrame.contextLView=e,e[We]}function Ot(e){return H.lFrame.contextLView=null,e}function Fe(){let e=hp();for(;e!==null&&e.type===64;)e=e.parent;return e}function hp(){return H.lFrame.currentTNode}function fI(){let e=H.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function mo(e,t){let n=H.lFrame;n.currentTNode=e,n.isParent=t}function pp(){return H.lFrame.isParent}function hI(){H.lFrame.isParent=!1}function pI(){return H.lFrame.contextLView}function gp(){return kh}function mp(e){let t=kh;return kh=e,t}function vp(){let e=H.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function gI(){return H.lFrame.bindingIndex}function mI(e){return H.lFrame.bindingIndex=e}function Sl(){return H.lFrame.bindingIndex++}function yp(e){let t=H.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function vI(){return H.lFrame.inI18n}function yI(e,t){let n=H.lFrame;n.bindingIndex=n.bindingRootIndex=e,Al(t)}function _I(){return H.lFrame.currentDirectiveIndex}function Al(e){H.lFrame.currentDirectiveIndex=e}function EI(e){let t=H.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function _p(e){H.lFrame.currentQueryIndex=e}function iM(e){let t=e[O];return t.type===2?t.declTNode:t.type===1?e[At]:null}function Ep(e,t,n){if(n&4){let i=t,o=e;for(;i=i.parent,i===null&&!(n&1);)if(i=iM(o),i===null||(o=o[Qr],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=H.lFrame=II();return r.currentTNode=t,r.lView=e,!0}function Nl(e){let t=II(),n=e[O];H.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function II(){let e=H.lFrame,t=e===null?null:e.child;return t===null?CI(e):t}function CI(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function wI(){let e=H.lFrame;return H.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var Ip=wI;function Ml(){let e=wI();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function DI(e){return(H.lFrame.contextLView=oI(e,H.lFrame.contextLView))[We]}function pr(){return H.lFrame.selectedIndex}function gr(e){H.lFrame.selectedIndex=e}function Cp(){let e=H.lFrame;return Cl(e.tView,e.selectedIndex)}function bI(){return H.lFrame.currentNamespace}var TI=!0;function Rl(){return TI}function Ps(e){TI=e}function Ph(e,t=null,n=null,r){let i=wp(e,t,n,r);return i.resolveInjectorInitializers(),i}function wp(e,t=null,n=null,r,i=new Set){let o=[n||gt,ZE(e)];return r=r||(typeof e=="object"?void 0:jn(e)),new Yr(o,t||As(),r||null,i)}var at=class e{static THROW_IF_NOT_FOUND=Gr;static NULL=new Ds;static create(t,n){if(Array.isArray(t))return Ph({name:""},n,t,"");{let r=t.name??"";return Ph({name:r},t.parent,t.providers,r)}}static \u0275prov=C({token:e,providedIn:"any",factory:()=>A(Kh)});static __NG_ELEMENT_ID__=-1},pe=new D(""),vn=(()=>{class e{static __NG_ELEMENT_ID__=oM;static __NG_ENV_ID__=n=>n}return e})(),Fh=class extends vn{_lView;constructor(t){super(),this._lView=t}get destroyed(){return ni(this._lView)}onDestroy(t){let n=this._lView;return lp(n,t),()=>sI(n,t)}};function oM(){return new Fh(K())}var Wt=class{_console=console;handleError(t){this._console.error("ERROR",t)}},Ze=new D("",{providedIn:"root",factory:()=>{let e=v(Te),t;return n=>{e.destroyed&&!t?setTimeout(()=>{throw n}):(t??=e.get(Wt),t.handleError(n))}}}),SI={provide:Bn,useValue:()=>void v(Wt),multi:!0},sM=new D("",{providedIn:"root",factory:()=>{let e=v(pe).defaultView;if(!e)return;let t=v(Ze),n=o=>{t(o.reason),o.preventDefault()},r=o=>{o.error?t(o.error):t(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{e.addEventListener("unhandledrejection",n),e.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),v(vn).onDestroy(()=>{e.removeEventListener("error",r),e.removeEventListener("unhandledrejection",n)})}});function Dp(){return dr([KE(()=>void v(sM))])}function yt(e,t){let[n,r,i]=ch(e,t?.equal),o=n,s=o[qe];return o.set=r,o.update=i,o.asReadonly=AI.bind(o),o}function AI(){let e=this[qe];if(e.readonlyFn===void 0){let t=()=>this();t[qe]=e,e.readonlyFn=t}return e.readonlyFn}var lr=class{},Fs=new D("",{providedIn:"root",factory:()=>!1});var bp=new D(""),Tp=new D("");var xl=(()=>{class e{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=aM}return e})();function aM(){return new xl(K(),Fe())}var $n=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Oe(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new k(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=C({token:e,providedIn:"root",factory:()=>new e})}return e})();function Ls(...e){}var Sp=(()=>{class e{static \u0275prov=C({token:e,providedIn:"root",factory:()=>new Lh})}return e})(),Lh=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let n=t.zone,r=this.queues.get(n);r.has(t)&&(r.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||r.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[n,r]of this.queues)n===null?t||=this.flushQueue(r):t||=n.run(()=>this.flushQueue(r));t||(this.dirtyEffectCount=0)}}flushQueue(t){let n=!1;for(let r of t)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function $s(e){return{toString:e}.toString()}function vM(e){return typeof e=="function"}var jl=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function oC(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var Gn=(()=>{let e=()=>sC;return e.ngInherit=!0,e})();function sC(e){return e.type.prototype.ngOnChanges&&(e.setInput=_M),yM}function yM(){let e=cC(this),t=e?.current;if(t){let n=e.previous;if(n===ur)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function _M(e,t,n,r,i){let o=this.declaredInputs[r],s=cC(e)||EM(e,{previous:ur,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new jl(l&&l.currentValue,n,c===ur),oC(e,t,i,n)}var aC="__ngSimpleChanges__";function cC(e){return e[aC]||null}function EM(e,t){return e[aC]=t}var NI=[];var ee=function(e,t=null,n){for(let r=0;r<NI.length;r++){let i=NI[r];i(e,t,n)}};function IM(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=sC(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function lC(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function Fl(e,t,n){uC(e,t,3,n)}function Ll(e,t,n,r){(e[P]&3)===n&&uC(e,t,n,r)}function Ap(e,t){let n=e[P];(n&3)===t&&(n&=16383,n+=1,e[P]=n)}function uC(e,t,n,r){let i=r!==void 0?e[Xr]&65535:0,o=r??-1,s=t.length-1,a=0;for(let c=i;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[Xr]+=65536),(a<o||o==-1)&&(CM(e,n,t,c),e[Xr]=(e[Xr]&4294901760)+c+2),c++}function MI(e,t){ee(4,e,t);let n=j(null);try{t.call(e)}finally{j(n),ee(5,e,t)}}function CM(e,t,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=e[s];i?e[P]>>14<e[Xr]>>16&&(e[P]&3)===t&&(e[P]+=16384,MI(a,o)):MI(a,o)}var yo=-1,oi=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r,i){this.factory=t,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function wM(e){return(e.flags&8)!==0}function DM(e){return(e.flags&16)!==0}function bM(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{let o=i,s=n[++r];TM(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function dC(e){return e===3||e===4||e===6}function TM(e){return e.charCodeAt(0)===64}function _o(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?RI(e,n,i,null,t[++r]):RI(e,n,i,null,null))}}return e}function RI(e,t,n,r,i){let o=0,s=e.length;if(t===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===n){i!==null&&(e[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),i!==null&&e.splice(o++,0,i)}function fC(e){return e!==yo}function Ul(e){return e&32767}function SM(e){return e>>16}function Bl(e,t){let n=SM(e),r=t;for(;n>0;)r=r[Qr],n--;return r}var jp=!0;function Hl(e){let t=jp;return jp=e,t}var AM=256,hC=AM-1,pC=5,NM=0,yn={};function MM(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Kr)&&(r=n[Kr]),r==null&&(r=n[Kr]=NM++);let i=r&hC,o=1<<i;t.data[e+(i>>pC)]|=o}function $l(e,t){let n=gC(e,t);if(n!==-1)return n;let r=t[O];r.firstCreatePass&&(e.injectorIndex=t.length,Np(r.data,e),Np(t,null),Np(r.blueprint,null));let i=ig(e,t),o=e.injectorIndex;if(fC(i)){let s=Ul(i),a=Bl(i,t),c=a[O].data;for(let l=0;l<8;l++)t[o+l]=a[s+l]|c[s+l]}return t[o+8]=i,o}function Np(e,t){e.push(0,0,0,0,0,0,0,0,t)}function gC(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function ig(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=EC(i),r===null)return yo;if(n++,i=i[Qr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return yo}function Up(e,t,n){MM(e,t,n)}function RM(e,t){if(t==="class")return e.classes;if(t==="style")return e.styles;let n=e.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(dC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===t)return n[i+1];i=i+2}}}return null}function mC(e,t,n){if(n&8||e!==void 0)return e;yl(t,"NodeInjector")}function vC(e,t,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=e[uo],o=Ye(void 0);try{return i?i.get(t,r,n&8):qh(t,r,n&8)}finally{Ye(o)}}return mC(r,t,n)}function yC(e,t,n,r=0,i){if(e!==null){if(t[P]&2048&&!(r&2)){let s=FM(e,t,n,r,yn);if(s!==yn)return s}let o=_C(e,t,n,r,yn);if(o!==yn)return o}return vC(t,n,r,i)}function _C(e,t,n,r,i){let o=kM(n);if(typeof o=="function"){if(!Ep(t,e,r))return r&1?mC(i,n,r):vC(t,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))yl(n);else return s}finally{Ip()}}else if(typeof o=="number"){let s=null,a=gC(e,t),c=yo,l=r&1?t[Nt][At]:null;for((a===-1||r&4)&&(c=a===-1?ig(e,t):t[a+8],c===yo||!OI(r,!1)?a=-1:(s=t[O],a=Ul(c),t=Bl(c,t)));a!==-1;){let u=t[O];if(xI(o,a,u.data)){let d=xM(a,t,n,s,r,l);if(d!==yn)return d}c=t[a+8],c!==yo&&OI(r,t[O].data[a+8]===l)&&xI(o,a,t)?(s=u,a=Ul(c),t=Bl(c,t)):a=-1}}return i}function xM(e,t,n,r,i,o){let s=t[O],a=s.data[e+8],c=r==null?hr(a)&&jp:r!=s&&(a.type&3)!==0,l=i&1&&o===a,u=OM(a,s,n,c,l);return u!==null?Wl(t,s,u,a,i):yn}function OM(e,t,n,r,i){let o=e.providerIndexes,s=t.data,a=o&1048575,c=e.directiveStart,l=e.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let g=s[h];if(h<c&&n===g||h>=c&&g.type===n)return h}if(i){let h=s[c];if(h&&mn(h)&&h.type===n)return c}return null}function Wl(e,t,n,r,i){let o=e[n],s=t.data;if(o instanceof oi){let a=o;if(a.resolving){let h=HE(s[n]);throw zh(h)}let c=Hl(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],u,d=a.injectImpl?Ye(a.injectImpl):null,f=Ep(e,r,0);try{o=e[n]=a.factory(void 0,i,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&IM(n,s[n],t)}finally{d!==null&&Ye(d),Hl(c),a.resolving=!1,Ip()}}return o}function kM(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Kr)?e[Kr]:void 0;return typeof t=="number"?t>=0?t&hC:PM:t}function xI(e,t,n){let r=1<<e;return!!(n[t+(e>>pC)]&r)}function OI(e,t){return!(e&2)&&!(e&1&&t)}var ii=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return yC(this._tNode,this._lView,t,zr(r),n)}};function PM(){return new ii(Fe(),K())}function vr(e){return $s(()=>{let t=e.prototype.constructor,n=t[ws]||Bp(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[ws]||Bp(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Bp(e){return jh(e)?()=>{let t=Bp(ke(e));return t&&t()}:ar(e)}function FM(e,t,n,r,i){let o=e,s=t;for(;o!==null&&s!==null&&s[P]&2048&&!po(s);){let a=_C(o,s,n,r|2,yn);if(a!==yn)return a;let c=o.parent;if(!c){let l=s[rp];if(l){let u=l.get(n,yn,r);if(u!==yn)return u}c=EC(s),s=s[Qr]}o=c}return i}function EC(e){let t=e[O],n=t.type;return n===2?t.declTNode:n===1?e[At]:null}function Ws(e){return RM(Fe(),e)}function LM(){return ru(Fe(),K())}function ru(e,t){return new kt(Yt(e,t))}var kt=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=LM}return e})();function IC(e){return(e.flags&128)===128}var og=(function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e})(og||{}),CC=new Map,VM=0;function jM(){return VM++}function UM(e){CC.set(e[Ms],e)}function Hp(e){CC.delete(e[Ms])}var kI="__ngContext__";function Eo(e,t){gn(t)?(e[kI]=t[Ms],UM(t)):e[kI]=t}function wC(e){return bC(e[fo])}function DC(e){return bC(e[St])}function bC(e){for(;e!==null&&!qt(e);)e=e[St];return e}var $p;function sg(e){$p=e}function TC(){if($p!==void 0)return $p;if(typeof document<"u")return document;throw new E(210,!1)}var iu=new D("",{providedIn:"root",factory:()=>BM}),BM="ng",ou=new D(""),Co=new D("",{providedIn:"platform",factory:()=>"unknown"});var su=new D("",{providedIn:"root",factory:()=>TC().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var HM="h",$M="b";var SC=!1,AC=new D("",{providedIn:"root",factory:()=>SC});var ag=new D("");var WM=(e,t,n,r)=>{};function GM(e,t,n,r){WM(e,t,n,r)}function cg(e){return(e.flags&32)===32}var zM=()=>null;function NC(e,t,n=!1){return zM(e,t,n)}function MC(e,t){let n=e.contentQueries;if(n!==null){let r=j(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=e.data[s];_p(o),a.contentQueries(2,t[s],s)}}}finally{j(r)}}}function Wp(e,t,n){_p(0);let r=j(null);try{t(e,n)}finally{j(r)}}function lg(e,t,n){if(ip(t)){let r=j(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=e.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{j(r)}}}var Wn=(function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e})(Wn||{});var Ol;function qM(){if(Ol===void 0&&(Ol=null,Un.trustedTypes))try{Ol=Un.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Ol}function PI(e){return qM()?.createScriptURL(e)||e}var Gl=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ml})`}};function Gs(e){return e instanceof Gl?e.changingThisBreaksApplicationSecurity:e}function ug(e,t){let n=RC(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${ml})`)}return n===t}function RC(e){return e instanceof Gl&&e.getTypeName()||null}var YM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function xC(e){return e=String(e),e.match(YM)?e:"unsafe:"+e}var au=(function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e})(au||{});function OC(e){let t=PC();return t?t.sanitize(au.URL,e)||"":ug(e,"URL")?Gs(e):xC(Zr(e))}function kC(e){let t=PC();if(t)return PI(t.sanitize(au.RESOURCE_URL,e)||"");if(ug(e,"ResourceURL"))return PI(Gs(e));throw new E(904,!1)}function KM(e,t){return t==="src"&&(e==="embed"||e==="frame"||e==="iframe"||e==="media"||e==="script")||t==="href"&&(e==="base"||e==="link")?kC:OC}function dg(e,t,n){return KM(t,n)(e)}function PC(){let e=K();return e&&e[pn].sanitizer}var ZM=/^>|^->|<!--|-->|--!>|<!-$/g,QM=/(<|>)/g,JM="\u200B$1\u200B";function XM(e){return e.replace(ZM,t=>t.replace(QM,JM))}function FC(e){return e instanceof Function?e():e}function eR(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}var LC="ng-template";function tR(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&eR(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(fg(e))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function fg(e){return e.type===4&&e.value!==LC}function nR(e,t,n){let r=e.type===4&&!n?LC:e.value;return t===r}function rR(e,t,n){let r=4,i=e.attrs,o=i!==null?sR(i):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!Kt(r)&&!Kt(c))return!1;if(s&&Kt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!nR(e,c,n)||c===""&&t.length===1){if(Kt(r))return!1;s=!0}}else if(r&8){if(i===null||!tR(e,i,c,n)){if(Kt(r))return!1;s=!0}}else{let l=t[++a],u=iR(c,i,fg(e),n);if(u===-1){if(Kt(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Kt(r))return!1;s=!0}}}}return Kt(r)||s}function Kt(e){return(e&1)===0}function iR(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let s=t[i];if(s===e)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return aR(t,e)}function oR(e,t,n=!1){for(let r=0;r<t.length;r++)if(rR(e,t[r],n))return!0;return!1}function sR(e){for(let t=0;t<e.length;t++){let n=e[t];if(dC(n))return t}return e.length}function aR(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function FI(e,t){return e?":not("+t.trim()+")":t}function cR(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Kt(s)&&(t+=FI(o,i),i=""),r=s,o=o||!Kt(r);n++}return i!==""&&(t+=FI(o,i)),t}function lR(e){return e.map(cR).join(",")}function uR(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!Kt(i))break;i=o}r++}return n.length&&t.push(1,...n),t}var Zt={};function dR(e,t){return e.createText(t)}function fR(e,t,n){e.setValue(t,n)}function hR(e,t){return e.createComment(XM(t))}function VC(e,t,n){return e.createElement(t,n)}function zl(e,t,n,r,i){e.insertBefore(t,n,r,i)}function jC(e,t,n){e.appendChild(t,n)}function LI(e,t,n,r,i){r!==null?zl(e,t,n,r,i):jC(e,t,n)}function pR(e,t,n,r){e.removeChild(null,t,n,r)}function gR(e,t,n){e.setAttribute(t,"style",n)}function mR(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function UC(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&bM(e,t,r),i!==null&&mR(e,t,i),o!==null&&gR(e,t,o)}function hg(e,t,n,r,i,o,s,a,c,l,u){let d=Se+r,f=d+i,h=vR(d,f),g=typeof l=="function"?l():l;return h[O]={type:e,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:u}}function vR(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:Zt);return n}function yR(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=hg(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function pg(e,t,n,r,i,o,s,a,c,l,u){let d=t.blueprint.slice();return d[zt]=i,d[P]=r|4|128|8|64|1024,(l!==null||e&&e[P]&2048)&&(d[P]|=2048),ap(d),d[Pe]=d[Qr]=e,d[We]=n,d[pn]=s||e&&e[pn],d[he]=a||e&&e[he],d[uo]=c||e&&e[uo]||null,d[At]=o,d[Ms]=jM(),d[Ns]=u,d[rp]=l,d[Nt]=t.type==2?e[Nt]:d,d}function _R(e,t,n){let r=Yt(t,e),i=yR(n),o=e[pn].rendererFactory,s=gg(e,pg(e,i,null,BC(n),r,t,null,o.createRenderer(r,n),null,null,null));return e[t.index]=s}function BC(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function HC(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function gg(e,t){return e[fo]?e[np][St]=t:e[fo]=t,e[np]=t,t}function B(e=1){$C(vt(),K(),pr()+e,!1)}function $C(e,t,n,r){if(!r)if((t[P]&3)===3){let o=e.preOrderCheckHooks;o!==null&&Fl(t,o,n)}else{let o=e.preOrderHooks;o!==null&&Ll(t,o,0,n)}gr(n)}var cu=(function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e})(cu||{});function Gp(e,t,n,r){let i=j(null);try{let[o,s,a]=e.inputs[n],c=null;(s&cu.SignalBased)!==0&&(c=t[o][qe]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(t,r)),e.setInput!==null?e.setInput(t,c,r,n,o):oC(t,c,o,r)}finally{j(i)}}var _n=(function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e})(_n||{}),ER;function mg(e,t){return ER(e,t)}var lu=new Set;function vo(e,t,n,r,i,o){if(r!=null){let s,a=!1;qt(r)?s=r:gn(r)&&(a=!0,r=r[zt]);let c=Mt(r);e===0&&n!==null?i==null?jC(t,n,c):zl(t,n,c,i||null,!0):e===1&&n!==null?zl(t,n,c,i||null,!0):e===2?VI(o,l=>{pR(t,c,a,l)}):e===3&&VI(o,()=>{t.destroyNode(c)}),s!=null&&OR(t,e,s,n,i)}}function IR(e,t){WC(e,t),t[zt]=null,t[At]=null}function CR(e,t,n,r,i,o){r[zt]=i,r[At]=t,uu(e,r,n,1,i,o)}function WC(e,t){t[pn].changeDetectionScheduler?.notify(9),uu(e,t,t[he],2,null,null)}function wR(e){let t=e[fo];if(!t)return Mp(e[O],e);for(;t;){let n=null;if(gn(t))n=t[fo];else{let r=t[ct];r&&(n=r)}if(!n){for(;t&&!t[St]&&t!==e;)gn(t)&&Mp(t[O],t),t=t[Pe];t===null&&(t=e),gn(t)&&Mp(t[O],t),n=t&&t[St]}t=n}}function vg(e,t){let n=e[Os],r=n.indexOf(t);n.splice(r,1)}function GC(e,t){if(ni(t))return;let n=t[he];n.destroyNode&&uu(e,t,n,3,null,null),wR(t)}function Mp(e,t){if(ni(t))return;let n=j(null);try{t[P]&=-129,t[P]|=256,t[mt]&&vs(t[mt]),TR(e,t),bR(e,t),t[O].type===1&&t[he].destroy();let r=t[Jr];if(r!==null&&qt(t[Pe])){r!==t[Pe]&&vg(r,t);let i=t[ei];i!==null&&i.detachView(e)}Hp(t)}finally{j(n)}}function VI(e,t){if(e&&e[Ke]&&e[Ke].leave)if(e[Ke].skipLeaveAnimations)e[Ke].skipLeaveAnimations=!1;else{let n=e[Ke].leave,r=[];for(let i=0;i<n.length;i++){let o=n[i];r.push(o())}e[Ke].running=Promise.allSettled(r),e[Ke].leave=void 0}DR(e,t)}function DR(e,t){if(e&&e[Ke]&&e[Ke].running){e[Ke].running.then(()=>{e[Ke]&&e[Ke].running&&(e[Ke].running=void 0),lu.delete(e),t(!0)});return}t(!1)}function bR(e,t){let n=e.cleanup,r=t[lo];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(t[lo]=null);let i=t[Vn];if(i!==null){t[Vn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=t[Rs];if(o!==null){t[Rs]=null;for(let s of o)s.destroy()}}function TR(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof oi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];ee(4,a,c);try{c.call(a)}finally{ee(5,a,c)}}else{ee(4,i,o);try{o.call(i)}finally{ee(5,i,o)}}}}}function SR(e,t,n){return AR(e,t.parent,n)}function AR(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[zt];if(hr(r)){let{encapsulation:i}=e.data[r.directiveStart+r.componentOffset];if(i===Wn.None||i===Wn.Emulated)return null}return Yt(r,n)}function NR(e,t,n){return RR(e,t,n)}function MR(e,t,n){return e.type&40?Yt(e,n):null}var RR=MR,jI;function yg(e,t,n,r){let i=SR(e,r,t),o=t[he],s=r.parent||t[At],a=NR(s,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)LI(o,i,n[c],a,!1);else LI(o,i,n,a,!1);jI!==void 0&&jI(o,r,t,n,i)}function Vs(e,t){if(t!==null){let n=t.type;if(n&3)return Yt(t,e);if(n&4)return zp(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Vs(e,r);{let i=e[t.index];return qt(i)?zp(-1,i):Mt(i)}}else{if(n&128)return Vs(e,t.next);if(n&32)return mg(t,e)()||Mt(e[t.index]);{let r=zC(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=cr(e[Nt]);return Vs(i,r)}else return Vs(e,t.next)}}}return null}function zC(e,t){if(t!==null){let r=e[Nt][At],i=t.projection;return r.projection[i]}return null}function zp(e,t){let n=ct+e+1;if(n<t.length){let r=t[n],i=r[O].firstChild;if(i!==null)return Vs(r,i)}return t[fr]}function _g(e,t,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&t===0&&(a&&Eo(Mt(a),r),n.flags|=2),!cg(n))if(c&8)_g(e,t,n.child,r,i,o,!1),vo(t,e,i,a,o,r);else if(c&32){let l=mg(n,r),u;for(;u=l();)vo(t,e,i,u,o,r);vo(t,e,i,a,o,r)}else c&16?xR(e,t,r,n,i,o):vo(t,e,i,a,o,r);n=s?n.projectionNext:n.next}}function uu(e,t,n,r,i,o){_g(n,r,e.firstChild,t,i,o,!1)}function xR(e,t,n,r,i,o){let s=n[Nt],c=s[At].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];vo(t,e,i,u,o,n)}else{let l=c,u=s[Pe];IC(r)&&(l.flags|=128),_g(e,t,l,u,i,o,!0)}}function OR(e,t,n,r,i){let o=n[fr],s=Mt(n);o!==s&&vo(t,e,r,o,i);for(let a=ct;a<n.length;a++){let c=n[a];uu(c[O],c,e,t,r,o)}}function kR(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:_n.DashCase;i==null?e.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=_n.Important),e.setStyle(n,r,i,o))}}function qC(e,t,n,r,i){let o=pr(),s=r&2;try{gr(-1),s&&t.length>Se&&$C(e,t,Se,!1),ee(s?2:0,i,n),n(r,i)}finally{gr(o),ee(s?3:1,i,n)}}function du(e,t,n){HR(e,t,n),(n.flags&64)===64&&$R(e,t,n)}function fu(e,t,n=Yt){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(t,e):e[s];e[i++]=a}}}function PR(e,t,n,r){let o=r.get(AC,SC)||n===Wn.ShadowDom,s=e.selectRootElement(t,o);return FR(s),s}function FR(e){LR(e)}var LR=()=>null;function VR(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function jR(e,t,n,r,i,o){let s=t[O];if(wg(e,s,t,n,r)){hr(e)&&BR(t,e.index);return}e.type&3&&(n=VR(n)),UR(e,t,n,r,i,o)}function UR(e,t,n,r,i,o){if(e.type&3){let s=Yt(e,t);r=o!=null?o(r,e.value||"",n):r,i.setProperty(s,n,r)}else e.type&12}function BR(e,t){let n=Rt(t,e);n[P]&16||(n[P]|=64)}function HR(e,t,n){let r=n.directiveStart,i=n.directiveEnd;hr(n)&&_R(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||$l(n,t);let o=n.initialInputs;for(let s=r;s<i;s++){let a=e.data[s],c=Wl(t,e,s,n);if(Eo(c,t),o!==null&&qR(t,s-r,c,a,n,o),mn(a)){let l=Rt(n.index,t);l[We]=Wl(t,e,s,n)}}}function $R(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=_I();try{gr(o);for(let a=r;a<i;a++){let c=e.data[a],l=t[a];Al(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&WR(c,l)}}finally{gr(-1),Al(s)}}function WR(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function Eg(e,t){let n=e.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];oR(t,o.selectors,!1)&&(r??=[],mn(o)?r.unshift(o):r.push(o))}return r}function GR(e,t,n,r,i,o){let s=Yt(e,t);zR(t[he],s,o,e.value,n,r,i)}function zR(e,t,n,r,i,o,s){if(o==null)e.removeAttribute(t,i,n);else{let a=s==null?Zr(o):s(o,r||"",i);e.setAttribute(t,i,a,n)}}function qR(e,t,n,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];Gp(r,n,c,l)}}function Ig(e,t,n,r,i){let o=Se+n,s=t[O],a=i(s,t,e,r,n);t[o]=a,mo(e,!0);let c=e.type===2;return c?(UC(t[he],a,e),(lI()===0||ho(e))&&Eo(a,t),uI()):Eo(a,t),Rl()&&(!c||!cg(e))&&yg(s,t,a,e),e}function Cg(e){let t=e;return pp()?hI():(t=t.parent,mo(t,!1)),t}function YR(e,t){let n=e[uo];if(!n)return;let r;try{r=n.get(Ze,null)}catch{r=null}r?.(t)}function wg(e,t,n,r,i){let o=e.inputs?.[r],s=e.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],d=t.data[l];Gp(d,n[l],u,i),a=!0}if(o)for(let c of o){let l=n[c],u=t.data[c];Gp(u,l,r,i),a=!0}return a}function KR(e,t){let n=Rt(t,e),r=n[O];ZR(r,n);let i=n[zt];i!==null&&n[Ns]===null&&(n[Ns]=NC(i,n[uo])),ee(18),Dg(r,n,n[We]),ee(19,n[We])}function ZR(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function Dg(e,t,n){Nl(t);try{let r=e.viewQuery;r!==null&&Wp(1,r,n);let i=e.template;i!==null&&qC(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[ei]?.finishViewCreation(e),e.staticContentQueries&&MC(e,t),e.staticViewQueries&&Wp(2,e.viewQuery,n);let o=e.components;o!==null&&QR(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[P]&=-5,Ml()}}function QR(e,t){for(let n=0;n<t.length;n++)KR(e,t[n])}function JR(e,t,n,r){let i=j(null);try{let o=t.tView,a=e[P]&4096?4096:16,c=pg(e,o,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=e[t.index];c[Jr]=l;let u=e[ei];return u!==null&&(c[ei]=u.createEmbeddedView(o)),Dg(o,c,n),c}finally{j(i)}}function UI(e,t){return!t||t.firstChild===null||IC(e)}function Us(e,t,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=t[n.index];o!==null&&r.push(Mt(o)),qt(o)&&YC(o,r);let s=n.type;if(s&8)Us(e,t,n.child,r);else if(s&32){let a=mg(n,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=zC(t,n);if(Array.isArray(a))r.push(...a);else{let c=cr(t[Nt]);Us(c[O],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function YC(e,t){for(let n=ct;n<e.length;n++){let r=e[n],i=r[O].firstChild;i!==null&&Us(r[O],r,i,t)}e[fr]!==e[zt]&&t.push(e[fr])}function KC(e){if(e[ti]!==null){for(let t of e[ti])t.impl.addSequence(t);e[ti].length=0}}var ZC=[];function XR(e){return e[mt]??ex(e)}function ex(e){let t=ZC.pop()??Object.create(nx);return t.lView=e,t}function tx(e){e.lView[mt]!==e&&(e.lView=null,ZC.push(e))}var nx=S(m({},Hi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{go(e.lView)},consumerOnSignalRead(){this.lView[mt]=this}});function rx(e){let t=e[mt]??Object.create(ix);return t.lView=e,t}var ix=S(m({},Hi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=cr(e.lView);for(;t&&!QC(t[O]);)t=cr(t);t&&cp(t)},consumerOnSignalRead(){this.lView[mt]=this}});function QC(e){return e.type!==2}function JC(e){if(e[Rs]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[Rs])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[P]&8192)}}var ox=100;function XC(e,t=0){let r=e[pn].rendererFactory,i=!1;i||r.begin?.();try{sx(e,t)}finally{i||r.end?.()}}function sx(e,t){let n=gp();try{mp(!0),qp(e,t);let r=0;for(;ks(e);){if(r===ox)throw new E(103,!1);r++,qp(e,1)}}finally{mp(n)}}function ax(e,t,n,r){if(ni(t))return;let i=t[P],o=!1,s=!1;Nl(t);let a=!0,c=null,l=null;o||(QC(e)?(l=XR(t),c=Wi(l)):Fc()===null?(a=!1,l=rx(t),c=Wi(l)):t[mt]&&(vs(t[mt]),t[mt]=null));try{ap(t),mI(e.bindingStartIndex),n!==null&&qC(e,t,n,2,r),cx(t);let u=(i&3)===3;if(!o)if(u){let h=e.preOrderCheckHooks;h!==null&&Fl(t,h,null)}else{let h=e.preOrderHooks;h!==null&&Ll(t,h,0,null),Ap(t,0)}if(s||lx(t),JC(t),ew(t,0),e.contentQueries!==null&&MC(e,t),!o)if(u){let h=e.contentCheckHooks;h!==null&&Fl(t,h)}else{let h=e.contentHooks;h!==null&&Ll(t,h,1),Ap(t,1)}dx(e,t);let d=e.components;d!==null&&nw(t,d,0);let f=e.viewQuery;if(f!==null&&Wp(2,f,r),!o)if(u){let h=e.viewCheckHooks;h!==null&&Fl(t,h)}else{let h=e.viewHooks;h!==null&&Ll(t,h,2),Ap(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Il]){for(let h of t[Il])h();t[Il]=null}o||(KC(t),t[P]&=-73)}catch(u){throw o||go(t),u}finally{l!==null&&(gs(l,c),a&&tx(l)),Ml()}}function cx(e){let t=e[Ke];if(t?.enter){for(let n of t.enter)n();t.enter=void 0}}function ew(e,t){for(let n=wC(e);n!==null;n=DC(n))for(let r=ct;r<n.length;r++){let i=n[r];tw(i,t)}}function lx(e){for(let t=wC(e);t!==null;t=DC(t)){if(!(t[P]&2))continue;let n=t[Os];for(let r=0;r<n.length;r++){let i=n[r];cp(i)}}}function ux(e,t,n){ee(18);let r=Rt(t,e);tw(r,n),ee(19,r[We])}function tw(e,t){Dl(e)&&qp(e,t)}function qp(e,t){let r=e[O],i=e[P],o=e[mt],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&ms(o)),s||=!1,o&&(o.dirty=!1),e[P]&=-9217,s)ax(r,e,r.template,e[We]);else if(i&8192){let a=j(null);try{JC(e),ew(e,1);let c=r.components;c!==null&&nw(e,c,1),KC(e)}finally{j(a)}}}function nw(e,t,n){for(let r=0;r<t.length;r++)ux(e,t[r],n)}function dx(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)gr(~i);else{let o=i,s=n[++r],a=n[++r];yI(s,o);let c=t[o];ee(24,c),a(2,c),ee(25,c)}}}finally{gr(-1)}}function bg(e,t){let n=gp()?64:1088;for(e[pn].changeDetectionScheduler?.notify(t);e;){e[P]|=n;let r=cr(e);if(po(e)&&!r)return e;e=r}return null}function rw(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function fx(e,t,n,r=!0){let i=t[O];if(hx(i,t,e,n),r){let s=zp(n,e),a=t[he],c=a.parentNode(e[fr]);c!==null&&CR(i,e[At],a,t,c,s)}let o=t[Ns];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Yp(e,t){if(e.length<=ct)return;let n=ct+t,r=e[n];if(r){let i=r[Jr];i!==null&&i!==e&&vg(i,r),t>0&&(e[n-1][St]=r[St]);let o=Ts(e,ct+t);IR(r[O],r);let s=o[ei];s!==null&&s.detachView(o[O]),r[Pe]=null,r[St]=null,r[P]&=-129}return r}function hx(e,t,n,r){let i=ct+r,o=n.length;r>0&&(n[i-1][St]=t),r<o-ct?(t[St]=n[i],Yh(n,ct+r,t)):(n.push(t),t[St]=null),t[Pe]=n;let s=t[Jr];s!==null&&n!==s&&iw(s,t);let a=t[ei];a!==null&&a.insertView(e),bl(t),t[P]|=128}function iw(e,t){let n=e[Os],r=t[Pe];if(gn(r))e[P]|=2;else{let i=r[Pe][Nt];t[Nt]!==i&&(e[P]|=2)}n===null?e[Os]=[t]:n.push(t)}var mr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,n=t[O];return Us(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n}get context(){return this._lView[We]}set context(t){this._lView[We]=t}get destroyed(){return ni(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Pe];if(qt(t)){let n=t[xs],r=n?n.indexOf(this):-1;r>-1&&(Yp(t,r),Ts(n,r))}this._attachedToViewContainer=!1}GC(this._lView[O],this._lView)}onDestroy(t){lp(this._lView,t)}markForCheck(){bg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[P]&=-129}reattach(){bl(this._lView),this._lView[P]|=128}detectChanges(){this._lView[P]|=1024,XC(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new E(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=po(this._lView),n=this._lView[Jr];n!==null&&!t&&vg(n,this._lView),WC(this._lView[O],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new E(902,!1);this._appRef=t;let n=po(this._lView),r=this._lView[Jr];r!==null&&!n&&iw(r,this._lView),bl(this._lView)}};var zs=(()=>{class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=px;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=JR(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new mr(o)}}return e})();function px(){return ow(Fe(),K())}function ow(e,t){return e.type&4?new zs(t,e,ru(e,t)):null}function hu(e,t,n,r,i){let o=e.data[t];if(o===null)o=gx(e,t,n,r,i),vI()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=fI();o.injectorIndex=s===null?-1:s.injectorIndex}return mo(o,!0),o}function gx(e,t,n,r,i){let o=hp(),s=pp(),a=s?o:o&&o.parent,c=e.data[t]=vx(e,a,n,t,r,i);return mx(e,c,o,s),c}function mx(e,t,n,r){e.firstChild===null&&(e.firstChild=t),n!==null&&(r?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function vx(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return dI()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Yq=new RegExp(`^(\\d+)*(${$M}|${HM})*(.*)`);var yx=()=>null;function BI(e,t){return yx(e,t)}var sw=class{},pu=class{},Kp=class{resolveComponentFactory(t){throw new E(917,!1)}},qs=class{static NULL=new Kp},si=class{},Qt=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>_x()}return e})();function _x(){let e=K(),t=Fe(),n=Rt(t.index,e);return(gn(n)?n:e)[he]}var aw=(()=>{class e{static \u0275prov=C({token:e,providedIn:"root",factory:()=>null})}return e})();var Vl={},Zp=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){let i=this.injector.get(t,Vl,r);return i!==Vl||n===Vl?i:this.parentInjector.get(t,n,r)}};function ql(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=Vh(i,a);else if(o==2){let c=a,l=t[++s];r=Vh(r,c+": "+l+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function I(e,t=0){let n=K();if(n===null)return A(e,t);let r=Fe();return yC(r,n,ke(e),t)}function Tg(){let e="invalid";throw new Error(e)}function cw(e,t,n,r,i){let o=r===null?null:{"":-1},s=i(e,n);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}Cx(e,t,n,a,o,c,l)}o!==null&&r!==null&&Ex(n,r,o)}function Ex(e,t,n){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new E(-301,!1);r.push(t[i],o)}}function Ix(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function Cx(e,t,n,r,i,o,s){let a=r.length,c=!1;for(let f=0;f<a;f++){let h=r[f];!c&&mn(h)&&(c=!0,Ix(e,n,f)),Up($l(n,t),e,h.type)}Ax(n,e.data.length,a);for(let f=0;f<a;f++){let h=r[f];h.providersResolver&&h.providersResolver(h)}let l=!1,u=!1,d=HC(e,t,a,null);a>0&&(n.directiveToIndex=new Map);for(let f=0;f<a;f++){let h=r[f];if(n.mergedAttrs=_o(n.mergedAttrs,h.hostAttrs),Dx(e,n,t,d,h),Sx(d,h,i),s!==null&&s.has(h)){let[_,T]=s.get(h);n.directiveToIndex.set(h.type,[d,_+n.directiveStart,T+n.directiveStart])}else(o===null||!o.has(h))&&n.directiveToIndex.set(h.type,d);h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let g=h.type.prototype;!l&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),l=!0),!u&&(g.ngOnChanges||g.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),u=!0),d++}wx(e,n,o)}function wx(e,t,n){for(let r=t.directiveStart;r<t.directiveEnd;r++){let i=e.data[r];if(n===null||!n.has(i))HI(0,t,i,r),HI(1,t,i,r),WI(t,r,!1);else{let o=n.get(i);$I(0,t,o,r),$I(1,t,o,r),WI(t,r,!0)}}}function HI(e,t,n,r){let i=e===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;e===0?s=t.inputs??={}:s=t.outputs??={},s[o]??=[],s[o].push(r),lw(t,o)}}function $I(e,t,n,r){let i=e===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;e===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),lw(t,s)}}function lw(e,t){t==="class"?e.flags|=8:t==="style"&&(e.flags|=16)}function WI(e,t,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=e;if(r===null||!n&&i===null||n&&o===null||fg(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===t){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===t){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}e.initialInputs??=[],e.initialInputs.push(s)}function Dx(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=ar(i.type,!0)),s=new oi(o,mn(i),I,null);e.blueprint[r]=s,n[r]=s,bx(e,t,r,HC(e,n,i.hostVars,Zt),i)}function bx(e,t,n,r,i){let o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;Tx(s)!=a&&s.push(a),s.push(n,r,o)}}function Tx(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function Sx(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;mn(t)&&(n[""]=e)}}function Ax(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Sg(e,t,n,r,i,o,s,a){let c=t[O],l=c.consts,u=ri(l,s),d=hu(c,e,n,r,u);return o&&cw(c,t,d,ri(l,a),i),d.mergedAttrs=_o(d.mergedAttrs,d.attrs),d.attrs!==null&&ql(d,d.attrs,!1),d.mergedAttrs!==null&&ql(d,d.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,d),d}function Ag(e,t){lC(e,t),ip(t)&&e.queries.elementEnd(t)}function Nx(e,t,n,r,i,o){let s=t.consts,a=ri(s,i),c=hu(t,e,n,r,a);if(c.mergedAttrs=_o(c.mergedAttrs,c.attrs),o!=null){let l=ri(s,o);c.localNames=[];for(let u=0;u<l.length;u+=2)c.localNames.push(l[u],-1)}return c.attrs!==null&&ql(c,c.attrs,!1),c.mergedAttrs!==null&&ql(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function Ng(e){return dw(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function uw(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function dw(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function fw(e,t,n){return e[t]=n}function ai(e,t,n){if(n===Zt)return!1;let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function hw(e,t,n,r){let i=ai(e,t,n);return ai(e,t+1,r)||i}function Rp(e,t,n){return function r(i){let o=hr(e)?Rt(e.index,t):t;bg(o,5);let s=t[We],a=GI(t,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=GI(t,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function GI(e,t,n,r){let i=j(null);try{return ee(6,t,n),n(r)!==!1}catch(o){return YR(e,o),!1}finally{ee(7,t,n),j(i)}}function Mx(e,t,n,r,i,o,s,a){let c=ho(e),l=!1,u=null;if(!r&&c&&(u=xx(t,n,o,e.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let d=Yt(e,n),f=r?r(d):d;GM(n,f,o,a);let h=i.listen(f,o,a);if(!Rx(o)){let g=r?_=>r(Mt(_[e.index])):e.index;pw(g,t,n,o,a,h,!1)}}return l}function Rx(e){return e.startsWith("animation")||e.startsWith("transition")}function xx(e,t,n,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=t[lo],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function pw(e,t,n,r,i,o,s){let a=t.firstCreatePass?cI(t):null,c=aI(n),l=c.length;c.push(i,o),a&&a.push(r,e,l,(l+1)*(s?-1:1))}function zI(e,t,n,r,i,o){let s=t[n],a=t[O],l=a.data[n].outputs[r],d=s[l].subscribe(o);pw(e.index,a,t,i,o,d,!0)}var Qp=Symbol("BINDING");var Yl=class extends qs{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Hn(t);return new ci(n,this.ngModule)}};function Ox(e){return Object.keys(e).map(t=>{let[n,r,i]=e[t],o={propName:n,templateName:t,isSignal:(r&cu.SignalBased)!==0};return i&&(o.transform=i),o})}function kx(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}function Px(e,t,n){let r=t instanceof Te?t:t?.injector;return r&&e.getStandaloneInjector!==null&&(r=e.getStandaloneInjector(r)||r),r?new Zp(n,r):n}function Fx(e){let t=e.get(si,null);if(t===null)throw new E(407,!1);let n=e.get(aw,null),r=e.get(lr,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function Lx(e,t){let n=gw(e);return VC(t,n,n==="svg"?nI:n==="math"?rI:null)}function gw(e){return(e.selectors[0][0]||"div").toLowerCase()}var ci=class extends pu{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Ox(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=kx(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=lR(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,r,i,o,s){ee(22);let a=j(null);try{let c=this.componentDef,l=Vx(r,c,s,o),u=Px(c,i||this.ngModule,t),d=Fx(u),f=d.rendererFactory.createRenderer(null,c),h=r?PR(f,r,c.encapsulation,u):Lx(c,f),g=s?.some(qI)||o?.some(M=>typeof M!="function"&&M.bindings.some(qI)),_=pg(null,l,null,512|BC(c),null,null,d,f,u,null,NC(h,u,!0));_[Se]=h,Nl(_);let T=null;try{let M=Sg(Se,_,2,"#host",()=>l.directiveRegistry,!0,0);UC(f,h,M),Eo(h,_),du(l,_,M),lg(l,M,_),Ag(l,M),n!==void 0&&Ux(M,this.ngContentSelectors,n),T=Rt(M.index,_),_[We]=T[We],Dg(l,_,null)}catch(M){throw T!==null&&Hp(T),Hp(_),M}finally{ee(23),Ml()}return new Kl(this.componentType,_,!!g)}finally{j(a)}}};function Vx(e,t,n,r){let i=e?["ng-version","20.3.2"]:uR(t.selectors[0]),o=null,s=null,a=0;if(n)for(let u of n)a+=u[Qp].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let d=r[u];if(typeof d!="function")for(let f of d.bindings){a+=f[Qp].requiredVars;let h=u+1;f.create&&(f.targetIdx=h,(o??=[]).push(f)),f.update&&(f.targetIdx=h,(s??=[]).push(f))}}let c=[t];if(r)for(let u of r){let d=typeof u=="function"?u:u.type,f=Jh(d);c.push(f)}return hg(0,null,jx(o,s),1,a,c,null,null,null,[i],null)}function jx(e,t){return!e&&!t?null:n=>{if(n&1&&e)for(let r of e)r.create();if(n&2&&t)for(let r of t)r.update()}}function qI(e){let t=e[Qp].kind;return t==="input"||t==="twoWay"}var Kl=class extends sw{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Cl(n[O],Se),this.location=ru(this._tNode,n),this.instance=Rt(this._tNode.index,n)[We],this.hostView=this.changeDetectorRef=new mr(n,void 0),this.componentType=t}setInput(t,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let i=this._rootLView,o=wg(r,i[O],i,t,n);this.previousInputValues.set(t,n);let s=Rt(r.index,i);bg(s,1)}get injector(){return new ii(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function Ux(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var di=(()=>{class e{static __NG_ELEMENT_ID__=Bx}return e})();function Bx(){let e=Fe();return $x(e,K())}var Hx=di,mw=class extends Hx{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return ru(this._hostTNode,this._hostLView)}get injector(){return new ii(this._hostTNode,this._hostLView)}get parentInjector(){let t=ig(this._hostTNode,this._hostLView);if(fC(t)){let n=Bl(t,this._hostLView),r=Ul(t),i=n[O].data[r+8];return new ii(i,n)}else return new ii(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=YI(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-ct}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=BI(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,UI(this._hostTNode,s)),a}createComponent(t,n,r,i,o,s,a){let c=t&&!vM(t),l;if(c)l=n;else{let T=n||{};l=T.index,r=T.injector,i=T.projectableNodes,o=T.environmentInjector||T.ngModuleRef,s=T.directives,a=T.bindings}let u=c?t:new ci(Hn(t)),d=r||this.parentInjector;if(!o&&u.ngModule==null){let M=(c?d:this.parentInjector).get(Te,null);M&&(o=M)}let f=Hn(u.componentType??{}),h=BI(this._lContainer,f?.id??null),g=h?.firstChild??null,_=u.create(d,i,g,o,s,a);return this.insertImpl(_.hostView,l,UI(this._hostTNode,h)),_}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(iI(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=i[Pe],l=new mw(c,c[At],c[Pe]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(n),s=this._lContainer;return fx(s,i,o,r),t.attachToViewContainerRef(),Yh(xp(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=YI(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Yp(this._lContainer,n);r&&(Ts(xp(this._lContainer),n),GC(r[O],r))}detach(t){let n=this._adjustIndex(t,-1),r=Yp(this._lContainer,n);return r&&Ts(xp(this._lContainer),n)!=null?new mr(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function YI(e){return e[xs]}function xp(e){return e[xs]||(e[xs]=[])}function $x(e,t){let n,r=t[e.index];return qt(r)?n=r:(n=rw(r,t,null,e),t[e.index]=n,gg(t,n)),Gx(n,t,e,r),new mw(n,e,t)}function Wx(e,t){let n=e[he],r=n.createComment(""),i=Yt(t,e),o=n.parentNode(i);return zl(n,o,r,n.nextSibling(i),!1),r}var Gx=Yx,zx=()=>!1;function qx(e,t,n){return zx(e,t,n)}function Yx(e,t,n,r){if(e[fr])return;let i;n.type&8?i=Mt(r):i=Wx(t,n),e[fr]=i}var KI=new Set;function fi(e){KI.has(e)||(KI.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var li=class{},gu=class{};var Zl=class extends li{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Yl(this);constructor(t,n,r,i=!0){super(),this.ngModuleType=t,this._parent=n;let o=Qh(t);this._bootstrapComponents=FC(o.bootstrap),this._r3Injector=wp(t,n,[{provide:li,useValue:this},{provide:qs,useValue:this.componentFactoryResolver},...r],jn(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Ql=class extends gu{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Zl(this.moduleType,t,[])}};var Bs=class extends li{injector;componentFactoryResolver=new Yl(this);instance=null;constructor(t){super();let n=new Yr([...t.providers,{provide:li,useValue:this},{provide:qs,useValue:this.componentFactoryResolver}],t.parent||As(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function wo(e,t,n=null){return new Bs({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var Kx=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Xh(!1,n.type),i=r.length>0?wo([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=C({token:e,providedIn:"environment",factory:()=>new e(A(Te))})}return e})();function Qe(e){return $s(()=>{let t=vw(e),n=S(m({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===og.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(Kx).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Wn.Emulated,styles:e.styles||gt,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&fi("NgStandalone"),yw(n);let r=e.dependencies;return n.directiveDefs=ZI(r,Zx),n.pipeDefs=ZI(r,YE),n.id=Xx(n),n})}function Zx(e){return Hn(e)||Jh(e)}function En(e){return $s(()=>({type:e.type,bootstrap:e.bootstrap||gt,declarations:e.declarations||gt,imports:e.imports||gt,exports:e.exports||gt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Qx(e,t){if(e==null)return ur;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=cu.None,c=null),n[o]=[r,a,c],t[o]=s}return n}function Jx(e){if(e==null)return ur;let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function ue(e){return $s(()=>{let t=vw(e);return yw(t),t})}function mu(e){return{type:e.type,name:e.name,factory:null,pure:e.pure!==!1,standalone:e.standalone??!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function vw(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||ur,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||gt,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Qx(e.inputs,t),outputs:Jx(e.outputs),debugInfo:null}}function yw(e){e.features?.forEach(t=>t(e))}function ZI(e,t){return e?()=>{let n=typeof e=="function"?e():e,r=[];for(let i of n){let o=t(i);o!==null&&r.push(o)}return r}:null}function Xx(e){let t=0,n=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let o of r.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function eO(e){return Object.getPrototypeOf(e.prototype).constructor}function Jt(e){let t=eO(e.type),n=!0,r=[e];for(;t;){let i;if(mn(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new E(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let s=e;s.inputs=Op(e.inputs),s.declaredInputs=Op(e.declaredInputs),s.outputs=Op(e.outputs);let a=i.hostBindings;a&&oO(e,a);let c=i.viewQuery,l=i.contentQueries;if(c&&rO(e,c),l&&iO(e,l),tO(e,i),BE(e.outputs,i.outputs),mn(i)&&i.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(e),a===Jt&&(n=!1)}}t=Object.getPrototypeOf(t)}nO(r)}function tO(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n])}}function nO(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=_o(i.hostAttrs,n=_o(n,i.hostAttrs))}}function Op(e){return e===ur?{}:e===gt?[]:e}function rO(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function iO(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,o)=>{t(r,i,o),n(r,i,o)}:e.contentQueries=t}function oO(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}function sO(e,t,n,r,i,o,s,a){if(n.firstCreatePass){e.mergedAttrs=_o(e.mergedAttrs,e.attrs);let u=e.tView=hg(2,e,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,e),u.queries=n.queries.embeddedTView(e))}a&&(e.flags|=a),mo(e,!1);let c=cO(n,t,e,r);Rl()&&yg(n,t,c,e),Eo(c,t);let l=rw(c,t,c,e);t[r+Se]=l,gg(t,l),qx(l,e,t)}function aO(e,t,n,r,i,o,s,a,c,l,u){let d=n+Se,f;return t.firstCreatePass?(f=hu(t,d,4,s||null,a||null),Tl()&&cw(t,e,f,ri(t.consts,l),Eg),lC(t,f)):f=t.data[d],sO(f,e,t,n,r,i,o,c),ho(f)&&du(t,e,f),l!=null&&fu(e,f,u),f}function Le(e,t,n,r,i,o,s,a){let c=K(),l=vt(),u=ri(l.consts,o);return aO(c,l,e,t,n,r,i,u,void 0,s,a),Le}var cO=lO;function lO(e,t,n,r){return Ps(!0),t[he].createComment("")}var vu=(function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e})(vu||{}),hi=new D(""),_w=!1,Jp=class extends oe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,eI()&&(this.destroyRef=v(vn,{optional:!0})??void 0,this.pendingTasks=v($n,{optional:!0})??void 0)}emit(t){let n=j(null);try{super.next(t)}finally{j(n)}}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof le&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ce=Jp;function Ew(e){let t,n;function r(){e=Ls;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function QI(e){return queueMicrotask(()=>e()),()=>{e=Ls}}var Mg="isAngularZone",Jl=Mg+"_ID",uO=0,ge=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ce(!1);onMicrotaskEmpty=new Ce(!1);onStable=new Ce(!1);onError=new Ce(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=_w}=t;if(typeof Zone>"u")throw new E(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,hO(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Mg)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new E(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new E(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,dO,Ls,Ls);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},dO={};function Rg(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function fO(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){Ew(()=>{e.callbackScheduled=!1,Xp(e),e.isCheckStableRunning=!0,Rg(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),Xp(e)}function hO(e){let t=()=>{fO(e)},n=uO++;e._inner=e._inner.fork({name:"angular",properties:{[Mg]:!0,[Jl]:n,[Jl+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(pO(c))return r.invokeTask(o,s,a,c);try{return JI(e),r.invokeTask(o,s,a,c)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),XI(e)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return JI(e),r.invoke(o,s,a,c,l)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!gO(c)&&t(),XI(e)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,Xp(e),Rg(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function Xp(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function JI(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function XI(e){e._nesting--,Rg(e)}var Xl=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ce;onMicrotaskEmpty=new Ce;onStable=new Ce;onError=new Ce;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function pO(e){return Iw(e,"__ignore_ng_zone__")}function gO(e){return Iw(e,"__scheduler_tick__")}function Iw(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var xg=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=C({token:e,providedIn:"root",factory:()=>new e})}return e})(),Cw=[0,1,2,3],ww=(()=>{class e{ngZone=v(ge);scheduler=v(lr);errorHandler=v(Wt,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){v(hi,{optional:!0})}execute(){let n=this.sequences.size>0;n&&ee(16),this.executing=!0;for(let r of Cw)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&ee(17)}register(n){let{view:r}=n;r!==void 0?((r[ti]??=[]).push(n),go(r),r[P]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(vu.AFTER_NEXT_RENDER,n):n()}static \u0275prov=C({token:e,providedIn:"root",factory:()=>new e})}return e})(),eu=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,n,r,i,o,s=null){this.impl=t,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[ti];t&&(this.view[ti]=t.filter(n=>n!==this))}};function Ys(e,t){let n=t?.injector??v(at);return fi("NgAfterNextRender"),vO(e,n,t,!0)}function mO(e){return e instanceof Function?[void 0,void 0,e,void 0]:[e.earlyRead,e.write,e.mixedReadWrite,e.read]}function vO(e,t,n,r){let i=t.get(xg);i.impl??=t.get(ww);let o=t.get(hi,null,{optional:!0}),s=n?.manualCleanup!==!0?t.get(vn):null,a=t.get(xl,null,{optional:!0}),c=new eu(i.impl,mO(e),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var Og=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();var kg=new D("");function zn(e){return!!e&&typeof e.then=="function"}function yu(e){return!!e&&typeof e.subscribe=="function"}var Pg=new D("");function _u(e){return dr([{provide:Pg,multi:!0,useValue:e}])}var Fg=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=v(Pg,{optional:!0})??[];injector=v(at);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=$e(this.injector,i);if(zn(o))n.push(o);else if(yu(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ks=new D("");function Dw(){ah(()=>{let e="";throw new E(600,e)})}function bw(e){return e.isBoundToModule}var yO=10;var qn=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=v(Ze);afterRenderManager=v(xg);zonelessEnabled=v(Fs);rootEffectScheduler=v(Sp);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new oe;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=v($n);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(U(n=>!n))}constructor(){v(hi,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=v(Te);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=at.NULL){return this._injector.get(ge).run(()=>{ee(10);let s=n instanceof pu;if(!this._injector.get(Fg).done){let g="";throw new E(405,g)}let c;s?c=n:c=this._injector.get(qs).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let l=bw(c)?void 0:this._injector.get(li),u=r||c.selector,d=c.create(i,[],u,l),f=d.location.nativeElement,h=d.injector.get(kg,null);return h?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),js(this.components,d),h?.unregisterApplication(f)}),this._loadComponent(d),ee(11,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ee(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(vu.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new E(101,!1);let n=j(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,j(n),this.afterTick.next(),ee(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(si,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<yO;)ee(14),this.synchronizeOnce(),ee(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ks(i))continue;let o=r&&!this.zonelessEnabled?0:1;XC(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>ks(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;js(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Ks,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>js(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new E(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function js(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Zs(e,t,n,r){let i=K(),o=Sl();if(ai(i,o,t)){let s=vt(),a=Cp();GR(a,i,e,t,n,r)}return Zs}var t6=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function Z(e,t,n){let r=K(),i=Sl();if(ai(r,i,t)){let o=vt(),s=Cp();jR(s,r,e,t,r[he],n)}return Z}function eC(e,t,n,r,i){wg(t,e,n,i?"class":"style",r)}function b(e,t,n,r){let i=K(),o=i[O],s=e+Se,a=o.firstCreatePass?Sg(s,i,2,t,Eg,Tl(),n,r):o.data[s];if(Ig(a,i,e,t,Tw),ho(a)){let c=i[O];du(c,i,a),lg(c,a,i)}return r!=null&&fu(i,a),b}function w(){let e=vt(),t=Fe(),n=Cg(t);return e.firstCreatePass&&Ag(e,n),dp(n)&&fp(),up(),n.classesWithoutHost!=null&&wM(n)&&eC(e,n,K(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&DM(n)&&eC(e,n,K(),n.stylesWithoutHost,!1),w}function me(e,t,n,r){return b(e,t,n,r),w(),me}function Eu(e,t,n,r){let i=K(),o=i[O],s=e+Se,a=o.firstCreatePass?Nx(s,o,2,t,n,r):o.data[s];return Ig(a,i,e,t,Tw),r!=null&&fu(i,a),Eu}function Iu(){let e=Fe(),t=Cg(e);return dp(t)&&fp(),up(),Iu}var Tw=(e,t,n,r,i)=>(Ps(!0),VC(t[he],r,bI()));function Cu(e,t,n){let r=K(),i=r[O],o=e+Se,s=i.firstCreatePass?Sg(o,r,8,"ng-container",Eg,Tl(),t,n):i.data[o];if(Ig(s,r,e,"ng-container",_O),ho(s)){let a=r[O];du(a,r,s),lg(a,s,r)}return n!=null&&fu(r,s),Cu}function wu(){let e=vt(),t=Fe(),n=Cg(t);return e.firstCreatePass&&Ag(e,n),wu}var _O=(e,t,n,r,i)=>(Ps(!0),hR(t[he],""));function yr(){return K()}var kl=void 0;function EO(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return t===1&&n===0?1:5}var IO=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],kl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],kl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",kl,"{1} 'at' {0}",kl],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",EO],kp={};function _t(e){let t=CO(e),n=tC(t);if(n)return n;let r=t.split("-")[0];if(n=tC(r),n)return n;if(r==="en")return IO;throw new E(701,!1)}function tC(e){return e in kp||(kp[e]=Un.ng&&Un.ng.common&&Un.ng.common.locales&&Un.ng.common.locales[e]),kp[e]}var ve=(function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e})(ve||{});function CO(e){return e.toLowerCase().replace(/_/g,"-")}var Qs="en-US";var wO=Qs;function Sw(e){typeof e=="string"&&(wO=e.toLowerCase().replace(/_/g,"-"))}function ae(e,t,n){let r=K(),i=vt(),o=Fe();return DO(i,r,r[he],o,e,t,n),ae}function DO(e,t,n,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=Rp(r,t,o),Mx(r,e,t,s,n,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let d=0;d<u.length;d+=2){let f=u[d],h=u[d+1];c??=Rp(r,t,o),zI(r,t,f,h,i,c)}if(l&&l.length)for(let d of l)c??=Rp(r,t,o),zI(r,t,d,i,i,c)}}function Re(e=1){return DI(e)}function Lg(e){let t=pI();return wl(t,Se+e)}function Pl(e,t){return e<<17|t<<2}function ui(e){return e>>17&32767}function bO(e){return(e&2)==2}function TO(e,t){return e&131071|t<<17}function eg(e){return e|2}function Io(e){return(e&131068)>>2}function Pp(e,t){return e&-131069|t<<2}function SO(e){return(e&1)===1}function tg(e){return e|1}function AO(e,t,n,r,i,o){let s=o?t.classBindings:t.styleBindings,a=ui(s),c=Io(s);e[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||co(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let f=ui(e[a+1]);e[r+1]=Pl(f,a),f!==0&&(e[f+1]=Pp(e[f+1],r)),e[a+1]=TO(e[a+1],r)}else e[r+1]=Pl(a,0),a!==0&&(e[a+1]=Pp(e[a+1],r)),a=r;else e[r+1]=Pl(c,0),a===0?a=r:e[c+1]=Pp(e[c+1],r),c=r;l&&(e[r+1]=eg(e[r+1])),nC(e,u,r,!0),nC(e,u,r,!1),NO(t,u,e,r,o),s=Pl(a,c),o?t.classBindings=s:t.styleBindings=s}function NO(e,t,n,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&co(o,t)>=0&&(n[r+1]=tg(n[r+1]))}function nC(e,t,n,r){let i=e[n+1],o=t===null,s=r?ui(i):Io(i),a=!1;for(;s!==0&&(a===!1||o);){let c=e[s],l=e[s+1];MO(c,t)&&(a=!0,e[s+1]=r?tg(l):eg(l)),s=r?ui(l):Io(l)}a&&(e[n+1]=r?eg(i):tg(i))}function MO(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?co(e,t)>=0:!1}function pi(e,t,n){return Aw(e,t,n,!1),pi}function Js(e,t){return Aw(e,t,null,!0),Js}function Aw(e,t,n,r){let i=K(),o=vt(),s=yp(2);if(o.firstUpdatePass&&xO(o,e,s,r),t!==Zt&&ai(i,s,t)){let a=o.data[pr()];LO(o,a,i,i[he],e,i[s+1]=VO(t,n),r,s)}}function RO(e,t){return t>=e.expandoStartIndex}function xO(e,t,n,r){let i=e.data;if(i[n+1]===null){let o=i[pr()],s=RO(e,n);jO(o,r)&&t===null&&!s&&(t=!1),t=OO(i,o,t,r),AO(i,o,t,n,s,r)}}function OO(e,t,n,r){let i=EI(e),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=Fp(null,e,t,n,r),n=Hs(n,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==i)if(n=Fp(i,e,t,n,r),o===null){let c=kO(e,t,r);c!==void 0&&Array.isArray(c)&&(c=Fp(null,e,t,c[1],r),c=Hs(c,t.attrs,r),PO(e,t,r,c))}else o=FO(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function kO(e,t,n){let r=n?t.classBindings:t.styleBindings;if(Io(r)!==0)return e[ui(r)]}function PO(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[ui(i)]=r}function FO(e,t,n){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=e[o].hostAttrs;r=Hs(r,s,n)}return Hs(r,t.attrs,n)}function Fp(e,t,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=t[a],r=Hs(r,o.hostAttrs,i),o!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function Hs(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),qE(e,s,n?!0:t[++o]))}return e===void 0?null:e}function LO(e,t,n,r,i,o,s,a){if(!(t.type&3))return;let c=e.data,l=c[a+1],u=SO(l)?rC(c,t,n,i,Io(l),s):void 0;if(!tu(u)){tu(o)||bO(l)&&(o=rC(c,null,n,i,a,s));let d=op(pr(),n);kR(r,s,d,i,o)}}function rC(e,t,n,r,i,o){let s=t===null,a;for(;i>0;){let c=e[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,f=n[i+1];f===Zt&&(f=d?gt:void 0);let h=d?El(f,r):u===r?f:void 0;if(l&&!tu(h)&&(h=El(c,r)),tu(h)&&(a=h,s))return a;let g=e[i+1];i=s?ui(g):Io(g)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(a=El(c,r))}return a}function tu(e){return e!==void 0}function VO(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=jn(Gs(e)))),e}function jO(e,t){return(e.flags&(t?8:16))!==0}function R(e,t=""){let n=K(),r=vt(),i=e+Se,o=r.firstCreatePass?hu(r,i,1,t,null):r.data[i],s=UO(r,n,o,t,e);n[i]=s,Rl()&&yg(r,n,s,o),mo(o,!1)}var UO=(e,t,n,r,i)=>(Ps(!0),dR(t[he],r));function BO(e,t,n,r=""){return ai(e,Sl(),n)?t+Zr(n)+r:Zt}function HO(e,t,n,r,i,o=""){let s=gI(),a=hw(e,s,n,i);return yp(2),a?t+Zr(n)+r+Zr(i)+o:Zt}function Xt(e){return In("",e),Xt}function In(e,t,n){let r=K(),i=BO(r,e,t,n);return i!==Zt&&Nw(r,pr(),i),In}function Du(e,t,n,r,i){let o=K(),s=HO(o,e,t,n,r,i);return s!==Zt&&Nw(o,pr(),s),Du}function Nw(e,t,n){let r=op(t,e);fR(e[he],r,n)}function $O(e,t,n){let r=vt();if(r.firstCreatePass){let i=mn(e);ng(n,r.data,r.blueprint,i,!0),ng(t,r.data,r.blueprint,i,!1)}}function ng(e,t,n,r,i){if(e=ke(e),Array.isArray(e))for(let o=0;o<e.length;o++)ng(e[o],t,n,r,i);else{let o=vt(),s=K(),a=Fe(),c=qr(e)?e:ke(e.provide),l=tp(e),u=a.providerIndexes&1048575,d=a.directiveStart,f=a.providerIndexes>>20;if(qr(e)||!e.multi){let h=new oi(l,i,I,null),g=Vp(c,t,i?u:u+f,d);g===-1?(Up($l(a,s),o,c),Lp(o,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(h),s.push(h)):(n[g]=h,s[g]=h)}else{let h=Vp(c,t,u+f,d),g=Vp(c,t,u,u+f),_=h>=0&&n[h],T=g>=0&&n[g];if(i&&!T||!i&&!_){Up($l(a,s),o,c);let M=zO(i?GO:WO,n.length,i,r,l,e);!i&&T&&(n[g].providerFactory=M),Lp(o,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(M),s.push(M)}else{let M=Mw(n[i?g:h],l,!i&&r);Lp(o,e,h>-1?h:g,M)}!i&&r&&T&&n[g].componentProviders++}}}function Lp(e,t,n,r){let i=qr(t),o=XE(t);if(i||o){let c=(o?ke(t.useClass):t).prototype.ngOnDestroy;if(c){let l=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function Mw(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Vp(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function WO(e,t,n,r,i){return rg(this.multi,[])}function GO(e,t,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Wl(r,r[O],this.providerFactory.index,i);s=c.slice(0,a),rg(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],rg(o,s);return s}function rg(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function zO(e,t,n,r,i,o){let s=new oi(e,n,I,null);return s.multi=[],s.index=t,s.componentProviders=0,Mw(s,i,r&&!n),s}function gi(e,t=[]){return n=>{n.providersResolver=(r,i)=>$O(r,i?i(e):e,t)}}function Rw(e,t){let n=e[t];return n===Zt?void 0:n}function qO(e,t,n,r,i,o){let s=t+n;return ai(e,s,i)?fw(e,s+1,o?r.call(o,i):r(i)):Rw(e,s+1)}function YO(e,t,n,r,i,o,s){let a=t+n;return hw(e,a,i,o)?fw(e,a+2,s?r.call(s,i,o):r(i,o)):Rw(e,a+2)}function bu(e,t){let n=vt(),r,i=e+Se;n.firstCreatePass?(r=KO(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=ar(r.type,!0)),s,a=Ye(I);try{let c=Hl(!1),l=o();return Hl(c),sp(n,K(),i,l),l}finally{Ye(a)}}function KO(e,t){if(t)for(let n=t.length-1;n>=0;n--){let r=t[n];if(e===r.name)return r}}function Vg(e,t,n){let r=e+Se,i=K(),o=wl(i,r);return xw(i,r)?qO(i,vp(),t,o.transform,n,o):o.transform(n)}function jg(e,t,n,r){let i=e+Se,o=K(),s=wl(o,i);return xw(o,i)?YO(o,vp(),t,s.transform,n,r,s):s.transform(n,r)}function xw(e,t){return e[O].data[t].pure}function Ug(e,t){return ow(e,t)}var nu=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},Bg=(()=>{class e{compileModuleSync(n){return new Ql(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Qh(n),o=FC(i.declarations).reduce((s,a)=>{let c=Hn(a);return c&&s.push(new ci(c)),s},[]);return new nu(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var ZO=(()=>{class e{zone=v(ge);changeDetectionScheduler=v(lr);applicationRef=v(qn);applicationErrorHandler=v(Ze);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ow=new D("",{factory:()=>!1});function Hg({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new ge(S(m({},Wg()),{scheduleInRootZone:n})),[{provide:ge,useFactory:e},{provide:Bn,multi:!0,useFactory:()=>{let r=v(ZO,{optional:!0});return()=>r.initialize()}},{provide:Bn,multi:!0,useFactory:()=>{let r=v(QO);return()=>{r.initialize()}}},t===!0?{provide:bp,useValue:!0}:[],{provide:Tp,useValue:n??_w},{provide:Ze,useFactory:()=>{let r=v(ge),i=v(Te),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Wt),o.handleError(s))})}}}]}function $g(e){let t=e?.ignoreChangesOutsideZone,n=e?.scheduleInRootZone,r=Hg({ngZoneFactory:()=>{let i=Wg(e);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&fi("NgZone_CoalesceEvent"),new ge(i)},ignoreChangesOutsideZone:t,scheduleInRootZone:n});return dr([{provide:Ow,useValue:!0},{provide:Fs,useValue:!1},r])}function Wg(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var QO=(()=>{class e{subscription=new le;initialized=!1;zone=v(ge);pendingTasks=v($n);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ge.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ge.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var kw=(()=>{class e{applicationErrorHandler=v(Ze);appRef=v(qn);taskService=v($n);ngZone=v(ge);zonelessEnabled=v(Fs);tracing=v(hi,{optional:!0});disableScheduling=v(bp,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new le;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Jl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(v(Tp,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Xl||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?QI:Ew;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Jl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,QI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function JO(){return typeof $localize<"u"&&$localize.locale||Qs}var Xs=new D("",{providedIn:"root",factory:()=>v(Xs,{optional:!0,skipSelf:!0})||JO()});function we(e){return VE(e)}function Do(e,t){return jc(e,t?.equal)}var Pw=class{[qe];constructor(t){this[qe]=t}destroy(){this[qe].destroy()}};var Bw=Symbol("InputSignalNode#UNSET"),hk=S(m({},Uc),{transformFn:void 0,applyValueToInputSignal(e,t){zi(e,t)}});function Hw(e,t){let n=Object.create(hk);n.value=e,n.transformFn=t?.transform;function r(){if($i(n),n.value===Bw){let i=null;throw new E(-950,i)}return n.value}return r[qe]=n,r}var Su=class{attributeName;constructor(t){this.attributeName=t}__NG_ELEMENT_ID__=()=>Ws(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},pk=new D("");pk.__NG_ELEMENT_ID__=e=>{let t=Fe();if(t===null)throw new E(204,!1);if(t.type&2)return t.value;if(e&8)return null;throw new E(204,!1)};function Fw(e,t){return Hw(e,t)}function gk(e){return Hw(Bw,e)}var $w=(Fw.required=gk,Fw);var Gg=new D(""),mk=new D("");function ea(e){return!e.moduleRef}function vk(e){let t=ea(e)?e.r3Injector:e.moduleRef.injector,n=t.get(ge);return n.run(()=>{ea(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(Ze),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),ea(e)){let o=()=>t.destroy(),s=e.platformInjector.get(Gg);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>e.moduleRef.destroy(),s=e.platformInjector.get(Gg);s.add(o),e.moduleRef.onDestroy(()=>{js(e.allPlatformModules,e.moduleRef),i.unsubscribe(),s.delete(o)})}return _k(r,n,()=>{let o=t.get($n),s=o.add(),a=t.get(Fg);return a.runInitializers(),a.donePromise.then(()=>{let c=t.get(Xs,Qs);if(Sw(c||Qs),!t.get(mk,!0))return ea(e)?t.get(qn):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(ea(e)){let u=t.get(qn);return e.rootComponent!==void 0&&u.bootstrap(e.rootComponent),u}else return yk?.(e.moduleRef,e.allPlatformModules),e.moduleRef}).finally(()=>void o.remove(s))})})}var yk;function _k(e,t,n){try{let r=n();return zn(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e(r)),r}}var Tu=null;function Ek(e=[],t){return at.create({name:t,providers:[{provide:Ss,useValue:"platform"},{provide:Gg,useValue:new Set([()=>Tu=null])},...e]})}function Ik(e=[]){if(Tu)return Tu;let t=Ek(e);return Tu=t,Dw(),Ck(t),t}function Ck(e){let t=e.get(ou,null);$e(e,()=>{t?.forEach(n=>n())})}var _r=(()=>{class e{static __NG_ELEMENT_ID__=wk}return e})();function wk(e){return Dk(Fe(),K(),(e&16)===16)}function Dk(e,t,n){if(hr(e)&&!n){let r=Rt(e.index,t);return new mr(r,r)}else if(e.type&175){let r=t[Nt];return new mr(r,t)}return null}var zg=class{constructor(){}supports(t){return Ng(t)}create(t){return new qg(t)}},bk=(e,t)=>t,qg=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||bk}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<Lw(r,i,o)?n:r,a=Lw(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let f=0;f<l;f++){let h=f<o.length?o[f]:o[f]=0,g=h+f;u<=g&&g<l&&(o[f]=h+1)}let d=s.previousIndex;o[d]=u-l}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!Ng(t))throw new E(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,uw(t,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new Yg(n,r),o,i)),t}_verifyReinsertion(t,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let i=n===null?this._itHead:n._next;return t._next=i,t._prev=n,i===null?this._itTail=t:i._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new Au),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Au),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Yg=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,n){this.item=t,this.trackById=n}},Kg=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Au=class{map=new Map;put(t){let n=t.trackById,r=this.map.get(n);r||(r=new Kg,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,i=this.map.get(r);return i?i.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Lw(e,t,n){let r=e.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function Vw(){return new Zg([new zg])}var Zg=(()=>{class e{factories;static \u0275prov=C({token:e,providedIn:"root",factory:Vw});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:()=>{let r=v(e,{optional:!0,skipSelf:!0});return e.create(n,r||Vw())}}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new E(901,!1)}}return e})();function Ww(e){let{rootComponent:t,appProviders:n,platformProviders:r,platformRef:i}=e;ee(8);try{let o=i?.injector??Ik(r),s=[Hg({}),{provide:lr,useExisting:kw},SI,...n||[]],a=new Bs({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return vk({r3Injector:a.injector,platformInjector:o,rootComponent:t})}catch(o){return Promise.reject(o)}finally{ee(9)}}function bo(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function Gw(e){let t=Hn(e);if(!t)return null;let n=new ci(t);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var Yw=null;function Pt(){return Yw}function Qg(e){Yw??=e}var ta=class{},na=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:()=>v(Kw),providedIn:"platform"})}return e})(),Jg=new D(""),Kw=(()=>{class e extends na{_location;_history;_doc=v(pe);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pt().getBaseHref(this._doc)}onPopState(n){let r=Pt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Pt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function Nu(e,t){return e?t?e.endsWith("/")?t.startsWith("/")?e+t.slice(1):e+t:t.startsWith("/")?e+t:`${e}/${t}`:e:t}function zw(e){let t=e.search(/#|\?|$/);return e[t-1]==="/"?e.slice(0,t-1)+e.slice(t):e}function en(e){return e&&e[0]!=="?"?`?${e}`:e}var tn=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:()=>v(Ru),providedIn:"root"})}return e})(),Mu=new D(""),Ru=(()=>{class e extends tn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??v(pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Nu(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+en(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+en(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+en(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(A(na),A(Mu,8))};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Er=(()=>{class e{_subject=new oe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=Ak(zw(qw(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+en(r))}normalize(n){return e.stripTrailingSlash(Sk(this._basePath,qw(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+en(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+en(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=en;static joinWithSlash=Nu;static stripTrailingSlash=zw;static \u0275fac=function(r){return new(r||e)(A(tn))};static \u0275prov=C({token:e,factory:()=>Tk(),providedIn:"root"})}return e})();function Tk(){return new Er(A(tn))}function Sk(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function qw(e){return e.replace(/\/index.html$/,"")}function Ak(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var om=(()=>{class e extends tn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=Nu(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+en(o))||this._platformLocation.pathname;this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+en(o))||this._platformLocation.pathname;this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(A(na),A(Mu,8))};static \u0275prov=C({token:e,factory:e.\u0275fac})}return e})();var Ge=(function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e})(Ge||{}),ne=(function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e})(ne||{}),lt=(function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e})(lt||{}),Kn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function eD(e){return _t(e)[ve.LocaleId]}function tD(e,t,n){let r=_t(e),i=[r[ve.DayPeriodsFormat],r[ve.DayPeriodsStandalone]],o=Ft(i,t);return Ft(o,n)}function nD(e,t,n){let r=_t(e),i=[r[ve.DaysFormat],r[ve.DaysStandalone]],o=Ft(i,t);return Ft(o,n)}function rD(e,t,n){let r=_t(e),i=[r[ve.MonthsFormat],r[ve.MonthsStandalone]],o=Ft(i,t);return Ft(o,n)}function iD(e,t){let r=_t(e)[ve.Eras];return Ft(r,t)}function ra(e,t){let n=_t(e);return Ft(n[ve.DateFormat],t)}function ia(e,t){let n=_t(e);return Ft(n[ve.TimeFormat],t)}function oa(e,t){let r=_t(e)[ve.DateTimeFormat];return Ft(r,t)}function sa(e,t){let n=_t(e),r=n[ve.NumberSymbols][t];if(typeof r>"u"){if(t===Kn.CurrencyDecimal)return n[ve.NumberSymbols][Kn.Decimal];if(t===Kn.CurrencyGroup)return n[ve.NumberSymbols][Kn.Group]}return r}function oD(e){if(!e[ve.ExtraData])throw new E(2303,!1)}function sD(e){let t=_t(e);return oD(t),(t[ve.ExtraData][2]||[]).map(r=>typeof r=="string"?Xg(r):[Xg(r[0]),Xg(r[1])])}function aD(e,t,n){let r=_t(e);oD(r);let i=[r[ve.ExtraData][0],r[ve.ExtraData][1]],o=Ft(i,t)||[];return Ft(o,n)||[]}function Ft(e,t){for(let n=t;n>-1;n--)if(typeof e[n]<"u")return e[n];throw new E(2304,!1)}function Xg(e){let[t,n]=e.split(":");return{hours:+t,minutes:+n}}var Nk=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,xu={},Mk=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function cD(e,t,n,r){let i=jk(e);t=Yn(n,t)||t;let s=[],a;for(;t;)if(a=Mk.exec(t),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;t=u}else{s.push(t);break}let c=i.getTimezoneOffset();r&&(c=uD(r,c),i=Vk(i,r));let l="";return s.forEach(u=>{let d=Fk(u);l+=d?d(i,n,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Lu(e,t,n){let r=new Date(0);return r.setFullYear(e,t,n),r.setHours(0,0,0),r}function Yn(e,t){let n=eD(e);if(xu[n]??={},xu[n][t])return xu[n][t];let r="";switch(t){case"shortDate":r=ra(e,lt.Short);break;case"mediumDate":r=ra(e,lt.Medium);break;case"longDate":r=ra(e,lt.Long);break;case"fullDate":r=ra(e,lt.Full);break;case"shortTime":r=ia(e,lt.Short);break;case"mediumTime":r=ia(e,lt.Medium);break;case"longTime":r=ia(e,lt.Long);break;case"fullTime":r=ia(e,lt.Full);break;case"short":let i=Yn(e,"shortTime"),o=Yn(e,"shortDate");r=Ou(oa(e,lt.Short),[i,o]);break;case"medium":let s=Yn(e,"mediumTime"),a=Yn(e,"mediumDate");r=Ou(oa(e,lt.Medium),[s,a]);break;case"long":let c=Yn(e,"longTime"),l=Yn(e,"longDate");r=Ou(oa(e,lt.Long),[c,l]);break;case"full":let u=Yn(e,"fullTime"),d=Yn(e,"fullDate");r=Ou(oa(e,lt.Full),[u,d]);break}return r&&(xu[n][t]=r),r}function Ou(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(n,r){return t!=null&&r in t?t[r]:n})),e}function nn(e,t,n="-",r,i){let o="";(e<0||i&&e<=0)&&(i?e=-e+1:(e=-e,o=n));let s=String(e);for(;s.length<t;)s="0"+s;return r&&(s=s.slice(s.length-t)),o+s}function Rk(e,t){return nn(e,3).substring(0,t)}function De(e,t,n=0,r=!1,i=!1){return function(o,s){let a=xk(e,o);if((n>0||a>-n)&&(a+=n),e===3)a===0&&n===-12&&(a=12);else if(e===6)return Rk(a,t);let c=sa(s,Kn.MinusSign);return nn(a,t,c,r,i)}}function xk(e,t){switch(e){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new E(2301,!1)}}function re(e,t,n=Ge.Format,r=!1){return function(i,o){return Ok(i,o,e,t,n,r)}}function Ok(e,t,n,r,i,o){switch(n){case 2:return rD(t,i,r)[e.getMonth()];case 1:return nD(t,i,r)[e.getDay()];case 0:let s=e.getHours(),a=e.getMinutes();if(o){let l=sD(t),u=aD(t,i,r),d=l.findIndex(f=>{if(Array.isArray(f)){let[h,g]=f,_=s>=h.hours&&a>=h.minutes,T=s<g.hours||s===g.hours&&a<g.minutes;if(h.hours<g.hours){if(_&&T)return!0}else if(_||T)return!0}else if(f.hours===s&&f.minutes===a)return!0;return!1});if(d!==-1)return u[d]}return tD(t,i,r)[s<12?0:1];case 3:return iD(t,r)[e.getFullYear()<=0?0:1];default:let c=n;throw new E(2302,!1)}}function ku(e){return function(t,n,r){let i=-1*r,o=sa(n,Kn.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(e){case 0:return(i>=0?"+":"")+nn(s,2,o)+nn(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+nn(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+nn(s,2,o)+":"+nn(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+nn(s,2,o)+":"+nn(Math.abs(i%60),2,o);default:throw new E(2310,!1)}}}var kk=0,Fu=4;function Pk(e){let t=Lu(e,kk,1).getDay();return Lu(e,0,1+(t<=Fu?Fu:Fu+7)-t)}function lD(e){let t=e.getDay(),n=t===0?-3:Fu-t;return Lu(e.getFullYear(),e.getMonth(),e.getDate()+n)}function em(e,t=!1){return function(n,r){let i;if(t){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=lD(n),s=Pk(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return nn(i,e,sa(r,Kn.MinusSign))}}function Pu(e,t=!1){return function(n,r){let o=lD(n).getFullYear();return nn(o,e,sa(r,Kn.MinusSign),t)}}var tm={};function Fk(e){if(tm[e])return tm[e];let t;switch(e){case"G":case"GG":case"GGG":t=re(3,ne.Abbreviated);break;case"GGGG":t=re(3,ne.Wide);break;case"GGGGG":t=re(3,ne.Narrow);break;case"y":t=De(0,1,0,!1,!0);break;case"yy":t=De(0,2,0,!0,!0);break;case"yyy":t=De(0,3,0,!1,!0);break;case"yyyy":t=De(0,4,0,!1,!0);break;case"Y":t=Pu(1);break;case"YY":t=Pu(2,!0);break;case"YYY":t=Pu(3);break;case"YYYY":t=Pu(4);break;case"M":case"L":t=De(1,1,1);break;case"MM":case"LL":t=De(1,2,1);break;case"MMM":t=re(2,ne.Abbreviated);break;case"MMMM":t=re(2,ne.Wide);break;case"MMMMM":t=re(2,ne.Narrow);break;case"LLL":t=re(2,ne.Abbreviated,Ge.Standalone);break;case"LLLL":t=re(2,ne.Wide,Ge.Standalone);break;case"LLLLL":t=re(2,ne.Narrow,Ge.Standalone);break;case"w":t=em(1);break;case"ww":t=em(2);break;case"W":t=em(1,!0);break;case"d":t=De(2,1);break;case"dd":t=De(2,2);break;case"c":case"cc":t=De(7,1);break;case"ccc":t=re(1,ne.Abbreviated,Ge.Standalone);break;case"cccc":t=re(1,ne.Wide,Ge.Standalone);break;case"ccccc":t=re(1,ne.Narrow,Ge.Standalone);break;case"cccccc":t=re(1,ne.Short,Ge.Standalone);break;case"E":case"EE":case"EEE":t=re(1,ne.Abbreviated);break;case"EEEE":t=re(1,ne.Wide);break;case"EEEEE":t=re(1,ne.Narrow);break;case"EEEEEE":t=re(1,ne.Short);break;case"a":case"aa":case"aaa":t=re(0,ne.Abbreviated);break;case"aaaa":t=re(0,ne.Wide);break;case"aaaaa":t=re(0,ne.Narrow);break;case"b":case"bb":case"bbb":t=re(0,ne.Abbreviated,Ge.Standalone,!0);break;case"bbbb":t=re(0,ne.Wide,Ge.Standalone,!0);break;case"bbbbb":t=re(0,ne.Narrow,Ge.Standalone,!0);break;case"B":case"BB":case"BBB":t=re(0,ne.Abbreviated,Ge.Format,!0);break;case"BBBB":t=re(0,ne.Wide,Ge.Format,!0);break;case"BBBBB":t=re(0,ne.Narrow,Ge.Format,!0);break;case"h":t=De(3,1,-12);break;case"hh":t=De(3,2,-12);break;case"H":t=De(3,1);break;case"HH":t=De(3,2);break;case"m":t=De(4,1);break;case"mm":t=De(4,2);break;case"s":t=De(5,1);break;case"ss":t=De(5,2);break;case"S":t=De(6,1);break;case"SS":t=De(6,2);break;case"SSS":t=De(6,3);break;case"Z":case"ZZ":case"ZZZ":t=ku(0);break;case"ZZZZZ":t=ku(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=ku(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=ku(2);break;default:return null}return tm[e]=t,t}function uD(e,t){e=e.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function Lk(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function Vk(e,t,n){let i=e.getTimezoneOffset(),o=uD(t,i);return Lk(e,-1*(o-i))}function jk(e){if(Zw(e))return e;if(typeof e=="number"&&!isNaN(e))return new Date(e);if(typeof e=="string"){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){let[i,o=1,s=1]=e.split("-").map(a=>+a);return Lu(i,o-1,s)}let n=parseFloat(e);if(!isNaN(e-n))return new Date(n);let r;if(r=e.match(Nk))return Uk(r)}let t=new Date(e);if(!Zw(t))throw new E(2311,!1);return t}function Uk(e){let t=new Date(0),n=0,r=0,i=e[8]?t.setUTCFullYear:t.setFullYear,o=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),r=Number(e[9]+e[11])),i.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));let s=Number(e[4]||0)-n,a=Number(e[5]||0)-r,c=Number(e[6]||0),l=Math.floor(parseFloat("0."+(e[7]||0))*1e3);return o.call(t,s,a,c,l),t}function Zw(e){return e instanceof Date&&!isNaN(e.valueOf())}var nm=/\s+/,Qw=[],aa=(()=>{class e{_ngEl;_renderer;initialClasses=Qw;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(nm):Qw}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(nm):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(nm).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||e)(I(kt),I(Qt))};static \u0275dir=ue({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return e})();var Vu=class{$implicit;ngForOf;index;count;constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Uu=(()=>{class e{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Vu(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Jw(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Jw(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(I(di),I(zs),I(Zg))};static \u0275dir=ue({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return e})();function Jw(e,t){e.context.$implicit=t.item}var rn=(()=>{class e{_viewContainer;_context=new ju;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Xw(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Xw(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(I(di),I(zs))};static \u0275dir=ue({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return e})(),ju=class{$implicit=null;ngIf=null};function Xw(e,t){if(e&&!e.createEmbeddedView)throw new E(2020,!1)}function dD(e,t){return new E(2100,!1)}var rm=class{createSubscription(t,n,r){return we(()=>t.subscribe({next:n,error:r}))}dispose(t){we(()=>t.unsubscribe())}},im=class{createSubscription(t,n,r){return t.then(i=>n?.(i),i=>r?.(i)),{unsubscribe:()=>{n=null,r=null}}}dispose(t){t.unsubscribe()}},Bk=new im,Hk=new rm,sm=(()=>{class e{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=v(Ze);constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r),r=>this.applicationErrorHandler(r))}_selectStrategy(n){if(zn(n))return Bk;if(yu(n))return Hk;throw dD(e,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||e)(I(_r,16))};static \u0275pipe=mu({name:"async",type:e,pure:!1})}return e})();var $k="mediumDate",fD=new D(""),hD=new D(""),am=(()=>{class e{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??$k,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return cD(n,s,o||this.locale,a)}catch(s){throw dD(e,s.message)}}static \u0275fac=function(r){return new(r||e)(I(Xs,16),I(fD,24),I(hD,24))};static \u0275pipe=mu({name:"date",type:e,pure:!0})}return e})();var ut=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=En({type:e});static \u0275inj=Gt({})}return e})();function cm(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var ca=class{};var pD="browser";var gD=(()=>{class e{static \u0275prov=C({token:e,providedIn:"root",factory:()=>new lm(v(pe),window)})}return e})(),lm=class{document;window;offset=()=>[0,0];constructor(t,n){this.document=t,this.window=n}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t,n){this.window.scrollTo(S(m({},n),{left:t[0],top:t[1]}))}scrollToAnchor(t,n){let r=Wk(this.document,t);r&&(this.scrollToElement(r,n),r.focus())}setHistoryScrollRestoration(t){try{this.window.history.scrollRestoration=t}catch{console.warn(ao(2400,!1))}}scrollToElement(t,n){let r=t.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(S(m({},n),{left:i-s[0],top:o-s[1]}))}};function Wk(e,t){let n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if(typeof e.createTreeWalker=="function"&&e.body&&typeof e.body.attachShadow=="function"){let r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}i=r.nextNode()}}return null}var Hu=new D(""),pm=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new E(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(A(Hu),A(ge))};static \u0275prov=C({token:e,factory:e.\u0275fac})}return e})(),la=class{_doc;constructor(t){this._doc=t}manager},um="ng-app-id";function mD(e){for(let t of e)t.remove()}function vD(e,t){let n=t.createElement("style");return n.textContent=e,n}function Gk(e,t,n,r){let i=e.head?.querySelectorAll(`style[${um}="${t}"],link[${um}="${t}"]`);if(i)for(let o of i)o.removeAttribute(um),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function fm(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var gm=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,Gk(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,vD);r?.forEach(i=>this.addUsage(i,this.external,fm))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(mD(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])mD(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,vD(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,fm(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(A(pe),A(iu),A(su,8),A(Co))};static \u0275prov=C({token:e,factory:e.\u0275fac})}return e})(),dm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},mm=/%COMP%/g;var _D="%COMP%",zk=`_nghost-${_D}`,qk=`_ngcontent-${_D}`,Yk=!0,Kk=new D("",{providedIn:"root",factory:()=>Yk});function Zk(e){return qk.replace(mm,e)}function Qk(e){return zk.replace(mm,e)}function ED(e,t){return t.map(n=>n.replace(mm,e))}var vm=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,c,l=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new ua(n,s,c,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof Bu?i.applyToHost(n):i instanceof da&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,f=this.tracingService;switch(r.encapsulation){case Wn.Emulated:o=new Bu(c,l,r,this.appId,u,s,a,d,f);break;case Wn.ShadowDom:return new hm(c,l,n,r,s,a,this.nonce,d,f);default:o=new da(c,l,r,u,s,a,d,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||e)(A(pm),A(gm),A(iu),A(Kk),A(pe),A(Co),A(ge),A(su),A(hi,8))};static \u0275prov=C({token:e,factory:e.\u0275fac})}return e})(),ua=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,i,o){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(dm[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(yD(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(yD(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new E(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=dm[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=dm[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(_n.DashCase|_n.Important)?t.style.setProperty(n,r,i&_n.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&_n.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r,i){if(typeof t=="string"&&(t=Pt().getGlobalEventTarget(this.doc,t),!t))throw new E(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,n,o)),this.eventManager.addEventListener(t,n,o,i)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;t(n)===!1&&n.preventDefault()}}};function yD(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var hm=class extends ua{sharedStylesHost;hostEl;shadowRoot;constructor(t,n,r,i,o,s,a,c,l){super(t,o,s,c,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=ED(i.id,u);for(let f of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=f,this.shadowRoot.appendChild(h)}let d=i.getExternalStyles?.();if(d)for(let f of d){let h=fm(f,o);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},da=class extends ua{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,i,o,s,a,c,l){super(t,o,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?ED(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&lu.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Bu=class extends da{contentAttr;hostAttr;constructor(t,n,r,i,o,s,a,c,l){let u=i+"-"+r.id;super(t,n,r,o,s,a,c,l,u),this.contentAttr=Zk(u),this.hostAttr=Qk(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}};var $u=class e extends ta{supportsDOMEvents=!0;static makeCurrent(){Qg(new e)}onAndCancel(t,n,r,i){return t.addEventListener(n,r,i),()=>{t.removeEventListener(n,r,i)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=Jk();return n==null?null:Xk(n)}resetBaseElement(){fa=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return cm(document.cookie,t)}},fa=null;function Jk(){return fa=fa||document.head.querySelector("base"),fa?fa.getAttribute("href"):null}function Xk(e){return new URL(e,document.baseURI).pathname}var eP=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac})}return e})(),CD=(()=>{class e extends la{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||e)(A(pe))};static \u0275prov=C({token:e,factory:e.\u0275fac})}return e})(),ID=["alt","control","meta","shift"],tP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nP={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},wD=(()=>{class e extends la{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pt().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),ID.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=tP[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),ID.forEach(s=>{if(s!==i){let a=nP[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(A(pe))};static \u0275prov=C({token:e,factory:e.\u0275fac})}return e})();function ym(e,t,n){let r=m({rootComponent:e,platformRef:n?.platformRef},rP(t));return Ww(r)}function rP(e){return{appProviders:[...cP,...e?.providers??[]],platformProviders:aP}}function iP(){$u.makeCurrent()}function oP(){return new Wt}function sP(){return sg(document),document}var aP=[{provide:Co,useValue:pD},{provide:ou,useValue:iP,multi:!0},{provide:pe,useFactory:sP}];var cP=[{provide:Ss,useValue:"root"},{provide:Wt,useFactory:oP},{provide:Hu,useClass:CD,multi:!0,deps:[pe]},{provide:Hu,useClass:wD,multi:!0,deps:[pe]},vm,gm,pm,{provide:si,useExisting:vm},{provide:ca,useClass:eP},[]];var DD=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||e)(A(pe))};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var L="primary",ba=Symbol("RouteTitle"),wm=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function yi(e){return new wm(e)}function xD(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=e[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function uP(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Cn(e[n],t[n]))return!1;return!0}function Cn(e,t){let n=e?Dm(e):void 0,r=t?Dm(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!OD(e[i],t[i]))return!1;return!0}function Dm(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function OD(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function kD(e){return e.length>0?e[e.length-1]:null}function Zn(e){return Ih(e)?e:zn(e)?se(Promise.resolve(e)):N(e)}var dP={exact:FD,subset:LD},PD={exact:fP,subset:hP,ignored:()=>!0};function bD(e,t,n){return dP[n.paths](e.root,t.root,n.matrixParams)&&PD[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function fP(e,t){return Cn(e,t)}function FD(e,t,n){if(!mi(e.segments,t.segments)||!zu(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!FD(e.children[r],t.children[r],n))return!1;return!0}function hP(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>OD(e[n],t[n]))}function LD(e,t,n){return VD(e,t,t.segments,n)}function VD(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!mi(i,n)||t.hasChildren()||!zu(i,n,r))}else if(e.segments.length===n.length){if(!mi(e.segments,n)||!zu(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!LD(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!mi(e.segments,i)||!zu(e.segments,i,r)||!e.children[L]?!1:VD(e.children[L],t,o,r)}}function zu(e,t,n){return t.every((r,i)=>PD[n](e[i].parameters,r.parameters))}var Dn=class{root;queryParams;fragment;_queryParamMap;constructor(t=new Q([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=yi(this.queryParams),this._queryParamMap}toString(){return mP.serialize(this)}},Q=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qu(this)}},Ir=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=yi(this.parameters),this._parameterMap}toString(){return UD(this)}};function pP(e,t){return mi(e,t)&&e.every((n,r)=>Cn(n.parameters,t[r].parameters))}function mi(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function gP(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===L&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==L&&(n=n.concat(t(i,r)))}),n}var _i=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:()=>new Cr,providedIn:"root"})}return e})(),Cr=class{parse(t){let n=new Tm(t);return new Dn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${ha(t.root,!0)}`,r=_P(t.queryParams),i=typeof t.fragment=="string"?`#${vP(t.fragment)}`:"";return`${n}${r}${i}`}},mP=new Cr;function qu(e){return e.segments.map(t=>UD(t)).join("/")}function ha(e,t){if(!e.hasChildren())return qu(e);if(t){let n=e.children[L]?ha(e.children[L],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==L&&r.push(`${i}:${ha(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=gP(e,(r,i)=>i===L?[ha(e.children[L],!1)]:[`${i}:${ha(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[L]!=null?`${qu(e)}/${n[0]}`:`${qu(e)}/(${n.join("//")})`}}function jD(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wu(e){return jD(e).replace(/%3B/gi,";")}function vP(e){return encodeURI(e)}function bm(e){return jD(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Yu(e){return decodeURIComponent(e)}function TD(e){return Yu(e.replace(/\+/g,"%20"))}function UD(e){return`${bm(e.path)}${yP(e.parameters)}`}function yP(e){return Object.entries(e).map(([t,n])=>`;${bm(t)}=${bm(n)}`).join("")}function _P(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Wu(n)}=${Wu(i)}`).join("&"):`${Wu(n)}=${Wu(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var EP=/^[^\/()?;#]+/;function _m(e){let t=e.match(EP);return t?t[0]:""}var IP=/^[^\/()?;=#]+/;function CP(e){let t=e.match(IP);return t?t[0]:""}var wP=/^[^=?&#]+/;function DP(e){let t=e.match(wP);return t?t[0]:""}var bP=/^[^&#]+/;function TP(e){let t=e.match(bP);return t?t[0]:""}var Tm=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Q([],{}):new Q([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[L]=new Q(t,n)),r}parseSegment(){let t=_m(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new E(4009,!1);return this.capture(t),new Ir(Yu(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=CP(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=_m(this.remaining);i&&(r=i,this.capture(r))}t[Yu(n)]=Yu(r)}parseQueryParam(t){let n=DP(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=TP(this.remaining);s&&(r=s,this.capture(r))}let i=TD(n),o=TD(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=_m(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new E(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=L);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[L]:new Q([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new E(4011,!1)}};function BD(e){return e.segments.length>0?new Q([],{[L]:e}):e}function HD(e){let t={};for(let[r,i]of Object.entries(e.children)){let o=HD(i);if(r===L&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new Q(e.segments,t);return SP(n)}function SP(e){if(e.numberOfChildren===1&&e.children[L]){let t=e.children[L];return new Q(e.segments.concat(t.segments),t.children)}return e}function wr(e){return e instanceof Dn}function $D(e,t,n=null,r=null){let i=WD(e);return GD(i,t,n,r)}function WD(e){let t;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new Q(o.url,s);return o===e&&(t=a),a}let r=n(e.root),i=BD(r);return t??i}function GD(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return Em(i,i,i,n,r);let o=AP(t);if(o.toRoot())return Em(i,i,new Q([],{}),n,r);let s=NP(o,i,e),a=s.processChildren?ga(s.segmentGroup,s.index,o.commands):qD(s.segmentGroup,s.index,o.commands);return Em(i,s.segmentGroup,a,n,r)}function Ku(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function va(e){return typeof e=="object"&&e!=null&&e.outlets}function Em(e,t,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;e===t?s=n:s=zD(e,t,n);let a=BD(HD(s));return new Dn(a,o,i)}function zD(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=zD(o,t,n)}),new Q(e.segments,r)}var Zu=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Ku(r[0]))throw new E(4003,!1);let i=r.find(va);if(i&&i!==kD(r))throw new E(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function AP(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new Zu(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Zu(n,t,r)}var No=class{segmentGroup;processChildren;index;constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function NP(e,t,n){if(e.isAbsolute)return new No(t,!0,0);if(!n)return new No(t,!1,NaN);if(n.parent===null)return new No(n,!0,0);let r=Ku(e.commands[0])?0:1,i=n.segments.length-1+r;return MP(n,i,e.numberOfDoubleDots)}function MP(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new E(4005,!1);i=r.segments.length}return new No(r,!1,i-o)}function RP(e){return va(e[0])?e[0].outlets:{[L]:e}}function qD(e,t,n){if(e??=new Q([],{}),e.segments.length===0&&e.hasChildren())return ga(e,t,n);let r=xP(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new Q(e.segments.slice(0,r.pathIndex),{});return o.children[L]=new Q(e.segments.slice(r.pathIndex),e.children),ga(o,0,i)}else return r.match&&i.length===0?new Q(e.segments,{}):r.match&&!e.hasChildren()?Sm(e,t,n):r.match?ga(e,0,i):Sm(e,t,n)}function ga(e,t,n){if(n.length===0)return new Q(e.segments,{});{let r=RP(n),i={};if(Object.keys(r).some(o=>o!==L)&&e.children[L]&&e.numberOfChildren===1&&e.children[L].segments.length===0){let o=ga(e.children[L],t,n);return new Q(e.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=qD(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Q(e.segments,i)}}function xP(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let s=e.segments[i],a=n[r];if(va(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!AD(c,l,s))return o;r+=2}else{if(!AD(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Sm(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(va(o)){let c=OP(o.outlets);return new Q(r,c)}if(i===0&&Ku(n[0])){let c=e.segments[t];r.push(new Ir(c.path,SD(n[0]))),i++;continue}let s=va(o)?o.outlets[L]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Ku(a)?(r.push(new Ir(s,SD(a))),i+=2):(r.push(new Ir(s,{})),i++)}return new Q(r,{})}function OP(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=Sm(new Q([],{}),0,r))}),t}function SD(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function AD(e,t,n){return e==n.path&&Cn(t,n.parameters)}var Mo="imperative",Ae=(function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e})(Ae||{}),It=class{id;url;constructor(t,n){this.id=t,this.url=n}},Dr=class extends It{type=Ae.NavigationStart;navigationTrigger;restoredState;constructor(t,n,r="imperative",i=null){super(t,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Lt=class extends It{urlAfterRedirects;type=Ae.NavigationEnd;constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Je=(function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e[e.Aborted=4]="Aborted",e})(Je||{}),xo=(function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e})(xo||{}),wn=class extends It{reason;code;type=Ae.NavigationCancel;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},bn=class extends It{reason;code;type=Ae.NavigationSkipped;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}},Oo=class extends It{error;target;type=Ae.NavigationError;constructor(t,n,r,i){super(t,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ya=class extends It{urlAfterRedirects;state;type=Ae.RoutesRecognized;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qu=class extends It{urlAfterRedirects;state;type=Ae.GuardsCheckStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ju=class extends It{urlAfterRedirects;state;shouldActivate;type=Ae.GuardsCheckEnd;constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Xu=class extends It{urlAfterRedirects;state;type=Ae.ResolveStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ed=class extends It{urlAfterRedirects;state;type=Ae.ResolveEnd;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},td=class{route;type=Ae.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},nd=class{route;type=Ae.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},rd=class{snapshot;type=Ae.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},id=class{snapshot;type=Ae.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},od=class{snapshot;type=Ae.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sd=class{snapshot;type=Ae.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ko=class{routerEvent;position;anchor;type=Ae.Scroll;constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},_a=class{},Po=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function kP(e){return!(e instanceof _a)&&!(e instanceof Po)}function PP(e,t){return e.providers&&!e._injector&&(e._injector=wo(e.providers,t,`Route: ${e.path}`)),e._injector??t}function on(e){return e.outlet||L}function FP(e,t){let n=e.filter(r=>on(r)===t);return n.push(...e.filter(r=>on(r)!==t)),n}function Vo(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var ad=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Vo(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Ei(this.rootInjector)}},Ei=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new ad(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||e)(A(Te))};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),cd=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=Am(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=Am(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=Nm(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Nm(t,this._root).map(n=>n.value)}};function Am(e,t){if(e===t.value)return t;for(let n of t.children){let r=Am(e,n);if(r)return r}return null}function Nm(e,t){if(e===t.value)return[t];for(let n of t.children){let r=Nm(e,n);if(r.length)return r.unshift(t),r}return[]}var Et=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ao(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var Ea=class extends cd{snapshot;constructor(t,n){super(t),this.snapshot=n,Lm(this,t)}toString(){return this.snapshot.toString()}};function YD(e){let t=LP(e),n=new Oe([new Ir("",{})]),r=new Oe({}),i=new Oe({}),o=new Oe({}),s=new Oe(""),a=new dt(n,r,o,s,i,L,e,t.root);return a.snapshot=t.root,new Ea(new Et(a,[]),t)}function LP(e){let t={},n={},r={},o=new vi([],t,r,"",n,L,e,null,{});return new Ia("",new Et(o,[]))}var dt=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,r,i,o,s,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(U(l=>l[ba]))??N(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(U(t=>yi(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(U(t=>yi(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ld(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:m(m({},t.params),e.params),data:m(m({},t.data),e.data),resolve:m(m(m(m({},e.data),t.data),i?.data),e._resolvedData)}:r={params:m({},e.params),data:m({},e.data),resolve:m(m({},e.data),e._resolvedData??{})},i&&ZD(i)&&(r.resolve[ba]=i.title),r}var vi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[ba]}constructor(t,n,r,i,o,s,a,c,l){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=yi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=yi(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},Ia=class extends cd{url;constructor(t,n){super(n),this.url=t,Lm(this,n)}toString(){return KD(this._root)}};function Lm(e,t){t.value._routerState=e,t.children.forEach(n=>Lm(e,n))}function KD(e){let t=e.children.length>0?` { ${e.children.map(KD).join(", ")} } `:"";return`${e.value}${t}`}function Im(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Cn(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Cn(t.params,n.params)||e.paramsSubject.next(n.params),uP(t.url,n.url)||e.urlSubject.next(n.url),Cn(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Mm(e,t){let n=Cn(e.params,t.params)&&pP(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||Mm(e.parent,t.parent))}function ZD(e){return typeof e.title=="string"||e.title===null}var QD=new D(""),Ta=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=L;activateEvents=new Ce;deactivateEvents=new Ce;attachEvents=new Ce;detachEvents=new Ce;routerOutletData=$w(void 0);parentContexts=v(Ei);location=v(di);changeDetector=v(_r);inputBinder=v(Sa,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new E(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new E(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new E(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new E(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Rm(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=ue({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Gn]})}return e})(),Rm=class{route;childContexts;parent;outletData;constructor(t,n,r,i){this.route=t,this.childContexts=n,this.parent=r,this.outletData=i}get(t,n){return t===dt?this.route:t===Ei?this.childContexts:t===QD?this.outletData:this.parent.get(t,n)}},Sa=new D(""),Vm=(()=>{class e{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,i=Wr([r.queryParams,r.params,r.data]).pipe(Me(([o,s,a],c)=>(a=m(m(m({},o),s),a),c===0?N(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let s=Gw(r.component);if(!s){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(n,i)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac})}return e})(),jm=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Qe({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&me(0,"router-outlet")},dependencies:[Ta],encapsulation:2})}return e})();function Um(e){let t=e.children&&e.children.map(Um),n=t?S(m({},e),{children:t}):m({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==L&&(n.component=jm),n}function VP(e,t,n){let r=Ca(e,t._root,n?n._root:void 0);return new Ea(r,t)}function Ca(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=jP(e,t,n);return new Et(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Ca(e,a)),s}}let r=UP(t.value),i=t.children.map(o=>Ca(e,o));return new Et(r,i)}}function jP(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Ca(e,r,i);return Ca(e,r)})}function UP(e){return new dt(new Oe(e.url),new Oe(e.params),new Oe(e.queryParams),new Oe(e.fragment),new Oe(e.data),e.outlet,e.component,e)}var Fo=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},JD="ngNavigationCancelingError";function ud(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=wr(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=XD(!1,Je.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function XD(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[JD]=!0,n.cancellationCode=t,n}function BP(e){return eb(e)&&wr(e.url)}function eb(e){return!!e&&e[JD]}var HP=(e,t,n,r)=>U(i=>(new xm(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),xm=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Im(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=Ao(n);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Ao(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Ao(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=Ao(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new sd(o.value.snapshot))}),t.children.length&&this.forwardEvent(new id(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(Im(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Im(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},dd=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Ro=class{component;route;constructor(t,n){this.component=t,this.route=n}};function $P(e,t,n){let r=e._root,i=t?t._root:null;return pa(r,i,n,[r.value])}function WP(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function jo(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!Uh(e)?e:t.get(e):r}function pa(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ao(t);return e.children.forEach(s=>{GP(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ma(a,n.getContext(s),i)),i}function GP(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=zP(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new dd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?pa(e,t,a?a.children:null,r,i):pa(e,t,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ro(a.outlet.component,s))}else s&&ma(t,a,i),i.canActivateChecks.push(new dd(r)),o.component?pa(e,null,a?a.children:null,r,i):pa(e,null,n,r,i);return i}function zP(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!mi(e.url,t.url);case"pathParamsOrQueryParamsChange":return!mi(e.url,t.url)||!Cn(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Mm(e,t)||!Cn(e.queryParams,t.queryParams);case"paramsChange":default:return!Mm(e,t)}}function ma(e,t,n){let r=Ao(e),i=e.value;Object.entries(r).forEach(([o,s])=>{i.component?t?ma(s,t.children.getContext(o),n):ma(s,null,n):ma(s,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Ro(t.outlet.component,i)):n.canDeactivateChecks.push(new Ro(null,i)):n.canDeactivateChecks.push(new Ro(null,i))}function Aa(e){return typeof e=="function"}function qP(e){return typeof e=="boolean"}function YP(e){return e&&Aa(e.canLoad)}function KP(e){return e&&Aa(e.canActivate)}function ZP(e){return e&&Aa(e.canActivateChild)}function QP(e){return e&&Aa(e.canDeactivate)}function JP(e){return e&&Aa(e.canMatch)}function tb(e){return e instanceof Pn||e?.name==="EmptyError"}var Gu=Symbol("INITIAL_VALUE");function Lo(){return Me(e=>Wr(e.map(t=>t.pipe(Tt(1),Th(Gu)))).pipe(U(t=>{for(let n of t)if(n!==!0){if(n===Gu)return Gu;if(n===!1||XP(n))return n}return!0}),st(t=>t!==Gu),Tt(1)))}function XP(e){return wr(e)||e instanceof Fo}function eF(e,t){return fe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?N(S(m({},n),{guardsResult:!0})):tF(s,r,i,e).pipe(fe(a=>a&&qP(a)?nF(r,o,e,t):N(a)),U(a=>S(m({},n),{guardsResult:a})))})}function tF(e,t,n,r){return se(e).pipe(fe(i=>aF(i.component,i.route,n,t,r)),Ln(i=>i!==!0,!0))}function nF(e,t,n,r){return se(t).pipe(or(i=>ro(iF(i.route.parent,r),rF(i.route,r),sF(e,i.path,n),oF(e,i.route,n))),Ln(i=>i!==!0,!0))}function rF(e,t){return e!==null&&t&&t(new od(e)),N(!0)}function iF(e,t){return e!==null&&t&&t(new rd(e)),N(!0)}function oF(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return N(!0);let i=r.map(o=>Es(()=>{let s=Vo(t)??n,a=jo(o,s),c=KP(a)?a.canActivate(t,e):$e(s,()=>a(t,e));return Zn(c).pipe(Ln())}));return N(i).pipe(Lo())}function sF(e,t,n){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>WP(s)).filter(s=>s!==null).map(s=>Es(()=>{let a=s.guards.map(c=>{let l=Vo(s.node)??n,u=jo(c,l),d=ZP(u)?u.canActivateChild(r,e):$e(l,()=>u(r,e));return Zn(d).pipe(Ln())});return N(a).pipe(Lo())}));return N(o).pipe(Lo())}function aF(e,t,n,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return N(!0);let s=o.map(a=>{let c=Vo(t)??i,l=jo(a,c),u=QP(l)?l.canDeactivate(e,t,n,r):$e(c,()=>l(e,t,n,r));return Zn(u).pipe(Ln())});return N(s).pipe(Lo())}function cF(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return N(!0);let o=i.map(s=>{let a=jo(s,e),c=YP(a)?a.canLoad(t,n):$e(e,()=>a(t,n));return Zn(c)});return N(o).pipe(Lo(),nb(r))}function nb(e){return gh(Ie(t=>{if(typeof t!="boolean")throw ud(e,t)}),U(t=>t===!0))}function lF(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return N(!0);let o=i.map(s=>{let a=jo(s,e),c=JP(a)?a.canMatch(t,n):$e(e,()=>a(t,n));return Zn(c)});return N(o).pipe(Lo(),nb(r))}var wa=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Da=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function So(e){return to(new wa(e))}function uF(e){return to(new E(4e3,!1))}function dF(e){return to(XD(!1,Je.GuardRejected))}var Om=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return N(r);if(i.numberOfChildren>1||!i.children[L])return uF(`${t.redirectTo}`);i=i.children[L]}}applyRedirectCommands(t,n,r,i,o){return fF(n,i,o).pipe(U(s=>{if(s instanceof Dn)throw new Da(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),t,r);if(s[0]==="/")throw new Da(a);return a}))}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new Dn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,i)}),new Q(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new E(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}};function fF(e,t,n){if(typeof e=="string")return N(e);let r=e,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:u,title:d}=t;return Zn($e(n,()=>r({params:l,data:u,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:d})))}var km={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function hF(e,t,n,r,i){let o=rb(e,t,n);return o.matched?(r=PP(t,r),lF(r,t,n,i).pipe(U(s=>s===!0?o:m({},km)))):N(o)}function rb(e,t,n){if(t.path==="**")return pF(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?m({},km):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||xD)(n,e,t);if(!i)return m({},km);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?m(m({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function pF(e){return{matched:!0,parameters:e.length>0?kD(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function ND(e,t,n,r){return n.length>0&&vF(e,n,r)?{segmentGroup:new Q(t,mF(r,new Q(n,e.children))),slicedSegments:[]}:n.length===0&&yF(e,n,r)?{segmentGroup:new Q(e.segments,gF(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new Q(e.segments,e.children),slicedSegments:n}}function gF(e,t,n,r){let i={};for(let o of n)if(hd(e,t,o)&&!r[on(o)]){let s=new Q([],{});i[on(o)]=s}return m(m({},r),i)}function mF(e,t){let n={};n[L]=t;for(let r of e)if(r.path===""&&on(r)!==L){let i=new Q([],{});n[on(r)]=i}return n}function vF(e,t,n){return n.some(r=>hd(e,t,r)&&on(r)!==L)}function yF(e,t,n){return n.some(r=>hd(e,t,r))}function hd(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function _F(e,t,n){return t.length===0&&!e.children[n]}var Pm=class{};function EF(e,t,n,r,i,o,s="emptyOnly"){return new Fm(e,t,n,r,i,s,o).recognize()}var IF=31,Fm=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,r,i,o,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Om(this.urlSerializer,this.urlTree)}noMatchError(t){return new E(4002,`'${t.segmentGroup}'`)}recognize(){let t=ND(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(U(({children:n,rootSnapshot:r})=>{let i=new Et(r,n),o=new Ia("",i),s=$D(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let n=new vi([],Object.freeze({}),Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),L,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,L,n).pipe(U(r=>({children:r,rootSnapshot:n})),Fn(r=>{if(r instanceof Da)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof wa?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,o):this.processSegment(t,n,r,r.segments,i,!0,o).pipe(U(s=>s instanceof Et?[s]:[]))}processChildren(t,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return se(o).pipe(or(s=>{let a=r.children[s],c=FP(n,s);return this.processSegmentGroup(t,c,a,s,i)}),bh((s,a)=>(s.push(...a),s)),sr(null),Dh(),fe(s=>{if(s===null)return So(r);let a=ib(s);return CF(a),N(a)}))}processSegment(t,n,r,i,o,s,a){return se(n).pipe(or(c=>this.processSegmentAgainstRoute(c._injector??t,n,c,r,i,o,s,a).pipe(Fn(l=>{if(l instanceof wa)return N(null);throw l}))),Ln(c=>!!c),Fn(c=>{if(tb(c))return _F(r,i,o)?N(new Pm):So(r);throw c}))}processSegmentAgainstRoute(t,n,r,i,o,s,a,c){return on(r)!==s&&(s===L||!hd(i,o,r))?So(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,s,c):So(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=rb(n,i,o);if(!c)return So(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>IF&&(this.allowRedirects=!1));let h=new vi(o,l,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,MD(i),on(i),i.component??i._loadedComponent??null,i,RD(i)),g=ld(h,a,this.paramsInheritanceStrategy);return h.params=Object.freeze(g.params),h.data=Object.freeze(g.data),this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,h,t).pipe(Me(T=>this.applyRedirects.lineralizeSegments(i,T)),fe(T=>this.processSegment(t,r,n,T.concat(f),s,!1,a)))}matchSegmentAgainstRoute(t,n,r,i,o,s){let a=hF(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Me(c=>c.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(Me(({routes:l})=>{let u=r._loadedInjector??t,{parameters:d,consumedSegments:f,remainingSegments:h}=c,g=new vi(f,d,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,MD(r),on(r),r.component??r._loadedComponent??null,r,RD(r)),_=ld(g,s,this.paramsInheritanceStrategy);g.params=Object.freeze(_.params),g.data=Object.freeze(_.data);let{segmentGroup:T,slicedSegments:M}=ND(n,f,h,l);if(M.length===0&&T.hasChildren())return this.processChildren(u,l,T,g).pipe(U(bt=>new Et(g,bt)));if(l.length===0&&M.length===0)return N(new Et(g,[]));let ht=on(r)===o;return this.processSegment(u,l,T,M,ht?L:o,!0,g).pipe(U(bt=>new Et(g,bt instanceof Et?[bt]:[])))}))):So(n)))}getChildConfig(t,n,r){return n.children?N({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?N({routes:n._loadedRoutes,injector:n._loadedInjector}):cF(t,n,r,this.urlSerializer).pipe(fe(i=>i?this.configLoader.loadChildren(t,n).pipe(Ie(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):dF(n))):N({routes:[],injector:t})}};function CF(e){e.sort((t,n)=>t.value.outlet===L?-1:n.value.outlet===L?1:t.value.outlet.localeCompare(n.value.outlet))}function wF(e){let t=e.value.routeConfig;return t&&t.path===""}function ib(e){let t=[],n=new Set;for(let r of e){if(!wF(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=ib(r.children);t.push(new Et(r.value,i))}return t.filter(r=>!n.has(r))}function MD(e){return e.data||{}}function RD(e){return e.resolve||{}}function DF(e,t,n,r,i,o){return fe(s=>EF(e,t,n,r,s.extractedUrl,i,o).pipe(U(({state:a,tree:c})=>S(m({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function bF(e,t){return fe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return N(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of ob(c))s.add(l);let a=0;return se(s).pipe(or(c=>o.has(c)?TF(c,r,e,t):(c.data=ld(c,c.parent,e).resolve,N(void 0))),Ie(()=>a++),io(1),fe(c=>a===s.size?N(n):it))})}function ob(e){let t=e.children.map(n=>ob(n)).flat();return[e,...t]}function TF(e,t,n,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!ZD(i)&&(o[ba]=i.title),Es(()=>(e.data=ld(e,e.parent,n).resolve,SF(o,e,t,r).pipe(U(s=>(e._resolvedData=s,e.data=m(m({},e.data),s),null)))))}function SF(e,t,n,r){let i=Dm(e);if(i.length===0)return N({});let o={};return se(i).pipe(fe(s=>AF(e[s],t,n,r).pipe(Ln(),Ie(a=>{if(a instanceof Fo)throw ud(new Cr,a);o[s]=a}))),io(1),U(()=>o),Fn(s=>tb(s)?it:to(s)))}function AF(e,t,n,r){let i=Vo(t)??r,o=jo(e,i),s=o.resolve?o.resolve(t,n):$e(i,()=>o(t,n));return Zn(s)}function Cm(e){return Me(t=>{let n=e(t);return n?se(n).pipe(U(()=>t)):N(t)})}var Bm=(()=>{class e{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===L);return r}getResolvedTitleForRoute(n){return n.data[ba]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:()=>v(sb),providedIn:"root"})}return e})(),sb=(()=>{class e extends Bm{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(A(DD))};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),br=new D("",{providedIn:"root",factory:()=>({})}),Ii=new D(""),pd=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=v(Bg);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return N(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Zn($e(n,()=>r.loadComponent())).pipe(U(cb),Me(lb),Ie(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Is(()=>{this.componentLoaders.delete(r)})),o=new Xi(i,()=>new oe).pipe(Ji());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return N({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=ab(r,this.compiler,n,this.onLoadEndListener).pipe(Is(()=>{this.childrenLoaders.delete(r)})),s=new Xi(o,()=>new oe).pipe(Ji());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ab(e,t,n,r){return Zn($e(n,()=>e.loadChildren())).pipe(U(cb),Me(lb),fe(i=>i instanceof gu||Array.isArray(i)?N(i):se(t.compileModuleAsync(i))),U(i=>{r&&r(e);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Ii,[],{optional:!0,self:!0}).flat()),{routes:s.map(Um),injector:o}}))}function NF(e){return e&&typeof e=="object"&&"default"in e}function cb(e){return NF(e)?e.default:e}function lb(e){return N(e)}var gd=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:()=>v(MF),providedIn:"root"})}return e})(),MF=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Hm=new D(""),$m=new D("");function ub(e,t,n){let r=e.get($m),i=e.get(pe);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),RF(e)));a.ready.catch(l=>{});let{onViewTransitionCreated:c}=r;return c&&$e(e,()=>c({transition:a,from:t,to:n})),s}function RF(e){return new Promise(t=>{Ys({read:()=>setTimeout(t)},{injector:e})})}var Wm=new D(""),md=(()=>{class e{currentNavigation=yt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new oe;transitionAbortWithErrorSubject=new oe;configLoader=v(pd);environmentInjector=v(Te);destroyRef=v(vn);urlSerializer=v(_i);rootContexts=v(Ei);location=v(Er);inputBindingEnabled=v(Sa,{optional:!0})!==null;titleStrategy=v(Bm);options=v(br,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=v(gd);createViewTransition=v(Hm,{optional:!0});navigationErrorHandler=v(Wm,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>N(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new td(i)),r=i=>this.events.next(new nd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;we(()=>{this.transitions?.next(S(m({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new Oe(null),this.transitions.pipe(st(r=>r!==null),Me(r=>{let i=!1;return N(r).pipe(Me(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Je.SupersededByNewNavigation),it;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?S(m({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new bn(o.id,this.urlSerializer.serialize(o.rawUrl),"",xo.IgnoredSameUrlNavigation)),o.resolve(!1),it;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return N(o).pipe(Me(c=>(this.events.next(new Dr(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?it:Promise.resolve(c))),DF(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Ie(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(u=>(u.finalUrl=c.urlAfterRedirects,u));let l=new ya(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:l,source:u,restoredState:d,extras:f}=o,h=new Dr(c,this.urlSerializer.serialize(l),u,d);this.events.next(h);let g=YD(this.rootComponentType).snapshot;return this.currentTransition=r=S(m({},o),{targetSnapshot:g,urlAfterRedirects:l,extras:S(m({},f),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(_=>(_.finalUrl=l,_)),N(r)}else return this.events.next(new bn(o.id,this.urlSerializer.serialize(o.extractedUrl),"",xo.IgnoredByUrlHandlingStrategy)),o.resolve(!1),it}),Ie(o=>{let s=new Qu(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),U(o=>(this.currentTransition=r=S(m({},o),{guards:$P(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),eF(this.environmentInjector,o=>this.events.next(o)),Ie(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw ud(this.urlSerializer,o.guardsResult);let s=new Ju(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),st(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Je.GuardRejected),!1)),Cm(o=>{if(o.guards.canActivateChecks.length!==0)return N(o).pipe(Ie(s=>{let a=new Xu(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Me(s=>{let a=!1;return N(s).pipe(bF(this.paramsInheritanceStrategy,this.environmentInjector),Ie({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Je.NoDataFromResolver)}}))}),Ie(s=>{let a=new ed(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),Cm(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent){let l=Vo(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(Ie(u=>{a.component=u}),U(()=>{})))}for(let l of a.children)c.push(...s(l));return c};return Wr(s(o.targetSnapshot.root)).pipe(sr(null),Tt(1))}),Cm(()=>this.afterPreactivation()),Me(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?se(a).pipe(U(()=>r)):N(r)}),U(o=>{let s=VP(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=S(m({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),Ie(()=>{this.events.next(new _a)}),HP(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Tt(1),oo(new k(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(st(()=>!i&&!r.targetRouterState),Ie(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Je.Aborted)}))),Ie({next:o=>{i=!0,this.lastSuccessfulNavigation=we(this.currentNavigation),this.events.next(new Lt(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),oo(this.transitionAbortWithErrorSubject.pipe(Ie(o=>{throw o}))),Is(()=>{i||this.cancelNavigationTransition(r,"",Je.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Fn(o=>{if(this.destroyed)return r.resolve(!1),it;if(i=!0,eb(o))this.events.next(new wn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),BP(o)?this.events.next(new Po(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Oo(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=$e(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Fo){let{message:c,cancellationCode:l}=ud(this.urlSerializer,a);this.events.next(new wn(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new Po(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return it}))}))}cancelNavigationTransition(n,r,i){let o=new wn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=we(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function xF(e){return e!==Mo}var db=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:()=>v(OF),providedIn:"root"})}return e})(),fd=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},OF=(()=>{class e extends fd{static \u0275fac=(()=>{let n;return function(i){return(n||(n=vr(e)))(i||e)}})();static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),fb=(()=>{class e{urlSerializer=v(_i);options=v(br,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=v(Er);urlHandlingStrategy=v(gd);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Dn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Dn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=YD(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:()=>v(kF),providedIn:"root"})}return e})(),kF=(()=>{class e extends fb{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Dr?this.updateStateMemento():n instanceof bn?this.commitTransition(r):n instanceof ya?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof _a?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof wn&&n.code!==Je.SupersededByNewNavigation&&n.code!==Je.Redirect?this.restoreHistory(r):n instanceof Oo?this.restoreHistory(r,!0):n instanceof Lt&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,c=m(m({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",c)}else{let a=m(m({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=vr(e)))(i||e)}})();static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function vd(e,t){e.events.pipe(st(n=>n instanceof Lt||n instanceof wn||n instanceof Oo||n instanceof bn),U(n=>n instanceof Lt||n instanceof bn?0:(n instanceof wn?n.code===Je.Redirect||n.code===Je.SupersededByNewNavigation:!1)?2:1),st(n=>n!==2),Tt(1)).subscribe(()=>{t()})}var PF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},FF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ye=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=v(Og);stateManager=v(fb);options=v(br,{optional:!0})||{};pendingTasks=v($n);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=v(md);urlSerializer=v(_i);location=v(Er);urlHandlingStrategy=v(gd);injector=v(Te);_events=new oe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=v(db);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=v(Ii,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!v(Sa,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new le;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=we(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof wn&&r.code!==Je.Redirect&&r.code!==Je.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Lt)this.navigated=!0;else if(r instanceof Po){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=m({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||xF(i.source)},s);this.scheduleNavigation(a,Mo,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}kP(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Mo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=m({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(Ze)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return we(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Um),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=m(m({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let f=i?i.snapshot:this.routerState.snapshot.root;d=WD(f)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return GD(d,n,u,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=wr(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Mo,null,r)}navigate(n,r={skipLocationChange:!1}){return LF(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=m({},PF):r===!1?i=m({},FF):i=r,wr(n))return bD(this.currentUrlTree,n,i);let o=this.parseUrl(n);return bD(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,f)=>{a=d,c=f});let u=this.pendingTasks.add();return vd(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function LF(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new E(4008,!1)}var Uo=(()=>{class e{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=yt(null);get href(){return we(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new oe;applicationErrorHandler=v(Ze);options=v(br,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(v(new Su("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Lt&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(wr(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:wr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||e)(I(ye),I(dt),Ws("tabindex"),I(Qt),I(kt),I(tn))};static \u0275dir=ue({type:e,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&ae("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Zs("href",i.reactiveHref(),dg)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",bo],skipLocationChange:[2,"skipLocationChange","skipLocationChange",bo],replaceUrl:[2,"replaceUrl","replaceUrl",bo],routerLink:"routerLink"},features:[Gn]})}return e})();var Na=class{};var hb=(()=>{class e{router;injector;preloadingStrategy;loader;subscription;constructor(n,r,i,o){this.router=n,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(st(n=>n instanceof Lt),or(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=wo(o.providers,n,`Route: ${o.path}`));let s=o._injector??n,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return se(i).pipe(no())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(n,r):i=N(null);let o=i.pipe(fe(s=>s===null?N(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(n,r);return se([o,s]).pipe(no())}else return o})}static \u0275fac=function(r){return new(r||e)(A(ye),A(Te),A(Na),A(pd))};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),pb=new D(""),VF=(()=>{class e{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Mo;restoredId=0;store={};constructor(n,r,i,o,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Dr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Lt?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof bn&&n.code===xo.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof ko&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>p(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new ko(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){Tg()};static \u0275prov=C({token:e,factory:e.\u0275fac})}return e})();function zm(e,...t){return dr([{provide:Ii,multi:!0,useValue:e},[],{provide:dt,useFactory:gb,deps:[ye]},{provide:Ks,multi:!0,useFactory:mb},t.map(n=>n.\u0275providers)])}function gb(e){return e.routerState.root}function Ma(e,t){return{\u0275kind:e,\u0275providers:t}}function mb(){let e=v(at);return t=>{let n=e.get(qn);if(t!==n.components[0])return;let r=e.get(ye),i=e.get(vb);e.get(qm)===1&&r.initialNavigation(),e.get(Eb,null,{optional:!0})?.setUpPreloading(),e.get(pb,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var vb=new D("",{factory:()=>new oe}),qm=new D("",{providedIn:"root",factory:()=>1});function yb(){let e=[{provide:ag,useValue:!0},{provide:qm,useValue:0},_u(()=>{let t=v(at);return t.get(Jg,Promise.resolve()).then(()=>new Promise(r=>{let i=t.get(ye),o=t.get(vb);vd(i,()=>{r(!0)}),t.get(md).afterPreactivation=()=>(r(!0),o.closed?N(void 0):o),i.initialNavigation()}))})];return Ma(2,e)}function _b(){let e=[_u(()=>{v(ye).setUpLocationChangeListener()}),{provide:qm,useValue:2}];return Ma(3,e)}var Eb=new D("");function Ib(e){return Ma(0,[{provide:Eb,useExisting:hb},{provide:Na,useExisting:e}])}function Cb(){return Ma(8,[Vm,{provide:Sa,useExisting:Vm}])}function wb(e){fi("NgRouterViewTransitions");let t=[{provide:Hm,useValue:ub},{provide:$m,useValue:m({skipNextTransition:!!e?.skipInitialTransition},e)}];return Ma(9,t)}var Db=[Er,{provide:_i,useClass:Cr},ye,Ei,{provide:dt,useFactory:gb,deps:[ye]},pd,[]],Ci=(()=>{class e{constructor(){}static forRoot(n,r){return{ngModule:e,providers:[Db,[],{provide:Ii,multi:!0,useValue:n},[],r?.errorHandler?{provide:Wm,useValue:r.errorHandler}:[],{provide:br,useValue:r||{}},r?.useHash?UF():BF(),jF(),r?.preloadingStrategy?Ib(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?HF(r):[],r?.bindToComponentInputs?Cb().\u0275providers:[],r?.enableViewTransitions?wb().\u0275providers:[],$F()]}}static forChild(n){return{ngModule:e,providers:[{provide:Ii,multi:!0,useValue:n}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=En({type:e});static \u0275inj=Gt({})}return e})();function jF(){return{provide:pb,useFactory:()=>{let e=v(gD),t=v(ge),n=v(br),r=v(md),i=v(_i);return n.scrollOffset&&e.setOffset(n.scrollOffset),new VF(i,r,e,t,n)}}}function UF(){return{provide:tn,useClass:om}}function BF(){return{provide:tn,useClass:Ru}}function HF(e){return[e.initialNavigation==="disabled"?_b().\u0275providers:[],e.initialNavigation==="enabledBlocking"?yb().\u0275providers:[]]}var Gm=new D("");function $F(){return[{provide:Gm,useFactory:mb},{provide:Ks,multi:!0,useExisting:Gm}]}var kb=(()=>{class e{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||e)(I(Qt),I(kt))};static \u0275dir=ue({type:e})}return e})(),Jm=(()=>{class e extends kb{static \u0275fac=(()=>{let n;return function(i){return(n||(n=vr(e)))(i||e)}})();static \u0275dir=ue({type:e,features:[Jt]})}return e})(),Sd=new D("");var WF={provide:Sd,useExisting:hn(()=>Ad),multi:!0};function GF(){let e=Pt()?Pt().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var zF=new D(""),Ad=(()=>{class e extends kb{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!GF())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||e)(I(Qt),I(kt),I(zF,8))};static \u0275dir=ue({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ae("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[gi([WF]),Jt]})}return e})();function Xm(e){return e==null||ev(e)===0}function ev(e){return e==null?null:Array.isArray(e)||typeof e=="string"?e.length:e instanceof Set?e.size:null}var Pb=new D(""),Fb=new D(""),qF=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Wo=class{static min(t){return YF(t)}static max(t){return KF(t)}static required(t){return ZF(t)}static requiredTrue(t){return QF(t)}static email(t){return JF(t)}static minLength(t){return XF(t)}static maxLength(t){return e1(t)}static pattern(t){return t1(t)}static nullValidator(t){return Lb()}static compose(t){return $b(t)}static composeAsync(t){return Gb(t)}};function YF(e){return t=>{if(t.value==null||e==null)return null;let n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}function KF(e){return t=>{if(t.value==null||e==null)return null;let n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}function ZF(e){return Xm(e.value)?{required:!0}:null}function QF(e){return e.value===!0?null:{required:!0}}function JF(e){return Xm(e.value)||qF.test(e.value)?null:{email:!0}}function XF(e){return t=>{let n=t.value?.length??ev(t.value);return n===null||n===0?null:n<e?{minlength:{requiredLength:e,actualLength:n}}:null}}function e1(e){return t=>{let n=t.value?.length??ev(t.value);return n!==null&&n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}}function t1(e){if(!e)return Lb;let t,n;return typeof e=="string"?(n="",e.charAt(0)!=="^"&&(n+="^"),n+=e,e.charAt(e.length-1)!=="$"&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),r=>{if(Xm(r.value))return null;let i=r.value;return t.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function Lb(e){return null}function Vb(e){return e!=null}function jb(e){return zn(e)?se(e):e}function Ub(e){let t={};return e.forEach(n=>{t=n!=null?m(m({},t),n):t}),Object.keys(t).length===0?null:t}function Bb(e,t){return t.map(n=>n(e))}function n1(e){return!e.validate}function Hb(e){return e.map(t=>n1(t)?t:n=>t.validate(n))}function $b(e){if(!e)return null;let t=e.filter(Vb);return t.length==0?null:function(n){return Ub(Bb(n,t))}}function Wb(e){return e!=null?$b(Hb(e)):null}function Gb(e){if(!e)return null;let t=e.filter(Vb);return t.length==0?null:function(n){let r=Bb(n,t).map(jb);return Ch(r).pipe(U(Ub))}}function zb(e){return e!=null?Gb(Hb(e)):null}function bb(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function qb(e){return e._rawValidators}function Yb(e){return e._rawAsyncValidators}function Ym(e){return e?Array.isArray(e)?e:[e]:[]}function Ed(e,t){return Array.isArray(e)?e.includes(t):e===t}function Tb(e,t){let n=Ym(t);return Ym(e).forEach(i=>{Ed(n,i)||n.push(i)}),n}function Sb(e,t){return Ym(t).filter(n=>!Ed(e,n))}var Id=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Wb(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=zb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},Go=class extends Id{name;get formDirective(){return null}get path(){return null}},Pa=class extends Id{_parent=null;name=null;valueAccessor=null},Cd=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},r1={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},EX=S(m({},r1),{"[class.ng-submitted]":"isSubmitted"}),Kb=(()=>{class e extends Cd{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(I(Pa,2))};static \u0275dir=ue({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Js("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Jt]})}return e})(),Zb=(()=>{class e extends Cd{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(I(Go,10))};static \u0275dir=ue({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Js("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Jt]})}return e})();var Ra="VALID",yd="INVALID",Ho="PENDING",xa="DISABLED",Tr=class{},wd=class extends Tr{value;source;constructor(t,n){super(),this.value=t,this.source=n}},Oa=class extends Tr{pristine;source;constructor(t,n){super(),this.pristine=t,this.source=n}},ka=class extends Tr{touched;source;constructor(t,n){super(),this.touched=t,this.source=n}},$o=class extends Tr{status;source;constructor(t,n){super(),this.status=t,this.source=n}},Km=class extends Tr{source;constructor(t){super(),this.source=t}},Fa=class extends Tr{source;constructor(t){super(),this.source=t}};function tv(e){return(Nd(e)?e.validators:e)||null}function i1(e){return Array.isArray(e)?Wb(e):e||null}function nv(e,t){return(Nd(t)?t.asyncValidators:e)||null}function o1(e){return Array.isArray(e)?zb(e):e||null}function Nd(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function Qb(e,t,n){let r=e.controls;if(!(t?Object.keys(r):r).length)throw new E(1e3,"");if(!r[n])throw new E(1001,"")}function Jb(e,t,n){e._forEachChild((r,i)=>{if(n[i]===void 0)throw new E(1002,"")})}var zo=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,n){this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return we(this.statusReactive)}set status(t){we(()=>this.statusReactive.set(t))}_status=Do(()=>this.statusReactive());statusReactive=yt(void 0);get valid(){return this.status===Ra}get invalid(){return this.status===yd}get pending(){return this.status==Ho}get disabled(){return this.status===xa}get enabled(){return this.status!==xa}errors;get pristine(){return we(this.pristineReactive)}set pristine(t){we(()=>this.pristineReactive.set(t))}_pristine=Do(()=>this.pristineReactive());pristineReactive=yt(!0);get dirty(){return!this.pristine}get touched(){return we(this.touchedReactive)}set touched(t){we(()=>this.touchedReactive.set(t))}_touched=Do(()=>this.touchedReactive());touchedReactive=yt(!1);get untouched(){return!this.touched}_events=new oe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Tb(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Tb(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Sb(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Sb(t,this._rawAsyncValidators))}hasValidator(t){return Ed(this._rawValidators,t)}hasAsyncValidator(t){return Ed(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(S(m({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new ka(!0,r))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),n&&t.emitEvent!==!1&&this._events.next(new ka(!1,r))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(S(m({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new Oa(!1,r))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),n&&t.emitEvent!==!1&&this._events.next(new Oa(!0,r))}markAsPending(t={}){this.status=Ho;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new $o(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(S(m({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=xa,this.errors=null,this._forEachChild(i=>{i.disable(S(m({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new wd(this.value,r)),this._events.next(new $o(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(S(m({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Ra,this._forEachChild(r=>{r.enable(S(m({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(S(m({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ra||this.status===Ho)&&this._runAsyncValidator(r,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new wd(this.value,n)),this._events.next(new $o(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(S(m({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xa:Ra}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=Ho,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:t!==!1};let r=jb(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new $o(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,r)}_initObservables(){this.valueChanges=new Ce,this.statusChanges=new Ce}_calculateStatus(){return this._allControlsDisabled()?xa:this.errors?yd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ho)?Ho:this._anyControlsHaveStatus(yd)?yd:Ra}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),i&&this._events.next(new Oa(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new ka(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Nd(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=i1(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=o1(this._rawAsyncValidators)}},Dd=class extends zo{constructor(t,n,r){super(tv(n),nv(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){Jb(this,!0,t),Object.keys(t).forEach(r=>{Qb(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new Fa(this))}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Zm=class extends Dd{};var Xb=new D("",{providedIn:"root",factory:()=>rv}),rv="always";function s1(e,t){return[...t.path,e]}function Ab(e,t,n=rv){iv(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),c1(e,t),u1(e,t),l1(e,t),a1(e,t)}function Nb(e,t,n=!0){let r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),Td(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function bd(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function a1(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function iv(e,t){let n=qb(e);t.validator!==null?e.setValidators(bb(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=Yb(e);t.asyncValidator!==null?e.setAsyncValidators(bb(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();bd(t._rawValidators,i),bd(t._rawAsyncValidators,i)}function Td(e,t){let n=!1;if(e!==null){if(t.validator!==null){let i=qb(e);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.validator);o.length!==i.length&&(n=!0,e.setValidators(o))}}if(t.asyncValidator!==null){let i=Yb(e);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.asyncValidator);o.length!==i.length&&(n=!0,e.setAsyncValidators(o))}}}let r=()=>{};return bd(t._rawValidators,r),bd(t._rawAsyncValidators,r),n}function c1(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&eT(e,t)})}function l1(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&eT(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function eT(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function u1(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function d1(e,t){e==null,iv(e,t)}function f1(e,t){return Td(e,t)}function h1(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function p1(e){return Object.getPrototypeOf(e.constructor)===Jm}function g1(e,t){e._syncPendingControls(),t.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function m1(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(o=>{o.constructor===Ad?n=o:p1(o)?r=o:i=o}),i||r||n||null}function v1(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Mb(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Rb(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var _d=class extends zo{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,n,r){super(tv(n),nv(r,n)),this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Nd(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Rb(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new Fa(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Mb(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Mb(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Rb(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var y1=e=>e instanceof _d;var tT=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275dir=ue({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return e})();var nT=new D("");var _1={provide:Go,useExisting:hn(()=>ov)},ov=(()=>{class e extends Go{callSetDisabledState;get submitted(){return we(this._submittedReactive)}set submitted(n){this._submittedReactive.set(n)}_submitted=Do(()=>this._submittedReactive());_submittedReactive=yt(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Ce;constructor(n,r,i){super(),this.callSetDisabledState=i,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Td(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){let r=this.form.get(n.path);return Ab(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){Nb(n.control||null,n,!1),v1(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this._submittedReactive.set(!0),g1(this.form,this.directives),this.ngSubmit.emit(n),this.form._events.next(new Km(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0,r={}){this.form.reset(n,r),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(n=>{let r=n.control,i=this.form.get(n.path);r!==i&&(Nb(r||null,n),y1(i)&&(Ab(i,n,this.callSetDisabledState),n.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){let r=this.form.get(n.path);d1(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){let r=this.form.get(n.path);r&&f1(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){iv(this.form,this),this._oldForm&&Td(this._oldForm,this)}static \u0275fac=function(r){return new(r||e)(I(Pb,10),I(Fb,10),I(Xb,8))};static \u0275dir=ue({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&ae("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[gi([_1]),Jt,Gn]})}return e})();var E1={provide:Pa,useExisting:hn(()=>sv)},sv=(()=>{class e extends Pa{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(n){}model;update=new Ce;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=m1(this,o)}ngOnChanges(n){this._added||this._setUpControl(),h1(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return s1(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||e)(I(Go,13),I(Pb,10),I(Fb,10),I(Sd,10),I(nT,8))};static \u0275dir=ue({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[gi([E1]),Jt,Gn]})}return e})();var I1={provide:Sd,useExisting:hn(()=>Md),multi:!0};function rT(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function C1(e){return e.split(":")[0]}var Md=(()=>{class e extends Jm{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=v(qn).injector;destroyRef=v(vn);cdr=v(_r);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Ys({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let r=this._getOptionId(n),i=rT(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=C1(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=vr(e)))(i||e)}})();static \u0275dir=ue({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ae("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[gi([I1]),Jt]})}return e})(),iT=(()=>{class e{_element;_renderer;_select;id;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(rT(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||e)(I(kt),I(Qt),I(Md,9))};static \u0275dir=ue({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})(),w1={provide:Sd,useExisting:hn(()=>oT),multi:!0};function xb(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function D1(e){return e.split(":")[0]}var oT=(()=>{class e extends Jm{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=D1(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=vr(e)))(i||e)}})();static \u0275dir=ue({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ae("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[gi([w1]),Jt]})}return e})(),sT=(()=>{class e{_element;_renderer;_select;id;_value;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(xb(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(xb(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||e)(I(kt),I(Qt),I(oT,9))};static \u0275dir=ue({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})();var b1=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=En({type:e});static \u0275inj=Gt({})}return e})(),Qm=class extends zo{constructor(t,n,r){super(tv(n),nv(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,n={}){Array.isArray(t)?t.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(t,n,r={}){this.controls.splice(t,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,n={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(t,n,r={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,n={}){Jb(this,!1,t),t.forEach((r,i)=>{Qb(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t=[],n={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new Fa(this))}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((n,r)=>{t(n,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(n=>n.enabled&&t(n))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function Ob(e){return!!e&&(e.asyncValidators!==void 0||e.validators!==void 0||e.updateOn!==void 0)}var aT=(()=>{class e{useNonNullable=!1;get nonNullable(){let n=new e;return n.useNonNullable=!0,n}group(n,r=null){let i=this._reduceControls(n),o={};return Ob(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Dd(i,o)}record(n,r=null){let i=this._reduceControls(n);return new Zm(i,r)}control(n,r,i){let o={};return this.useNonNullable?(Ob(r)?o=r:(o.validators=r,o.asyncValidators=i),new _d(n,S(m({},o),{nonNullable:!0}))):new _d(n,r,i)}array(n,r,i){let o=n.map(s=>this._createControl(s));return new Qm(o,r,i)}_reduceControls(n){let r={};return Object.keys(n).forEach(i=>{r[i]=this._createControl(n[i])}),r}_createControl(n){if(n instanceof _d)return n;if(n instanceof zo)return n;if(Array.isArray(n)){let r=n[0],i=n.length>1?n[1]:null,o=n.length>2?n[2]:null;return this.control(r,i,o)}else return this.control(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var cT=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:nT,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:Xb,useValue:n.callSetDisabledState??rv}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=En({type:e});static \u0275inj=Gt({imports:[b1]})}return e})();function lT(e=6){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="";for(let r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}var uT=()=>{};var cv={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var y=function(e,t){if(!e)throw wi(t)},wi=function(e){return new Error("Firebase Database ("+cv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};var hT=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},S1=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=e[n++],s=e[n++],a=e[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let o=e[n++],s=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return t.join("")},xd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){let o=e[i],s=i+1<e.length,a=s?e[i+1]:0,c=i+2<e.length,l=c?e[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4,f=(a&15)<<2|l>>6,h=l&63;c||(h=64,s||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(hT(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):S1(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){let o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;let l=i<e.length?n[e.charAt(i)]:64;++i;let d=i<e.length?n[e.charAt(i)]:64;if(++i,o==null||a==null||l==null||d==null)throw new lv;let f=o<<2|a>>4;if(r.push(f),l!==64){let h=a<<4&240|l>>2;if(r.push(h),d!==64){let g=l<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},lv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},dv=function(e){let t=hT(e);return xd.encodeByteArray(t,!0)},Va=function(e){return dv(e).replace(/\./g,"")},qo=function(e){try{return xd.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function pT(e){return gT(void 0,e)}function gT(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:let n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(let n in t)!t.hasOwnProperty(n)||!A1(n)||(e[n]=gT(e[n],t[n]));return e}function A1(e){return e!=="__proto__"}function N1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var M1=()=>N1().__FIREBASE_DEFAULTS__,R1=()=>{if(typeof process>"u"||typeof process.env>"u")return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},x1=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&qo(e[1]);return t&&JSON.parse(t)},fv=()=>{try{return uT()||M1()||R1()||x1()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},hv=e=>fv()?.emulatorHosts?.[e],mT=e=>{let t=hv(e);if(!t)return;let n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},pv=()=>fv()?.config,gv=e=>fv()?.[`_${e}`];var Qn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}};function Sr(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}function Od(e){return p(this,null,function*(){return(yield fetch(e,{credentials:"include"})).ok})}function vT(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=m({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Va(JSON.stringify(n)),Va(JSON.stringify(s)),""].join(".")}var La={};function O1(){let e={prod:[],emulator:[]};for(let t of Object.keys(La))La[t]?e.emulator.push(t):e.prod.push(t);return e}function k1(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}var dT=!1;function kd(e,t){if(typeof window>"u"||typeof document>"u"||!Sr(window.location.host)||La[e]===t||La[e]||dT)return;La[e]=t;function n(f){return`__firebase__banner__${f}`}let r="__firebase__banner",o=O1().prod.length>0;function s(){let f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,h){f.setAttribute("width","24"),f.setAttribute("id",h),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function l(){let f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{dT=!0,s()},f}function u(f,h){f.setAttribute("id",h),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){let f=k1(r),h=n("text"),g=document.getElementById(h)||document.createElement("span"),_=n("learnmore"),T=document.getElementById(_)||document.createElement("a"),M=n("preprendIcon"),ht=document.getElementById(M)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){let bt=f.element;a(bt),u(T,_);let th=l();c(ht,M),bt.append(ht,g,T,th),document.body.appendChild(bt)}o?(g.innerText="Preview backend disconnected.",ht.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ht.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ja(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function yT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Pd(){let e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Fd(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _T(){let e=ze();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Tn(){return cv.NODE_CLIENT===!0||cv.NODE_ADMIN===!0}function Ld(){try{return typeof indexedDB=="object"}catch{return!1}}function Vd(){return new Promise((e,t)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(n){t(n)}})}function ET(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var P1="FirebaseError",Xe=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=P1,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ct.prototype.create)}},Ct=class{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){let r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],s=o?F1(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Xe(i,a,r)}};function F1(e,t){return e.replace(L1,(n,r)=>{let i=t[r];return i!=null?String(i):`<${r}?>`})}var L1=/\{\$([^}]+)}/g;function Yo(e){return JSON.parse(e)}function be(e){return JSON.stringify(e)}var IT=function(e){let t={},n={},r={},i="";try{let o=e.split(".");t=Yo(qo(o[0])||""),n=Yo(qo(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}};var CT=function(e){let t=IT(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},wT=function(e){let t=IT(e).claims;return typeof t=="object"&&t.admin===!0};function sn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Di(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function Ua(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ba(e,t,n){let r={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Vt(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let o=e[i],s=t[i];if(fT(o)&&fT(s)){if(!Vt(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function fT(e){return e!==null&&typeof e=="object"}function Ar(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}var Rd=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);let r=this.W_;if(typeof t=="string")for(let d=0;d<16;d++)r[d]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^o&(s^a),u=1518500249):(l=o^s^a,u=1859775393):d<60?(l=o&s|a&(o|s),u=2400959708):(l=o^s^a,u=3395469782);let f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);let r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(o[s]=t.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=t[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let t=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)t[r]=this.chain_[i]>>o&255,++r;return t}};function DT(e,t){let n=new uv(e,t);return n.subscribe.bind(n)}var uv=class{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");V1(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=av),i.error===void 0&&(i.error=av),i.complete===void 0&&(i.complete=av);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function V1(e,t){if(typeof e!="object"||e===null)return!1;for(let n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function av(){}function Ko(e,t){return`${e} failed: ${t} argument `}var bT=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,y(r<e.length,"Surrogate pair missing trail surrogate.");let s=e.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Ha=function(e){let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};var j1=1e3,U1=2,B1=14400*1e3,H1=.5;function mv(e,t=j1,n=U1){let r=t*Math.pow(n,e),i=Math.round(H1*r*(Math.random()-.5)*2);return Math.min(B1,r+i)}function _e(e){return e&&e._delegate?e._delegate:e}var xe=class{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var bi="[DEFAULT]";var jd=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){let r=new Qn;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){let n=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(W1(t))try{this.getOrInitializeService({instanceIdentifier:bi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=bi){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return p(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=bi){return this.instances.has(t)}getOptions(t=bi){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(t,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(t),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&t(o,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$1(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=bi){return this.component?this.component.multipleInstances?t:bi:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function $1(e){return e===bi?void 0:e}function W1(e){return e.instantiationMode==="EAGER"}var $a=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let n=new jd(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}};var G1=[],te=(function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e})(te||{}),z1={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},q1=te.INFO,Y1={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},K1=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=Y1[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},Sn=class{constructor(t){this.name=t,this._logLevel=q1,this._logHandler=K1,this._userLogHandler=null,G1.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in te))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?z1[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...t),this._logHandler(this,te.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...t),this._logHandler(this,te.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,te.INFO,...t),this._logHandler(this,te.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,te.WARN,...t),this._logHandler(this,te.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...t),this._logHandler(this,te.ERROR,...t)}};var Z1=(e,t)=>t.some(n=>e instanceof n),TT,ST;function Q1(){return TT||(TT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function J1(){return ST||(ST=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var AT=new WeakMap,yv=new WeakMap,NT=new WeakMap,vv=new WeakMap,Ev=new WeakMap;function X1(e){let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{n(An(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)});return t.then(n=>{n instanceof IDBCursor&&AT.set(n,e)}).catch(()=>{}),Ev.set(t,e),t}function eL(e){if(yv.has(e))return;let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});yv.set(e,t)}var _v={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return yv.get(e);if(t==="objectStoreNames")return e.objectStoreNames||NT.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return An(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function MT(e){_v=e(_v)}function tL(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){let r=e.call(Ud(this),t,...n);return NT.set(r,t.sort?t.sort():[t]),An(r)}:J1().includes(e)?function(...t){return e.apply(Ud(this),t),An(AT.get(this))}:function(...t){return An(e.apply(Ud(this),t))}}function nL(e){return typeof e=="function"?tL(e):(e instanceof IDBTransaction&&eL(e),Z1(e,Q1())?new Proxy(e,_v):e)}function An(e){if(e instanceof IDBRequest)return X1(e);if(vv.has(e))return vv.get(e);let t=nL(e);return t!==e&&(vv.set(e,t),Ev.set(t,e)),t}var Ud=e=>Ev.get(e);function Bd(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(e,t),a=An(s);return r&&s.addEventListener("upgradeneeded",c=>{r(An(s.result),c.oldVersion,c.newVersion,An(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var rL=["get","getKey","getAll","getAllKeys","count"],iL=["put","add","delete","clear"],Iv=new Map;function RT(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Iv.get(t))return Iv.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,i=iL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||rL.includes(n)))return;let o=function(s,...a){return p(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return Iv.set(t,o),o}MT(e=>S(m({},e),{get:(t,n,r)=>RT(t,n)||e.get(t,n,r),has:(t,n)=>!!RT(t,n)||e.has(t,n)}));var wv=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oL(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function oL(e){return e.getComponent()?.type==="VERSION"}var Dv="@firebase/app",xT="0.14.6";var Jn=new Sn("@firebase/app"),sL="@firebase/app-compat",aL="@firebase/analytics-compat",cL="@firebase/analytics",lL="@firebase/app-check-compat",uL="@firebase/app-check",dL="@firebase/auth",fL="@firebase/auth-compat",hL="@firebase/database",pL="@firebase/data-connect",gL="@firebase/database-compat",mL="@firebase/functions",vL="@firebase/functions-compat",yL="@firebase/installations",_L="@firebase/installations-compat",EL="@firebase/messaging",IL="@firebase/messaging-compat",CL="@firebase/performance",wL="@firebase/performance-compat",DL="@firebase/remote-config",bL="@firebase/remote-config-compat",TL="@firebase/storage",SL="@firebase/storage-compat",AL="@firebase/firestore",NL="@firebase/ai",ML="@firebase/firestore-compat",RL="firebase",xL="12.6.0";var bv="[DEFAULT]",OL={[Dv]:"fire-core",[sL]:"fire-core-compat",[cL]:"fire-analytics",[aL]:"fire-analytics-compat",[uL]:"fire-app-check",[lL]:"fire-app-check-compat",[dL]:"fire-auth",[fL]:"fire-auth-compat",[hL]:"fire-rtdb",[pL]:"fire-data-connect",[gL]:"fire-rtdb-compat",[mL]:"fire-fn",[vL]:"fire-fn-compat",[yL]:"fire-iid",[_L]:"fire-iid-compat",[EL]:"fire-fcm",[IL]:"fire-fcm-compat",[CL]:"fire-perf",[wL]:"fire-perf-compat",[DL]:"fire-rc",[bL]:"fire-rc-compat",[TL]:"fire-gcs",[SL]:"fire-gcs-compat",[AL]:"fire-fst",[ML]:"fire-fst-compat",[NL]:"fire-vertex","fire-js":"fire-js",[RL]:"fire-js-all"};var Hd=new Map,kL=new Map,Tv=new Map;function OT(e,t){try{e.container.addComponent(t)}catch(n){Jn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ft(e){let t=e.name;if(Tv.has(t))return Jn.debug(`There were multiple attempts to register component ${t}.`),!1;Tv.set(t,e);for(let n of Hd.values())OT(n,e);for(let n of kL.values())OT(n,e);return!0}function an(e,t){let n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function wt(e){return e==null?!1:e.settings!==void 0}var PL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nr=new Ct("app","Firebase",PL);var Sv=class{constructor(t,n,r){this._isDeleted=!1,this._options=m({},t),this._config=m({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xe("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}};var Mr=xL;function Mv(e,t={}){let n=e;typeof t!="object"&&(t={name:t});let r=m({name:bv,automaticDataCollectionEnabled:!0},t),i=r.name;if(typeof i!="string"||!i)throw Nr.create("bad-app-name",{appName:String(i)});if(n||(n=pv()),!n)throw Nr.create("no-options");let o=Hd.get(i);if(o){if(Vt(n,o.options)&&Vt(r,o.config))return o;throw Nr.create("duplicate-app",{appName:i})}let s=new $a(i);for(let c of Tv.values())s.addComponent(c);let a=new Sv(n,r,s);return Hd.set(i,a),a}function Ti(e=bv){let t=Hd.get(e);if(!t&&e===bv&&pv())return Mv();if(!t)throw Nr.create("no-app",{appName:e});return t}function je(e,t,n){let r=OL[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=t.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${t}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Jn.warn(s.join(" "));return}ft(new xe(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}var FL="firebase-heartbeat-database",LL=1,Wa="firebase-heartbeat-store",Cv=null;function LT(){return Cv||(Cv=Bd(FL,LL,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Wa)}catch(n){console.warn(n)}}}}).catch(e=>{throw Nr.create("idb-open",{originalErrorMessage:e.message})})),Cv}function VL(e){return p(this,null,function*(){try{let n=(yield LT()).transaction(Wa),r=yield n.objectStore(Wa).get(VT(e));return yield n.done,r}catch(t){if(t instanceof Xe)Jn.warn(t.message);else{let n=Nr.create("idb-get",{originalErrorMessage:t?.message});Jn.warn(n.message)}}})}function kT(e,t){return p(this,null,function*(){try{let r=(yield LT()).transaction(Wa,"readwrite");yield r.objectStore(Wa).put(t,VT(e)),yield r.done}catch(n){if(n instanceof Xe)Jn.warn(n.message);else{let r=Nr.create("idb-set",{originalErrorMessage:n?.message});Jn.warn(r.message)}}})}function VT(e){return`${e.name}!${e.options.appId}`}var jL=1024,UL=30,Av=class{constructor(t){this.container=t,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Nv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=PT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>UL){let i=HL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Jn.warn(t)}})}getHeartbeatsHeader(){return p(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=PT(),{heartbeatsToSend:n,unsentEntries:r}=BL(this._heartbeatsCache.heartbeats),i=Va(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Jn.warn(t),""}})}};function PT(){return new Date().toISOString().substring(0,10)}function BL(e,t=jL){let n=[],r=e.slice();for(let i of e){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),FT(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),FT(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Nv=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return Ld()?Vd().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield VL(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return kT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return kT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return})}};function FT(e){return Va(JSON.stringify({version:2,heartbeats:e})).length}function HL(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function $L(e){ft(new xe("platform-logger",t=>new wv(t),"PRIVATE")),ft(new xe("heartbeat",t=>new Av(t),"PRIVATE")),je(Dv,xT,e),je(Dv,xT,"esm2020"),je("fire-js","")}$L("");var jT="@firebase/database",UT="1.1.0";var Fy="";function WL(e){Fy=e}var Vv=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),be(n))}get(t){let n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:Yo(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var jv=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return sn(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var vS=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Vv(t)}}catch{}return new jv},Ai=vS("localStorage"),Uv=vS("sessionStorage");var Jo=new Sn("@firebase/database"),GL=(function(){let e=1;return function(){return e++}})(),yS=function(e){let t=bT(e),n=new Rd;n.update(t);let r=n.digest();return xd.encodeByteArray(r)},dc=function(...e){let t="";for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=dc.apply(null,r):typeof r=="object"?t+=be(r):t+=r,t+=" "}return t},Ni=null,BT=!0,zL=function(e,t){y(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(Jo.logLevel=te.VERBOSE,Ni=Jo.log.bind(Jo),t&&Uv.set("logging_enabled",!0)):typeof e=="function"?Ni=e:(Ni=null,Uv.remove("logging_enabled"))},Ue=function(...e){if(BT===!0&&(BT=!1,Ni===null&&Uv.get("logging_enabled")===!0&&zL(!0)),Ni){let t=dc.apply(null,e);Ni(t)}},fc=function(e){return function(...t){Ue(e,...t)}},Bv=function(...e){let t="FIREBASE INTERNAL ERROR: "+dc(...e);Jo.error(t)},Xn=function(...e){let t=`FIREBASE FATAL ERROR: ${dc(...e)}`;throw Jo.error(t),new Error(t)},tt=function(...e){let t="FIREBASE WARNING: "+dc(...e);Jo.warn(t)},qL=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&tt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Ly=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},YL=function(e){if(Tn()||document.readyState==="complete")e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ri="[MIN_NAME]",kr="[MAX_NAME]",Oi=function(e,t){if(e===t)return 0;if(e===Ri||t===kr)return-1;if(t===Ri||e===kr)return 1;{let n=HT(e),r=HT(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1}},KL=function(e,t){return e===t?0:e<t?-1:1},Ga=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+be(t))},Vy=function(e){if(typeof e!="object"||e===null)return be(e);let t=[];for(let r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)r!==0&&(n+=","),n+=be(t[r]),n+=":",n+=Vy(e[t[r]]);return n+="}",n},_S=function(e,t){let n=e.length;if(n<=t)return[e];let r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Be(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var ES=function(e){y(!Ly(e),"Invalid JSON number");let t=11,n=52,r=(1<<t-1)-1,i,o,s,a,c;e===0?(o=0,s=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),r),o=a+r,s=Math.round(e*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(e/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},ZL=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},QL=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function JL(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");let r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}var XL=new RegExp("^-?(0*)\\d{1,10}$"),eV=-2147483648,tV=2147483647,HT=function(e){if(XL.test(e)){let t=Number(e);if(t>=eV&&t<=tV)return t}return null},cs=function(e){try{e()}catch(t){setTimeout(()=>{let n=t.stack||"";throw tt("Exception was thrown by user callback.",n),t},Math.floor(0))}},nV=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Za=function(e,t){let n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var Hv=class{constructor(t,n){this.appCheckProvider=n,this.appName=t.name,wt(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.appCheckProvider?.get().then(n=>n.addTokenListener(t))}notifyForInvalidToken(){tt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var $v=class{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ue("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',tt(t)}},Qa=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),Wd="5",IS="v",CS="s",wS="r",DS="f",bS=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,TS="ls",SS="p",Wv="ac",AS="websocket",NS="long_polling";var Gd=class{constructor(t,n,r,i,o=!1,s="",a=!1,c=!1,l=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ai.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Ai.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}};function rV(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function MS(e,t,n){y(typeof t=="string","typeof type must == string"),y(typeof n=="object","typeof params must == object");let r;if(t===AS)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===NS)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);rV(e)&&(n.ns=e.namespace);let i=[];return Be(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var Gv=class{constructor(){this.counters_={}}incrementCounter(t,n=1){sn(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return pT(this.counters_)}};var Rv={},xv={};function jy(e){let t=e.toString();return Rv[t]||(Rv[t]=new Gv),Rv[t]}function iV(e,t){let n=e.toString();return xv[n]||(xv[n]=t()),xv[n]}var zv=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&cs(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var $T="start",oV="close",sV="pLPCommand",aV="pRTLPCB",RS="id",xS="pw",OS="ser",cV="cb",lV="seg",uV="ts",dV="d",fV="dframe",kS=1870,PS=30,hV=kS-PS,pV=25e3,gV=3e4,qv=class e{constructor(t,n,r,i,o,s,a){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=fc(t),this.stats_=jy(n),this.urlFn=c=>(this.appCheckToken&&(c[Wv]=this.appCheckToken),MS(n,NS,c))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new zv(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(gV)),YL(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Yv((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===$T)this.id=a,this.password=c;else if(s===oV)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[$T]="t",r[OS]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[cV]=this.scriptTagHolder.uniqueCallbackIdentifier),r[IS]=Wd,this.transportSessionId&&(r[CS]=this.transportSessionId),this.lastSessionId&&(r[TS]=this.lastSessionId),this.applicationId&&(r[SS]=this.applicationId),this.appCheckToken&&(r[Wv]=this.appCheckToken),typeof location<"u"&&location.hostname&&bS.test(location.hostname)&&(r[wS]=DS);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return Tn()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!ZL()&&!QL()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let n=be(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=dv(n),i=_S(r,hV);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,n){if(Tn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[fV]="t",r[RS]=t,r[xS]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let n=be(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Yv=class e{constructor(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Tn())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=GL(),window[sV+this.uniqueCallbackIdentifier]=t,window[aV+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Ue("frame writing exception"),a.stack&&Ue(a.stack),Ue(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Ue("No IE domain setting required")}catch{let r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[RS]=this.myID,t[xS]=this.myPW,t[OS]=this.currentSerial;let n=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+PS+r.length<=kS;){let s=this.pendingSegs.shift();r=r+"&"+lV+i+"="+s.seg+"&"+uV+i+"="+s.ts+"&"+dV+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(pV)),o=()=>{clearTimeout(i),r()};this.addTag(t,o)}addTag(t,n){Tn()?this.doNodeLongPoll(t,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ue("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var mV=16384,vV=45e3,zd=null;typeof MozWebSocket<"u"?zd=MozWebSocket:typeof WebSocket<"u"&&(zd=WebSocket);var za=(()=>{class e{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=fc(this.connId),this.stats_=jy(r),this.connURL=e.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[IS]=Wd,!Tn()&&typeof location<"u"&&location.hostname&&bS.test(location.hostname)&&(a[wS]=DS),r&&(a[CS]=r),i&&(a[TS]=i),o&&(a[Wv]=o),s&&(a[SS]=s),MS(n,AS,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ai.set("previous_websocket_failure",!0);try{let i;if(Tn()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Wd}/${Fy}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new zd(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&zd!==null&&!e.forceDisallow_}static previouslyFailed(){return Ai.isInMemoryStorage||Ai.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ai.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Yo(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(y(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=be(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=_S(r,mV);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(vV))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),yV=(()=>{class e{static get ALL_TRANSPORTS(){return[qv,za]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(n){this.initTransports_(n)}initTransports_(n){let r=za&&za.isAvailable(),i=r&&!za.previouslyFailed();if(n.webSocketOnly&&(r||tt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[za];else{let o=this.transports_=[];for(let s of e.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),_V=6e4,EV=5e3,IV=10*1024,CV=100*1024,Ov="t",WT="d",wV="s",GT="r",DV="e",zT="o",qT="a",YT="n",KT="p",bV="h",Kv=class{constructor(t,n,r,i,o,s,a,c,l,u){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=fc("c:"+this.id+":"),this.transportManager_=new yV(n),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Za(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>CV?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>IV?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){let n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Ov in t){let n=t[Ov];n===qT?this.upgradeIfSecondaryHealthy_():n===GT?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===zT&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let n=Ga("t",t),r=Ga("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:KT,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:qT,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:YT,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let n=Ga("t",t),r=Ga("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let n=Ga(Ov,t);if(WT in t){let r=t[WT];if(n===bV){let i=m({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===YT){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===wV?this.onConnectionShutdown_(r):n===GT?this.onReset_(r):n===DV?Bv("Server Error: "+r):n===zT?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Bv("Unknown control packet command: "+n)}}onHandshake_(t){let n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Wd!==r&&tt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Za(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(_V))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Za(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(EV))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:KT,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ai.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var qd=class{put(t,n,r,i){}merge(t,n,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}};var Yd=class{constructor(t){this.allowedEvents_=t,this.listeners_={},y(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){let r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});let i=this.getInitialEvent(t);i&&n.apply(r,i)}off(t,n,r){this.validateEventType_(t);let i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(t){y(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}};var Kd=class e extends Yd{static getInstance(){return new e}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ja()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return y(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var ZT=32,QT=768,J=class{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}};function Y(){return new J("")}function $(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Pr(e){return e.pieces_.length-e.pieceNum_}function ie(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new J(e.pieces_,t)}function Uy(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function TV(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function tc(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function FS(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new J(t,0)}function de(e,t){let n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof J)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{let r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new J(n,0)}function W(e){return e.pieceNum_>=e.pieces_.length}function et(e,t){let n=$(e),r=$(t);if(n===null)return t;if(n===r)return et(ie(e),ie(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function SV(e,t){let n=tc(e,0),r=tc(t,0);for(let i=0;i<n.length&&i<r.length;i++){let o=Oi(n[i],r[i]);if(o!==0)return o}return n.length===r.length?0:n.length<r.length?-1:1}function By(e,t){if(Pr(e)!==Pr(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function jt(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Pr(e)>Pr(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Zv=class{constructor(t,n){this.errorPrefix_=n,this.parts_=tc(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Ha(this.parts_[r]);LS(this)}};function AV(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Ha(t),LS(e)}function NV(e){let t=e.parts_.pop();e.byteLength_-=Ha(t),e.parts_.length>0&&(e.byteLength_-=1)}function LS(e){if(e.byteLength_>QT)throw new Error(e.errorPrefix_+"has a key path longer than "+QT+" bytes ("+e.byteLength_+").");if(e.parts_.length>ZT)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ZT+") or object contains a cycle "+Si(e))}function Si(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var Qv=class e extends Yd{static getInstance(){return new e}constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(t){return y(t==="visible","Unknown event type: "+t),[this.visible_]}};var qa=1e3,MV=300*1e3,JT=30*1e3,RV=1.3,xV=3e4,OV="server_kill",XT=3,Hy=(()=>{class e extends qd{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=e.nextPersistentConnectionId_++,this.log_=fc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=qa,this.maxReconnectDelay_=MV,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Tn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Qv.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Kd.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(be(s)),y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new Qn,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),y(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;e.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&sn(n,"w")){let i=Di(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();tt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||wT(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=JT)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=CT(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+be(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):Bv("Unrecognized action received from server: "+be(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=qa,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=qa,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>xV&&(this.reconnectDelay_=qa),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*RV)}this.onConnectStatus_(!1)}establishConnection_(){return p(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){y(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Ue("getToken() completed but was canceled"):(Ue("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new Kv(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,g=>{tt(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(OV)},s))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&tt(f),l())}}})}interrupt(n){Ue("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Ue("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Ua(this.interruptReasons_)&&(this.reconnectDelay_=qa,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>Vy(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new J(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){Ue("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=XT&&(this.reconnectDelay_=JT,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Ue("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=XT&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Tn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Fy.replace(/\./g,"-")]=1,ja()?n["framework.cordova"]=1:Fd()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Kd.getInstance().currentlyOnline();return Ua(this.interruptReasons_)&&n}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),G=class e{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new e(t,n)}};var Xo=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){let r=new G(Ri,t),i=new G(Ri,n);return this.compare(r,i)!==0}minPost(){return G.MIN}};var $d,Zd=class extends Xo{static get __EMPTY_NODE(){return $d}static set __EMPTY_NODE(t){$d=t}compare(t,n){return Oi(t.name,n.name)}isDefinedOn(t){throw wi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return G.MIN}maxPost(){return new G(kr,$d)}makePost(t,n){return y(typeof t=="string","KeyIndex indexValue must always be a string."),new G(t,$d)}toString(){return".key"}},Mi=new Zd;var Qo=class{constructor(t,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(t=t,s=n?r(t.key,n):1,i&&(s*=-1),s<0)this.isReverse_?t=t.left:t=t.right;else if(s===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},cn=(()=>{class e{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??e.RED,this.left=o??Ut.EMPTY_NODE,this.right=s??Ut.EMPTY_NODE}copy(n,r,i,o,s){return new e(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ut.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Ut.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),Jv=class{copy(t,n,r,i,o){return this}insert(t,n,r){return new cn(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Ut=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,cn.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,cn.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Qo(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new Qo(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new Qo(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new Qo(this.root_,null,this.comparator_,!0,t)}};Ut.EMPTY_NODE=new Jv;function kV(e,t){return Oi(e.name,t.name)}function $y(e,t){return Oi(e,t)}var Xv;function PV(e){Xv=e}var VS=function(e){return typeof e=="number"?"number:"+ES(e):"string:"+e},jS=function(e){if(e.isLeafNode()){let t=e.val();y(typeof t=="string"||typeof t=="number"||typeof t=="object"&&sn(t,".sv"),"Priority must be a string or number.")}else y(e===Xv||e.isEmpty(),"priority of unexpected type.");y(e===Xv||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var eS,es=(()=>{class e{static set __childrenNodeConstructor(n){eS=n}static get __childrenNodeConstructor(){return eS}constructor(n,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,y(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),jS(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return W(n)?this:$(n)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=$(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(y(i!==".priority"||Pr(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(ie(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+VS(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=ES(this.value_):n+=this.value_,this.lazyHash_=yS(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(y(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(r),s=e.VALUE_TYPE_ORDER.indexOf(i);return y(o>=0,"Unknown leaf type: "+r),y(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),US,BS;function FV(e){US=e}function LV(e){BS=e}var ey=class extends Xo{compare(t,n){let r=t.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?Oi(t.name,n.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return G.MIN}maxPost(){return new G(kr,new es("[PRIORITY-POST]",BS))}makePost(t,n){let r=US(t);return new G(n,new es("[PRIORITY-POST]",r))}toString(){return".priority"}},ce=new ey;var VV=Math.log(2),ty=class{constructor(t){let n=o=>parseInt(Math.log(o)/VV,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;let i=r(this.count);this.bits_=t+1&i}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},Qd=function(e,t,n,r){e.sort(t);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=e[c],f=n?n(d):d,new cn(f,d.node,cn.BLACK,null,null);{let h=parseInt(u/2,10)+c,g=i(c,h),_=i(h+1,l);return d=e[h],f=n?n(d):d,new cn(f,d.node,cn.BLACK,g,_)}},o=function(c){let l=null,u=null,d=e.length,f=function(g,_){let T=d-g,M=d;d-=g;let ht=i(T+1,M),bt=e[T],th=n?n(bt):bt;h(new cn(th,bt.node,_,null,ht))},h=function(g){l?(l.left=g,l=g):(u=g,l=g)};for(let g=0;g<c.count;++g){let _=c.nextBitIsOne(),T=Math.pow(2,c.count-(g+1));_?f(T,cn.BLACK):(f(T,cn.BLACK),f(T,cn.RED))}return u},s=new ty(e.length),a=o(s);return new Ut(r||t,a)};var kv,Zo={},ts=class e{static get Default(){return y(Zo&&ce,"ChildrenNode.ts has not been loaded"),kv=kv||new e({".priority":Zo},{".priority":ce}),kv}constructor(t,n){this.indexes_=t,this.indexSet_=n}get(t){let n=Di(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof Ut?n:null}hasIndex(t){return sn(this.indexSet_,t.toString())}addIndex(t,n){y(t!==Mi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(G.Wrap),s=o.getNext();for(;s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=Qd(r,t.getCompare()):a=Zo;let c=t.toString(),l=m({},this.indexSet_);l[c]=t;let u=m({},this.indexes_);return u[c]=a,new e(u,l)}addToIndexes(t,n){let r=Ba(this.indexes_,(i,o)=>{let s=Di(this.indexSet_,o);if(y(s,"Missing index implementation for "+o),i===Zo)if(s.isDefinedOn(t.node)){let a=[],c=n.getIterator(G.Wrap),l=c.getNext();for(;l;)l.name!==t.name&&a.push(l),l=c.getNext();return a.push(t),Qd(a,s.getCompare())}else return Zo;else{let a=n.get(t.name),c=i;return a&&(c=c.remove(new G(t.name,a))),c.insert(t,t.node)}});return new e(r,this.indexSet_)}removeFromIndexes(t,n){let r=Ba(this.indexes_,i=>{if(i===Zo)return i;{let o=n.get(t.name);return o?i.remove(new G(t.name,o)):i}});return new e(r,this.indexSet_)}};var Ya,V=(()=>{class e{static get EMPTY_NODE(){return Ya||(Ya=new e(new Ut($y),null,ts.Default))}constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&jS(this.priorityNode_),this.children_.isEmpty()&&y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ya}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Ya:r}}getChild(n){let r=$(n);return r===null?this:this.getImmediateChild(r).getChild(ie(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(y(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new G(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?Ya:this.priorityNode_;return new e(o,a,s)}}updateChild(n,r){let i=$(n);if(i===null)return r;{y($(n)!==".priority"||Pr(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(ie(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(ce,(a,c)=>{r[a]=c.val(n),i++,s&&e.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+VS(this.getPriority().val())+":"),this.forEachChild(ce,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":yS(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new G(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new G(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new G(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,G.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,G.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===hc?-1:0}withIndex(n){if(n===Mi||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Mi||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(ce),o=r.getIterator(ce),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Mi?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),ny=class extends V{constructor(){super(new Ut($y),V.EMPTY_NODE,ts.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return V.EMPTY_NODE}isEmpty(){return!1}},hc=new ny;Object.defineProperties(G,{MIN:{value:new G(Ri,V.EMPTY_NODE)},MAX:{value:new G(kr,hc)}});Zd.__EMPTY_NODE=V.EMPTY_NODE;es.__childrenNodeConstructor=V;PV(hc);LV(hc);var jV=!0;function Ne(e,t=null){if(e===null)return V.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),y(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let n=e;return new es(n,Ne(t))}if(!(e instanceof Array)&&jV){let n=[],r=!1;if(Be(e,(s,a)=>{if(s.substring(0,1)!=="."){let c=Ne(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new G(s,c)))}}),n.length===0)return V.EMPTY_NODE;let o=Qd(n,kV,s=>s.name,$y);if(r){let s=Qd(n,ce.getCompare());return new V(o,Ne(t),new ts({".priority":s},{".priority":ce}))}else return new V(o,Ne(t),ts.Default)}else{let n=V.EMPTY_NODE;return Be(e,(r,i)=>{if(sn(e,r)&&r.substring(0,1)!=="."){let o=Ne(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(Ne(t))}}FV(Ne);var nc=class extends Xo{constructor(t){super(),this.indexPath_=t,y(!W(t)&&$(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){let r=this.extractChild(t.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?Oi(t.name,n.name):o}makePost(t,n){let r=Ne(t),i=V.EMPTY_NODE.updateChild(this.indexPath_,r);return new G(n,i)}maxPost(){let t=V.EMPTY_NODE.updateChild(this.indexPath_,hc);return new G(kr,t)}toString(){return tc(this.indexPath_,0).join("/")}};var ry=class extends Xo{compare(t,n){let r=t.node.compareTo(n.node);return r===0?Oi(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return G.MIN}maxPost(){return G.MAX}makePost(t,n){let r=Ne(t);return new G(n,r)}toString(){return".value"}},HS=new ry;function $S(e){return{type:"value",snapshotNode:e}}function ns(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function rc(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function ic(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function UV(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var oc=class{constructor(t){this.index_=t}updateChild(t,n,r,i,o,s){y(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=t.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?t.hasChild(n)?s.trackChildChange(rc(n,a)):y(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ns(n,r)):s.trackChildChange(ic(n,r,a))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(ce,(i,o)=>{n.hasChild(i)||r.trackChildChange(rc(i,o))}),n.isLeafNode()||n.forEachChild(ce,(i,o)=>{if(t.hasChild(i)){let s=t.getImmediateChild(i);s.equals(o)||r.trackChildChange(ic(i,o,s))}else r.trackChildChange(ns(i,o))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?V.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Jd=class e{constructor(t){this.indexedFilter_=new oc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,i,o,s){return this.matches(new G(n,r))||(r=V.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,o,s)}updateFullNode(t,n,r){n.isLeafNode()&&(n=V.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(V.EMPTY_NODE);let o=this;return n.forEachChild(ce,(s,a)=>{o.matches(new G(s,a))||(i=i.updateImmediateChild(s,V.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}};var iy=class{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Jd(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,i,o,s){return this.rangedFilter_.matches(new G(n,r))||(r=V.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,o,s):this.fullLimitUpdateChild_(t,n,r,o,s)}updateFullNode(t,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=V.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=V.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(V.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,V.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(f,h)=>d(h,f)}else s=this.index_.getCompare();let a=t;y(a.numChildren()===this.limit_,"");let c=new G(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:s(f,c);if(u&&!r.isEmpty()&&h>=0)return o?.trackChildChange(ic(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(rc(n,d));let _=a.updateImmediateChild(n,V.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(o?.trackChildChange(ns(f.name,f.node)),_.updateImmediateChild(f.name,f.node)):_}}else return r.isEmpty()?t:u&&s(l,c)>=0?(o!=null&&(o.trackChildChange(rc(l.name,l.node)),o.trackChildChange(ns(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,V.EMPTY_NODE)):t}};var oy=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ce}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ri}hasEnd(){return this.endSet_}getIndexEndValue(){return y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:kr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return y(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ce}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function BV(e){return e.loadsAllData()?new oc(e.getIndex()):e.hasLimit()?new iy(e):new Jd(e)}function HV(e,t,n){let r=e.copy();return r.startSet_=!0,t===void 0&&(t=null),r.indexStartValue_=t,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function $V(e,t,n){let r=e.copy();return r.endSet_=!0,t===void 0&&(t=null),r.indexEndValue_=t,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function WV(e,t){let n=e.copy();return n.index_=t,n}function tS(e){let t={};if(e.isDefault())return t;let n;if(e.index_===ce?n="$priority":e.index_===HS?n="$value":e.index_===Mi?n="$key":(y(e.index_ instanceof nc,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=be(n),e.startSet_){let r=e.startAfterSet_?"startAfter":"startAt";t[r]=be(e.indexStartValue_),e.startNameSet_&&(t[r]+=","+be(e.indexStartName_))}if(e.endSet_){let r=e.endBeforeSet_?"endBefore":"endAt";t[r]=be(e.indexEndValue_),e.endNameSet_&&(t[r]+=","+be(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function nS(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==ce&&(t.i=e.index_.toString()),t}var sy=class e extends qd{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(y(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,n,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=fc("p:rest:"),this.listens_={}}listen(t,n,r,i){let o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);let s=e.getListenId_(t,r),a={};this.listens_[s]=a;let c=tS(t._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),Di(this.listens_,s)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(t,n){let r=e.getListenId_(t,n);delete this.listens_[r]}get(t){let n=tS(t._queryParams),r=t._path.toString(),i=new Qn;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Ar(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Yo(a.responseText)}catch{tt("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&tt("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var ay=class{constructor(){this.rootNode_=V.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}};function Xd(){return{value:null,children:new Map}}function WS(e,t,n){if(W(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let r=$(t);e.children.has(r)||e.children.set(r,Xd());let i=e.children.get(r);t=ie(t),WS(i,t,n)}}function cy(e,t,n){e.value!==null?n(t,e.value):GV(e,(r,i)=>{let o=new J(t.toString()+"/"+r);cy(i,o,n)})}function GV(e,t){e.children.forEach((n,r)=>{t(r,n)})}var ly=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),n=m({},t);return this.last_&&Be(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=t,n}};var rS=10*1e3,zV=30*1e3,qV=300*1e3,uy=class{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new ly(t);let r=rS+(zV-rS)*Math.random();Za(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let t=this.statsListener_.get(),n={},r=!1;Be(t,(i,o)=>{o>0&&sn(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Za(this.reportStats_.bind(this),Math.floor(Math.random()*2*qV))}};var Nn=(function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e})(Nn||{});function Wy(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Gy(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function zy(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var dy=class e{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=Nn.ACK_USER_WRITE,this.source=Wy()}operationForChild(t){if(W(this.path)){if(this.affectedTree.value!=null)return y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new J(t));return new e(Y(),n,this.revert)}}else return y($(this.path)===t,"operationForChild called for unrelated child."),new e(ie(this.path),this.affectedTree,this.revert)}};var ef=class e{constructor(t,n){this.source=t,this.path=n,this.type=Nn.LISTEN_COMPLETE}operationForChild(t){return W(this.path)?new e(this.source,Y()):new e(this.source,ie(this.path))}};var rs=class e{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=Nn.OVERWRITE}operationForChild(t){return W(this.path)?new e(this.source,Y(),this.snap.getImmediateChild(t)):new e(this.source,ie(this.path),this.snap)}};var sc=class e{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=Nn.MERGE}operationForChild(t){if(W(this.path)){let n=this.children.subtree(new J(t));return n.isEmpty()?null:n.value?new rs(this.source,Y(),n.value):new e(this.source,Y(),n)}else return y($(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,ie(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Mn=class{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(W(t))return this.isFullyInitialized()&&!this.filtered_;let n=$(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var fy=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function YV(e,t,n,r){let i=[],o=[];return t.forEach(s=>{s.type==="child_changed"&&e.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(UV(s.childName,s.snapshotNode))}),Ka(e,i,"child_removed",t,r,n),Ka(e,i,"child_added",t,r,n),Ka(e,i,"child_moved",o,r,n),Ka(e,i,"child_changed",t,r,n),Ka(e,i,"value",t,r,n),i}function Ka(e,t,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>ZV(e,a,c)),s.forEach(a=>{let c=KV(e,a,o);i.forEach(l=>{l.respondsTo(a.type)&&t.push(l.createEvent(c,e.query_))})})}function KV(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function ZV(e,t,n){if(t.childName==null||n.childName==null)throw wi("Should only compare child_ events.");let r=new G(t.childName,t.snapshotNode),i=new G(n.childName,n.snapshotNode);return e.index_.compare(r,i)}function mf(e,t){return{eventCache:e,serverCache:t}}function Ja(e,t,n,r){return mf(new Mn(t,n,r),e.serverCache)}function GS(e,t,n,r){return mf(e.eventCache,new Mn(t,n,r))}function tf(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function xi(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Pv,QV=()=>(Pv||(Pv=new Ut(KL)),Pv),nt=class e{static fromObject(t){let n=new e(null);return Be(t,(r,i)=>{n=n.set(new J(r),i)}),n}constructor(t,n=QV()){this.value=t,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:Y(),value:this.value};if(W(t))return null;{let r=$(t),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(ie(t),n);return o!=null?{path:de(new J(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(W(t))return this;{let n=$(t),r=this.children.get(n);return r!==null?r.subtree(ie(t)):new e(null)}}set(t,n){if(W(t))return new e(n,this.children);{let r=$(t),o=(this.children.get(r)||new e(null)).set(ie(t),n),s=this.children.insert(r,o);return new e(this.value,s)}}remove(t){if(W(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=$(t),r=this.children.get(n);if(r){let i=r.remove(ie(t)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new e(null):new e(this.value,o)}else return this}}get(t){if(W(t))return this.value;{let n=$(t),r=this.children.get(n);return r?r.get(ie(t)):null}}setTree(t,n){if(W(t))return n;{let r=$(t),o=(this.children.get(r)||new e(null)).setTree(ie(t),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new e(this.value,s)}}fold(t){return this.fold_(Y(),t)}fold_(t,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(de(t,i),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,Y(),n)}findOnPath_(t,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(W(t))return null;{let o=$(t),s=this.children.get(o);return s?s.findOnPath_(ie(t),de(n,o),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,Y(),n)}foreachOnPath_(t,n,r){if(W(t))return this;{this.value&&r(n,this.value);let i=$(t),o=this.children.get(i);return o?o.foreachOnPath_(ie(t),de(n,i),r):new e(null)}}foreach(t){this.foreach_(Y(),t)}foreach_(t,n){this.children.inorderTraversal((r,i)=>{i.foreach_(de(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}};var ln=class e{constructor(t){this.writeTree_=t}static empty(){return new e(new nt(null))}};function Xa(e,t,n){if(W(t))return new ln(new nt(n));{let r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){let i=r.path,o=r.value,s=et(i,t);return o=o.updateChild(s,n),new ln(e.writeTree_.set(i,o))}else{let i=new nt(n),o=e.writeTree_.setTree(t,i);return new ln(o)}}}function hy(e,t,n){let r=e;return Be(n,(i,o)=>{r=Xa(r,de(t,i),o)}),r}function iS(e,t){if(W(t))return ln.empty();{let n=e.writeTree_.setTree(t,new nt(null));return new ln(n)}}function py(e,t){return ki(e,t)!=null}function ki(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(et(n.path,t)):null}function oS(e){let t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ce,(r,i)=>{t.push(new G(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&t.push(new G(r,i.value))}),t}function xr(e,t){if(W(t))return e;{let n=ki(e,t);return n!=null?new ln(new nt(n)):new ln(e.writeTree_.subtree(t))}}function gy(e){return e.writeTree_.isEmpty()}function is(e,t){return zS(Y(),e.writeTree_,t)}function zS(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((i,o)=>{i===".priority"?(y(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=zS(de(e,i),o,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(de(e,".priority"),r)),n}}function vf(e,t){return ZS(t,e)}function JV(e,t,n,r,i){y(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Xa(e.visibleWrites,t,n)),e.lastWriteId=r}function XV(e,t,n,r){y(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=hy(e.visibleWrites,t,n),e.lastWriteId=r}function ej(e,t){for(let n=0;n<e.allWrites.length;n++){let r=e.allWrites[n];if(r.writeId===t)return r}return null}function tj(e,t){let n=e.allWrites.findIndex(a=>a.writeId===t);y(n>=0,"removeWrite called with nonexistent writeId.");let r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,s=e.allWrites.length-1;for(;i&&s>=0;){let a=e.allWrites[s];a.visible&&(s>=n&&nj(a,r.path)?i=!1:jt(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return rj(e),!0;if(r.snap)e.visibleWrites=iS(e.visibleWrites,r.path);else{let a=r.children;Be(a,c=>{e.visibleWrites=iS(e.visibleWrites,de(r.path,c))})}return!0}else return!1}function nj(e,t){if(e.snap)return jt(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&jt(de(e.path,n),t))return!0;return!1}function rj(e){e.visibleWrites=qS(e.allWrites,ij,Y()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function ij(e){return e.visible}function qS(e,t,n){let r=ln.empty();for(let i=0;i<e.length;++i){let o=e[i];if(t(o)){let s=o.path,a;if(o.snap)jt(n,s)?(a=et(n,s),r=Xa(r,a,o.snap)):jt(s,n)&&(a=et(s,n),r=Xa(r,Y(),o.snap.getChild(a)));else if(o.children){if(jt(n,s))a=et(n,s),r=hy(r,a,o.children);else if(jt(s,n))if(a=et(s,n),W(a))r=hy(r,Y(),o.children);else{let c=Di(o.children,$(a));if(c){let l=c.getChild(ie(a));r=Xa(r,Y(),l)}}}else throw wi("WriteRecord should have .snap or .children")}}return r}function YS(e,t,n,r,i){if(!r&&!i){let o=ki(e.visibleWrites,t);if(o!=null)return o;{let s=xr(e.visibleWrites,t);if(gy(s))return n;if(n==null&&!py(s,Y()))return null;{let a=n||V.EMPTY_NODE;return is(s,a)}}}else{let o=xr(e.visibleWrites,t);if(!i&&gy(o))return n;if(!i&&n==null&&!py(o,Y()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(jt(l.path,t)||jt(t,l.path))},a=qS(e.allWrites,s,t),c=n||V.EMPTY_NODE;return is(a,c)}}}function oj(e,t,n){let r=V.EMPTY_NODE,i=ki(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(ce,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=xr(e.visibleWrites,t);return n.forEachChild(ce,(s,a)=>{let c=is(xr(o,new J(s)),a);r=r.updateImmediateChild(s,c)}),oS(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=xr(e.visibleWrites,t);return oS(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function sj(e,t,n,r,i){y(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=de(t,n);if(py(e.visibleWrites,o))return null;{let s=xr(e.visibleWrites,o);return gy(s)?i.getChild(n):is(s,i.getChild(n))}}function aj(e,t,n,r){let i=de(t,n),o=ki(e.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=xr(e.visibleWrites,i);return is(s,r.getNode().getImmediateChild(n))}else return null}function cj(e,t){return ki(e.visibleWrites,t)}function lj(e,t,n,r,i,o,s){let a,c=xr(e.visibleWrites,t),l=ki(c,Y());if(l!=null)a=l;else if(n!=null)a=is(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function uj(){return{visibleWrites:ln.empty(),allWrites:[],lastWriteId:-1}}function nf(e,t,n,r){return YS(e.writeTree,e.treePath,t,n,r)}function qy(e,t){return oj(e.writeTree,e.treePath,t)}function sS(e,t,n,r){return sj(e.writeTree,e.treePath,t,n,r)}function rf(e,t){return cj(e.writeTree,de(e.treePath,t))}function dj(e,t,n,r,i,o){return lj(e.writeTree,e.treePath,t,n,r,i,o)}function Yy(e,t,n){return aj(e.writeTree,e.treePath,t,n)}function KS(e,t){return ZS(de(e.treePath,t),e.writeTree)}function ZS(e,t){return{treePath:e,writeTree:t}}var my=class{constructor(){this.changeMap=new Map}trackChildChange(t){let n=t.type,r=t.childName;y(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),y(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,ic(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,rc(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,ns(r,t.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,ic(r,t.snapshotNode,i.oldSnap));else throw wi("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}};var vy=class{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}},QS=new vy,ac=class{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{let r=this.optCompleteServerCache_!=null?new Mn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Yy(this.writes_,t,r)}}getChildAfterChild(t,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:xi(this.viewCache_),o=dj(this.writes_,i,n,1,r,t);return o.length===0?null:o[0]}};function fj(e){return{filter:e}}function hj(e,t){y(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),y(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function pj(e,t,n,r,i){let o=new my,s,a;if(n.type===Nn.OVERWRITE){let l=n;l.source.fromUser?s=yy(e,t,l.path,l.snap,r,i,o):(y(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!W(l.path),s=of(e,t,l.path,l.snap,r,i,a,o))}else if(n.type===Nn.MERGE){let l=n;l.source.fromUser?s=mj(e,t,l.path,l.children,r,i,o):(y(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),s=_y(e,t,l.path,l.children,r,i,a,o))}else if(n.type===Nn.ACK_USER_WRITE){let l=n;l.revert?s=_j(e,t,l.path,r,i,o):s=vj(e,t,l.path,l.affectedTree,r,i,o)}else if(n.type===Nn.LISTEN_COMPLETE)s=yj(e,t,n.path,r,o);else throw wi("Unknown operation type: "+n.type);let c=o.getChanges();return gj(t,s,c),{viewCache:s,changes:c}}function gj(e,t,n){let r=t.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=tf(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push($S(tf(t)))}}function JS(e,t,n,r,i,o){let s=t.eventCache;if(rf(r,n)!=null)return t;{let a,c;if(W(n))if(y(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let l=xi(t),u=l instanceof V?l:V.EMPTY_NODE,d=qy(r,u);a=e.filter.updateFullNode(t.eventCache.getNode(),d,o)}else{let l=nf(r,xi(t));a=e.filter.updateFullNode(t.eventCache.getNode(),l,o)}else{let l=$(n);if(l===".priority"){y(Pr(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=t.serverCache.getNode();let d=sS(r,n,u,c);d!=null?a=e.filter.updatePriority(u,d):a=s.getNode()}else{let u=ie(n),d;if(s.isCompleteForChild(l)){c=t.serverCache.getNode();let f=sS(r,n,s.getNode(),c);f!=null?d=s.getNode().getImmediateChild(l).updateChild(u,f):d=s.getNode().getImmediateChild(l)}else d=Yy(r,l,t.serverCache);d!=null?a=e.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return Ja(t,a,s.isFullyInitialized()||W(n),e.filter.filtersNodes())}}function of(e,t,n,r,i,o,s,a){let c=t.serverCache,l,u=s?e.filter:e.filter.getIndexedFilter();if(W(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=$(n);if(!c.isCompleteForPath(n)&&Pr(n)>1)return t;let g=ie(n),T=c.getNode().getImmediateChild(h).updateChild(g,r);h===".priority"?l=u.updatePriority(c.getNode(),T):l=u.updateChild(c.getNode(),h,T,g,QS,null)}let d=GS(t,l,c.isFullyInitialized()||W(n),u.filtersNodes()),f=new ac(i,d,o);return JS(e,d,n,i,f,a)}function yy(e,t,n,r,i,o,s){let a=t.eventCache,c,l,u=new ac(i,t,o);if(W(n))l=e.filter.updateFullNode(t.eventCache.getNode(),r,s),c=Ja(t,l,!0,e.filter.filtersNodes());else{let d=$(n);if(d===".priority")l=e.filter.updatePriority(t.eventCache.getNode(),r),c=Ja(t,l,a.isFullyInitialized(),a.isFiltered());else{let f=ie(n),h=a.getNode().getImmediateChild(d),g;if(W(f))g=r;else{let _=u.getCompleteChild(d);_!=null?Uy(f)===".priority"&&_.getChild(FS(f)).isEmpty()?g=_:g=_.updateChild(f,r):g=V.EMPTY_NODE}if(h.equals(g))c=t;else{let _=e.filter.updateChild(a.getNode(),d,g,f,u,s);c=Ja(t,_,a.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function aS(e,t){return e.eventCache.isCompleteForChild(t)}function mj(e,t,n,r,i,o,s){let a=t;return r.foreach((c,l)=>{let u=de(n,c);aS(t,$(u))&&(a=yy(e,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=de(n,c);aS(t,$(u))||(a=yy(e,a,u,l,i,o,s))}),a}function cS(e,t,n){return n.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function _y(e,t,n,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,l;W(n)?l=r:l=new nt(null).setTree(n,r);let u=t.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=t.serverCache.getNode().getImmediateChild(d),g=cS(e,h,f);c=of(e,c,new J(d),g,i,o,s,a)}}),l.children.inorderTraversal((d,f)=>{let h=!t.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let g=t.serverCache.getNode().getImmediateChild(d),_=cS(e,g,f);c=of(e,c,new J(d),_,i,o,s,a)}}),c}function vj(e,t,n,r,i,o,s){if(rf(i,n)!=null)return t;let a=t.serverCache.isFiltered(),c=t.serverCache;if(r.value!=null){if(W(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return of(e,t,n,c.getNode().getChild(n),i,o,a,s);if(W(n)){let l=new nt(null);return c.getNode().forEachChild(Mi,(u,d)=>{l=l.set(new J(u),d)}),_y(e,t,n,l,i,o,a,s)}else return t}else{let l=new nt(null);return r.foreach((u,d)=>{let f=de(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),_y(e,t,n,l,i,o,a,s)}}function yj(e,t,n,r,i){let o=t.serverCache,s=GS(t,o.getNode(),o.isFullyInitialized()||W(n),o.isFiltered());return JS(e,s,n,r,QS,i)}function _j(e,t,n,r,i,o){let s;if(rf(r,n)!=null)return t;{let a=new ac(r,t,i),c=t.eventCache.getNode(),l;if(W(n)||$(n)===".priority"){let u;if(t.serverCache.isFullyInitialized())u=nf(r,xi(t));else{let d=t.serverCache.getNode();y(d instanceof V,"serverChildren would be complete if leaf node"),u=qy(r,d)}u=u,l=e.filter.updateFullNode(c,u,o)}else{let u=$(n),d=Yy(r,u,t.serverCache);d==null&&t.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=e.filter.updateChild(c,u,d,ie(n),a,o):t.eventCache.getNode().hasChild(u)?l=e.filter.updateChild(c,u,V.EMPTY_NODE,ie(n),a,o):l=c,l.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=nf(r,xi(t)),s.isLeafNode()&&(l=e.filter.updateFullNode(l,s,o)))}return s=t.serverCache.isFullyInitialized()||rf(r,Y())!=null,Ja(t,l,s,e.filter.filtersNodes())}}var Ey=class{constructor(t,n){this.query_=t,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new oc(r.getIndex()),o=BV(r);this.processor_=fj(o);let s=n.serverCache,a=n.eventCache,c=i.updateFullNode(V.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(V.EMPTY_NODE,a.getNode(),null),u=new Mn(c,s.isFullyInitialized(),i.filtersNodes()),d=new Mn(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=mf(d,u),this.eventGenerator_=new fy(this.query_)}get query(){return this.query_}};function Ej(e){return e.viewCache_.serverCache.getNode()}function Ij(e){return tf(e.viewCache_)}function Cj(e,t){let n=xi(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!W(t)&&!n.getImmediateChild($(t)).isEmpty())?n.getChild(t):null}function lS(e){return e.eventRegistrations_.length===0}function wj(e,t){e.eventRegistrations_.push(t)}function uS(e,t,n){let r=[];if(n){y(t==null,"A cancel should cancel all event registrations.");let i=e.query._path;e.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(t){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){let s=e.eventRegistrations_[o];if(!s.matches(t))i.push(s);else if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function dS(e,t,n,r){t.type===Nn.MERGE&&t.source.queryId!==null&&(y(xi(e.viewCache_),"We should always have a full cache before handling merges"),y(tf(e.viewCache_),"Missing event cache, even though we have a server cache"));let i=e.viewCache_,o=pj(e.processor_,i,t,n,r);return hj(e.processor_,o.viewCache),y(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,XS(e,o.changes,o.viewCache.eventCache.getNode(),null)}function Dj(e,t){let n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ce,(o,s)=>{r.push(ns(o,s))}),n.isFullyInitialized()&&r.push($S(n.getNode())),XS(e,r,n.getNode(),t)}function XS(e,t,n,r){let i=r?[r]:e.eventRegistrations_;return YV(e.eventGenerator_,t,n,i)}var sf,af=class{constructor(){this.views=new Map}};function bj(e){y(!sf,"__referenceConstructor has already been defined"),sf=e}function Tj(){return y(sf,"Reference.ts has not been loaded"),sf}function Sj(e){return e.views.size===0}function Ky(e,t,n,r){let i=t.source.queryId;if(i!==null){let o=e.views.get(i);return y(o!=null,"SyncTree gave us an op for an invalid query."),dS(o,t,n,r)}else{let o=[];for(let s of e.views.values())o=o.concat(dS(s,t,n,r));return o}}function e0(e,t,n,r,i){let o=t._queryIdentifier,s=e.views.get(o);if(!s){let a=nf(n,i?r:null),c=!1;a?c=!0:r instanceof V?(a=qy(n,r),c=!1):(a=V.EMPTY_NODE,c=!1);let l=mf(new Mn(a,c,!1),new Mn(r,i,!1));return new Ey(t,l)}return s}function Aj(e,t,n,r,i,o){let s=e0(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),wj(s,n),Dj(s,n)}function Nj(e,t,n,r){let i=t._queryIdentifier,o=[],s=[],a=Fr(e);if(i==="default")for(let[c,l]of e.views.entries())s=s.concat(uS(l,n,r)),lS(l)&&(e.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{let c=e.views.get(i);c&&(s=s.concat(uS(c,n,r)),lS(c)&&(e.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!Fr(e)&&o.push(new(Tj())(t._repo,t._path)),{removed:o,events:s}}function t0(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Or(e,t){let n=null;for(let r of e.views.values())n=n||Cj(r,t);return n}function n0(e,t){if(t._queryParams.loadsAllData())return yf(e);{let r=t._queryIdentifier;return e.views.get(r)}}function r0(e,t){return n0(e,t)!=null}function Fr(e){return yf(e)!=null}function yf(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var cf;function Mj(e){y(!cf,"__referenceConstructor has already been defined"),cf=e}function Rj(){return y(cf,"Reference.ts has not been loaded"),cf}var xj=1,lf=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new nt(null),this.pendingWriteTree_=uj(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function i0(e,t,n,r,i){return JV(e.pendingWriteTree_,t,n,r,i),i?ls(e,new rs(Wy(),t,n)):[]}function Oj(e,t,n,r){XV(e.pendingWriteTree_,t,n,r);let i=nt.fromObject(n);return ls(e,new sc(Wy(),t,i))}function Rr(e,t,n=!1){let r=ej(e.pendingWriteTree_,t);if(tj(e.pendingWriteTree_,t)){let o=new nt(null);return r.snap!=null?o=o.set(Y(),!0):Be(r.children,s=>{o=o.set(new J(s),!0)}),ls(e,new dy(r.path,o,n))}else return[]}function pc(e,t,n){return ls(e,new rs(Gy(),t,n))}function kj(e,t,n){let r=nt.fromObject(n);return ls(e,new sc(Gy(),t,r))}function Pj(e,t){return ls(e,new ef(Gy(),t))}function Fj(e,t,n){let r=Qy(e,n);if(r){let i=Jy(r),o=i.path,s=i.queryId,a=et(o,t),c=new ef(zy(s),a);return Xy(e,o,c)}else return[]}function uf(e,t,n,r,i=!1){let o=t._path,s=e.syncPointTree_.get(o),a=[];if(s&&(t._queryIdentifier==="default"||r0(s,t))){let c=Nj(s,t,n,r);Sj(s)&&(e.syncPointTree_=e.syncPointTree_.remove(o));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=e.syncPointTree_.findOnPath(o,(f,h)=>Fr(h));if(u&&!d){let f=e.syncPointTree_.subtree(o);if(!f.isEmpty()){let h=jj(f);for(let g=0;g<h.length;++g){let _=h[g],T=_.query,M=c0(e,_);e.listenProvider_.startListening(ec(T),cc(e,T),M.hashFn,M.onComplete)}}}!d&&l.length>0&&!r&&(u?e.listenProvider_.stopListening(ec(t),null):l.forEach(f=>{let h=e.queryToTagMap.get(_f(f));e.listenProvider_.stopListening(ec(f),h)}))}Uj(e,l)}return a}function o0(e,t,n,r){let i=Qy(e,r);if(i!=null){let o=Jy(i),s=o.path,a=o.queryId,c=et(s,t),l=new rs(zy(a),c,n);return Xy(e,s,l)}else return[]}function Lj(e,t,n,r){let i=Qy(e,r);if(i){let o=Jy(i),s=o.path,a=o.queryId,c=et(s,t),l=nt.fromObject(n),u=new sc(zy(a),c,l);return Xy(e,s,u)}else return[]}function Iy(e,t,n,r=!1){let i=t._path,o=null,s=!1;e.syncPointTree_.foreachOnPath(i,(f,h)=>{let g=et(f,i);o=o||Or(h,g),s=s||Fr(h)});let a=e.syncPointTree_.get(i);a?(s=s||Fr(a),o=o||Or(a,Y())):(a=new af,e.syncPointTree_=e.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=V.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((h,g)=>{let _=Or(g,Y());_&&(o=o.updateImmediateChild(h,_))}));let l=r0(a,t);if(!l&&!t._queryParams.loadsAllData()){let f=_f(t);y(!e.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=Bj();e.queryToTagMap.set(f,h),e.tagToQueryMap.set(h,f)}let u=vf(e.pendingWriteTree_,i),d=Aj(a,t,n,u,o,c);if(!l&&!s&&!r){let f=n0(a,t);d=d.concat(Hj(e,t,f))}return d}function Zy(e,t,n){let i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(s,a)=>{let c=et(s,t),l=Or(a,c);if(l)return l});return YS(i,t,o,n,!0)}function Vj(e,t){let n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(l,u)=>{let d=et(l,n);r=r||Or(u,d)});let i=e.syncPointTree_.get(n);i?r=r||Or(i,Y()):(i=new af,e.syncPointTree_=e.syncPointTree_.set(n,i));let o=r!=null,s=o?new Mn(r,!0,!1):null,a=vf(e.pendingWriteTree_,t._path),c=e0(i,t,a,o?s.getNode():V.EMPTY_NODE,o);return Ij(c)}function ls(e,t){return s0(t,e.syncPointTree_,null,vf(e.pendingWriteTree_,Y()))}function s0(e,t,n,r){if(W(e.path))return a0(e,t,n,r);{let i=t.get(Y());n==null&&i!=null&&(n=Or(i,Y()));let o=[],s=$(e.path),a=e.operationForChild(s),c=t.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=KS(r,s);o=o.concat(s0(a,c,l,u))}return i&&(o=o.concat(Ky(i,e,r,n))),o}}function a0(e,t,n,r){let i=t.get(Y());n==null&&i!=null&&(n=Or(i,Y()));let o=[];return t.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=KS(r,s),u=e.operationForChild(s);u&&(o=o.concat(a0(u,a,c,l)))}),i&&(o=o.concat(Ky(i,e,r,n))),o}function c0(e,t){let n=t.query,r=cc(e,n);return{hashFn:()=>(Ej(t)||V.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?Fj(e,n._path,r):Pj(e,n._path);{let o=JL(i,n);return uf(e,n,null,o)}}}}function cc(e,t){let n=_f(t);return e.queryToTagMap.get(n)}function _f(e){return e._path.toString()+"$"+e._queryIdentifier}function Qy(e,t){return e.tagToQueryMap.get(t)}function Jy(e){let t=e.indexOf("$");return y(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new J(e.substr(0,t))}}function Xy(e,t,n){let r=e.syncPointTree_.get(t);y(r,"Missing sync point for query tag that we're tracking");let i=vf(e.pendingWriteTree_,t);return Ky(r,n,i,null)}function jj(e){return e.fold((t,n,r)=>{if(n&&Fr(n))return[yf(n)];{let i=[];return n&&(i=t0(n)),Be(r,(o,s)=>{i=i.concat(s)}),i}})}function ec(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Rj())(e._repo,e._path):e}function Uj(e,t){for(let n=0;n<t.length;++n){let r=t[n];if(!r._queryParams.loadsAllData()){let i=_f(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}function Bj(){return xj++}function Hj(e,t,n){let r=t._path,i=cc(e,t),o=c0(e,n),s=e.listenProvider_.startListening(ec(t),i,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(r);if(i)y(!Fr(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!W(l)&&u&&Fr(u))return[yf(u).query];{let f=[];return u&&(f=f.concat(t0(u).map(h=>h.query))),Be(d,(h,g)=>{f=f.concat(g)}),f}});for(let l=0;l<c.length;++l){let u=c[l];e.listenProvider_.stopListening(ec(u),cc(e,u))}}return s}var Cy=class e{constructor(t){this.node_=t}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},wy=class e{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){let n=de(this.path_,t);return new e(this.syncTree_,n)}node(){return Zy(this.syncTree_,this.path_)}},$j=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},fS=function(e,t,n){if(!e||typeof e!="object")return e;if(y(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return Wj(e[".sv"],t,n);if(typeof e[".sv"]=="object")return Gj(e[".sv"],t);y(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},Wj=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:y(!1,"Unexpected server value: "+e)}},Gj=function(e,t,n){e.hasOwnProperty("increment")||y(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let r=e.increment;typeof r!="number"&&y(!1,"Unexpected increment value: "+r);let i=t.node();if(y(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},l0=function(e,t,n,r){return e_(t,new wy(n,e),r)},u0=function(e,t,n){return e_(e,new Cy(t),n)};function e_(e,t,n){let r=e.getPriority().val(),i=fS(r,t.getImmediateChild(".priority"),n),o;if(e.isLeafNode()){let s=e,a=fS(s.getValue(),t,n);return a!==s.getValue()||i!==s.getPriority().val()?new es(a,Ne(i)):e}else{let s=e;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new es(i))),s.forEachChild(ce,(a,c)=>{let l=e_(c,t.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var lc=class{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}};function t_(e,t){let n=t instanceof J?t:new J(t),r=e,i=$(n);for(;i!==null;){let o=Di(r.node.children,i)||{children:{},childCount:0};r=new lc(i,r,o),n=ie(n),i=$(n)}return r}function us(e){return e.node.value}function d0(e,t){e.node.value=t,Dy(e)}function f0(e){return e.node.childCount>0}function zj(e){return us(e)===void 0&&!f0(e)}function Ef(e,t){Be(e.node.children,(n,r)=>{t(new lc(n,e,r))})}function h0(e,t,n,r){n&&!r&&t(e),Ef(e,i=>{h0(i,t,!0,r)}),n&&r&&t(e)}function qj(e,t,n){let r=n?e:e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function gc(e){return new J(e.parent===null?e.name:gc(e.parent)+"/"+e.name)}function Dy(e){e.parent!==null&&Yj(e.parent,e.name,e)}function Yj(e,t,n){let r=zj(n),i=sn(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Dy(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,Dy(e))}var Kj=/[\[\].#$\/\u0000-\u001F\u007F]/,Zj=/[\[\].#$\u0000-\u001F\u007F]/,Fv=10*1024*1024,If=function(e){return typeof e=="string"&&e.length!==0&&!Kj.test(e)},p0=function(e){return typeof e=="string"&&e.length!==0&&!Zj.test(e)},Qj=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),p0(e)},by=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!Ly(e)||e&&typeof e=="object"&&sn(e,".sv")},Cf=function(e,t,n,r){r&&t===void 0||wf(Ko(e,"value"),t,n)},wf=function(e,t,n){let r=n instanceof J?new Zv(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+Si(r));if(typeof t=="function")throw new Error(e+"contains a function "+Si(r)+" with contents = "+t.toString());if(Ly(t))throw new Error(e+"contains "+t.toString()+" "+Si(r));if(typeof t=="string"&&t.length>Fv/3&&Ha(t)>Fv)throw new Error(e+"contains a string greater than "+Fv+" utf8 bytes "+Si(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let i=!1,o=!1;if(Be(t,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!If(s)))throw new Error(e+" contains an invalid key ("+s+") "+Si(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);AV(r,s),wf(e,a,r),NV(r)}),i&&o)throw new Error(e+' contains ".value" child '+Si(r)+" in addition to actual children.")}},Jj=function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];let o=tc(r);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!If(o[s]))throw new Error(e+"contains an invalid key ("+o[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(SV);let i=null;for(n=0;n<t.length;n++){if(r=t[n],i!==null&&jt(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},Xj=function(e,t,n,r){if(r&&t===void 0)return;let i=Ko(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");let o=[];Be(t,(s,a)=>{let c=new J(s);if(wf(i,a,de(n,c)),Uy(c)===".priority"&&!by(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(c)}),Jj(i,o)};var eU=function(e,t,n,r){if(!(r&&n===void 0)&&!If(n))throw new Error(Ko(e,t)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},n_=function(e,t,n,r){if(!(r&&n===void 0)&&!p0(n))throw new Error(Ko(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},tU=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),n_(e,t,n,r)},g0=function(e,t){if($(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},nU=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!If(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Qj(n))throw new Error(Ko(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Ty=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Df(e,t){let n=null;for(let r=0;r<t.length;r++){let i=t[r],o=i.getPath();n!==null&&!By(o,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function m0(e,t,n){Df(e,n),v0(e,r=>By(r,t))}function Bt(e,t,n){Df(e,n),v0(e,r=>jt(r,t)||jt(t,r))}function v0(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){let i=e.eventLists_[r];if(i){let o=i.path;t(o)?(rU(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function rU(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let r=n.getEventRunner();Ni&&Ue("event: "+n.toString()),cs(r)}}}var iU="repo_interrupt",oU=25,Sy=class{constructor(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ty,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Xd(),this.transactionQueueTree_=new lc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function sU(e,t,n){if(e.stats_=jy(e.repoInfo_),e.forceRestClient_||nV())e.server_=new sy(e.repoInfo_,(r,i,o,s)=>{hS(e,r,i,o,s)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>pS(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{be(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Hy(e.repoInfo_,t,(r,i,o,s)=>{hS(e,r,i,o,s)},r=>{pS(e,r)},r=>{cU(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=iV(e.repoInfo_,()=>new uy(e.stats_,e.server_)),e.infoData_=new ay,e.infoSyncTree_=new lf({startListening:(r,i,o,s)=>{let a=[],c=e.infoData_.getNode(r._path);return c.isEmpty()||(a=pc(e.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),r_(e,"connected",!1),e.serverSyncTree_=new lf({startListening:(r,i,o,s)=>(e.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);Bt(e.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}function aU(e){let n=e.infoData_.getNode(new J(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function bf(e){return $j({timestamp:aU(e)})}function hS(e,t,n,r,i){e.dataUpdateCount++;let o=new J(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i)if(r){let c=Ba(n,l=>Ne(l));s=Lj(e.serverSyncTree_,o,c,i)}else{let c=Ne(n);s=o0(e.serverSyncTree_,o,c,i)}else if(r){let c=Ba(n,l=>Ne(l));s=kj(e.serverSyncTree_,o,c)}else{let c=Ne(n);s=pc(e.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=os(e,o)),Bt(e.eventQueue_,a,s)}function pS(e,t){r_(e,"connected",t),t===!1&&fU(e)}function cU(e,t){Be(t,(n,r)=>{r_(e,n,r)})}function r_(e,t,n){let r=new J("/.info/"+t),i=Ne(n);e.infoData_.updateSnapshot(r,i);let o=pc(e.infoSyncTree_,r,i);Bt(e.eventQueue_,r,o)}function i_(e){return e.nextWriteId_++}function lU(e,t,n){let r=Vj(e.serverSyncTree_,t);return r!=null?Promise.resolve(r):e.server_.get(t).then(i=>{let o=Ne(i).withIndex(t._queryParams.getIndex());Iy(e.serverSyncTree_,t,n,!0);let s;if(t._queryParams.loadsAllData())s=pc(e.serverSyncTree_,t._path,o);else{let a=cc(e.serverSyncTree_,t);s=o0(e.serverSyncTree_,t._path,o,a)}return Bt(e.eventQueue_,t._path,s),uf(e.serverSyncTree_,t,n,null,!0),o},i=>(mc(e,"get for query "+be(t)+" failed: "+i),Promise.reject(new Error(i))))}function uU(e,t,n,r,i){mc(e,"set",{path:t.toString(),value:n,priority:r});let o=bf(e),s=Ne(n,r),a=Zy(e.serverSyncTree_,t),c=u0(s,a,o),l=i_(e),u=i0(e.serverSyncTree_,t,c,l,!0);Df(e.eventQueue_,u),e.server_.put(t.toString(),s.val(!0),(f,h)=>{let g=f==="ok";g||tt("set at "+t+" failed: "+f);let _=Rr(e.serverSyncTree_,l,!g);Bt(e.eventQueue_,t,_),Ay(e,i,f,h)});let d=s_(e,t);os(e,d),Bt(e.eventQueue_,d,[])}function dU(e,t,n,r){mc(e,"update",{path:t.toString(),value:n});let i=!0,o=bf(e),s={};if(Be(n,(a,c)=>{i=!1,s[a]=l0(de(t,a),Ne(c),e.serverSyncTree_,o)}),i)Ue("update() called with empty data.  Don't do anything."),Ay(e,r,"ok",void 0);else{let a=i_(e),c=Oj(e.serverSyncTree_,t,s,a);Df(e.eventQueue_,c),e.server_.merge(t.toString(),n,(l,u)=>{let d=l==="ok";d||tt("update at "+t+" failed: "+l);let f=Rr(e.serverSyncTree_,a,!d),h=f.length>0?os(e,t):t;Bt(e.eventQueue_,h,f),Ay(e,r,l,u)}),Be(n,l=>{let u=s_(e,de(t,l));os(e,u)}),Bt(e.eventQueue_,t,[])}}function fU(e){mc(e,"onDisconnectEvents");let t=bf(e),n=Xd();cy(e.onDisconnect_,Y(),(i,o)=>{let s=l0(i,o,e.serverSyncTree_,t);WS(n,i,s)});let r=[];cy(n,Y(),(i,o)=>{r=r.concat(pc(e.serverSyncTree_,i,o));let s=s_(e,i);os(e,s)}),e.onDisconnect_=Xd(),Bt(e.eventQueue_,Y(),r)}function hU(e,t,n){let r;$(t._path)===".info"?r=Iy(e.infoSyncTree_,t,n):r=Iy(e.serverSyncTree_,t,n),m0(e.eventQueue_,t._path,r)}function gS(e,t,n){let r;$(t._path)===".info"?r=uf(e.infoSyncTree_,t,n):r=uf(e.serverSyncTree_,t,n),m0(e.eventQueue_,t._path,r)}function pU(e){e.persistentConnection_&&e.persistentConnection_.interrupt(iU)}function mc(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),Ue(n,...t)}function Ay(e,t,n,r){t&&cs(()=>{if(n==="ok")t(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,t(s)}})}function y0(e,t,n){return Zy(e.serverSyncTree_,t,n)||V.EMPTY_NODE}function o_(e,t=e.transactionQueueTree_){if(t||Tf(e,t),us(t)){let n=E0(e,t);y(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&gU(e,gc(t),n)}else f0(t)&&Ef(t,n=>{o_(e,n)})}function gU(e,t,n){let r=n.map(l=>l.currentWriteId),i=y0(e,t,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];y(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=et(t,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=t;e.server_.put(c.toString(),a,l=>{mc(e,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(Rr(e.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Tf(e,t_(e.transactionQueueTree_,t)),o_(e,e.transactionQueueTree_),Bt(e.eventQueue_,t,u);for(let f=0;f<d.length;f++)cs(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{tt("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}os(e,t)}},s)}function os(e,t){let n=_0(e,t),r=gc(n),i=E0(e,n);return mU(e,i,r),r}function mU(e,t,n){if(t.length===0)return;let r=[],i=[],s=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let c=t[a],l=et(n,c.path),u=!1,d;if(y(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(Rr(e.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=oU)u=!0,d="maxretry",i=i.concat(Rr(e.serverSyncTree_,c.currentWriteId,!0));else{let f=y0(e,c.path,s);c.currentInputSnapshot=f;let h=t[a].update(f.val());if(h!==void 0){wf("transaction failed: Data returned ",h,c.path);let g=Ne(h);typeof h=="object"&&h!=null&&sn(h,".priority")||(g=g.updatePriority(f.getPriority()));let T=c.currentWriteId,M=bf(e),ht=u0(g,f,M);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=ht,c.currentWriteId=i_(e),s.splice(s.indexOf(T),1),i=i.concat(i0(e.serverSyncTree_,c.path,ht,c.currentWriteId,c.applyLocally)),i=i.concat(Rr(e.serverSyncTree_,T,!0))}else u=!0,d="nodata",i=i.concat(Rr(e.serverSyncTree_,c.currentWriteId,!0))}Bt(e.eventQueue_,n,i),i=[],u&&(t[a].status=2,(function(f){setTimeout(f,Math.floor(0))})(t[a].unwatcher),t[a].onComplete&&(d==="nodata"?r.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):r.push(()=>t[a].onComplete(new Error(d),!1,null))))}Tf(e,e.transactionQueueTree_);for(let a=0;a<r.length;a++)cs(r[a]);o_(e,e.transactionQueueTree_)}function _0(e,t){let n,r=e.transactionQueueTree_;for(n=$(t);n!==null&&us(r)===void 0;)r=t_(r,n),t=ie(t),n=$(t);return r}function E0(e,t){let n=[];return I0(e,t,n),n.sort((r,i)=>r.order-i.order),n}function I0(e,t,n){let r=us(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Ef(t,i=>{I0(e,i,n)})}function Tf(e,t){let n=us(t);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,d0(t,n.length>0?n:void 0)}Ef(t,r=>{Tf(e,r)})}function s_(e,t){let n=gc(_0(e,t)),r=t_(e.transactionQueueTree_,t);return qj(r,i=>{Lv(e,i)}),Lv(e,r),h0(r,i=>{Lv(e,i)}),n}function Lv(e,t){let n=us(t);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(y(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(y(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(Rr(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?d0(t,void 0):n.length=o+1,Bt(e.eventQueue_,gc(t),i);for(let s=0;s<r.length;s++)cs(r[s])}}function vU(e){let t="",n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function yU(e){let t={};e.charAt(0)==="?"&&(e=e.substring(1));for(let n of e.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):tt(`Invalid query segment '${n}' in query '${e}'`)}return t}var mS=function(e,t){let n=_U(e),r=n.namespace;n.domain==="firebase.com"&&Xn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Xn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||qL();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Gd(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new J(n.pathString)}},_U=function(e){let t="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof e=="string"){let l=e.indexOf("//");l>=0&&(a=e.substring(0,l-1),e=e.substring(l+2));let u=e.indexOf("/");u===-1&&(u=e.length);let d=e.indexOf("?");d===-1&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=vU(e.substring(u,d)));let f=yU(e.substring(Math.min(e.length,d)));l=t.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(t.substring(l+1),10)):l=t.length;let h=t.slice(0,l);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let g=t.indexOf(".");r=t.substring(0,g).toLowerCase(),n=t.substring(g+1),o=r}"ns"in f&&(o=f.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var df=class{constructor(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+be(this.snapshot.exportVal())}},ff=class{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var hf=class{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return y(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var ss=class e{constructor(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return W(this._path)?null:Uy(this._path)}get ref(){return new Rn(this._repo,this._path)}get _queryIdentifier(){let t=nS(this._queryParams),n=Vy(t);return n==="{}"?"default":n}get _queryObject(){return nS(this._queryParams)}isEqual(t){if(t=_e(t),!(t instanceof e))return!1;let n=this._repo===t._repo,r=By(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+TV(this._path)}};function EU(e,t){if(e._orderByCalled===!0)throw new Error(t+": You can't combine multiple orderBy calls.")}function a_(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Mi){let r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==Ri)throw new Error(r);if(typeof t!="string")throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==kr)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(e.getIndex()===ce){if(t!=null&&!by(t)||n!=null&&!by(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(y(e.getIndex()instanceof nc||e.getIndex()===HS,"unknown index type."),t!=null&&typeof t=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function C0(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Rn=class e extends ss{constructor(t,n){super(t,n,new oy,!1)}get parent(){let t=FS(this._path);return t===null?null:new e(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},uc=class e{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let n=new J(t),r=pf(this.ref,t);return new e(this._node.getChild(n),r,ce)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>t(new e(i,pf(this.ref,r),ce)))}hasChild(t){let n=new J(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function Ht(e,t){return e=_e(e),e._checkNotDeleted("ref"),t!==void 0?pf(e._root,t):e._root}function pf(e,t){return e=_e(e),$(e._path)===null?tU("child","path",t,!1):n_("child","path",t,!1),new Rn(e._repo,de(e._path,t))}function c_(e){return g0("remove",e._path),Sf(e,null)}function Sf(e,t){e=_e(e),g0("set",e._path),Cf("set",t,e._path,!1);let n=new Qn;return uU(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function Af(e,t){Xj("update",t,e._path,!1);let n=new Qn;return dU(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}function w0(e){e=_e(e);let t=new hf(()=>{}),n=new gf(t);return lU(e._repo,e,n).then(r=>new uc(r,new Rn(e._repo,e._path),e._queryParams.getIndex()))}var gf=class e{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){let r=n._queryParams.getIndex();return new df("value",this,new uc(t.snapshotNode,new Rn(n._repo,n._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new ff(this,t,n):null}matches(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Ny=class e{constructor(t,n){this.eventType=t,this.callbackContext=n}respondsTo(t){let n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new ff(this,t,n):null}createEvent(t,n){y(t.childName!=null,"Child events should have a childName.");let r=pf(new Rn(n._repo,n._path),t.childName),i=n._queryParams.getIndex();return new df(t.type,this,new uc(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function IU(e,t,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{gS(e._repo,e,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let s=new hf(n,o||void 0),a=t==="value"?new gf(s):new Ny(t,s);return hU(e._repo,e,a),()=>gS(e._repo,e,a)}function vc(e,t,n,r){return IU(e,"value",t,n,r)}var as=class{},My=class extends as{constructor(t,n){super(),this._value=t,this._key=n,this.type="endAt"}_apply(t){Cf("endAt",this._value,t._path,!0);let n=$V(t._queryParams,this._value,this._key);if(C0(n),a_(n),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ss(t._repo,t._path,n,t._orderByCalled)}};var Ry=class extends as{constructor(t,n){super(),this._value=t,this._key=n,this.type="startAt"}_apply(t){Cf("startAt",this._value,t._path,!0);let n=HV(t._queryParams,this._value,this._key);if(C0(n),a_(n),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ss(t._repo,t._path,n,t._orderByCalled)}};var xy=class extends as{constructor(t){super(),this._path=t,this.type="orderByChild"}_apply(t){EU(t,"orderByChild");let n=new J(this._path);if(W(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let r=new nc(n),i=WV(t._queryParams,r);return a_(i),new ss(t._repo,t._path,i,!0)}};function D0(e){if(e==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(e==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(e==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return n_("orderByChild","path",e,!1),new xy(e)}var Oy=class extends as{constructor(t,n){super(),this._value=t,this._key=n,this.type="equalTo"}_apply(t){if(Cf("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new My(this._value,this._key)._apply(new Ry(this._value,this._key)._apply(t))}};function b0(e,t){return eU("equalTo","key",t,!0),new Oy(e,t)}function T0(e,...t){let n=_e(e);for(let r of t)n=r._apply(n);return n}bj(Rn);Mj(Rn);var CU="FIREBASE_DATABASE_EMULATOR_HOST",ky={},wU=!1;function DU(e,t,n,r){let i=t.lastIndexOf(":"),o=t.substring(0,i),s=Sr(o);e.repoInfo_=new Gd(t,s,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}function bU(e,t,n,r,i){let o=r||e.options.databaseURL;o===void 0&&(e.options.projectId||Xn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ue("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let s=mS(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[CU]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=mS(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new Qa(Qa.OWNER):new $v(e.name,e.options,t);nU("Invalid Firebase Database URL",s),W(s.path)||Xn("Database URL must point to the root of a Firebase Database (not including a child path).");let d=SU(a,e,u,new Hv(e,n));return new Py(d,e)}function TU(e,t){let n=ky[t];(!n||n[e.key]!==e)&&Xn(`Database ${t}(${e.repoInfo_}) has already been deleted.`),pU(e),delete n[e.key]}function SU(e,t,n,r){let i=ky[t.name];i||(i={},ky[t.name]=i);let o=i[e.toURLString()];return o&&Xn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Sy(e,wU,n,r),i[e.toURLString()]=o,o}var Py=class{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(sU(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Rn(this._repo,Y())),this._rootInternal}_delete(){return this._rootInternal!==null&&(TU(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Xn("Cannot call "+t+" on a deleted database.")}};function S0(e=Ti(),t){let n=an(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){let r=mT("database");r&&AU(n,...r)}return n}function AU(e,t,n,r={}){e=_e(e),e._checkNotDeleted("useEmulator");let i=`${t}:${n}`,o=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&Vt(r,o.repoInfo_.emulatorOptions))return;Xn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let s;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Xn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Qa(Qa.OWNER);else if(r.mockUserToken){let a=typeof r.mockUserToken=="string"?r.mockUserToken:vT(r.mockUserToken,e.app.options.projectId);s=new Qa(a)}Sr(t)&&(Od(t),kd("Database",!0)),DU(o,i,r,s)}function NU(e){WL(Mr),ft(new xe("database",(t,{instanceIdentifier:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return bU(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),je(jT,UT,e),je(jT,UT,"esm2020")}Hy.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};Hy.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};NU();var MU="firebase",RU="12.7.0";je(MU,RU,"app");var M0="@firebase/installations",f_="0.6.19";var R0=1e4,x0=`w:${f_}`,O0="FIS_v2",xU="https://firebaseinstallations.googleapis.com/v1",OU=3600*1e3,kU="installations",PU="Installations";var FU={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Fi=new Ct(kU,PU,FU);function k0(e){return e instanceof Xe&&e.code.includes("request-failed")}function P0({projectId:e}){return`${xU}/projects/${e}/installations`}function F0(e){return{token:e.token,requestStatus:2,expiresIn:VU(e.expiresIn),creationTime:Date.now()}}function L0(e,t){return p(this,null,function*(){let r=(yield t.json()).error;return Fi.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function V0({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function LU(e,{refreshToken:t}){let n=V0(e);return n.append("Authorization",jU(t)),n}function j0(e){return p(this,null,function*(){let t=yield e();return t.status>=500&&t.status<600?e():t})}function VU(e){return Number(e.replace("s","000"))}function jU(e){return`${O0} ${e}`}function UU(r,i){return p(this,arguments,function*({appConfig:e,heartbeatServiceProvider:t},{fid:n}){let o=P0(e),s=V0(e),a=t.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}let c={fid:n,authVersion:O0,appId:e.appId,sdkVersion:x0},l={method:"POST",headers:s,body:JSON.stringify(c)},u=yield j0(()=>fetch(o,l));if(u.ok){let d=yield u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:F0(d.authToken)}}else throw yield L0("Create Installation",u)})}function U0(e){return new Promise(t=>{setTimeout(t,e)})}function BU(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}var HU=/^[cdef][\w-]{21}$/,d_="";function $U(){try{let e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;let n=WU(e);return HU.test(n)?n:d_}catch{return d_}}function WU(e){return BU(e).substr(0,22)}function Mf(e){return`${e.appName}!${e.appId}`}var B0=new Map;function H0(e,t){let n=Mf(e);$0(n,t),GU(n,t)}function $0(e,t){let n=B0.get(e);if(n)for(let r of n)r(t)}function GU(e,t){let n=zU();n&&n.postMessage({key:e,fid:t}),qU()}var Pi=null;function zU(){return!Pi&&"BroadcastChannel"in self&&(Pi=new BroadcastChannel("[Firebase] FID Change"),Pi.onmessage=e=>{$0(e.data.key,e.data.fid)}),Pi}function qU(){B0.size===0&&Pi&&(Pi.close(),Pi=null)}var YU="firebase-installations-database",KU=1,Li="firebase-installations-store",l_=null;function h_(){return l_||(l_=Bd(YU,KU,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Li)}}})),l_}function Nf(e,t){return p(this,null,function*(){let n=Mf(e),i=(yield h_()).transaction(Li,"readwrite"),o=i.objectStore(Li),s=yield o.get(n);return yield o.put(t,n),yield i.done,(!s||s.fid!==t.fid)&&H0(e,t.fid),t})}function W0(e){return p(this,null,function*(){let t=Mf(e),r=(yield h_()).transaction(Li,"readwrite");yield r.objectStore(Li).delete(t),yield r.done})}function Rf(e,t){return p(this,null,function*(){let n=Mf(e),i=(yield h_()).transaction(Li,"readwrite"),o=i.objectStore(Li),s=yield o.get(n),a=t(s);return a===void 0?yield o.delete(n):yield o.put(a,n),yield i.done,a&&(!s||s.fid!==a.fid)&&H0(e,a.fid),a})}function p_(e){return p(this,null,function*(){let t,n=yield Rf(e.appConfig,r=>{let i=ZU(r),o=QU(e,i);return t=o.registrationPromise,o.installationEntry});return n.fid===d_?{installationEntry:yield t}:{installationEntry:n,registrationPromise:t}})}function ZU(e){let t=e||{fid:$U(),registrationStatus:0};return G0(t)}function QU(e,t){if(t.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(Fi.create("app-offline"));return{installationEntry:t,registrationPromise:i}}let n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=JU(e,n);return{installationEntry:n,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:XU(e)}:{installationEntry:t}}function JU(e,t){return p(this,null,function*(){try{let n=yield UU(e,t);return Nf(e.appConfig,n)}catch(n){throw k0(n)&&n.customData.serverCode===409?yield W0(e.appConfig):yield Nf(e.appConfig,{fid:t.fid,registrationStatus:0}),n}})}function XU(e){return p(this,null,function*(){let t=yield A0(e.appConfig);for(;t.registrationStatus===1;)yield U0(100),t=yield A0(e.appConfig);if(t.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield p_(e);return r||n}return t})}function A0(e){return Rf(e,t=>{if(!t)throw Fi.create("installation-not-found");return G0(t)})}function G0(e){return eB(e)?{fid:e.fid,registrationStatus:0}:e}function eB(e){return e.registrationStatus===1&&e.registrationTime+R0<Date.now()}function tB(r,i){return p(this,arguments,function*({appConfig:e,heartbeatServiceProvider:t},n){let o=nB(e,n),s=LU(e,n),a=t.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}let c={installation:{sdkVersion:x0,appId:e.appId}},l={method:"POST",headers:s,body:JSON.stringify(c)},u=yield j0(()=>fetch(o,l));if(u.ok){let d=yield u.json();return F0(d)}else throw yield L0("Generate Auth Token",u)})}function nB(e,{fid:t}){return`${P0(e)}/${t}/authTokens:generate`}function g_(e,t=!1){return p(this,null,function*(){let n,r=yield Rf(e.appConfig,o=>{if(!z0(o))throw Fi.create("not-registered");let s=o.authToken;if(!t&&oB(s))return o;if(s.requestStatus===1)return n=rB(e,t),o;{if(!navigator.onLine)throw Fi.create("app-offline");let a=aB(o);return n=iB(e,a),a}});return n?yield n:r.authToken})}function rB(e,t){return p(this,null,function*(){let n=yield N0(e.appConfig);for(;n.authToken.requestStatus===1;)yield U0(100),n=yield N0(e.appConfig);let r=n.authToken;return r.requestStatus===0?g_(e,t):r})}function N0(e){return Rf(e,t=>{if(!z0(t))throw Fi.create("not-registered");let n=t.authToken;return cB(n)?S(m({},t),{authToken:{requestStatus:0}}):t})}function iB(e,t){return p(this,null,function*(){try{let n=yield tB(e,t),r=S(m({},t),{authToken:n});return yield Nf(e.appConfig,r),n}catch(n){if(k0(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield W0(e.appConfig);else{let r=S(m({},t),{authToken:{requestStatus:0}});yield Nf(e.appConfig,r)}throw n}})}function z0(e){return e!==void 0&&e.registrationStatus===2}function oB(e){return e.requestStatus===2&&!sB(e)}function sB(e){let t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+OU}function aB(e){let t={requestStatus:1,requestTime:Date.now()};return S(m({},e),{authToken:t})}function cB(e){return e.requestStatus===1&&e.requestTime+R0<Date.now()}function lB(e){return p(this,null,function*(){let t=e,{installationEntry:n,registrationPromise:r}=yield p_(t);return r?r.catch(console.error):g_(t).catch(console.error),n.fid})}function uB(e,t=!1){return p(this,null,function*(){let n=e;return yield dB(n),(yield g_(n,t)).token})}function dB(e){return p(this,null,function*(){let{registrationPromise:t}=yield p_(e);t&&(yield t)})}function fB(e){if(!e||!e.options)throw u_("App Configuration");if(!e.name)throw u_("App Name");let t=["projectId","apiKey","appId"];for(let n of t)if(!e.options[n])throw u_(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function u_(e){return Fi.create("missing-app-config-values",{valueName:e})}var q0="installations",hB="installations-internal",pB=e=>{let t=e.getProvider("app").getImmediate(),n=fB(t),r=an(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},gB=e=>{let t=e.getProvider("app").getImmediate(),n=an(t,q0).getImmediate();return{getId:()=>lB(n),getToken:i=>uB(n,i)}};function mB(){ft(new xe(q0,pB,"PUBLIC")),ft(new xe(hB,gB,"PRIVATE"))}mB();je(M0,f_);je(M0,f_,"esm2020");var xf="analytics",vB="firebase_id",yB="origin",_B=60*1e3,EB="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",C_="https://www.googletagmanager.com/gtag/js";var rt=new Sn("@firebase/analytics");var IB={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Dt=new Ct("analytics","Analytics",IB);function CB(e){if(!e.startsWith(C_)){let t=Dt.create("invalid-gtag-resource",{gtagURL:e});return rt.warn(t.message),""}return e}function eA(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function wB(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function DB(e,t){let n=wB("firebase-js-sdk-policy",{createScriptURL:CB}),r=document.createElement("script"),i=`${C_}?l=${e}&id=${t}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function bB(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}function TB(e,t,n,r,i,o){return p(this,null,function*(){let s=r[i];try{if(s)yield t[s];else{let c=(yield eA(n)).find(l=>l.measurementId===i);c&&(yield t[c.appId])}}catch(a){rt.error(a)}e("config",i,o)})}function SB(e,t,n,r,i){return p(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield eA(n);for(let c of s){let l=a.find(d=>d.measurementId===c),u=l&&t[l.appId];if(u)o.push(u);else{o=[];break}}}o.length===0&&(o=Object.values(t)),yield Promise.all(o),e("event",r,i||{})}catch(o){rt.error(o)}})}function AB(e,t,n,r){function i(o,...s){return p(this,null,function*(){try{if(o==="event"){let[a,c]=s;yield SB(e,t,n,a,c)}else if(o==="config"){let[a,c]=s;yield TB(e,t,n,r,a,c)}else if(o==="consent"){let[a,c]=s;e("consent",a,c)}else if(o==="get"){let[a,c,l]=s;e("get",a,c,l)}else if(o==="set"){let[a]=s;e("set",a)}else e(o,...s)}catch(a){rt.error(a)}})}return i}function NB(e,t,n,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=AB(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}function MB(e){let t=window.document.getElementsByTagName("script");for(let n of Object.values(t))if(n.src&&n.src.includes(C_)&&n.src.includes(e))return n;return null}var RB=30,xB=1e3,v_=class{constructor(t={},n=xB){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}},tA=new v_;function OB(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function kB(e){return p(this,null,function*(){let{appId:t,apiKey:n}=e,r={method:"GET",headers:OB(n)},i=EB.replace("{app-id}",t),o=yield fetch(i,r);if(o.status!==200&&o.status!==304){let s="";try{let a=yield o.json();a.error?.message&&(s=a.error.message)}catch{}throw Dt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s})}return o.json()})}function PB(r){return p(this,arguments,function*(e,t=tA,n){let{appId:i,apiKey:o,measurementId:s}=e.options;if(!i)throw Dt.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw Dt.create("no-api-key")}let a=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new y_;return setTimeout(()=>p(null,null,function*(){c.abort()}),n!==void 0?n:_B),nA({appId:i,apiKey:o,measurementId:s},a,c,t)})}function nA(o,s,a){return p(this,arguments,function*(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=tA){let{appId:c,measurementId:l}=e;try{yield FB(r,t)}catch(u){if(l)return rt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:c,measurementId:l};throw u}try{let u=yield kB(e);return i.deleteThrottleMetadata(c),u}catch(u){let d=u;if(!LB(d)){if(i.deleteThrottleMetadata(c),l)return rt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:c,measurementId:l};throw u}let f=Number(d?.customData?.httpStatus)===503?mv(n,i.intervalMillis,RB):mv(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return i.setThrottleMetadata(c,h),rt.debug(`Calling attemptFetch again in ${f} millis`),nA(e,h,r,i)}})}function FB(e,t){return new Promise((n,r)=>{let i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(o),r(Dt.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function LB(e){if(!(e instanceof Xe)||!e.customData)return!1;let t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var y_=class{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}};var __;function VB(e,t,n,r,i){return p(this,null,function*(){if(i&&i.global){e("event",n,r);return}else{let o=yield t,s=S(m({},r),{send_to:o});e("event",n,s)}})}function jB(e,t,n,r){return p(this,null,function*(){if(r&&r.global){let i={};for(let o of Object.keys(n))i[`user_properties.${o}`]=n[o];return e("set",i),Promise.resolve()}else{let i=yield t;e("config",i,{update:!0,user_properties:n})}})}var E_;function UB(e){E_=e}function BB(e){__=e}function HB(){return p(this,null,function*(){if(Ld())try{yield Vd()}catch(e){return rt.warn(Dt.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}else return rt.warn(Dt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function $B(e,t,n,r,i,o,s){return p(this,null,function*(){let a=PB(e);a.then(f=>{n[f.measurementId]=f.appId,e.options.measurementId&&f.measurementId!==e.options.measurementId&&rt.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>rt.error(f)),t.push(a);let c=HB().then(f=>{if(f)return r.getId()}),[l,u]=yield Promise.all([a,c]);MB(o)||DB(o,l.measurementId),E_&&(i("consent","default",E_),UB(void 0)),i("js",new Date);let d=s?.config??{};return d[yB]="firebase",d.update=!0,u!=null&&(d[vB]=u),i("config",l.measurementId,d),__&&(i("set",__),BB(void 0)),l.measurementId})}var I_=class{constructor(t){this.app=t}_delete(){return delete ds[this.app.options.appId],Promise.resolve()}},ds={},Y0=[],K0={},m_="dataLayer",WB="gtag",Z0,w_,Q0=!1;function GB(){let e=[];if(Pd()&&e.push("This is a browser extension environment."),ET()||e.push("Cookies are not available."),e.length>0){let t=e.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Dt.create("invalid-analytics-context",{errorInfo:t});rt.warn(n.message)}}function zB(e,t,n){GB();let r=e.options.appId;if(!r)throw Dt.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)rt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Dt.create("no-api-key");if(ds[r]!=null)throw Dt.create("already-exists",{id:r});if(!Q0){bB(m_);let{wrappedGtag:o,gtagCore:s}=NB(ds,Y0,K0,m_,WB);w_=o,Z0=s,Q0=!0}return ds[r]=$B(e,Y0,K0,t,Z0,m_,n),new I_(e)}function rA(e=Ti()){e=_e(e);let t=an(e,xf);return t.isInitialized()?t.getImmediate():qB(e)}function qB(e,t={}){let n=an(e,xf);if(n.isInitialized()){let i=n.getImmediate();if(Vt(t,n.getOptions()))return i;throw Dt.create("already-initialized")}return n.initialize({options:t})}function YB(e,t,n){e=_e(e),jB(w_,ds[e.app.options.appId],t,n).catch(r=>rt.error(r))}function KB(e,t,n,r){e=_e(e),VB(w_,ds[e.app.options.appId],t,n,r).catch(i=>rt.error(i))}var J0="@firebase/analytics",X0="0.10.19";function ZB(){ft(new xe(xf,(t,{options:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return zB(r,i,n)},"PUBLIC")),ft(new xe("analytics-internal",e,"PRIVATE")),je(J0,X0),je(J0,X0,"esm2020");function e(t){try{let n=t.getProvider(xf).getImmediate();return{logEvent:(r,i,o)=>KB(n,r,i,o),setUserProperties:(r,i)=>YB(n,r,i)}}catch(n){throw Dt.create("interop-component-reg-failed",{reason:n})}}}ZB();function yA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var _A=yA,EA=new Ct("auth","Firebase",yA());var Vf=new Sn("@firebase/auth");function QB(e,...t){Vf.logLevel<=te.WARN&&Vf.warn(`Auth (${Mr}): ${e}`,...t)}function kf(e,...t){Vf.logLevel<=te.ERROR&&Vf.error(`Auth (${Mr}): ${e}`,...t)}function On(e,...t){throw B_(e,...t)}function un(e,...t){return B_(e,...t)}function U_(e,t,n){let r=S(m({},_A()),{[t]:n});return new Ct("auth","Firebase",r).create(t,{appName:e.name})}function Vi(e){return U_(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function JB(e,t,n){let r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&On(e,"argument-error"),U_(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function B_(e,...t){if(typeof e!="string"){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return EA.create(e,...t)}function x(e,t,...n){if(!e)throw B_(t,...n)}function er(e){let t="INTERNAL ASSERTION FAILED: "+e;throw kf(t),new Error(t)}function nr(e,t){e||er(t)}function T_(){return typeof self<"u"&&self.location?.href||""}function XB(){return iA()==="http:"||iA()==="https:"}function iA(){return typeof self<"u"&&self.location?.protocol||null}function e2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XB()||Pd()||"connection"in navigator)?navigator.onLine:!0}function t2(){if(typeof navigator>"u")return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var ji=class{constructor(t,n){this.shortDelay=t,this.longDelay=n,nr(n>t,"Short delay should be less than long delay!"),this.isMobile=ja()||Fd()}get(){return e2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function H_(e,t){nr(e.emulator,"Emulator should always be set here");let{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}var jf=class{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var n2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var r2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],i2=new ji(3e4,6e4);function $_(e,t){return e.tenantId&&!t.tenantId?S(m({},t),{tenantId:e.tenantId}):t}function hs(o,s,a,c){return p(this,arguments,function*(e,t,n,r,i={}){return IA(e,i,()=>p(null,null,function*(){let l={},u={};r&&(t==="GET"?u=r:l={body:JSON.stringify(r)});let d=Ar(m({key:e.config.apiKey},u)).slice(1),f=yield e._getAdditionalHeaders();f["Content-Type"]="application/json",e.languageCode&&(f["X-Firebase-Locale"]=e.languageCode);let h=m({method:t,headers:f},l);return yT()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&Sr(e.emulatorConfig.host)&&(h.credentials="include"),jf.fetch()(yield CA(e,e.config.apiHost,n,d),h)}))})}function IA(e,t,n){return p(this,null,function*(){e._canInitEmulator=!1;let r=m(m({},n2),t);try{let i=new S_(e),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Of(e,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Of(e,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Of(e,"email-already-in-use",s);if(c==="USER_DISABLED")throw Of(e,"user-disabled",s);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw U_(e,u,l);On(e,u)}}catch(i){if(i instanceof Xe)throw i;On(e,"network-request-failed",{message:String(i)})}})}function o2(o,s,a,c){return p(this,arguments,function*(e,t,n,r,i={}){let l=yield hs(e,t,n,r,i);return"mfaPendingCredential"in l&&On(e,"multi-factor-auth-required",{_serverResponse:l}),l})}function CA(e,t,n,r){return p(this,null,function*(){let i=`${t}${n}?${r}`,o=e,s=o.config.emulator?H_(e.config,i):`${e.config.apiScheme}://${i}`;return r2.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var S_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(un(this.auth,"network-request-failed")),i2.get())})}};function Of(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=un(e,t,r);return i.customData._tokenResponse=n,i}function s2(e,t){return p(this,null,function*(){return hs(e,"POST","/v1/accounts:delete",t)})}function Uf(e,t){return p(this,null,function*(){return hs(e,"POST","/v1/accounts:lookup",t)})}function yc(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function wA(e,t=!1){return p(this,null,function*(){let n=_e(e),r=yield n.getIdToken(t),i=W_(r);x(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:yc(D_(i.auth_time)),issuedAtTime:yc(D_(i.iat)),expirationTime:yc(D_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function D_(e){return Number(e)*1e3}function W_(e){let[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return kf("JWT malformed, contained fewer than 3 sections"),null;try{let i=qo(n);return i?JSON.parse(i):(kf("Failed to decode base64 JWT payload"),null)}catch(i){return kf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function oA(e){let t=W_(e);return x(t,"internal-error"),x(typeof t.exp<"u","internal-error"),x(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}function Ec(e,t,n=!1){return p(this,null,function*(){if(n)return t;try{return yield t}catch(r){throw r instanceof Xe&&a2(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})}function a2({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}var A_=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;let n=this.getInterval(t);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),n)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ic=class{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=yc(this.lastLoginAt),this.creationTime=yc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Bf(e){return p(this,null,function*(){let t=e.auth,n=yield e.getIdToken(),r=yield Ec(e,Uf(t,{idToken:n}));x(r?.users.length,t,"internal-error");let i=r.users[0];e._notifyReloadListener(i);let o=i.providerUserInfo?.length?bA(i.providerUserInfo):[],s=c2(e.providerData,o),a=e.isAnonymous,c=!(e.email&&i.passwordHash)&&!s?.length,l=a?c:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ic(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(e,u)})}function DA(e){return p(this,null,function*(){let t=_e(e);yield Bf(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})}function c2(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function bA(e){return e.map(r=>{var i=r,{providerId:t}=i,n=Nc(i,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function l2(e,t){return p(this,null,function*(){let n=yield IA(e,{},()=>p(null,null,function*(){let r=Ar({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=e.config,s=yield CA(e,i,"/v1/token",`key=${o}`),a=yield e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return e.emulatorConfig&&Sr(e.emulatorConfig.host)&&(c.credentials="include"),jf.fetch()(s,c)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function u2(e,t){return p(this,null,function*(){return hs(e,"POST","/v2/accounts:revokeToken",$_(e,t))})}var _c=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){x(t.idToken,"internal-error"),x(typeof t.idToken<"u","internal-error"),x(typeof t.refreshToken<"u","internal-error");let n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):oA(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){x(t.length!==0,"internal-error");let n=oA(t);this.updateTokensAndExpiration(t,null,n)}getToken(t,n=!1){return p(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(x(this.refreshToken,t,"user-token-expired"),this.refreshToken?(yield this.refresh(t,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(t,n){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield l2(t,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new e;return r&&(x(typeof r=="string","internal-error",{appName:t}),s.refreshToken=r),i&&(x(typeof i=="string","internal-error",{appName:t}),s.accessToken=i),o&&(x(typeof o=="number","internal-error",{appName:t}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return er("not implemented")}};function Lr(e,t){x(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}var Vr=class e{constructor(o){var s=o,{uid:t,auth:n,stsTokenManager:r}=s,i=Nc(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new A_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ic(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(t){return p(this,null,function*(){let n=yield Ec(this,this.stsTokenManager.getToken(this.auth,t));return x(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(t){return wA(this,t)}reload(){return DA(this)}_assign(t){this!==t&&(x(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>m({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let n=new e(S(m({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){x(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,n=!1){return p(this,null,function*(){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&(yield Bf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){if(wt(this.auth.app))return Promise.reject(Vi(this.auth));let t=yield this.getIdToken();return yield Ec(this,s2(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return S(m({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>m({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){let r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:h,providerData:g,stsTokenManager:_}=n;x(d&&_,t,"internal-error");let T=_c.fromJSON(this.name,_);x(typeof d=="string",t,"internal-error"),Lr(r,t.name),Lr(i,t.name),x(typeof f=="boolean",t,"internal-error"),x(typeof h=="boolean",t,"internal-error"),Lr(o,t.name),Lr(s,t.name),Lr(a,t.name),Lr(c,t.name),Lr(l,t.name),Lr(u,t.name);let M=new e({uid:d,auth:t,email:i,emailVerified:f,displayName:r,isAnonymous:h,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:T,createdAt:l,lastLoginAt:u});return g&&Array.isArray(g)&&(M.providerData=g.map(ht=>m({},ht))),c&&(M._redirectEventId=c),M}static _fromIdTokenResponse(t,n,r=!1){return p(this,null,function*(){let i=new _c;i.updateFromServerResponse(n);let o=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return yield Bf(o),o})}static _fromGetAccountInfoResponse(t,n,r){return p(this,null,function*(){let i=n.users[0];x(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?bA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new _c;a.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ic(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var sA=new Map;function tr(e){nr(e instanceof Function,"Expected a class definition");let t=sA.get(e);return t?(nr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,sA.set(e,t),t)}var d2=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(n,r){return p(this,null,function*(){this.storage[n]=r})}_get(n){return p(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return p(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return e.type="NONE",e})(),N_=d2;function Pf(e,t,n){return`firebase:${e}:${t}:${n}`}var Hf=class e{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Pf(this.userKey,i.apiKey,o),this.fullPersistenceKey=Pf("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){return p(this,null,function*(){let t=yield this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){let n=yield Uf(this.auth,{idToken:t}).catch(()=>{});return n?Vr._fromGetAccountInfoResponse(this.auth,n,t):null}return Vr._fromJSON(this.auth,t)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){return p(this,null,function*(){if(this.persistence===t)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,n,r="authUser"){return p(this,null,function*(){if(!n.length)return new e(tr(N_),t,r);let i=(yield Promise.all(n.map(l=>p(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||tr(N_),s=Pf(r,t.config.apiKey,t.name),a=null;for(let l of n)try{let u=yield l._get(s);if(u){let d;if(typeof u=="string"){let f=yield Uf(t,{idToken:u}).catch(()=>{});if(!f)break;d=yield Vr._fromGetAccountInfoResponse(t,f,u)}else d=Vr._fromJSON(t,u);l!==o&&(a=d),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new e(o,t,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>p(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new e(o,t,r))})}};function aA(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(NA(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(TA(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(RA(t))return"Blackberry";if(xA(t))return"Webos";if(SA(t))return"Safari";if((t.includes("chrome/")||AA(t))&&!t.includes("edge/"))return"Chrome";if(MA(t))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if(r?.length===2)return r[1]}return"Other"}function TA(e=ze()){return/firefox\//i.test(e)}function SA(e=ze()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function AA(e=ze()){return/crios\//i.test(e)}function NA(e=ze()){return/iemobile/i.test(e)}function MA(e=ze()){return/android/i.test(e)}function RA(e=ze()){return/blackberry/i.test(e)}function xA(e=ze()){return/webos/i.test(e)}function G_(e=ze()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function f2(e=ze()){return G_(e)&&!!window.navigator?.standalone}function h2(){return _T()&&document.documentMode===10}function OA(e=ze()){return G_(e)||MA(e)||xA(e)||RA(e)||/windows phone/i.test(e)||NA(e)}function kA(e,t=[]){let n;switch(e){case"Browser":n=aA(ze());break;case"Worker":n=`${aA(ze())}-${e}`;break;default:n=e}let r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Mr}/${r}`}var M_=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){let r=o=>new Promise((s,a)=>{try{let c=t(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(t){return p(this,null,function*(){if(this.auth.currentUser===t)return;let n=[];try{for(let r of this.queue)yield r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function p2(n){return p(this,arguments,function*(e,t={}){return hs(e,"GET","/v2/passwordPolicy",$_(e,t))})}var g2=6,R_=class{constructor(t){let n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??g2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){let n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}};var x_=class{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $f(this),this.idTokenSubscription=new $f(this),this.beforeStateQueue=new M_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=EA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=tr(n)),this._initializationPromise=this.queue(()=>p(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield Hf.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let t=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(t,!0)}})}initializeCurrentUserFromIdToken(t){return p(this,null,function*(){try{let n=yield Uf(this,{idToken:t}),r=yield Vr._fromGetAccountInfoResponse(this,n,t);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(t){return p(this,null,function*(){if(wt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let n=yield this.assertedPersistence.getCurrentUser(),r=n,i=!1;if(t&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=yield this.tryRedirectSignIn(t);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return x(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(t){return p(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(t){return p(this,null,function*(){try{yield Bf(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)})}useDeviceLanguage(){this.languageCode=t2()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(t){return p(this,null,function*(){if(wt(this.app))return Promise.reject(Vi(this));let n=t?_e(t):null;return n&&x(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(t,n=!1){return p(this,null,function*(){if(!this._deleted)return t&&x(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(t)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(t),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return wt(this.app)?Promise.reject(Vi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(t){return wt(this.app)?Promise.reject(Vi(this)):this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(tr(t))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(t){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let t=yield p2(this),n=new R_(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Ct("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{let r=this.onAuthStateChanged(()=>{r(),t()},n)}})}revokeAccessToken(t){return p(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield u2(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(t,n){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)})}getOrInitRedirectPersistenceManager(t){return p(this,null,function*(){if(!this.redirectPersistenceManager){let n=t&&tr(t)||this._popupRedirectResolver;x(n,this,"argument-error"),this.redirectPersistenceManager=yield Hf.create(this,[tr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(t){return p(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null})}_persistUserIfCurrent(t){return p(this,null,function*(){if(t===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(t)}))})}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(x(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=t.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=t.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(t){return p(this,null,function*(){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?yield this.assertedPersistence.setCurrentUser(t):yield this.assertedPersistence.removeCurrentUser()})}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return x(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=kA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let n=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return p(this,null,function*(){if(wt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&QB(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Qf(e){return _e(e)}var $f=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=DT(n=>this.observer=n)}get next(){return x(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var z_={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function m2(e){z_=e}function v2(e){return z_.loadJS(e)}function y2(){return z_.gapiScript}function PA(e){return`__${e}${Math.floor(Math.random()*1e6)}`}function FA(e,t){let n=an(e,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Vt(o,t??{}))return i;On(i,"already-initialized")}return n.initialize({options:t})}function _2(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(tr);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function LA(e,t,n){let r=Qf(e);x(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=VA(t),{host:s,port:a}=E2(t),c=a===null?"":`:${a}`,l={url:`${o}//${s}${c}/`},u=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){x(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),x(Vt(l,r.config.emulator)&&Vt(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Sr(s)?(Od(`${o}//${s}${c}`),kd("Auth",!0)):i||I2()}function VA(e){let t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function E2(e){let t=VA(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:cA(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:cA(s)}}}function cA(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function I2(){function e(){let t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}var Cc=class{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return er("not implemented")}_getIdTokenResponse(t){return er("not implemented")}_linkToIdToken(t,n){return er("not implemented")}_getReauthenticationResolver(t){return er("not implemented")}};function fs(e,t){return p(this,null,function*(){return o2(e,"POST","/v1/accounts:signInWithIdp",$_(e,t))})}var C2="http://localhost",Wf=class e extends Cc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){let n=new e(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):On("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){let a=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=a,o=Nc(a,["providerId","signInMethod"]);if(!r||!i)return null;let s=new e(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(t){let n=this.buildRequest();return fs(t,n)}_linkToIdToken(t,n){let r=this.buildRequest();return r.idToken=n,fs(t,r)}_getReauthenticationResolver(t){let n=this.buildRequest();return n.autoCreate=!1,fs(t,n)}buildRequest(){let t={requestUri:C2,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Ar(n)}return t}};var wc=class{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}};var Gf=class extends wc{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}};var q_=(()=>{class e extends Gf{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return Wf._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return e.credentialFromTaggedObject(n)}static credentialFromError(n){return e.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return e.credential(r,i)}catch{return null}}}e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com";return e})();var Dc=class e{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static _fromIdTokenResponse(t,n,r,i=!1){return p(this,null,function*(){let o=yield Vr._fromIdTokenResponse(t,r,i),s=lA(r);return new e({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(t,n,r){return p(this,null,function*(){yield t._updateTokensIfNecessary(r,!0);let i=lA(r);return new e({user:t,providerId:i,_tokenResponse:r,operationType:n})})}};function lA(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var O_=class e extends Xe{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new e(t,n,r,i)}};function jA(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?O_._fromErrorAndOperation(e,o,t,r):o})}function w2(e,t,n=!1){return p(this,null,function*(){let r=yield Ec(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return Dc._forOperation(e,"link",r)})}function D2(e,t,n=!1){return p(this,null,function*(){let{auth:r}=e;if(wt(r.app))return Promise.reject(Vi(r));let i="reauthenticate";try{let o=yield Ec(e,jA(r,i,t,e),n);x(o.idToken,r,"internal-error");let s=W_(o.idToken);x(s,r,"internal-error");let{sub:a}=s;return x(e.uid===a,r,"user-mismatch"),Dc._forOperation(e,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&On(r,"user-mismatch"),o}})}function b2(e,t,n=!1){return p(this,null,function*(){if(wt(e.app))return Promise.reject(Vi(e));let r="signIn",i=yield jA(e,r,t),o=yield Dc._fromIdTokenResponse(e,r,i);return n||(yield e._updateCurrentUser(o.user)),o})}function UA(e,t,n,r){return _e(e).onIdTokenChanged(t,n,r)}function BA(e,t,n){return _e(e).beforeAuthStateChanged(t,n)}function Y_(e,t,n,r){return _e(e).onAuthStateChanged(t,n,r)}function K_(e){return _e(e).signOut()}var zf="__sak";var qf=class{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zf,"1"),this.storage.removeItem(zf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){let n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}};var T2=1e3,S2=10,A2=(()=>{class e extends qf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=OA(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);h2()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,S2):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},T2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return p(this,null,function*(){yield jr(e.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return p(this,null,function*(){let r=yield jr(e.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return p(this,null,function*(){yield jr(e.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return e.type="LOCAL",e})(),HA=A2;var N2=(()=>{class e extends qf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return e.type="SESSION",e})(),Z_=N2;function M2(e){return Promise.all(e.map(t=>p(null,null,function*(){try{return{fulfilled:!0,value:yield t}}catch(n){return{fulfilled:!1,reason:n}}})))}var R2=(()=>{class e{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new e(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return p(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(u=>p(this,null,function*(){return u(r.origin,s)})),l=yield M2(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}e.receivers=[];return e})();function Q_(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}var k_=class{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}_send(t,n,r=50){return p(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=Q_("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(d){let f=d;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(f.data.response);break;default:clearTimeout(u),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function xn(){return window}function x2(e){xn().location.href=e}function $A(){return typeof xn().WorkerGlobalScope<"u"&&typeof xn().importScripts=="function"}function O2(){return p(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function k2(){return navigator?.serviceWorker?.controller||null}function P2(){return $A()?self:null}var WA="firebaseLocalStorageDb",F2=1,Yf="firebaseLocalStorage",GA="fbase_key",Ui=class{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Jf(e,t){return e.transaction([Yf],t?"readwrite":"readonly").objectStore(Yf)}function L2(){let e=indexedDB.deleteDatabase(WA);return new Ui(e).toPromise()}function P_(){let e=indexedDB.open(WA,F2);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{let r=e.result;try{r.createObjectStore(Yf,{keyPath:GA})}catch(i){n(i)}}),e.addEventListener("success",()=>p(null,null,function*(){let r=e.result;r.objectStoreNames.contains(Yf)?t(r):(r.close(),yield L2(),t(yield P_()))}))})}function uA(e,t,n){return p(this,null,function*(){let r=Jf(e,!0).put({[GA]:t,value:n});return new Ui(r).toPromise()})}function V2(e,t){return p(this,null,function*(){let n=Jf(e,!1).get(t),r=yield new Ui(n).toPromise();return r===void 0?null:r.value})}function dA(e,t){let n=Jf(e,!0).delete(t);return new Ui(n).toPromise()}var j2=800,U2=3,B2=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return p(this,null,function*(){return this.db?this.db:(this.db=yield P_(),this.db)})}_withRetries(n){return p(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>U2)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return p(this,null,function*(){return $A()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return p(this,null,function*(){this.receiver=R2._getInstance(P2()),this.receiver._subscribe("keyChanged",(n,r)=>p(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>p(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return p(this,null,function*(){if(this.activeServiceWorker=yield O2(),!this.activeServiceWorker)return;this.sender=new k_(this.activeServiceWorker);let n=yield this.sender._send("ping",{},800);n&&n[0]?.fulfilled&&n[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return p(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||k2()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return p(this,null,function*(){try{if(!indexedDB)return!1;let n=yield P_();return yield uA(n,zf,"1"),yield dA(n,zf),!0}catch{}return!1})}_withPendingWrite(n){return p(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(i=>uA(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return p(this,null,function*(){let r=yield this._withRetries(i=>V2(i,n));return this.localCache[n]=r,r})}_remove(n){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(r=>dA(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return p(this,null,function*(){let n=yield this._withRetries(o=>{let s=Jf(o,!1).getAll();return new Ui(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>p(this,null,function*(){return this._poll()}),j2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return e.type="LOCAL",e})(),zA=B2;var Tee=PA("rcb"),See=new ji(3e4,6e4);function qA(e,t){return t?tr(t):(x(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}var bc=class extends Cc{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return fs(t,this._buildIdpRequest())}_linkToIdToken(t,n){return fs(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return fs(t,this._buildIdpRequest())}_buildIdpRequest(t){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}};function H2(e){return b2(e.auth,new bc(e),e.bypassAuthState)}function $2(e){let{auth:t,user:n}=e;return x(n,t,"internal-error"),D2(n,new bc(e),e.bypassAuthState)}function W2(e){return p(this,null,function*(){let{auth:t,user:n}=e;return x(n,t,"internal-error"),w2(n,new bc(e),e.bypassAuthState)})}var Kf=class{constructor(t,n,r,i,o=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((t,n)=>p(this,null,function*(){this.pendingPromise={resolve:t,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(t){return p(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=t;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return H2;case"linkViaPopup":case"linkViaRedirect":return W2;case"reauthViaPopup":case"reauthViaRedirect":return $2;default:On(this.auth,"internal-error")}}resolve(t){nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var G2=new ji(2e3,1e4);function J_(e,t,n){return p(this,null,function*(){if(wt(e.app))return Promise.reject(un(e,"operation-not-supported-in-this-environment"));let r=Qf(e);JB(e,t,wc);let i=qA(r,n);return new z2(r,"signInViaPopup",t,i).executeNotNull()})}var z2=(()=>{class e extends Kf{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}executeNotNull(){return p(this,null,function*(){let n=yield this.execute();return x(n,this.auth,"internal-error"),n})}onExecution(){return p(this,null,function*(){nr(this.filter.length===1,"Popup operations only handle one event");let n=Q_();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(un(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){let n=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(un(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,G2.get())};n()}}e.currentPopupAction=null;return e})(),q2="pendingRedirect",Ff=new Map,F_=class e extends Kf{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return p(this,null,function*(){let t=Ff.get(this.auth._key());if(!t){try{let r=(yield Y2(this.resolver,this.auth))?yield jr(e.prototype,this,"execute").call(this):null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}Ff.set(this.auth._key(),t)}return this.bypassAuthState||Ff.set(this.auth._key(),()=>Promise.resolve(null)),t()})}onAuthEvent(t){return p(this,null,function*(){if(t.type==="signInViaRedirect")return jr(e.prototype,this,"onAuthEvent").call(this,t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){let n=yield this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,jr(e.prototype,this,"onAuthEvent").call(this,t);this.resolve(null)}})}onExecution(){return p(this,null,function*(){})}cleanUp(){}};function Y2(e,t){return p(this,null,function*(){let n=Q2(t),r=Z2(e);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function K2(e,t){Ff.set(e._key(),t)}function Z2(e){return tr(e._redirectPersistence)}function Q2(e){return Pf(q2,e.config.apiKey,e.name)}function J2(e,t,n=!1){return p(this,null,function*(){if(wt(e.app))return Promise.reject(Vi(e));let r=Qf(e),i=qA(r,t),s=yield new F_(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,t)),s})}var X2=600*1e3,L_=class{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!eH(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!YA(t)){let r=t.error.code?.split("auth/")[1]||"internal-error";n.onError(un(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){let r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=X2&&this.cachedEventUids.clear(),this.cachedEventUids.has(fA(t))}saveEventToCache(t){this.cachedEventUids.add(fA(t)),this.lastProcessedEventTime=Date.now()}};function fA(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function YA({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function eH(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YA(e);default:return!1}}function tH(n){return p(this,arguments,function*(e,t={}){return hs(e,"GET","/v1/projects",t)})}var nH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rH=/^https?/;function iH(e){return p(this,null,function*(){if(e.config.emulator)return;let{authorizedDomains:t}=yield tH(e);for(let n of t)try{if(oH(n))return}catch{}On(e,"unauthorized-domain")})}function oH(e){let t=T_(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){let s=new URL(e);return s.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!rH.test(n))return!1;if(nH.test(e))return r===e;let i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var sH=new ji(3e4,6e4);function hA(){let e=xn().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function aH(e){return new Promise((t,n)=>{function r(){hA(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{hA(),n(un(e,"network-request-failed"))},timeout:sH.get()})}if(xn().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(xn().gapi?.load)r();else{let i=PA("iframefcb");return xn()[i]=()=>{gapi.load?r():n(un(e,"network-request-failed"))},v2(`${y2()}?onload=${i}`).catch(o=>n(o))}}).catch(t=>{throw Lf=null,t})}var Lf=null;function cH(e){return Lf=Lf||aH(e),Lf}var lH=new ji(5e3,15e3),uH="__/auth/iframe",dH="emulator/auth/iframe",fH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pH(e){let t=e.config;x(t.authDomain,e,"auth-domain-config-required");let n=t.emulator?H_(t,dH):`https://${e.config.authDomain}/${uH}`,r={apiKey:t.apiKey,appName:e.name,v:Mr},i=hH.get(e.config.apiHost);i&&(r.eid=i);let o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Ar(r).slice(1)}`}function gH(e){return p(this,null,function*(){let t=yield cH(e),n=xn().gapi;return x(n,e,"internal-error"),t.open({where:document.body,url:pH(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fH,dontclear:!0},r=>new Promise((i,o)=>p(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=un(e,"network-request-failed"),a=xn().setTimeout(()=>{o(s)},lH.get());function c(){xn().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var mH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vH=500,yH=600,_H="_blank",EH="http://localhost",Zf=class{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function IH(e,t,n,r=vH,i=yH){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=S(m({},mH),{width:r.toString(),height:i.toString(),top:o,left:s}),l=ze().toLowerCase();n&&(a=AA(l)?_H:n),TA(l)&&(t=t||EH,c.scrollbars="yes");let u=Object.entries(c).reduce((f,[h,g])=>`${f}${h}=${g},`,"");if(f2(l)&&a!=="_self")return CH(t||"",a),new Zf(null);let d=window.open(t||"",a,u);x(d,e,"popup-blocked");try{d.focus()}catch{}return new Zf(d)}function CH(e,t){let n=document.createElement("a");n.href=e,n.target=t;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var wH="__/auth/handler",DH="emulator/auth/handler",bH=encodeURIComponent("fac");function pA(e,t,n,r,i,o){return p(this,null,function*(){x(e.config.authDomain,e,"auth-domain-config-required"),x(e.config.apiKey,e,"invalid-api-key");let s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Mr,eventId:i};if(t instanceof wc){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",Ua(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(let[u,d]of Object.entries(o||{}))s[u]=d}if(t instanceof Gf){let u=t.getScopes().filter(d=>d!=="");u.length>0&&(s.scopes=u.join(","))}e.tenantId&&(s.tid=e.tenantId);let a=s;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield e._getAppCheckToken(),l=c?`#${bH}=${encodeURIComponent(c)}`:"";return`${TH(e)}?${Ar(a).slice(1)}${l}`})}function TH({config:e}){return e.emulator?H_(e,DH):`https://${e.authDomain}/${wH}`}var b_="webStorageSupport",V_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Z_,this._completeRedirectFn=J2,this._overrideRedirectResult=K2}_openPopup(t,n,r,i){return p(this,null,function*(){nr(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");let o=yield pA(t,n,r,T_(),i);return IH(t,o,Q_())})}_openRedirect(t,n,r,i){return p(this,null,function*(){yield this._originValidation(t);let o=yield pA(t,n,r,T_(),i);return x2(o),new Promise(()=>{})})}_initialize(t){let n=t._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(nr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(t){return p(this,null,function*(){let n=yield gH(t),r=new L_(t);return n.register("authEvent",i=>(x(i?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r})}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(b_,{type:b_},i=>{let o=i?.[0]?.[b_];o!==void 0&&n(!!o),On(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){let n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iH(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return OA()||SA()||G_()}},KA=V_;var gA="@firebase/auth",mA="1.12.0";var j_=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(t){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(t)}:null})}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){x(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function SH(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function AH(e){ft(new xe("auth",(t,{options:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;x(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kA(e)},l=new x_(r,i,o,c);return _2(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),ft(new xe("auth-internal",t=>{let n=Qf(t.getProvider("auth").getImmediate());return(r=>new j_(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),je(gA,mA,SH(e)),je(gA,mA,"esm2020")}var NH=300,MH=gv("authIdTokenMaxAge")||NH,vA=null,RH=e=>t=>p(null,null,function*(){let n=t&&(yield t.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>MH)return;let i=n?.token;vA!==i&&(vA=i,yield fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function X_(e=Ti()){let t=an(e,"auth");if(t.isInitialized())return t.getImmediate();let n=FA(e,{popupRedirectResolver:KA,persistence:[zA,HA,Z_]}),r=gv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=RH(o.toString());BA(n,s,()=>s(n.currentUser)),UA(n,a=>s(a))}}let i=hv("auth");return i&&LA(n,`http://${i}`),n}function xH(){return document.getElementsByTagName("head")?.[0]??document}m2({loadJS(e){return new Promise((t,n)=>{let r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{let o=un("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",xH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});AH("Browser");var OH={apiKey:"AIzaSyDgBCejpvZHSbQYGXSfSlLfAbzSzqjWouY",authDomain:"animatic-7d235.firebaseapp.com",databaseURL:"https://animatic-7d235-default-rtdb.firebaseio.com",projectId:"animatic-7d235",storageBucket:"animatic-7d235.firebasestorage.app",messagingSenderId:"737458226045",appId:"1:737458226045:web:8da82aec2fa8c12a18c214",measurementId:"G-KDGHMVCXKH"},Xf=Mv(OH),Xte=typeof window<"u"?rA(Xf):null,rr=typeof window<"u"?X_(Xf):null;var kn=(()=>{class e{collectionName="cards";db=S0(Xf);saveUserProfile(n,r){return p(this,null,function*(){let i=Ht(this.db,`users/${n}`),o=yield w0(i),s=o.exists()?o.val():void 0,a={displayName:r.displayName??s?.displayName??"",email:r.email??s?.email??"",profilePic:r.profilePic??s?.profilePic??null,lastLogin:r.lastLogin??Math.floor(Date.now()/1e3),createdAt:s?.createdAt??Date.now()};return Af(i,a)})}removeUndefined(n){return Object.fromEntries(Object.entries(n).filter(([r,i])=>i!==void 0))}createCard(n){return p(this,null,function*(){let r={title:n.title,description:n.description??"",animationType:n.animationType,font:n.font,backgroundColor:n.backgroundColor??"#ffffffff",createdAt:n.createdAt?n.createdAt.getTime():Date.now(),createdBy:n.createdBy},i={revealTime:n.revealTime?n.revealTime.getTime():null,createdBy:n.createdBy},o=this.removeUndefined(r),s=this.removeUndefined(i),a=Ht(this.db,`${this.collectionName}/${n.code}`),c=Ht(this.db,`cardsMeta/${n.code}`);return yield Sf(a,o),Sf(c,s)})}getCardMeta(n){return new k(r=>{let i=Ht(this.db,`cardsMeta/${n}`),o=vc(i,s=>{r.next(s.exists()?s.val():null)},s=>r.error(s));return()=>o()})}getCardByCode(n,r){let i=new k(s=>{let a=Ht(this.db,`${this.collectionName}/${n}`),c=vc(a,l=>s.next(l.exists()?l.val():null),l=>s.error(l));return()=>c()}),o=new k(s=>{let a=Ht(this.db,`cardsMeta/${n}`),c=vc(a,l=>s.next(l.exists()?l.val():null),l=>s.error(l));return()=>c()});return Wr([i,o]).pipe(U(([s,a])=>{if(!s)return null;let c=a&&a.createdBy||s.createdBy||null,l=a&&typeof a.revealTime<"u"?a.revealTime:null;return!(l!==null&&Date.now()>=l||l===null)&&!(!!r&&r===c)?null:{title:s.title,description:s.description,animationType:s.animationType,font:s.font,revealTime:l?new Date(l):void 0,code:n,createdBy:s.createdBy,createdAt:s.createdAt?new Date(s.createdAt):new Date(0)}}))}getUserCards(n){let r=T0(Ht(this.db,this.collectionName),D0("createdBy"),b0(n));return new k(i=>{let o=vc(r,s=>{let a=s.exists()?s.val():{},c=Object.keys(a||{}).map(l=>{let u=a[l];return{title:u.title,description:u.description,animationType:u.animationType,font:u.font,revealTime:void 0,code:l,createdBy:u.createdBy,createdAt:u.createdAt?new Date(u.createdAt):new Date(0)}});i.next(c.slice().sort((l,u)=>u.createdAt.getTime()-l.createdAt.getTime()))},s=>i.error(s));return()=>o()})}updateCard(n){return p(this,null,function*(){let r={title:n.title,description:n.description??"",animationType:n.animationType,font:n.font,backgroundColor:n.backgroundColor??"#ffffffff",createdAt:n.createdAt?n.createdAt.getTime():Date.now(),createdBy:n.createdBy},i={createdBy:n.createdBy};n.revealTime!==void 0&&(i.revealTime=n.revealTime?n.revealTime.getTime():null);let o=this.removeUndefined(r),s=this.removeUndefined(i),a=Ht(this.db,`${this.collectionName}/${n.code}`),c=Ht(this.db,`cardsMeta/${n.code}`);return yield Af(a,o),Af(c,s)})}deleteCard(n){return p(this,null,function*(){let r=Ht(this.db,`${this.collectionName}/${n}`),i=Ht(this.db,`cardsMeta/${n}`);return yield c_(r),c_(i)})}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var dn=(()=>{class e{provider=new q_;user$=this.authState();signInWithGoogle(){return p(this,null,function*(){return rr?(yield J_(rr,this.provider)).user:Promise.reject(new Error("Auth not initialized"))})}googleSignIn(){return this.signInWithGoogle()}signOut(){return rr?K_(rr):Promise.reject(new Error("Auth not initialized"))}authState(){return new k(n=>{if(!rr){n.next(null),n.complete();return}let r=Y_(rr,i=>n.next(i),i=>n.error(i));return()=>r()})}getCurrentUser(){return rr?rr.currentUser??null:null}static \u0275fac=function(r){return new(r||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function kH(e,t){e&1&&(b(0,"div",22),R(1," Title is required "),w())}function PH(e,t){e&1&&(b(0,"div",22),R(1," Animation type is required "),w())}function FH(e,t){e&1&&(b(0,"div",22),R(1," Font selection is required "),w())}var eE=(()=>{class e{fb;firebaseService;authService;router;route;cardForm;previewCard={};editMode=!1;cardCode=null;fonts=["Roboto","Open Sans","Bradley Hand","Cursive","Monospace"];animations=["fade-in","slide","typewriter"];constructor(n,r,i,o,s){this.fb=n,this.firebaseService=r,this.authService=i,this.router=o,this.route=s}ngOnInit(){this.cardForm=this.fb.group({title:["",Wo.required],description:[""],animationType:["",Wo.required],font:["",Wo.required],revealTime:[""]}),this.route.paramMap.subscribe(n=>{this.cardCode=n.get("code"),this.editMode=!!this.cardCode,this.editMode&&this.cardCode&&this.firebaseService.getCardByCode(this.cardCode,this.authService.getCurrentUser()?.uid).subscribe(r=>{r&&(this.cardForm.patchValue({title:r.title,description:r.description,animationType:r.animationType,font:r.font,revealTime:r.revealTime?this.formatDate(r.revealTime):""}),this.previewCard=r)})}),this.cardForm.valueChanges.subscribe(n=>this.previewCard=n)}formatDate(n){return new Date(n).toISOString().slice(0,16)}onSubmit(){return p(this,null,function*(){if(this.cardForm.invalid)return;let n=this.authService.getCurrentUser(),r=this.cardForm.value,i={code:this.editMode?this.cardCode:lT(),title:r.title,description:r.description,animationType:r.animationType,font:r.font,revealTime:r.revealTime?new Date(r.revealTime):void 0,createdBy:n?.uid||"anonymous",createdAt:new Date};this.editMode?(yield this.firebaseService.updateCard(i),this.router.navigate(["/dashboard"])):(yield this.firebaseService.createCard(i),this.router.navigate(["/view",i.code]))})}static \u0275fac=function(r){return new(r||e)(I(aT),I(kn),I(dn),I(ye),I(dt))};static \u0275cmp=Qe({type:e,selectors:[["app-creator-page"]],decls:51,vars:7,consts:[[1,"container","py-4"],[1,"text-center","fw-bold","mb-4"],[1,"needs-validation",3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"form-label","fw-semibold"],["type","text","formControlName","title","placeholder","Enter your title",1,"form-control"],["class","text-danger small",4,"ngIf"],["rows","3","formControlName","description","placeholder","Enter short message...",1,"form-control"],["formControlName","animationType",1,"form-select"],["value","","disabled","","selected",""],["value","fade-slide"],["value","pop"],["value","zoom"],["value","typewriter"],["formControlName","font",1,"form-select"],["value","Roboto"],["value","Poppins"],["value","Montserrat"],["value","Playfair Display"],["type","datetime-local","formControlName","revealTime",1,"form-control"],[1,"form-text"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],[1,"text-danger","small"]],template:function(r,i){if(r&1&&(b(0,"div",0)(1,"h2",1),R(2),w(),b(3,"form",2),ae("ngSubmit",function(){return i.onSubmit()}),b(4,"div",3)(5,"label",4),R(6,"Title *"),w(),me(7,"input",5),Le(8,kH,2,0,"div",6),w(),b(9,"div",3)(10,"label",4),R(11,"Description"),w(),me(12,"textarea",7),w(),b(13,"div",3)(14,"label",4),R(15,"Animation Type *"),w(),b(16,"select",8)(17,"option",9),R(18,"Select animation"),w(),b(19,"option",10),R(20,"Fade & Slide"),w(),b(21,"option",11),R(22,"Pop"),w(),b(23,"option",12),R(24,"Zoom"),w(),b(25,"option",13),R(26,"Typewriter"),w()(),Le(27,PH,2,0,"div",6),w(),b(28,"div",3)(29,"label",4),R(30,"Font *"),w(),b(31,"select",14)(32,"option",9),R(33,"Select font"),w(),b(34,"option",15),R(35,"Roboto"),w(),b(36,"option",16),R(37,"Poppins"),w(),b(38,"option",17),R(39,"Montserrat"),w(),b(40,"option",18),R(41,"Playfair Display"),w()(),Le(42,FH,2,0,"div",6),w(),b(43,"div",3)(44,"label",4),R(45,"Reveal Time (Optional)"),w(),me(46,"input",19),b(47,"div",20),R(48,"If set, card will be locked until this time."),w()(),b(49,"button",21),R(50),w()()()),r&2){let o,s,a;B(2),Xt(i.editMode?"Edit Card":"Create Your Card"),B(),Z("formGroup",i.cardForm),B(5),Z("ngIf",((o=i.cardForm.get("title"))==null?null:o.touched)&&((o=i.cardForm.get("title"))==null?null:o.invalid)),B(19),Z("ngIf",((s=i.cardForm.get("animationType"))==null?null:s.touched)&&((s=i.cardForm.get("animationType"))==null?null:s.invalid)),B(15),Z("ngIf",((a=i.cardForm.get("font"))==null?null:a.touched)&&((a=i.cardForm.get("font"))==null?null:a.invalid)),B(7),Z("disabled",i.cardForm.invalid),B(),In(" ",i.editMode?"Update Card":"Create Card"," ")}},dependencies:[ut,rn,cT,tT,iT,sT,Ad,Md,Kb,Zb,ov,sv],styles:[".creator-container[_ngcontent-%COMP%]{max-width:600px;margin:auto;padding:16px}.creator-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.preview[_ngcontent-%COMP%]{margin-top:24px;padding:16px;border:1px solid #ddd;border-radius:8px}.preview-card[_ngcontent-%COMP%]{padding:20px;text-align:center;border-radius:12px;background:#fafafa;box-shadow:0 2px 6px #0000001a}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn 1.5s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.slide[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn 1.2s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(-100%);opacity:0}to{transform:translate(0);opacity:1}}.typewriter[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .typewriter[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;border-right:2px solid black;animation:_ngcontent-%COMP%_typing 3s steps(30,end),_ngcontent-%COMP%_blink .75s step-end infinite}@keyframes _ngcontent-%COMP%_typing{0%{width:0}to{width:100%}}@keyframes _ngcontent-%COMP%_blink{50%{border-color:transparent}}"]})}return e})();function LH(e,t){e&1&&(b(0,"div",5)(1,"div",6)(2,"span",7),R(3,"Loading..."),w()()())}function VH(e,t){if(e&1&&(b(0,"div",8)(1,"h3",9),R(2,"This card will reveal in"),w(),b(3,"h1",10),R(4),w()()),e&2){let n=Re();B(4),Xt(n.countdown)}}function jH(e,t){if(e&1){let n=yr();b(0,"button",11),ae("click",function(){xt(n);let i=Re();return Ot(i.goFullscreen())}),R(1," View Fullscreen "),w()}}function UH(e,t){if(e&1&&(b(0,"div",12)(1,"h1",13),R(2),w(),b(3,"p",14),R(4),w()()),e&2){let n=Re();Z("ngClass",n.getAnimationClass()),B(),pi("font-family",n.card.font),B(),In(" ",n.card.title," "),B(),pi("font-family",n.card.font),B(),In(" ",n.card.description," ")}}var ZA=(()=>{class e{route;firebaseService;card=null;showFullscreenBtn=!0;countdown=null;timerSub=null;revealReady=!1;constructor(n,r){this.route=n,this.firebaseService=r}ngOnInit(){this.route.params.subscribe(n=>{let r=n.code;this.firebaseService.getCardMeta(r).subscribe(i=>{if(i)if(i.revealTime){let o=new Date(i.revealTime);o>new Date?(this.revealReady=!1,this.startCountdown(o)):(this.revealReady=!0,this.loadCard(r))}else this.revealReady=!0,this.loadCard(r)})})}loadCard(n){this.firebaseService.getCardByCode(n).subscribe(r=>{this.card=r,console.log("Card Loaded:",r)})}startCountdown(n){this.updateCountdown(n),this.timerSub=wh(1e3).subscribe(()=>{this.updateCountdown(n)})}updateCountdown(n){let r=new Date,i=n.getTime()-r.getTime();if(i<=0){this.countdown=null,this.revealReady=!0,this.timerSub&&(this.timerSub.unsubscribe(),this.timerSub=null),this.route.params.subscribe(c=>{let l=c.code;this.firebaseService.getCardByCode(l).subscribe(u=>{this.card=u})});return}let o=Math.floor(i/36e5),s=Math.floor(i%36e5/6e4),a=Math.floor(i%6e4/1e3);this.countdown=`${o}h ${s}m ${a}s`}goFullscreen(){this.showFullscreenBtn=!1,document.documentElement.requestFullscreen()}getAnimationClass(){if(!this.card)return"";switch(this.card.animationType){case"fade-in":return"fade-in";case"slide":return"slide";case"typewriter":return"typewriter";default:return""}}ngOnDestroy(){this.timerSub&&this.timerSub.unsubscribe()}static \u0275fac=function(r){return new(r||e)(I(dt),I(kn))};static \u0275cmp=Qe({type:e,selectors:[["app-view-page"]],decls:5,vars:4,consts:[[1,"container-fluid","p-0","text-center"],["class","d-flex justify-content-center align-items-center vh-100",4,"ngIf"],["class","vh-100 d-flex flex-column justify-content-center align-items-center",4,"ngIf"],["class","btn btn-dark position-fixed bottom-0 start-50 translate-middle-x mb-4 px-4 py-2 fw-semibold",3,"click",4,"ngIf"],["class","d-flex flex-column justify-content-center align-items-center vh-100 view-card px-3",3,"ngClass",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center","vh-100"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"vh-100","d-flex","flex-column","justify-content-center","align-items-center"],[1,"fw-bold","mb-3"],[1,"display-4","text-primary","fw-bold"],[1,"btn","btn-dark","position-fixed","bottom-0","start-50","translate-middle-x","mb-4","px-4","py-2","fw-semibold",3,"click"],[1,"d-flex","flex-column","justify-content-center","align-items-center","vh-100","view-card","px-3",3,"ngClass"],[1,"card-title","fw-bold","heavy-title","mb-3"],[1,"card-description","fs-4"]],template:function(r,i){r&1&&(b(0,"div",0),Le(1,LH,4,0,"div",1)(2,VH,5,1,"div",2)(3,jH,2,0,"button",3)(4,UH,5,7,"div",4),w()),r&2&&(B(),Z("ngIf",!i.card&&!i.countdown),B(),Z("ngIf",i.countdown&&!i.revealReady),B(),Z("ngIf",i.card&&i.revealReady&&i.showFullscreenBtn),B(),Z("ngIf",i.card&&i.revealReady))},dependencies:[ut,aa,rn],styles:[".view-card[_ngcontent-%COMP%]{text-align:center;background-color:#fff!important;color:#000!important;padding:20px;width:100%}.heavy-title[_ngcontent-%COMP%]{font-size:3rem;font-weight:900}.card-description[_ngcontent-%COMP%]{max-width:90%;line-height:1.5;font-weight:500}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn 1.5s ease-in-out both}.slide[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp 1.5s ease both}.typewriter[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;border-right:3px solid #000;animation:_ngcontent-%COMP%_typing 2.5s steps(30,end),_ngcontent-%COMP%_blink .75s step-end infinite}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(50px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_typing{0%{width:0}to{width:100%}}@keyframes _ngcontent-%COMP%_blink{50%{border-color:transparent}}"]})}return e})();var QA=(()=>{class e{name="Angular User";ngOnInit(){console.log("AnimaticLoaderComponent initialized")}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Qe({type:e,selectors:[["app-animatic-loader"]],decls:3,vars:0,consts:[[1,"animatic-loader"],[1,"animatic-title"]],template:function(r,i){r&1&&(Eu(0,"div",0)(1,"h1",1),R(2,"Animatic"),Iu()())},dependencies:[ut,Ci],styles:[".animatic-loader[_ngcontent-%COMP%]{position:fixed;height:80vh;width:100%;background:var(--bg-color);display:flex;flex-direction:column;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_fadeOut .8s ease forwards 2.2s}.animatic-title[_ngcontent-%COMP%]{font-size:4.5rem;font-weight:700;letter-spacing:4px;background:linear-gradient(90deg,#805bff,#3b82f6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;filter:drop-shadow(0 0 18px rgba(128,91,255,.65));animation:_ngcontent-%COMP%_pulseGlow 1.2s ease-in-out infinite alternate;text-transform:uppercase}@keyframes _ngcontent-%COMP%_pulseGlow{0%{filter:drop-shadow(0 0 5px rgba(128,91,255,.4));transform:scale(1)}to{filter:drop-shadow(0 0 22px rgba(59,130,246,.75));transform:scale(1.05)}}@keyframes _ngcontent-%COMP%_bounce{0%{transform:translateY(10px);opacity:.8}to{transform:translateY(-10px);opacity:1}}@keyframes _ngcontent-%COMP%_fadeOut{to{opacity:0;visibility:hidden}}"]})}return e})();function BH(e,t){e&1&&me(0,"app-animatic-loader")}function HH(e,t){if(e&1){let n=yr();b(0,"div",10)(1,"div",11)(2,"div",12),me(3,"i",13),w(),b(4,"h4",14),R(5),w(),b(6,"p",15),R(7),w(),b(8,"span",16),R(9),bu(10,"date"),w(),b(11,"div",17)(12,"button",18),ae("click",function(){let i=xt(n).$implicit,o=Re(4);return Ot(o.viewCard(i.code))}),me(13,"i",19),w(),b(14,"button",18),ae("click",function(){let i=xt(n).$implicit,o=Re(4);return Ot(o.editCard(i.code))}),me(15,"i",20),w(),b(16,"button",18),ae("click",function(){let i=xt(n).$implicit,o=Re(4);return Ot(o.copyShareLink(i.code))}),me(17,"i",21),w(),b(18,"button",22),ae("click",function(){let i=xt(n).$implicit,o=Re(4);return Ot(o.deleteCard(i.code))}),me(19,"i",23),w()()()()}if(e&2){let n=t.$implicit,r=Re(4);B(2),Z("ngClass",r.isLocked(n)?"locked":"unlocked"),B(),Z("ngClass",r.isLocked(n)?"bi-lock-fill":"bi-unlock-fill"),B(),pi("font-family",n.font),B(),In(" ",n.title," "),B(2),Xt(n.description||"No description yet"),B(2),Xt(jg(10,7,n.createdAt,"medium"))}}function $H(e,t){if(e&1&&(b(0,"div",8),Le(1,HH,20,10,"div",9),w()),e&2){let n=Re().ngIf;B(),Z("ngForOf",n)}}function WH(e,t){e&1&&(b(0,"div",24)(1,"p",25),R(2,"No Cards Yet"),w(),b(3,"button",6),R(4,"+ Create Card"),w()())}function GH(e,t){if(e&1&&(Cu(0),Le(1,$H,2,1,"div",7)(2,WH,5,0,"ng-template",null,0,Ug),wu()),e&2){let n=t.ngIf,r=Lg(3);B(),Z("ngIf",n.length>0)("ngIfElse",r)}}function zH(e,t){if(e&1&&(b(0,"div",3)(1,"div",4)(2,"h1",5),R(3,"Your Cards"),w(),b(4,"button",6),R(5," Create + "),w()(),Le(6,GH,4,2,"ng-container",1),bu(7,"async"),w()),e&2){let n=Re();B(6),Z("ngIf",Vg(7,1,n.userCards$))}}var JA=(()=>{class e{firebaseService;auth;router;userCards$=N([]);loading=!1;loggedInUser=null;isLoading=!0;destroy$=new oe;constructor(n,r,i){this.firebaseService=n,this.auth=r,this.router=i}ngOnInit(){setTimeout(()=>{this.isLoading=!1},3e3),this.userCards$=this.auth.user$.pipe(Me(n=>(this.loggedInUser={uid:n?.uid||"",displayName:n?.displayName||"",email:n?.email||"",profilePic:n?.photoURL||null},n?this.firebaseService.getUserCards(n.uid):N([]))))}editCard(n){console.log("Editing card:",n)}deleteCard(n){return p(this,null,function*(){if(confirm("Are you sure you want to delete this card?"))try{yield this.firebaseService.deleteCard(n),console.log(`Deleted card: ${n}`)}catch(r){console.error("Failed to delete card:",r)}})}isLocked(n){if(!n.revealTime)return!1;let r=new Date;return new Date(n.revealTime)>r}viewCard(n){this.router.navigate(["/view",n])}copyShareLink(n){let r=`${location.origin}/Animatic/view/${n}`;navigator.clipboard.writeText(r),alert("Link copied! \u{1F4CB}")}static \u0275fac=function(r){return new(r||e)(I(kn),I(dn),I(ye))};static \u0275cmp=Qe({type:e,selectors:[["app-dashboard"]],decls:2,vars:2,consts:[["noCards",""],[4,"ngIf"],["class","dashboard-container container py-5",4,"ngIf"],[1,"dashboard-container","container","py-5"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"dashboard-title"],["routerLink","/creator",1,"btn","create-btn"],["class","row g-4",4,"ngIf","ngIfElse"],[1,"row","g-4"],["class","col-12 col-sm-6 col-xl-4",4,"ngFor","ngForOf"],[1,"col-12","col-sm-6","col-xl-4"],[1,"animatic-card"],[1,"status-tag",3,"ngClass"],[1,"bi",3,"ngClass"],[1,"card-title"],[1,"card-desc"],[1,"card-date"],[1,"actions"],[3,"click"],[1,"bi","bi-eye-fill"],[1,"bi","bi-pencil-square"],[1,"bi","bi-share-fill"],[1,"del",3,"click"],[1,"bi","bi-trash-fill"],[1,"text-center","mt-5"],[1,"text-secondary","fw-semibold"]],template:function(r,i){r&1&&Le(0,BH,1,0,"app-animatic-loader",1)(1,zH,8,3,"div",2),r&2&&(Z("ngIf",i.isLoading),B(),Z("ngIf",!i.isLoading))},dependencies:[ut,aa,Uu,rn,Ci,Uo,QA,sm,am],styles:[".dashboard-title[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:800;letter-spacing:-1px}.create-btn[_ngcontent-%COMP%]{background:linear-gradient(90deg,#805bff,#3b82f6);color:#fff;border-radius:10px;padding:10px 22px;font-weight:700;border:none;transition:.3s ease;box-shadow:0 4px 12px #805bff59}.create-btn[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 10px 20px #805bff73}.premium-card[_ngcontent-%COMP%]{border-radius:18px;background:#ffffffd9;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:transform .25s ease,box-shadow .25s ease}.premium-card[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 15px 35px #0000001f}.card-preview[_ngcontent-%COMP%]{height:140px;border-radius:18px 18px 0 0;padding:14px;color:#000;position:relative}.badge-status[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:.75rem;padding:4px 8px;border-radius:6px}.preview-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;bottom:12px;text-shadow:0 2px 6px rgba(255,255,255,.8)}.preview-description[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500}.btn-action[_ngcontent-%COMP%]{border-radius:8px;padding:5px 10px;font-size:.8rem;transition:.25s}.view-btn[_ngcontent-%COMP%]{border:1px solid #16a34a;color:#16a34a}.view-btn[_ngcontent-%COMP%]:hover{background:#16a34a;color:#fff}.edit-btn[_ngcontent-%COMP%]{border:1px solid #2563eb;color:#2563eb}.edit-btn[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}.share-btn[_ngcontent-%COMP%]{border:1px solid #6b7280;color:#6b7280}.share-btn[_ngcontent-%COMP%]:hover{background:#6b7280;color:#fff}.delete-btn[_ngcontent-%COMP%]{border:1px solid #dc2626;color:#dc2626}.delete-btn[_ngcontent-%COMP%]:hover{background:#dc2626;color:#fff}.premium-card[_ngcontent-%COMP%]{background:#fff;border-radius:18px;padding:15px 18px;transition:.3s ease}.premium-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 15px 30px #0000001a}.status-ribbon[_ngcontent-%COMP%]{position:absolute;top:-6px;right:-6px;padding:6px 14px;border-radius:12px 12px 0;font-size:.75rem;font-weight:700;display:flex;align-items:center;gap:5px}.status-ribbon.unlocked[_ngcontent-%COMP%]{background:#10b981;color:#fff}.status-ribbon.locked[_ngcontent-%COMP%]{background:#facc15;color:#000}.card-title[_ngcontent-%COMP%]{font-weight:800;font-size:1.2rem}.btn-premium[_ngcontent-%COMP%]{background:#ffffff0d;border-radius:6px;font-size:.82rem;font-weight:600;padding:6px 12px;transition:.2s ease;color:var(--text-color)}.btn-premium[_ngcontent-%COMP%]:hover{background:var(--accent);color:#fff!important}.btn-premium.view[_ngcontent-%COMP%]{background:#10b98126;color:#064e3b}.btn-premium.view[_ngcontent-%COMP%]:hover{background:#10b981;color:#fff}.btn-premium.edit[_ngcontent-%COMP%]{background:#2563eb26;color:#1e3a8a}.btn-premium.edit[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}.btn-premium.share[_ngcontent-%COMP%]{background:#6b728026;color:#111827}.btn-premium.share[_ngcontent-%COMP%]:hover{background:#6b7280;color:#fff}.btn-premium.delete[_ngcontent-%COMP%]{background:#dc26261a;color:#991b1b}.btn-premium.delete[_ngcontent-%COMP%]:hover{background:#dc2626;color:#fff}.premium-card[_ngcontent-%COMP%]{background:var(--card-bg);color:var(--text-color);box-shadow:0 10px 25px var(--glow)}.card-title[_ngcontent-%COMP%]{color:var(--text-color)}.btn-premium.view[_ngcontent-%COMP%]{border-color:var(--accent)}.btn-premium.view[_ngcontent-%COMP%]:hover{background:var(--accent);color:#fff}.badge-status.unlocked[_ngcontent-%COMP%]{background:#00ffa5;color:#032;font-weight:700;box-shadow:0 0 10px #00ffa566}app-animatic-loader[_ngcontent-%COMP%]{transition:opacity .5s ease}.animatic-card[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:18px;padding:18px;position:relative;overflow:hidden;transition:.35s;display:flex;flex-direction:column;gap:10px;box-shadow:0 12px 25px var(--glow);border:1px solid rgba(255,255,255,.08)}.animatic-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px) scale(1.02);box-shadow:0 15px 35px var(--accent)}.card-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:800;letter-spacing:-.5px;color:var(--text-color)}.card-desc[_ngcontent-%COMP%]{font-size:.9rem;opacity:.9;color:var(--text-color)}.card-date[_ngcontent-%COMP%]{font-size:.78rem;opacity:.7;color:var(--text-color)}.status-tag[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;padding:6px 12px;border-radius:8px;font-size:.75rem;display:flex;align-items:center;gap:6px}.status-tag.unlocked[_ngcontent-%COMP%]{background:#00ffa577;color:#032;box-shadow:0 0 15px #00ffa573}.status-tag.locked[_ngcontent-%COMP%]{background:#fb07;color:#4a3000;box-shadow:0 0 15px #ffbb0073}.actions[_ngcontent-%COMP%]{margin-top:8px;display:flex;gap:12px}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#ffffff14;border:none;padding:8px 10px;border-radius:10px;cursor:pointer;transition:.3s ease;color:var(--text-color)}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--accent);color:#fff;box-shadow:0 0 12px var(--accent)}.actions[_ngcontent-%COMP%]   button.del[_ngcontent-%COMP%]{background:#ff00002e}.actions[_ngcontent-%COMP%]   button.del[_ngcontent-%COMP%]:hover{background:#f44}"]})}return e})();var eh=(()=>{class e{auth;router;constructor(n,r){this.auth=n,this.router=r}canActivate(){return this.auth.authState().pipe(Tt(1),U(n=>!!n),Ie(n=>{n||this.router.navigate(["/login"])}))}static \u0275fac=function(r){return new(r||e)(A(dn),A(ye))};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),XA=(()=>{class e{auth;router;constructor(n,r){this.auth=n,this.router=r}canActivate(){return this.auth.authState().pipe(Tt(1),U(n=>n?(this.router.navigate(["/dashboard"]),!1):!0))}static \u0275fac=function(r){return new(r||e)(A(dn),A(ye))};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function qH(e,t){e&1&&(b(0,"h2"),R(1,"Sign in with Google"),w())}function YH(e,t){if(e&1){let n=yr();b(0,"button",5),ae("click",function(){xt(n);let i=Re();return Ot(i.signIn())}),me(1,"img",6),b(2,"span"),R(3),w()()}if(e&2){let n=Re();Z("disabled",n.loading),B(3),Xt(n.loading?"Signing in...":"Sign in with Google")}}function KH(e,t){if(e&1){let n=yr();b(0,"div",7)(1,"p"),R(2),w(),b(3,"button",8),ae("click",function(){xt(n);let i=Re();return Ot(i.logout())}),R(4,"Sign out"),w()()}if(e&2){let n=Re();B(2),Du("Welcome, ",n.loggedInUser.displayName," (",n.loggedInUser.email,")")}}function ZH(e,t){e&1&&(b(0,"p",9),R(1,"You will be redirected after successful sign-in."),w())}var eN=(()=>{class e{auth;router;firebaseService;loading=!1;loggedInUser=null;destroy$=new oe;constructor(n,r,i){this.auth=n,this.router=r,this.firebaseService=i}ngOnInit(){this.auth.authState().pipe(oo(this.destroy$)).subscribe(n=>{this.loggedInUser=n,n&&this.router.navigate(["/dashboard"])})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}signIn(){this.loading=!0,this.auth.signInWithGoogle().then(n=>{console.log("Signed in user:",n),n?this.firebaseService.saveUserProfile(n.uid,{displayName:n.displayName||"",email:n.email||"",profilePic:n.photoURL||null,lastLogin:Math.floor(Date.now()/1e3)}).catch(r=>console.warn("saveUserProfile failed",r)).finally(()=>this.router.navigate(["/dashboard"])):this.router.navigate(["/dashboard"])}).catch(n=>{console.error("Sign-in error:",n),alert("Sign-in failed: "+(n?.message||n))}).finally(()=>this.loading=!1)}logout(){this.auth.signOut().then(()=>{this.loggedInUser=null,this.router.navigate(["/login"])}).catch(n=>console.error("Sign-out error:",n))}static \u0275fac=function(r){return new(r||e)(I(dn),I(ye),I(kn))};static \u0275cmp=Qe({type:e,selectors:[["app-login"]],decls:5,vars:4,consts:[[1,"login-card"],[4,"ngIf"],["class","google-btn",3,"disabled","click",4,"ngIf"],["class","user-info",4,"ngIf"],["class","hint",4,"ngIf"],[1,"google-btn",3,"click","disabled"],["src","https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","alt","Google"],[1,"user-info"],[1,"btn-cancel",3,"click"],[1,"hint"]],template:function(r,i){r&1&&(b(0,"div",0),Le(1,qH,2,0,"h2",1)(2,YH,4,2,"button",2)(3,KH,5,2,"div",3)(4,ZH,2,0,"p",4),w()),r&2&&(B(),Z("ngIf",!i.loggedInUser),B(),Z("ngIf",!i.loggedInUser),B(),Z("ngIf",i.loggedInUser),B(),Z("ngIf",!i.loggedInUser))},dependencies:[ut,rn],styles:[".login-card[_ngcontent-%COMP%]{width:320px;padding:1.25rem;border-radius:8px;box-shadow:0 6px 18px #10182814;background:#fff;display:flex;flex-direction:column;gap:.75rem}[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;padding:1rem;background:#f3f4f6}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .25rem}.login-card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:.9rem;gap:.25rem}.login-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #e5e7eb;border-radius:4px}.login-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem .8rem;border:none;background:linear-gradient(90deg,#ff6b6b,#b649ff);color:#fff;border-radius:6px;cursor:pointer}.login-card[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:.8rem;color:#6b7280}.google-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.75rem;padding:.6rem .8rem;border-radius:6px;border:1px solid #e5e7eb;background:#fff;cursor:pointer}.google-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}.google-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}"]})}return e})();var tN=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:eN,canActivate:[XA]},{path:"creator",component:eE,canActivate:[eh]},{path:"creator/:code",component:eE,canActivate:[eh]},{path:"view/:code",component:ZA},{path:"dashboard",component:JA,canActivate:[eh]},{path:"**",redirectTo:"dashboard"}];var nN={providers:[Dp(),$g({eventCoalescing:!0}),zm(tN)]};function QH(e,t){e&1&&me(0,"i",8)}function JH(e,t){e&1&&me(0,"i",9)}var rN=(()=>{class e{auth;router;firebaseService;title=yt("FireTest");user$;isDarkMode=!1;constructor(n,r,i){this.auth=n,this.router=r,this.firebaseService=i,this.user$=this.auth.user$}ngOnInit(){localStorage.getItem("theme")==="dark"&&(this.isDarkMode=!0,document.body.classList.add("dark-theme"))}toggleTheme(){this.isDarkMode=!this.isDarkMode,document.body.classList.toggle("dark-theme",this.isDarkMode),localStorage.setItem("theme",this.isDarkMode?"dark":"light")}login(){this.auth.googleSignIn().then(n=>{console.log("Signed in user:",n),n?this.firebaseService.saveUserProfile(n.uid,{displayName:n.displayName||"",email:n.email||"",profilePic:n.photoURL||null,lastLogin:Math.floor(Date.now()/1e3)}).catch(r=>console.warn("saveUserProfile failed",r)).finally(()=>this.router.navigate(["/dashboard"])):this.router.navigate(["/dashboard"])}).catch(n=>{console.error("Sign-in error:",n),alert("Sign-in failed: "+(n?.message||n))}).finally(()=>{})}logout(){this.auth.signOut().then(()=>{this.router.navigate(["/login"])}).catch(n=>{console.error("Sign-out error:",n)})}static \u0275fac=function(r){return new(r||e)(I(dn),I(ye),I(kn))};static \u0275cmp=Qe({type:e,selectors:[["app-root"]],decls:11,vars:2,consts:[[1,"content-wrapper"],[1,"header-container"],["routerLink","/",1,"brand"],[1,"actions"],[1,"theme-toggle",3,"click"],["class","bi bi-moon-stars-fill",4,"ngIf"],["class","bi bi-brightness-high-fill",4,"ngIf"],[1,"logout",3,"click"],[1,"bi","bi-moon-stars-fill"],[1,"bi","bi-brightness-high-fill"]],template:function(r,i){r&1&&(b(0,"div",0)(1,"header",1)(2,"a",2),R(3,"Animatic"),w(),b(4,"div",3)(5,"button",4),ae("click",function(){return i.toggleTheme()}),Le(6,QH,1,0,"i",5)(7,JH,1,0,"i",6),w(),b(8,"a",7),ae("click",function(){return i.logout()}),R(9,"Logout"),w()()(),me(10,"router-outlet"),w()),r&2&&(B(6),Z("ngIf",!i.isDarkMode),B(),Z("ngIf",i.isDarkMode))},dependencies:[ut,rn,Ci,Ta,Uo],styles:[".app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;font-family:Roboto,sans-serif}.content[_ngcontent-%COMP%]{flex:1;padding:1rem}.header-container[_ngcontent-%COMP%]{width:100%;padding:12px 24px;display:flex;justify-content:space-between;align-items:center;background:var(--bg-color);color:var(--text-color);border-bottom:1px solid rgba(255,255,255,.06);box-shadow:0 4px 20px var(--glow);position:sticky;top:0;z-index:999}.brand[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:900;background:linear-gradient(90deg,#a78bfa,#3b82f6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;filter:drop-shadow(0 0 12px rgba(128,91,255,.6));letter-spacing:-1px}.actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px}.theme-toggle[_ngcontent-%COMP%]{border:none;background:transparent;font-size:1.25rem;cursor:pointer;color:var(--text-color);transition:.3s}.theme-toggle[_ngcontent-%COMP%]:hover{transform:scale(1.2);color:var(--accent)}.logout[_ngcontent-%COMP%]{color:var(--accent);font-weight:600;cursor:pointer;text-decoration:none}.logout[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}return e})();ym(rN,nN).catch(e=>console.error(e));
