var QA=Object.defineProperty,JA=Object.defineProperties;var XA=Object.getOwnPropertyDescriptors;var Mc=Object.getOwnPropertySymbols,eM=Object.getPrototypeOf,G_=Object.prototype.hasOwnProperty,q_=Object.prototype.propertyIsEnumerable,tM=Reflect.get;var z_=(e,t,n)=>t in e?QA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m=(e,t)=>{for(var n in t||={})G_.call(t,n)&&z_(e,n,t[n]);if(Mc)for(var n of Mc(t))q_.call(t,n)&&z_(e,n,t[n]);return e},S=(e,t)=>JA(e,XA(t));var Nc=(e,t)=>{var n={};for(var r in e)G_.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Mc)for(var r of Mc(e))t.indexOf(r)<0&&q_.call(e,r)&&(n[r]=e[r]);return n};var Ur=(e,t,n)=>tM(eM(e),n,t);var p=(e,t,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(e,t)).next())});var Yf;function Rc(){return Yf}function pn(e){let t=Yf;return Yf=e,t}var Y_=Symbol("NotFound");function $i(e){return e===Y_||e?.name==="\u0275NotFound"}function Fc(e,t){return Object.is(e,t)}var Be=null,xc=!1,Kf=1,nM=null,qe=Symbol("SIGNAL");function j(e){let t=Be;return Be=e,t}function Lc(){return Be}var Wi={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function zi(e){if(xc)throw new Error("");if(Be===null)return;Be.consumerOnSignalRead(e);let t=Be.producersTail;if(t!==void 0&&t.producer===e)return;let n,r=Be.recomputing;if(r&&(n=t!==void 0?t.nextProducer:Be.producers,n!==void 0&&n.producer===e)){Be.producersTail=n,n.lastReadVersion=e.version;return}let i=e.consumersTail;if(i!==void 0&&i.consumer===Be&&(!r||iM(i,Be)))return;let o=qi(Be),s={producer:e,consumer:Be,nextProducer:n,prevConsumer:i,lastReadVersion:e.version,nextConsumer:void 0};Be.producersTail=s,t!==void 0?t.nextProducer=s:Be.producers=s,o&&J_(e,s)}function K_(){Kf++}function Vc(e){if(!(qi(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Kf)){if(!e.producerMustRecompute(e)&&!ms(e)){Pc(e);return}e.producerRecomputeValue(e),Pc(e)}}function Zf(e){if(e.consumers===void 0)return;let t=xc;xc=!0;try{for(let n=e.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||rM(r)}}finally{xc=t}}function Qf(){return Be?.consumerAllowSignalWrites!==!1}function rM(e){e.dirty=!0,Zf(e),e.consumerMarkedDirty?.(e)}function Pc(e){e.dirty=!1,e.lastCleanEpoch=Kf}function Gi(e){return e&&Z_(e),j(e)}function Z_(e){e.producersTail=void 0,e.recomputing=!0}function gs(e,t){j(t),e&&Q_(e)}function Q_(e){e.recomputing=!1;let t=e.producersTail,n=t!==void 0?t.nextProducer:e.producers;if(n!==void 0){if(qi(e))do n=Jf(n);while(n!==void 0);t!==void 0?t.nextProducer=void 0:e.producers=void 0}}function ms(e){for(let t=e.producers;t!==void 0;t=t.nextProducer){let n=t.producer,r=t.lastReadVersion;if(r!==n.version||(Vc(n),r!==n.version))return!0}return!1}function vs(e){if(qi(e)){let t=e.producers;for(;t!==void 0;)t=Jf(t)}e.producers=void 0,e.producersTail=void 0,e.consumers=void 0,e.consumersTail=void 0}function J_(e,t){let n=e.consumersTail,r=qi(e);if(n!==void 0?(t.nextConsumer=n.nextConsumer,n.nextConsumer=t):(t.nextConsumer=void 0,e.consumers=t),t.prevConsumer=n,e.consumersTail=t,!r)for(let i=e.producers;i!==void 0;i=i.nextProducer)J_(i.producer,i)}function Jf(e){let t=e.producer,n=e.nextProducer,r=e.nextConsumer,i=e.prevConsumer;if(e.nextConsumer=void 0,e.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:t.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(t.consumers=r,!qi(t)){let o=t.producers;for(;o!==void 0;)o=Jf(o)}return n}function qi(e){return e.consumerIsAlwaysLive||e.consumers!==void 0}function jc(e){nM?.(e)}function iM(e,t){let n=t.producersTail;if(n!==void 0){let r=t.producers;do{if(r===e)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Uc(e,t){let n=Object.create(oM);n.computation=e,t!==void 0&&(n.equal=t);let r=()=>{if(Vc(n),zi(n),n.value===ps)throw n.error;return n.value};return r[qe]=n,jc(n),r}var Oc=Symbol("UNSET"),kc=Symbol("COMPUTING"),ps=Symbol("ERRORED"),oM=S(m({},Wi),{value:Oc,dirty:!0,error:null,equal:Fc,kind:"computed",producerMustRecompute(e){return e.value===Oc||e.value===kc},producerRecomputeValue(e){if(e.value===kc)throw new Error("");let t=e.value;e.value=kc;let n=Gi(e),r,i=!1;try{r=e.computation(),j(null),i=t!==Oc&&t!==ps&&r!==ps&&e.equal(t,r)}catch(o){r=ps,e.error=o}finally{gs(e,n)}if(i){e.value=t;return}e.value=r,e.version++}});function sM(){throw new Error}var X_=sM;function eE(e){X_(e)}function Xf(e){X_=e}var aM=null;function eh(e,t){let n=Object.create(Bc);n.value=e,t!==void 0&&(n.equal=t);let r=()=>tE(n);return r[qe]=n,jc(n),[r,s=>Yi(n,s),s=>th(n,s)]}function tE(e){return zi(e),e.value}function Yi(e,t){Qf()||eE(e),e.equal(e.value,t)||(e.value=t,cM(e))}function th(e,t){Qf()||eE(e),Yi(e,t(e.value))}var Bc=S(m({},Wi),{equal:Fc,value:void 0,kind:"signal"});function cM(e){e.version++,K_(),Zf(e),aM?.(e)}function F(e){return typeof e=="function"}function Ki(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Hc=Ki(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Br(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var ue=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(F(r))try{r()}catch(o){t=o instanceof Hc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{nE(o)}catch(s){t=t??[],s instanceof Hc?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Hc(t)}}add(t){var n;if(t&&t!==this)if(this.closed)nE(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Br(n,t)}remove(t){let{_finalizers:n}=this;n&&Br(n,t),t instanceof e&&t._removeParent(this)}};ue.EMPTY=(()=>{let e=new ue;return e.closed=!0,e})();var nh=ue.EMPTY;function $c(e){return e instanceof ue||e&&"closed"in e&&F(e.remove)&&F(e.add)&&F(e.unsubscribe)}function nE(e){F(e)?e():e.unsubscribe()}var Gt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Zi={setTimeout(e,t,...n){let{delegate:r}=Zi;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=Zi;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Wc(e){Zi.setTimeout(()=>{let{onUnhandledError:t}=Gt;if(t)t(e);else throw e})}function ys(){}var rE=rh("C",void 0,void 0);function iE(e){return rh("E",void 0,e)}function oE(e){return rh("N",e,void 0)}function rh(e,t,n){return{kind:e,value:t,error:n}}var Hr=null;function Qi(e){if(Gt.useDeprecatedSynchronousErrorHandling){let t=!Hr;if(t&&(Hr={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=Hr;if(Hr=null,n)throw r}}else e()}function sE(e){Gt.useDeprecatedSynchronousErrorHandling&&Hr&&(Hr.errorThrown=!0,Hr.error=e)}var $r=class extends ue{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,$c(t)&&t.add(this)):this.destination=dM}static create(t,n,r){return new Ji(t,n,r)}next(t){this.isStopped?oh(oE(t),this):this._next(t)}error(t){this.isStopped?oh(iE(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?oh(rE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},lM=Function.prototype.bind;function ih(e,t){return lM.call(e,t)}var sh=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){zc(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){zc(r)}else zc(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){zc(n)}}},Ji=class extends $r{constructor(t,n,r){super();let i;if(F(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Gt.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&ih(t.next,o),error:t.error&&ih(t.error,o),complete:t.complete&&ih(t.complete,o)}):i=t}this.destination=new sh(i)}};function zc(e){Gt.useDeprecatedSynchronousErrorHandling?sE(e):Wc(e)}function uM(e){throw e}function oh(e,t){let{onStoppedNotification:n}=Gt;n&&Zi.setTimeout(()=>n(e,t))}var dM={closed:!0,next:ys,error:uM,complete:ys};var Xi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function vt(e){return e}function ah(...e){return ch(e)}function ch(e){return e.length===0?vt:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var O=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=hM(n)?n:new Ji(n,r,i);return Qi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=aE(r),new r((i,o)=>{let s=new Ji({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Xi](){return this}pipe(...n){return ch(n)(this)}toPromise(n){return n=aE(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function aE(e){var t;return(t=e??Gt.Promise)!==null&&t!==void 0?t:Promise}function fM(e){return e&&F(e.next)&&F(e.error)&&F(e.complete)}function hM(e){return e&&e instanceof $r||fM(e)&&$c(e)}function lh(e){return F(e?.lift)}function Y(e){return t=>{if(lh(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function G(e,t,n,r,i){return new uh(e,t,n,r,i)}var uh=class extends $r{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function eo(){return Y((e,t)=>{let n=null;e._refCount++;let r=G(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var to=class extends O{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,lh(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new ue;let n=this.getSubject();t.add(this.source.subscribe(G(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=ue.EMPTY)}return t}refCount(){return eo()(this)}};var cE=Ki(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=(()=>{class e extends O{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Gc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new cE}next(n){Qi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Qi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Qi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?nh:(this.currentObservers=null,o.push(n),new ue(()=>{this.currentObservers=null,Br(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new O;return n.source=this,n}}return e.create=(t,n)=>new Gc(t,n),e})(),Gc=class extends re{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:nh}};var Oe=class extends re{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var dh={now(){return(dh.delegate||Date).now()},delegate:void 0};var qc=class extends ue{constructor(t,n){super()}schedule(t,n=0){return this}};var _s={setInterval(e,t,...n){let{delegate:r}=_s;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=_s;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var Yc=class extends qc{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,r=0){return _s.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&_s.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r=!1,i;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Br(r,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var no=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}};no.now=dh.now;var Kc=class extends no{constructor(t,n=no.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}};var fh=new Kc(Yc),lE=fh;var ot=new O(e=>e.complete());function Zc(e){return e&&F(e.schedule)}function uE(e){return e[e.length-1]}function Qc(e){return F(uE(e))?e.pop():void 0}function or(e){return Zc(uE(e))?e.pop():void 0}function fE(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function dE(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wr(e){return this instanceof Wr?(this.v=e,this):new Wr(e)}function hE(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(h){return function(g){return Promise.resolve(g).then(h,d)}}function a(h,g){r[h]&&(i[h]=function(_){return new Promise(function(b,N){o.push([h,_,b,N])>1||c(h,_)})},g&&(i[h]=g(i[h])))}function c(h,g){try{l(r[h](g))}catch(_){f(o[0][3],_)}}function l(h){h.value instanceof Wr?Promise.resolve(h.value.v).then(u,d):f(o[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,g){h(g),o.shift(),o.length&&c(o[0][0],o[0][1])}}function pE(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof dE=="function"?dE(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Jc=e=>e&&typeof e.length=="number"&&typeof e!="function";function Xc(e){return F(e?.then)}function el(e){return F(e[Xi])}function tl(e){return Symbol.asyncIterator&&F(e?.[Symbol.asyncIterator])}function nl(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function pM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var rl=pM();function il(e){return F(e?.[rl])}function ol(e){return hE(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield Wr(n.read());if(i)return yield Wr(void 0);yield yield Wr(r)}}finally{n.releaseLock()}})}function sl(e){return F(e?.getReader)}function Ie(e){if(e instanceof O)return e;if(e!=null){if(el(e))return gM(e);if(Jc(e))return mM(e);if(Xc(e))return vM(e);if(tl(e))return gE(e);if(il(e))return yM(e);if(sl(e))return _M(e)}throw nl(e)}function gM(e){return new O(t=>{let n=e[Xi]();if(F(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function mM(e){return new O(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function vM(e){return new O(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Wc)})}function yM(e){return new O(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function gE(e){return new O(t=>{EM(e,t).catch(n=>t.error(n))})}function _M(e){return gE(ol(e))}function EM(e,t){var n,r,i,o;return fE(this,void 0,void 0,function*(){try{for(n=pE(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function st(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function al(e,t=0){return Y((n,r)=>{n.subscribe(G(r,i=>st(r,e,()=>r.next(i),t),()=>st(r,e,()=>r.complete(),t),i=>st(r,e,()=>r.error(i),t)))})}function cl(e,t=0){return Y((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function mE(e,t){return Ie(e).pipe(cl(t),al(t))}function vE(e,t){return Ie(e).pipe(cl(t),al(t))}function yE(e,t){return new O(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function _E(e,t){return new O(n=>{let r;return st(n,t,()=>{r=e[rl](),st(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>F(r?.return)&&r.return()})}function ll(e,t){if(!e)throw new Error("Iterable cannot be null");return new O(n=>{st(n,t,()=>{let r=e[Symbol.asyncIterator]();st(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function EE(e,t){return ll(ol(e),t)}function IE(e,t){if(e!=null){if(el(e))return mE(e,t);if(Jc(e))return yE(e,t);if(Xc(e))return vE(e,t);if(tl(e))return ll(e,t);if(il(e))return _E(e,t);if(sl(e))return EE(e,t)}throw nl(e)}function ce(e,t){return t?IE(e,t):Ie(e)}function A(...e){let t=or(e);return ce(e,t)}function ro(e,t){let n=F(e)?e:()=>e,r=i=>i.error(n());return new O(t?i=>t.schedule(r,0,i):r)}function hh(e){return!!e&&(e instanceof O||F(e.lift)&&F(e.subscribe))}var Ln=Ki(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function CE(e){return e instanceof Date&&!isNaN(e)}function U(e,t){return Y((n,r)=>{let i=0;n.subscribe(G(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:IM}=Array;function CM(e,t){return IM(t)?e(...t):e(t)}function ul(e){return U(t=>CM(e,t))}var{isArray:wM}=Array,{getPrototypeOf:DM,prototype:bM,keys:TM}=Object;function dl(e){if(e.length===1){let t=e[0];if(wM(t))return{args:t,keys:null};if(SM(t)){let n=TM(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function SM(e){return e&&typeof e=="object"&&DM(e)===bM}function fl(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function zr(...e){let t=or(e),n=Qc(e),{args:r,keys:i}=dl(e);if(r.length===0)return ce([],t);let o=new O(AM(r,t,i?s=>fl(i,s):vt));return n?o.pipe(ul(n)):o}function AM(e,t,n=vt){return r=>{wE(t,()=>{let{length:i}=e,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)wE(t,()=>{let l=ce(e[c],t),u=!1;l.subscribe(G(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function wE(e,t,n){e?st(n,e,t):t()}function DE(e,t,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&t.complete()},h=_=>l<r?g(_):c.push(_),g=_=>{o&&t.next(_),l++;let b=!1;Ie(n(_,u++)).subscribe(G(t,N=>{i?.(N),o?h(N):t.next(N)},()=>{b=!0},void 0,()=>{if(b)try{for(l--;c.length&&l<r;){let N=c.shift();s?st(t,s,()=>g(N)):g(N)}f()}catch(N){t.error(N)}}))};return e.subscribe(G(t,h,()=>{d=!0,f()})),()=>{a?.()}}function pe(e,t,n=1/0){return F(t)?pe((r,i)=>U((o,s)=>t(r,o,i,s))(Ie(e(r,i))),n):(typeof t=="number"&&(n=t),Y((r,i)=>DE(r,i,e,n)))}function io(e=1/0){return pe(vt,e)}function bE(){return io(1)}function oo(...e){return bE()(ce(e,or(e)))}function Es(e){return new O(t=>{Ie(e()).subscribe(t)})}function ph(...e){let t=Qc(e),{args:n,keys:r}=dl(e),i=new O(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;Ie(n[u]).subscribe(G(o,f=>{d||(d=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?fl(r,a):a),o.complete())}))}});return t?i.pipe(ul(t)):i}function TE(e=0,t,n=lE){let r=-1;return t!=null&&(Zc(t)?n=t:r=t),new O(i=>{let o=CE(e)?+e-n.now():e;o<0&&(o=0);let s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function gh(e=0,t=fh){return e<0&&(e=0),TE(e,e,t)}function at(e,t){return Y((n,r)=>{let i=0;n.subscribe(G(r,o=>e.call(t,o,i++)&&r.next(o)))})}function Vn(e){return Y((t,n)=>{let r=null,i=!1,o;r=t.subscribe(G(n,void 0,void 0,s=>{o=Ie(e(s,Vn(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function SE(e,t,n,r,i){return(o,s)=>{let a=n,c=t,l=0;o.subscribe(G(s,u=>{let d=l++;c=a?e(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function sr(e,t){return F(t)?pe(e,t,1):pe(e,1)}function ar(e){return Y((t,n)=>{let r=!1;t.subscribe(G(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function Nt(e){return e<=0?()=>ot:Y((t,n)=>{let r=0;t.subscribe(G(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function hl(e=MM){return Y((t,n)=>{let r=!1;t.subscribe(G(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function MM(){return new Ln}function Is(e){return Y((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function jn(e,t){let n=arguments.length>=2;return r=>r.pipe(e?at((i,o)=>e(i,o,r)):vt,Nt(1),n?ar(t):hl(()=>new Ln))}function so(e){return e<=0?()=>ot:Y((t,n)=>{let r=[];t.subscribe(G(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function mh(e,t){let n=arguments.length>=2;return r=>r.pipe(e?at((i,o)=>e(i,o,r)):vt,so(1),n?ar(t):hl(()=>new Ln))}function vh(e,t){return Y(SE(e,t,arguments.length>=2,!0))}function yh(...e){let t=or(e);return Y((n,r)=>{(t?oo(e,n,t):oo(e,n)).subscribe(r)})}function Ne(e,t){return Y((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(G(r,c=>{i?.unsubscribe();let l=0,u=o++;Ie(e(c,u)).subscribe(i=G(r,d=>r.next(t?t(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function ao(e){return Y((t,n)=>{Ie(e).subscribe(G(n,()=>n.complete(),ys)),!n.closed&&t.subscribe(n)})}function Ce(e,t,n){let r=F(e)||t||n?{next:e,error:t,complete:n}:e;return r?Y((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(G(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):vt}function AE(e){let t=j(null);try{return e()}finally{j(t)}}var vl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",E=class extends Error{code;constructor(t,n){super(lo(t,n)),this.code=t}};function NM(e){return`NG0${Math.abs(e)}`}function lo(e,t){return`${NM(e)}${t?": "+t:""}`}var Hn=globalThis;function J(e){for(let t in e)if(e[t]===J)return t;throw Error("")}function RE(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Bn(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(Bn).join(", ")}]`;if(e==null)return""+e;let t=e.overriddenName||e.name;if(t)return`${t}`;let n=e.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Nh(e,t){return e?t?`${e} ${t}`:e:t||""}var RM=J({__forward_ref__:J});function gn(e){return e.__forward_ref__=gn,e.toString=function(){return Bn(this())},e}function ke(e){return Rh(e)?e():e}function Rh(e){return typeof e=="function"&&e.hasOwnProperty(RM)&&e.__forward_ref__===gn}function I(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Yt(e){return{providers:e.providers||[],imports:e.imports||[]}}function bs(e){return xM(e,yl)}function xh(e){return bs(e)!==null}function xM(e,t){return e.hasOwnProperty(t)&&e[t]||null}function OM(e){let t=e?.[yl]??null;return t||null}function Eh(e){return e&&e.hasOwnProperty(gl)?e[gl]:null}var yl=J({\u0275prov:J}),gl=J({\u0275inj:J}),w=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=I({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Oh(e){return e&&!!e.\u0275providers}var kh=J({\u0275cmp:J}),Ph=J({\u0275dir:J}),Fh=J({\u0275pipe:J}),Lh=J({\u0275mod:J}),ws=J({\u0275fac:J}),Zr=J({__NG_ELEMENT_ID__:J}),ME=J({__NG_ENV_ID__:J});function Qr(e){return typeof e=="string"?e:e==null?"":String(e)}function xE(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Qr(e)}var OE=J({ngErrorCode:J}),kM=J({ngErrorMessage:J}),PM=J({ngTokenPath:J});function Vh(e,t){return kE("",-200,t)}function _l(e,t){throw new E(-201,!1)}function kE(e,t,n){let r=new E(t,e);return r[OE]=t,r[kM]=e,n&&(r[PM]=n),r}function FM(e){return e[OE]}var Ih;function PE(){return Ih}function Ye(e){let t=Ih;return Ih=e,t}function jh(e,t,n){let r=bs(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(t!==void 0)return t;_l(e,"Injector")}var LM={},Gr=LM,VM="__NG_DI_FLAG__",Ch=class{injector;constructor(t){this.injector=t}retrieve(t,n){let r=qr(n)||0;try{return this.injector.get(t,r&8?null:Gr,r)}catch(i){if($i(i))return i;throw i}}};function jM(e,t=0){let n=Rc();if(n===void 0)throw new E(-203,!1);if(n===null)return jh(e,void 0,t);{let r=UM(t),i=n.retrieve(e,r);if($i(i)){if(r.optional)return null;throw i}return i}}function M(e,t=0){return(PE()||jM)(ke(e),t)}function v(e,t){return M(e,qr(t))}function qr(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function UM(e){return{optional:!!(e&8),host:!!(e&1),self:!!(e&2),skipSelf:!!(e&4)}}function wh(e){let t=[];for(let n=0;n<e.length;n++){let r=ke(e[n]);if(Array.isArray(r)){if(r.length===0)throw new E(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=BM(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}t.push(M(i,o))}else t.push(M(r))}return t}function BM(e){return e[VM]}function cr(e,t){let n=e.hasOwnProperty(ws);return n?e[ws]:null}function El(e,t){e.forEach(n=>Array.isArray(n)?El(n,t):t(n))}function Uh(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Ts(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function FE(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}function LE(e,t,n){let r=uo(e,t);return r>=0?e[r|1]=n:(r=~r,FE(e,r,t,n)),r}function Il(e,t){let n=uo(e,t);if(n>=0)return e[n|1]}function uo(e,t){return HM(e,t,1)}function HM(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=e[o<<n];if(t===s)return o<<n;s>t?i=o:r=o+1}return~(i<<n)}var dr={},yt=[],$n=new w(""),Bh=new w("",-1),Hh=new w(""),Ds=class{get(t,n=Gr){if(n===Gr){let i=kE("",-201);throw i.name="\u0275NotFound",i}return n}};function $h(e){return e[Lh]||null}function Wn(e){return e[kh]||null}function Wh(e){return e[Ph]||null}function VE(e){return e[Fh]||null}function fr(e){return{\u0275providers:e}}function jE(e){return fr([{provide:$n,multi:!0,useValue:e}])}function UE(...e){return{\u0275providers:zh(!0,e),\u0275fromNgModule:!0}}function zh(e,...t){let n=[],r=new Set,i,o=s=>{n.push(s)};return El(t,s=>{let a=s;ml(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&BE(i,o),n}function BE(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];Gh(i,o=>{t(o,r)})}}function ml(e,t,n,r){if(e=ke(e),!e)return!1;let i=null,o=Eh(e),s=!o&&Wn(e);if(!o&&!s){let c=e.ngModule;if(o=Eh(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=e}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)ml(l,t,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{El(o.imports,u=>{ml(u,t,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&BE(l,t)}if(!a){let l=cr(i)||(()=>new i);t({provide:i,useFactory:l,deps:yt},i),t({provide:Hh,useValue:i,multi:!0},i),t({provide:$n,useValue:()=>M(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=e;Gh(c,u=>{t(u,l)})}}else return!1;return i!==e&&e.providers!==void 0}function Gh(e,t){for(let n of e)Oh(n)&&(n=n.\u0275providers),Array.isArray(n)?Gh(n,t):t(n)}var $M=J({provide:String,useValue:J});function HE(e){return e!==null&&typeof e=="object"&&$M in e}function WM(e){return!!(e&&e.useExisting)}function zM(e){return!!(e&&e.useFactory)}function Yr(e){return typeof e=="function"}function $E(e){return!!e.useClass}var Ss=new w(""),pl={},NE={},_h;function As(){return _h===void 0&&(_h=new Ds),_h}var Te=class{},Kr=class extends Te{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,bh(t,s=>this.processProvider(s)),this.records.set(Bh,co(void 0,this)),i.has("environment")&&this.records.set(Te,co(void 0,this));let o=this.records.get(Ss);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Hh,yt,{self:!0}))}retrieve(t,n){let r=qr(n)||0;try{return this.get(t,Gr,r)}catch(i){if($i(i))return i;throw i}}destroy(){Cs(this),this._destroyed=!0;let t=j(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),j(t)}}onDestroy(t){return Cs(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Cs(this);let n=pn(this),r=Ye(void 0),i;try{return t()}finally{pn(n),Ye(r)}}get(t,n=Gr,r){if(Cs(this),t.hasOwnProperty(ME))return t[ME](this);let i=qr(r),o,s=pn(this),a=Ye(void 0);try{if(!(i&4)){let l=this.records.get(t);if(l===void 0){let u=ZM(t)&&bs(t);u&&this.injectableDefInScope(u)?l=co(Dh(t),pl):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l,i)}let c=i&2?As():this.parent;return n=i&8&&n===Gr?null:n,c.get(t,n)}catch(c){let l=FM(c);throw l===-200||l===-201?new E(l,null):c}finally{Ye(a),pn(s)}}resolveInjectorInitializers(){let t=j(null),n=pn(this),r=Ye(void 0),i;try{let o=this.get($n,yt,{self:!0});for(let s of o)s()}finally{pn(n),Ye(r),j(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(Bn(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=ke(t);let n=Yr(t)?t:ke(t&&t.provide),r=qM(t);if(!Yr(t)&&t.multi===!0){let i=this.records.get(n);i||(i=co(void 0,pl,!0),i.factory=()=>wh(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n,r){let i=j(null);try{if(n.value===NE)throw Vh(Bn(t));return n.value===pl&&(n.value=NE,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&KM(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{j(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=ke(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Dh(e){let t=bs(e),n=t!==null?t.factory:cr(e);if(n!==null)return n;if(e instanceof w)throw new E(204,!1);if(e instanceof Function)return GM(e);throw new E(204,!1)}function GM(e){if(e.length>0)throw new E(204,!1);let n=OM(e);return n!==null?()=>n.factory(e):()=>new e}function qM(e){if(HE(e))return co(void 0,e.useValue);{let t=qh(e);return co(t,pl)}}function qh(e,t,n){let r;if(Yr(e)){let i=ke(e);return cr(i)||Dh(i)}else if(HE(e))r=()=>ke(e.useValue);else if(zM(e))r=()=>e.useFactory(...wh(e.deps||[]));else if(WM(e))r=(i,o)=>M(ke(e.useExisting),o!==void 0&&o&8?8:void 0);else{let i=ke(e&&(e.useClass||e.provide));if(YM(e))r=()=>new i(...wh(e.deps));else return cr(i)||Dh(i)}return r}function Cs(e){if(e.destroyed)throw new E(205,!1)}function co(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function YM(e){return!!e.deps}function KM(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function ZM(e){return typeof e=="function"||typeof e=="object"&&e.ngMetadataName==="InjectionToken"}function bh(e,t){for(let n of e)Array.isArray(n)?bh(n,t):n&&Oh(n)?bh(n.\u0275providers,t):t(n)}function He(e,t){let n;e instanceof Kr?(Cs(e),n=e):n=new Ch(e);let r,i=pn(n),o=Ye(void 0);try{return t()}finally{pn(i),Ye(o)}}function WE(){return PE()!==void 0||Rc()!=null}var Kt=0,P=1,k=2,Pe=3,Rt=4,xt=5,Ms=6,fo=7,$e=8,ho=9,mn=10,ge=11,po=12,Yh=13,Jr=14,Ot=15,Xr=16,ei=17,ti=18,Ns=19,Kh=20,Un=21,Cl=22,Rs=23,_t=24,ni=25,Ke=26,Fe=27,zE=1;var hr=7,xs=8,Os=9,lt=10;function vn(e){return Array.isArray(e)&&typeof e[zE]=="object"}function Zt(e){return Array.isArray(e)&&e[zE]===!0}function Zh(e){return(e.flags&4)!==0}function pr(e){return e.componentOffset>-1}function go(e){return(e.flags&1)===1}function yn(e){return!!e.template}function mo(e){return(e[k]&512)!==0}function ri(e){return(e[k]&256)===256}var GE="svg",qE="math";function kt(e){for(;Array.isArray(e);)e=e[Kt];return e}function Qh(e,t){return kt(t[e])}function Qt(e,t){return kt(t[e.index])}function wl(e,t){return e.data[t]}function Jh(e,t){return e[t]}function Xh(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}function Pt(e,t){let n=t[e];return vn(n)?n:n[Kt]}function Dl(e){return(e[k]&128)===128}function YE(e){return Zt(e[Pe])}function ks(e,t){return t==null?null:e[t]}function ep(e){e[ei]=0}function tp(e){e[k]&1024||(e[k]|=1024,Dl(e)&&vo(e))}function KE(e,t){for(;e>0;)t=t[Jr],e--;return t}function Ps(e){return!!(e[k]&9216||e[_t]?.dirty)}function bl(e){e[mn].changeDetectionScheduler?.notify(8),e[k]&64&&(e[k]|=1024),Ps(e)&&vo(e)}function vo(e){e[mn].changeDetectionScheduler?.notify(0);let t=lr(e);for(;t!==null&&!(t[k]&8192||(t[k]|=8192,!Dl(t)));)t=lr(t)}function np(e,t){if(ri(e))throw new E(911,!1);e[Un]===null&&(e[Un]=[]),e[Un].push(t)}function ZE(e,t){if(e[Un]===null)return;let n=e[Un].indexOf(t);n!==-1&&e[Un].splice(n,1)}function lr(e){let t=e[Pe];return Zt(t)?t[Pe]:t}function QE(e){return e[fo]??=[]}function JE(e){return e.cleanup??=[]}var H={lFrame:gI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Th=!1;function XE(){return H.lFrame.elementDepthCount}function eI(){H.lFrame.elementDepthCount++}function tI(){H.lFrame.elementDepthCount--}function Tl(){return H.bindingsEnabled}function nI(){return H.skipHydrationRootTNode!==null}function rI(e){return H.skipHydrationRootTNode===e}function iI(){H.skipHydrationRootTNode=null}function X(){return H.lFrame.lView}function Et(){return H.lFrame.tView}function Ze(e){return H.lFrame.contextLView=e,e[$e]}function Qe(e){return H.lFrame.contextLView=null,e}function We(){let e=rp();for(;e!==null&&e.type===64;)e=e.parent;return e}function rp(){return H.lFrame.currentTNode}function oI(){let e=H.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function yo(e,t){let n=H.lFrame;n.currentTNode=e,n.isParent=t}function ip(){return H.lFrame.isParent}function sI(){H.lFrame.isParent=!1}function aI(){return H.lFrame.contextLView}function op(){return Th}function sp(e){let t=Th;return Th=e,t}function ap(){let e=H.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function cI(){return H.lFrame.bindingIndex}function lI(e){return H.lFrame.bindingIndex=e}function Sl(){return H.lFrame.bindingIndex++}function cp(e){let t=H.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function uI(){return H.lFrame.inI18n}function dI(e,t){let n=H.lFrame;n.bindingIndex=n.bindingRootIndex=e,Al(t)}function fI(){return H.lFrame.currentDirectiveIndex}function Al(e){H.lFrame.currentDirectiveIndex=e}function hI(e){let t=H.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function lp(e){H.lFrame.currentQueryIndex=e}function QM(e){let t=e[P];return t.type===2?t.declTNode:t.type===1?e[xt]:null}function up(e,t,n){if(n&4){let i=t,o=e;for(;i=i.parent,i===null&&!(n&1);)if(i=QM(o),i===null||(o=o[Jr],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=H.lFrame=pI();return r.currentTNode=t,r.lView=e,!0}function Ml(e){let t=pI(),n=e[P];H.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function pI(){let e=H.lFrame,t=e===null?null:e.child;return t===null?gI(e):t}function gI(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function mI(){let e=H.lFrame;return H.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var dp=mI;function Nl(){let e=mI();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function vI(e){return(H.lFrame.contextLView=KE(e,H.lFrame.contextLView))[$e]}function gr(){return H.lFrame.selectedIndex}function mr(e){H.lFrame.selectedIndex=e}function fp(){let e=H.lFrame;return wl(e.tView,e.selectedIndex)}function yI(){return H.lFrame.currentNamespace}var _I=!0;function Rl(){return _I}function Fs(e){_I=e}function Sh(e,t=null,n=null,r){let i=hp(e,t,n,r);return i.resolveInjectorInitializers(),i}function hp(e,t=null,n=null,r,i=new Set){let o=[n||yt,UE(e)];return r=r||(typeof e=="object"?void 0:Bn(e)),new Kr(o,t||As(),r||null,i)}var ct=class e{static THROW_IF_NOT_FOUND=Gr;static NULL=new Ds;static create(t,n){if(Array.isArray(t))return Sh({name:""},n,t,"");{let r=t.name??"";return Sh({name:r},t.parent,t.providers,r)}}static \u0275prov=I({token:e,providedIn:"any",factory:()=>M(Bh)});static __NG_ELEMENT_ID__=-1},me=new w(""),_n=(()=>{class e{static __NG_ELEMENT_ID__=JM;static __NG_ENV_ID__=n=>n}return e})(),Ah=class extends _n{_lView;constructor(t){super(),this._lView=t}get destroyed(){return ri(this._lView)}onDestroy(t){let n=this._lView;return np(n,t),()=>ZE(n,t)}};function JM(){return new Ah(X())}var qt=class{_console=console;handleError(t){this._console.error("ERROR",t)}},ut=new w("",{providedIn:"root",factory:()=>{let e=v(Te),t;return n=>{e.destroyed&&!t?setTimeout(()=>{throw n}):(t??=e.get(qt),t.handleError(n))}}}),EI={provide:$n,useValue:()=>void v(qt),multi:!0},XM=new w("",{providedIn:"root",factory:()=>{let e=v(me).defaultView;if(!e)return;let t=v(ut),n=o=>{t(o.reason),o.preventDefault()},r=o=>{o.error?t(o.error):t(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{e.addEventListener("unhandledrejection",n),e.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),v(_n).onDestroy(()=>{e.removeEventListener("error",r),e.removeEventListener("unhandledrejection",n)})}});function pp(){return fr([jE(()=>void v(XM))])}function It(e,t){let[n,r,i]=eh(e,t?.equal),o=n,s=o[qe];return o.set=r,o.update=i,o.asReadonly=II.bind(o),o}function II(){let e=this[qe];if(e.readonlyFn===void 0){let t=()=>this();t[qe]=e,e.readonlyFn=t}return e.readonlyFn}var ur=class{},Ls=new w("",{providedIn:"root",factory:()=>!1});var gp=new w(""),mp=new w("");var xl=(()=>{class e{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=eN}return e})();function eN(){return new xl(X(),We())}var zn=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Oe(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new O(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=I({token:e,providedIn:"root",factory:()=>new e})}return e})();function Vs(...e){}var vp=(()=>{class e{static \u0275prov=I({token:e,providedIn:"root",factory:()=>new Mh})}return e})(),Mh=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let n=t.zone,r=this.queues.get(n);r.has(t)&&(r.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||r.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[n,r]of this.queues)n===null?t||=this.flushQueue(r):t||=n.run(()=>this.flushQueue(r));t||(this.dirtyEffectCount=0)}}flushQueue(t){let n=!1;for(let r of t)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function zs(e){return{toString:e}.toString()}function uN(e){return typeof e=="function"}var jl=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function XI(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var qn=(()=>{let e=()=>eC;return e.ngInherit=!0,e})();function eC(e){return e.type.prototype.ngOnChanges&&(e.setInput=fN),dN}function dN(){let e=nC(this),t=e?.current;if(t){let n=e.previous;if(n===dr)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function fN(e,t,n,r,i){let o=this.declaredInputs[r],s=nC(e)||hN(e,{previous:dr,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new jl(l&&l.currentValue,n,c===dr),XI(e,t,i,n)}var tC="__ngSimpleChanges__";function nC(e){return e[tC]||null}function hN(e,t){return e[tC]=t}var CI=[];var ee=function(e,t=null,n){for(let r=0;r<CI.length;r++){let i=CI[r];i(e,t,n)}};function pN(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=eC(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function rC(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function Fl(e,t,n){iC(e,t,3,n)}function Ll(e,t,n,r){(e[k]&3)===n&&iC(e,t,n,r)}function yp(e,t){let n=e[k];(n&3)===t&&(n&=16383,n+=1,e[k]=n)}function iC(e,t,n,r){let i=r!==void 0?e[ei]&65535:0,o=r??-1,s=t.length-1,a=0;for(let c=i;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[ei]+=65536),(a<o||o==-1)&&(gN(e,n,t,c),e[ei]=(e[ei]&4294901760)+c+2),c++}function wI(e,t){ee(4,e,t);let n=j(null);try{t.call(e)}finally{j(n),ee(5,e,t)}}function gN(e,t,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=e[s];i?e[k]>>14<e[ei]>>16&&(e[k]&3)===t&&(e[k]+=16384,wI(a,o)):wI(a,o)}var Eo=-1,oi=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r,i){this.factory=t,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function mN(e){return(e.flags&8)!==0}function vN(e){return(e.flags&16)!==0}function yN(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{let o=i,s=n[++r];_N(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function oC(e){return e===3||e===4||e===6}function _N(e){return e.charCodeAt(0)===64}function Bs(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?DI(e,n,i,null,t[++r]):DI(e,n,i,null,null))}}return e}function DI(e,t,n,r,i){let o=0,s=e.length;if(t===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===n){i!==null&&(e[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),i!==null&&e.splice(o++,0,i)}function sC(e){return e!==Eo}function Ul(e){return e&32767}function EN(e){return e>>16}function Bl(e,t){let n=EN(e),r=t;for(;n>0;)r=r[Jr],n--;return r}var Mp=!0;function Hl(e){let t=Mp;return Mp=e,t}var IN=256,aC=IN-1,cC=5,CN=0,En={};function wN(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Zr)&&(r=n[Zr]),r==null&&(r=n[Zr]=CN++);let i=r&aC,o=1<<i;t.data[e+(i>>cC)]|=o}function $l(e,t){let n=lC(e,t);if(n!==-1)return n;let r=t[P];r.firstCreatePass&&(e.injectorIndex=t.length,_p(r.data,e),_p(t,null),_p(r.blueprint,null));let i=Yp(e,t),o=e.injectorIndex;if(sC(i)){let s=Ul(i),a=Bl(i,t),c=a[P].data;for(let l=0;l<8;l++)t[o+l]=a[s+l]|c[s+l]}return t[o+8]=i,o}function _p(e,t){e.push(0,0,0,0,0,0,0,0,t)}function lC(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function Yp(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=pC(i),r===null)return Eo;if(n++,i=i[Jr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Eo}function Np(e,t,n){wN(e,t,n)}function DN(e,t){if(t==="class")return e.classes;if(t==="style")return e.styles;let n=e.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(oC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===t)return n[i+1];i=i+2}}}return null}function uC(e,t,n){if(n&8||e!==void 0)return e;_l(t,"NodeInjector")}function dC(e,t,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=e[ho],o=Ye(void 0);try{return i?i.get(t,r,n&8):jh(t,r,n&8)}finally{Ye(o)}}return uC(r,t,n)}function fC(e,t,n,r=0,i){if(e!==null){if(t[k]&2048&&!(r&2)){let s=MN(e,t,n,r,En);if(s!==En)return s}let o=hC(e,t,n,r,En);if(o!==En)return o}return dC(t,n,r,i)}function hC(e,t,n,r,i){let o=SN(n);if(typeof o=="function"){if(!up(t,e,r))return r&1?uC(i,n,r):dC(t,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))_l(n);else return s}finally{dp()}}else if(typeof o=="number"){let s=null,a=lC(e,t),c=Eo,l=r&1?t[Ot][xt]:null;for((a===-1||r&4)&&(c=a===-1?Yp(e,t):t[a+8],c===Eo||!TI(r,!1)?a=-1:(s=t[P],a=Ul(c),t=Bl(c,t)));a!==-1;){let u=t[P];if(bI(o,a,u.data)){let d=bN(a,t,n,s,r,l);if(d!==En)return d}c=t[a+8],c!==Eo&&TI(r,t[P].data[a+8]===l)&&bI(o,a,t)?(s=u,a=Ul(c),t=Bl(c,t)):a=-1}}return i}function bN(e,t,n,r,i,o){let s=t[P],a=s.data[e+8],c=r==null?pr(a)&&Mp:r!=s&&(a.type&3)!==0,l=i&1&&o===a,u=TN(a,s,n,c,l);return u!==null?Wl(t,s,u,a,i):En}function TN(e,t,n,r,i){let o=e.providerIndexes,s=t.data,a=o&1048575,c=e.directiveStart,l=e.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let g=s[h];if(h<c&&n===g||h>=c&&g.type===n)return h}if(i){let h=s[c];if(h&&yn(h)&&h.type===n)return c}return null}function Wl(e,t,n,r,i){let o=e[n],s=t.data;if(o instanceof oi){let a=o;if(a.resolving){let h=xE(s[n]);throw Vh(h)}let c=Hl(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],u,d=a.injectImpl?Ye(a.injectImpl):null,f=up(e,r,0);try{o=e[n]=a.factory(void 0,i,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&pN(n,s[n],t)}finally{d!==null&&Ye(d),Hl(c),a.resolving=!1,dp()}}return o}function SN(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Zr)?e[Zr]:void 0;return typeof t=="number"?t>=0?t&aC:AN:t}function bI(e,t,n){let r=1<<e;return!!(n[t+(e>>cC)]&r)}function TI(e,t){return!(e&2)&&!(e&1&&t)}var ii=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return fC(this._tNode,this._lView,t,qr(r),n)}};function AN(){return new ii(We(),X())}function yr(e){return zs(()=>{let t=e.prototype.constructor,n=t[ws]||Rp(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[ws]||Rp(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Rp(e){return Rh(e)?()=>{let t=Rp(ke(e));return t&&t()}:cr(e)}function MN(e,t,n,r,i){let o=e,s=t;for(;o!==null&&s!==null&&s[k]&2048&&!mo(s);){let a=hC(o,s,n,r|2,En);if(a!==En)return a;let c=o.parent;if(!c){let l=s[Kh];if(l){let u=l.get(n,En,r);if(u!==En)return u}c=pC(s),s=s[Jr]}o=c}return i}function pC(e){let t=e[P],n=t.type;return n===2?t.declTNode:n===1?e[xt]:null}function Gs(e){return DN(We(),e)}function NN(){return nu(We(),X())}function nu(e,t){return new Ft(Qt(e,t))}var Ft=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=NN}return e})();function gC(e){return(e.flags&128)===128}var Kp=(function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e})(Kp||{}),mC=new Map,RN=0;function xN(){return RN++}function ON(e){mC.set(e[Ns],e)}function xp(e){mC.delete(e[Ns])}var SI="__ngContext__";function Io(e,t){vn(t)?(e[SI]=t[Ns],ON(t)):e[SI]=t}function vC(e){return _C(e[po])}function yC(e){return _C(e[Rt])}function _C(e){for(;e!==null&&!Zt(e);)e=e[Rt];return e}var Op;function Zp(e){Op=e}function EC(){if(Op!==void 0)return Op;if(typeof document<"u")return document;throw new E(210,!1)}var ru=new w("",{providedIn:"root",factory:()=>kN}),kN="ng",iu=new w(""),wo=new w("",{providedIn:"platform",factory:()=>"unknown"});var ou=new w("",{providedIn:"root",factory:()=>EC().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var PN="h",FN="b";var IC=!1,CC=new w("",{providedIn:"root",factory:()=>IC});var Qp=new w("");var LN=(e,t,n,r)=>{};function VN(e,t,n,r){LN(e,t,n,r)}function Jp(e){return(e.flags&32)===32}var jN=()=>null;function wC(e,t,n=!1){return jN(e,t,n)}function DC(e,t){let n=e.contentQueries;if(n!==null){let r=j(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=e.data[s];lp(o),a.contentQueries(2,t[s],s)}}}finally{j(r)}}}function kp(e,t,n){lp(0);let r=j(null);try{t(e,n)}finally{j(r)}}function Xp(e,t,n){if(Zh(t)){let r=j(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=e.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{j(r)}}}var Gn=(function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e})(Gn||{});var Ol;function UN(){if(Ol===void 0&&(Ol=null,Hn.trustedTypes))try{Ol=Hn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Ol}function AI(e){return UN()?.createScriptURL(e)||e}var zl=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${vl})`}};function qs(e){return e instanceof zl?e.changingThisBreaksApplicationSecurity:e}function eg(e,t){let n=bC(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${vl})`)}return n===t}function bC(e){return e instanceof zl&&e.getTypeName()||null}var BN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function TC(e){return e=String(e),e.match(BN)?e:"unsafe:"+e}var su=(function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e})(su||{});function SC(e){let t=MC();return t?t.sanitize(su.URL,e)||"":eg(e,"URL")?qs(e):TC(Qr(e))}function AC(e){let t=MC();if(t)return AI(t.sanitize(su.RESOURCE_URL,e)||"");if(eg(e,"ResourceURL"))return AI(qs(e));throw new E(904,!1)}function HN(e,t){return t==="src"&&(e==="embed"||e==="frame"||e==="iframe"||e==="media"||e==="script")||t==="href"&&(e==="base"||e==="link")?AC:SC}function tg(e,t,n){return HN(t,n)(e)}function MC(){let e=X();return e&&e[mn].sanitizer}var $N=/^>|^->|<!--|-->|--!>|<!-$/g,WN=/(<|>)/g,zN="\u200B$1\u200B";function GN(e){return e.replace($N,t=>t.replace(WN,zN))}function ng(e){return e.ownerDocument.defaultView}function NC(e){return e instanceof Function?e():e}function qN(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}var RC="ng-template";function YN(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&qN(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(rg(e))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function rg(e){return e.type===4&&e.value!==RC}function KN(e,t,n){let r=e.type===4&&!n?RC:e.value;return t===r}function ZN(e,t,n){let r=4,i=e.attrs,o=i!==null?XN(i):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!Jt(r)&&!Jt(c))return!1;if(s&&Jt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!KN(e,c,n)||c===""&&t.length===1){if(Jt(r))return!1;s=!0}}else if(r&8){if(i===null||!YN(e,i,c,n)){if(Jt(r))return!1;s=!0}}else{let l=t[++a],u=QN(c,i,rg(e),n);if(u===-1){if(Jt(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Jt(r))return!1;s=!0}}}}return Jt(r)||s}function Jt(e){return(e&1)===0}function QN(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let s=t[i];if(s===e)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return eR(t,e)}function JN(e,t,n=!1){for(let r=0;r<t.length;r++)if(ZN(e,t[r],n))return!0;return!1}function XN(e){for(let t=0;t<e.length;t++){let n=e[t];if(oC(n))return t}return e.length}function eR(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function MI(e,t){return e?":not("+t.trim()+")":t}function tR(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Jt(s)&&(t+=MI(o,i),i=""),r=s,o=o||!Jt(r);n++}return i!==""&&(t+=MI(o,i)),t}function nR(e){return e.map(tR).join(",")}function rR(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!Jt(i))break;i=o}r++}return n.length&&t.push(1,...n),t}var Xt={};function iR(e,t){return e.createText(t)}function oR(e,t,n){e.setValue(t,n)}function sR(e,t){return e.createComment(GN(t))}function xC(e,t,n){return e.createElement(t,n)}function Gl(e,t,n,r,i){e.insertBefore(t,n,r,i)}function OC(e,t,n){e.appendChild(t,n)}function NI(e,t,n,r,i){r!==null?Gl(e,t,n,r,i):OC(e,t,n)}function aR(e,t,n,r){e.removeChild(null,t,n,r)}function cR(e,t,n){e.setAttribute(t,"style",n)}function lR(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function kC(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&yN(e,t,r),i!==null&&lR(e,t,i),o!==null&&cR(e,t,o)}function ig(e,t,n,r,i,o,s,a,c,l,u){let d=Fe+r,f=d+i,h=uR(d,f),g=typeof l=="function"?l():l;return h[P]={type:e,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:u}}function uR(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:Xt);return n}function dR(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=ig(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function og(e,t,n,r,i,o,s,a,c,l,u){let d=t.blueprint.slice();return d[Kt]=i,d[k]=r|4|128|8|64|1024,(l!==null||e&&e[k]&2048)&&(d[k]|=2048),ep(d),d[Pe]=d[Jr]=e,d[$e]=n,d[mn]=s||e&&e[mn],d[ge]=a||e&&e[ge],d[ho]=c||e&&e[ho]||null,d[xt]=o,d[Ns]=xN(),d[Ms]=u,d[Kh]=l,d[Ot]=t.type==2?e[Ot]:d,d}function fR(e,t,n){let r=Qt(t,e),i=dR(n),o=e[mn].rendererFactory,s=sg(e,og(e,i,null,PC(n),r,t,null,o.createRenderer(r,n),null,null,null));return e[t.index]=s}function PC(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function FC(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function sg(e,t){return e[po]?e[Yh][Rt]=t:e[po]=t,e[Yh]=t,t}function R(e=1){LC(Et(),X(),gr()+e,!1)}function LC(e,t,n,r){if(!r)if((t[k]&3)===3){let o=e.preOrderCheckHooks;o!==null&&Fl(t,o,n)}else{let o=e.preOrderHooks;o!==null&&Ll(t,o,0,n)}mr(n)}var au=(function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e})(au||{});function Pp(e,t,n,r){let i=j(null);try{let[o,s,a]=e.inputs[n],c=null;(s&au.SignalBased)!==0&&(c=t[o][qe]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(t,r)),e.setInput!==null?e.setInput(t,c,r,n,o):XI(t,c,o,r)}finally{j(i)}}var In=(function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e})(In||{}),hR;function ag(e,t){return hR(e,t)}var cu=new Set;function _o(e,t,n,r,i,o){if(r!=null){let s,a=!1;Zt(r)?s=r:vn(r)&&(a=!0,r=r[Kt]);let c=kt(r);e===0&&n!==null?i==null?OC(t,n,c):Gl(t,n,c,i||null,!0):e===1&&n!==null?Gl(t,n,c,i||null,!0):e===2?RI(o,l=>{aR(t,c,a,l)}):e===3&&RI(o,()=>{t.destroyNode(c)}),s!=null&&TR(t,e,s,n,i)}}function pR(e,t){VC(e,t),t[Kt]=null,t[xt]=null}function gR(e,t,n,r,i,o){r[Kt]=i,r[xt]=t,lu(e,r,n,1,i,o)}function VC(e,t){t[mn].changeDetectionScheduler?.notify(9),lu(e,t,t[ge],2,null,null)}function mR(e){let t=e[po];if(!t)return Ep(e[P],e);for(;t;){let n=null;if(vn(t))n=t[po];else{let r=t[lt];r&&(n=r)}if(!n){for(;t&&!t[Rt]&&t!==e;)vn(t)&&Ep(t[P],t),t=t[Pe];t===null&&(t=e),vn(t)&&Ep(t[P],t),n=t&&t[Rt]}t=n}}function cg(e,t){let n=e[Os],r=n.indexOf(t);n.splice(r,1)}function jC(e,t){if(ri(t))return;let n=t[ge];n.destroyNode&&lu(e,t,n,3,null,null),mR(t)}function Ep(e,t){if(ri(t))return;let n=j(null);try{t[k]&=-129,t[k]|=256,t[_t]&&vs(t[_t]),_R(e,t),yR(e,t),t[P].type===1&&t[ge].destroy();let r=t[Xr];if(r!==null&&Zt(t[Pe])){r!==t[Pe]&&cg(r,t);let i=t[ti];i!==null&&i.detachView(e)}xp(t)}finally{j(n)}}function RI(e,t){if(e&&e[Ke]&&e[Ke].leave)if(e[Ke].skipLeaveAnimations)e[Ke].skipLeaveAnimations=!1;else{let n=e[Ke].leave,r=[];for(let i=0;i<n.length;i++){let o=n[i];r.push(o())}e[Ke].running=Promise.allSettled(r),e[Ke].leave=void 0}vR(e,t)}function vR(e,t){if(e&&e[Ke]&&e[Ke].running){e[Ke].running.then(()=>{e[Ke]&&e[Ke].running&&(e[Ke].running=void 0),cu.delete(e),t(!0)});return}t(!1)}function yR(e,t){let n=e.cleanup,r=t[fo];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(t[fo]=null);let i=t[Un];if(i!==null){t[Un]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=t[Rs];if(o!==null){t[Rs]=null;for(let s of o)s.destroy()}}function _R(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof oi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];ee(4,a,c);try{c.call(a)}finally{ee(5,a,c)}}else{ee(4,i,o);try{o.call(i)}finally{ee(5,i,o)}}}}}function ER(e,t,n){return IR(e,t.parent,n)}function IR(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[Kt];if(pr(r)){let{encapsulation:i}=e.data[r.directiveStart+r.componentOffset];if(i===Gn.None||i===Gn.Emulated)return null}return Qt(r,n)}function CR(e,t,n){return DR(e,t,n)}function wR(e,t,n){return e.type&40?Qt(e,n):null}var DR=wR,xI;function lg(e,t,n,r){let i=ER(e,r,t),o=t[ge],s=r.parent||t[xt],a=CR(s,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)NI(o,i,n[c],a,!1);else NI(o,i,n,a,!1);xI!==void 0&&xI(o,r,t,n,i)}function js(e,t){if(t!==null){let n=t.type;if(n&3)return Qt(t,e);if(n&4)return Fp(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return js(e,r);{let i=e[t.index];return Zt(i)?Fp(-1,i):kt(i)}}else{if(n&128)return js(e,t.next);if(n&32)return ag(t,e)()||kt(e[t.index]);{let r=UC(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=lr(e[Ot]);return js(i,r)}else return js(e,t.next)}}}return null}function UC(e,t){if(t!==null){let r=e[Ot][xt],i=t.projection;return r.projection[i]}return null}function Fp(e,t){let n=lt+e+1;if(n<t.length){let r=t[n],i=r[P].firstChild;if(i!==null)return js(r,i)}return t[hr]}function ug(e,t,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&t===0&&(a&&Io(kt(a),r),n.flags|=2),!Jp(n))if(c&8)ug(e,t,n.child,r,i,o,!1),_o(t,e,i,a,o,r);else if(c&32){let l=ag(n,r),u;for(;u=l();)_o(t,e,i,u,o,r);_o(t,e,i,a,o,r)}else c&16?bR(e,t,r,n,i,o):_o(t,e,i,a,o,r);n=s?n.projectionNext:n.next}}function lu(e,t,n,r,i,o){ug(n,r,e.firstChild,t,i,o,!1)}function bR(e,t,n,r,i,o){let s=n[Ot],c=s[xt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];_o(t,e,i,u,o,n)}else{let l=c,u=s[Pe];gC(r)&&(l.flags|=128),ug(e,t,l,u,i,o,!0)}}function TR(e,t,n,r,i){let o=n[hr],s=kt(n);o!==s&&_o(t,e,r,o,i);for(let a=lt;a<n.length;a++){let c=n[a];lu(c[P],c,e,t,r,o)}}function SR(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:In.DashCase;i==null?e.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=In.Important),e.setStyle(n,r,i,o))}}function BC(e,t,n,r,i){let o=gr(),s=r&2;try{mr(-1),s&&t.length>Fe&&LC(e,t,Fe,!1),ee(s?2:0,i,n),n(r,i)}finally{mr(o),ee(s?3:1,i,n)}}function uu(e,t,n){PR(e,t,n),(n.flags&64)===64&&FR(e,t,n)}function dg(e,t,n=Qt){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(t,e):e[s];e[i++]=a}}}function AR(e,t,n,r){let o=r.get(CC,IC)||n===Gn.ShadowDom,s=e.selectRootElement(t,o);return MR(s),s}function MR(e){NR(e)}var NR=()=>null;function RR(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function xR(e,t,n,r,i,o){let s=t[P];if(hg(e,s,t,n,r)){pr(e)&&kR(t,e.index);return}e.type&3&&(n=RR(n)),OR(e,t,n,r,i,o)}function OR(e,t,n,r,i,o){if(e.type&3){let s=Qt(e,t);r=o!=null?o(r,e.value||"",n):r,i.setProperty(s,n,r)}else e.type&12}function kR(e,t){let n=Pt(t,e);n[k]&16||(n[k]|=64)}function PR(e,t,n){let r=n.directiveStart,i=n.directiveEnd;pr(n)&&fR(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||$l(n,t);let o=n.initialInputs;for(let s=r;s<i;s++){let a=e.data[s],c=Wl(t,e,s,n);if(Io(c,t),o!==null&&UR(t,s-r,c,a,n,o),yn(a)){let l=Pt(n.index,t);l[$e]=Wl(t,e,s,n)}}}function FR(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=fI();try{mr(o);for(let a=r;a<i;a++){let c=e.data[a],l=t[a];Al(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&LR(c,l)}}finally{mr(-1),Al(s)}}function LR(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function fg(e,t){let n=e.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];JN(t,o.selectors,!1)&&(r??=[],yn(o)?r.unshift(o):r.push(o))}return r}function VR(e,t,n,r,i,o){let s=Qt(e,t);jR(t[ge],s,o,e.value,n,r,i)}function jR(e,t,n,r,i,o,s){if(o==null)e.removeAttribute(t,i,n);else{let a=s==null?Qr(o):s(o,r||"",i);e.setAttribute(t,i,a,n)}}function UR(e,t,n,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];Pp(r,n,c,l)}}function HC(e,t,n,r,i){let o=Fe+n,s=t[P],a=i(s,t,e,r,n);t[o]=a,yo(e,!0);let c=e.type===2;return c?(kC(t[ge],a,e),(XE()===0||go(e))&&Io(a,t),eI()):Io(a,t),Rl()&&(!c||!Jp(e))&&lg(s,t,a,e),e}function $C(e){let t=e;return ip()?sI():(t=t.parent,yo(t,!1)),t}function BR(e,t){let n=e[ho];if(!n)return;let r;try{r=n.get(ut,null)}catch{r=null}r?.(t)}function hg(e,t,n,r,i){let o=e.inputs?.[r],s=e.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],d=t.data[l];Pp(d,n[l],u,i),a=!0}if(o)for(let c of o){let l=n[c],u=t.data[c];Pp(u,l,r,i),a=!0}return a}function HR(e,t){let n=Pt(t,e),r=n[P];$R(r,n);let i=n[Kt];i!==null&&n[Ms]===null&&(n[Ms]=wC(i,n[ho])),ee(18),pg(r,n,n[$e]),ee(19,n[$e])}function $R(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function pg(e,t,n){Ml(t);try{let r=e.viewQuery;r!==null&&kp(1,r,n);let i=e.template;i!==null&&BC(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[ti]?.finishViewCreation(e),e.staticContentQueries&&DC(e,t),e.staticViewQueries&&kp(2,e.viewQuery,n);let o=e.components;o!==null&&WR(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[k]&=-5,Nl()}}function WR(e,t){for(let n=0;n<t.length;n++)HR(e,t[n])}function zR(e,t,n,r){let i=j(null);try{let o=t.tView,a=e[k]&4096?4096:16,c=og(e,o,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=e[t.index];c[Xr]=l;let u=e[ti];return u!==null&&(c[ti]=u.createEmbeddedView(o)),pg(o,c,n),c}finally{j(i)}}function OI(e,t){return!t||t.firstChild===null||gC(e)}function Hs(e,t,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=t[n.index];o!==null&&r.push(kt(o)),Zt(o)&&WC(o,r);let s=n.type;if(s&8)Hs(e,t,n.child,r);else if(s&32){let a=ag(n,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=UC(t,n);if(Array.isArray(a))r.push(...a);else{let c=lr(t[Ot]);Hs(c[P],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function WC(e,t){for(let n=lt;n<e.length;n++){let r=e[n],i=r[P].firstChild;i!==null&&Hs(r[P],r,i,t)}e[hr]!==e[Kt]&&t.push(e[hr])}function zC(e){if(e[ni]!==null){for(let t of e[ni])t.impl.addSequence(t);e[ni].length=0}}var GC=[];function GR(e){return e[_t]??qR(e)}function qR(e){let t=GC.pop()??Object.create(KR);return t.lView=e,t}function YR(e){e.lView[_t]!==e&&(e.lView=null,GC.push(e))}var KR=S(m({},Wi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{vo(e.lView)},consumerOnSignalRead(){this.lView[_t]=this}});function ZR(e){let t=e[_t]??Object.create(QR);return t.lView=e,t}var QR=S(m({},Wi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=lr(e.lView);for(;t&&!qC(t[P]);)t=lr(t);t&&tp(t)},consumerOnSignalRead(){this.lView[_t]=this}});function qC(e){return e.type!==2}function YC(e){if(e[Rs]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[Rs])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[k]&8192)}}var JR=100;function KC(e,t=0){let r=e[mn].rendererFactory,i=!1;i||r.begin?.();try{XR(e,t)}finally{i||r.end?.()}}function XR(e,t){let n=op();try{sp(!0),Lp(e,t);let r=0;for(;Ps(e);){if(r===JR)throw new E(103,!1);r++,Lp(e,1)}}finally{sp(n)}}function ex(e,t,n,r){if(ri(t))return;let i=t[k],o=!1,s=!1;Ml(t);let a=!0,c=null,l=null;o||(qC(e)?(l=GR(t),c=Gi(l)):Lc()===null?(a=!1,l=ZR(t),c=Gi(l)):t[_t]&&(vs(t[_t]),t[_t]=null));try{ep(t),lI(e.bindingStartIndex),n!==null&&BC(e,t,n,2,r),tx(t);let u=(i&3)===3;if(!o)if(u){let h=e.preOrderCheckHooks;h!==null&&Fl(t,h,null)}else{let h=e.preOrderHooks;h!==null&&Ll(t,h,0,null),yp(t,0)}if(s||nx(t),YC(t),ZC(t,0),e.contentQueries!==null&&DC(e,t),!o)if(u){let h=e.contentCheckHooks;h!==null&&Fl(t,h)}else{let h=e.contentHooks;h!==null&&Ll(t,h,1),yp(t,1)}ix(e,t);let d=e.components;d!==null&&JC(t,d,0);let f=e.viewQuery;if(f!==null&&kp(2,f,r),!o)if(u){let h=e.viewCheckHooks;h!==null&&Fl(t,h)}else{let h=e.viewHooks;h!==null&&Ll(t,h,2),yp(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Cl]){for(let h of t[Cl])h();t[Cl]=null}o||(zC(t),t[k]&=-73)}catch(u){throw o||vo(t),u}finally{l!==null&&(gs(l,c),a&&YR(l)),Nl()}}function tx(e){let t=e[Ke];if(t?.enter){for(let n of t.enter)n();t.enter=void 0}}function ZC(e,t){for(let n=vC(e);n!==null;n=yC(n))for(let r=lt;r<n.length;r++){let i=n[r];QC(i,t)}}function nx(e){for(let t=vC(e);t!==null;t=yC(t)){if(!(t[k]&2))continue;let n=t[Os];for(let r=0;r<n.length;r++){let i=n[r];tp(i)}}}function rx(e,t,n){ee(18);let r=Pt(t,e);QC(r,n),ee(19,r[$e])}function QC(e,t){Dl(e)&&Lp(e,t)}function Lp(e,t){let r=e[P],i=e[k],o=e[_t],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&ms(o)),s||=!1,o&&(o.dirty=!1),e[k]&=-9217,s)ex(r,e,r.template,e[$e]);else if(i&8192){let a=j(null);try{YC(e),ZC(e,1);let c=r.components;c!==null&&JC(e,c,1),zC(e)}finally{j(a)}}}function JC(e,t,n){for(let r=0;r<t.length;r++)rx(e,t[r],n)}function ix(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)mr(~i);else{let o=i,s=n[++r],a=n[++r];dI(s,o);let c=t[o];ee(24,c),a(2,c),ee(25,c)}}}finally{mr(-1)}}function gg(e,t){let n=op()?64:1088;for(e[mn].changeDetectionScheduler?.notify(t);e;){e[k]|=n;let r=lr(e);if(mo(e)&&!r)return e;e=r}return null}function XC(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function ox(e,t,n,r=!0){let i=t[P];if(sx(i,t,e,n),r){let s=Fp(n,e),a=t[ge],c=a.parentNode(e[hr]);c!==null&&gR(i,e[xt],a,t,c,s)}let o=t[Ms];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Vp(e,t){if(e.length<=lt)return;let n=lt+t,r=e[n];if(r){let i=r[Xr];i!==null&&i!==e&&cg(i,r),t>0&&(e[n-1][Rt]=r[Rt]);let o=Ts(e,lt+t);pR(r[P],r);let s=o[ti];s!==null&&s.detachView(o[P]),r[Pe]=null,r[Rt]=null,r[k]&=-129}return r}function sx(e,t,n,r){let i=lt+r,o=n.length;r>0&&(n[i-1][Rt]=t),r<o-lt?(t[Rt]=n[i],Uh(n,lt+r,t)):(n.push(t),t[Rt]=null),t[Pe]=n;let s=t[Xr];s!==null&&n!==s&&ew(s,t);let a=t[ti];a!==null&&a.insertView(e),bl(t),t[k]|=128}function ew(e,t){let n=e[Os],r=t[Pe];if(vn(r))e[k]|=2;else{let i=r[Pe][Ot];t[Ot]!==i&&(e[k]|=2)}n===null?e[Os]=[t]:n.push(t)}var vr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,n=t[P];return Hs(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n}get context(){return this._lView[$e]}set context(t){this._lView[$e]=t}get destroyed(){return ri(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Pe];if(Zt(t)){let n=t[xs],r=n?n.indexOf(this):-1;r>-1&&(Vp(t,r),Ts(n,r))}this._attachedToViewContainer=!1}jC(this._lView[P],this._lView)}onDestroy(t){np(this._lView,t)}markForCheck(){gg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[k]&=-129}reattach(){bl(this._lView),this._lView[k]|=128}detectChanges(){this._lView[k]|=1024,KC(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new E(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=mo(this._lView),n=this._lView[Xr];n!==null&&!t&&cg(n,this._lView),VC(this._lView[P],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new E(902,!1);this._appRef=t;let n=mo(this._lView),r=this._lView[Xr];r!==null&&!n&&ew(r,this._lView),bl(this._lView)}};var Ys=(()=>{class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=ax;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=zR(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new vr(o)}}return e})();function ax(){return tw(We(),X())}function tw(e,t){return e.type&4?new Ys(t,e,nu(e,t)):null}function mg(e,t,n,r,i){let o=e.data[t];if(o===null)o=cx(e,t,n,r,i),uI()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=oI();o.injectorIndex=s===null?-1:s.injectorIndex}return yo(o,!0),o}function cx(e,t,n,r,i){let o=rp(),s=ip(),a=s?o:o&&o.parent,c=e.data[t]=ux(e,a,n,t,r,i);return lx(e,c,o,s),c}function lx(e,t,n,r){e.firstChild===null&&(e.firstChild=t),n!==null&&(r?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function ux(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return nI()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var z6=new RegExp(`^(\\d+)*(${FN}|${PN})*(.*)`);var dx=()=>null;function kI(e,t){return dx(e,t)}var nw=class{},du=class{},jp=class{resolveComponentFactory(t){throw new E(917,!1)}},Ks=class{static NULL=new jp},si=class{},en=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>fx()}return e})();function fx(){let e=X(),t=We(),n=Pt(t.index,e);return(vn(n)?n:e)[ge]}var rw=(()=>{class e{static \u0275prov=I({token:e,providedIn:"root",factory:()=>null})}return e})();var Vl={},Up=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){let i=this.injector.get(t,Vl,r);return i!==Vl||n===Vl?i:this.parentInjector.get(t,n,r)}};function PI(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=Nh(i,a);else if(o==2){let c=a,l=t[++s];r=Nh(r,c+": "+l+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function C(e,t=0){let n=X();if(n===null)return M(e,t);let r=We();return fC(r,n,ke(e),t)}function vg(){let e="invalid";throw new Error(e)}function iw(e,t,n,r,i){let o=r===null?null:{"":-1},s=i(e,n);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}gx(e,t,n,a,o,c,l)}o!==null&&r!==null&&hx(n,r,o)}function hx(e,t,n){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new E(-301,!1);r.push(t[i],o)}}function px(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function gx(e,t,n,r,i,o,s){let a=r.length,c=!1;for(let f=0;f<a;f++){let h=r[f];!c&&yn(h)&&(c=!0,px(e,n,f)),Np($l(n,t),e,h.type)}Ix(n,e.data.length,a);for(let f=0;f<a;f++){let h=r[f];h.providersResolver&&h.providersResolver(h)}let l=!1,u=!1,d=FC(e,t,a,null);a>0&&(n.directiveToIndex=new Map);for(let f=0;f<a;f++){let h=r[f];if(n.mergedAttrs=Bs(n.mergedAttrs,h.hostAttrs),vx(e,n,t,d,h),Ex(d,h,i),s!==null&&s.has(h)){let[_,b]=s.get(h);n.directiveToIndex.set(h.type,[d,_+n.directiveStart,b+n.directiveStart])}else(o===null||!o.has(h))&&n.directiveToIndex.set(h.type,d);h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let g=h.type.prototype;!l&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),l=!0),!u&&(g.ngOnChanges||g.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),u=!0),d++}mx(e,n,o)}function mx(e,t,n){for(let r=t.directiveStart;r<t.directiveEnd;r++){let i=e.data[r];if(n===null||!n.has(i))FI(0,t,i,r),FI(1,t,i,r),VI(t,r,!1);else{let o=n.get(i);LI(0,t,o,r),LI(1,t,o,r),VI(t,r,!0)}}}function FI(e,t,n,r){let i=e===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;e===0?s=t.inputs??={}:s=t.outputs??={},s[o]??=[],s[o].push(r),ow(t,o)}}function LI(e,t,n,r){let i=e===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;e===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),ow(t,s)}}function ow(e,t){t==="class"?e.flags|=8:t==="style"&&(e.flags|=16)}function VI(e,t,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=e;if(r===null||!n&&i===null||n&&o===null||rg(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===t){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===t){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}e.initialInputs??=[],e.initialInputs.push(s)}function vx(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=cr(i.type,!0)),s=new oi(o,yn(i),C,null);e.blueprint[r]=s,n[r]=s,yx(e,t,r,FC(e,n,i.hostVars,Xt),i)}function yx(e,t,n,r,i){let o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;_x(s)!=a&&s.push(a),s.push(n,r,o)}}function _x(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function Ex(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;yn(t)&&(n[""]=e)}}function Ix(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function yg(e,t,n,r,i,o,s,a){let c=t[P],l=c.consts,u=ks(l,s),d=mg(c,e,n,r,u);return o&&iw(c,t,d,ks(l,a),i),d.mergedAttrs=Bs(d.mergedAttrs,d.attrs),d.attrs!==null&&PI(d,d.attrs,!1),d.mergedAttrs!==null&&PI(d,d.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,d),d}function _g(e,t){rC(e,t),Zh(t)&&e.queries.elementEnd(t)}function Eg(e){return aw(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function sw(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function aw(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function cw(e,t,n){return e[t]=n}function ai(e,t,n){if(n===Xt)return!1;let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function lw(e,t,n,r){let i=ai(e,t,n);return ai(e,t+1,r)||i}function Ip(e,t,n){return function r(i){let o=pr(e)?Pt(e.index,t):t;gg(o,5);let s=t[$e],a=jI(t,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=jI(t,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function jI(e,t,n,r){let i=j(null);try{return ee(6,t,n),n(r)!==!1}catch(o){return BR(e,o),!1}finally{ee(7,t,n),j(i)}}function Cx(e,t,n,r,i,o,s,a){let c=go(e),l=!1,u=null;if(!r&&c&&(u=Dx(t,n,o,e.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let d=Qt(e,n),f=r?r(d):d;VN(n,f,o,a);let h=i.listen(f,o,a);if(!wx(o)){let g=r?_=>r(kt(_[e.index])):e.index;uw(g,t,n,o,a,h,!1)}}return l}function wx(e){return e.startsWith("animation")||e.startsWith("transition")}function Dx(e,t,n,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=t[fo],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function uw(e,t,n,r,i,o,s){let a=t.firstCreatePass?JE(t):null,c=QE(n),l=c.length;c.push(i,o),a&&a.push(r,e,l,(l+1)*(s?-1:1))}function UI(e,t,n,r,i,o){let s=t[n],a=t[P],l=a.data[n].outputs[r],d=s[l].subscribe(o);uw(e.index,a,t,i,o,d,!0)}var Bp=Symbol("BINDING");var ql=class extends Ks{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Wn(t);return new ci(n,this.ngModule)}};function bx(e){return Object.keys(e).map(t=>{let[n,r,i]=e[t],o={propName:n,templateName:t,isSignal:(r&au.SignalBased)!==0};return i&&(o.transform=i),o})}function Tx(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}function Sx(e,t,n){let r=t instanceof Te?t:t?.injector;return r&&e.getStandaloneInjector!==null&&(r=e.getStandaloneInjector(r)||r),r?new Up(n,r):n}function Ax(e){let t=e.get(si,null);if(t===null)throw new E(407,!1);let n=e.get(rw,null),r=e.get(ur,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function Mx(e,t){let n=dw(e);return xC(t,n,n==="svg"?GE:n==="math"?qE:null)}function dw(e){return(e.selectors[0][0]||"div").toLowerCase()}var ci=class extends du{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=bx(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Tx(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=nR(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,r,i,o,s){ee(22);let a=j(null);try{let c=this.componentDef,l=Nx(r,c,s,o),u=Sx(c,i||this.ngModule,t),d=Ax(u),f=d.rendererFactory.createRenderer(null,c),h=r?AR(f,r,c.encapsulation,u):Mx(c,f),g=s?.some(BI)||o?.some(N=>typeof N!="function"&&N.bindings.some(BI)),_=og(null,l,null,512|PC(c),null,null,d,f,u,null,wC(h,u,!0));_[Fe]=h,Ml(_);let b=null;try{let N=yg(Fe,_,2,"#host",()=>l.directiveRegistry,!0,0);kC(f,h,N),Io(h,_),uu(l,_,N),Xp(l,N,_),_g(l,N),n!==void 0&&xx(N,this.ngContentSelectors,n),b=Pt(N.index,_),_[$e]=b[$e],pg(l,_,null)}catch(N){throw b!==null&&xp(b),xp(_),N}finally{ee(23),Nl()}return new Yl(this.componentType,_,!!g)}finally{j(a)}}};function Nx(e,t,n,r){let i=e?["ng-version","20.3.2"]:rR(t.selectors[0]),o=null,s=null,a=0;if(n)for(let u of n)a+=u[Bp].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let d=r[u];if(typeof d!="function")for(let f of d.bindings){a+=f[Bp].requiredVars;let h=u+1;f.create&&(f.targetIdx=h,(o??=[]).push(f)),f.update&&(f.targetIdx=h,(s??=[]).push(f))}}let c=[t];if(r)for(let u of r){let d=typeof u=="function"?u:u.type,f=Wh(d);c.push(f)}return ig(0,null,Rx(o,s),1,a,c,null,null,null,[i],null)}function Rx(e,t){return!e&&!t?null:n=>{if(n&1&&e)for(let r of e)r.create();if(n&2&&t)for(let r of t)r.update()}}function BI(e){let t=e[Bp].kind;return t==="input"||t==="twoWay"}var Yl=class extends nw{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=wl(n[P],Fe),this.location=nu(this._tNode,n),this.instance=Pt(this._tNode.index,n)[$e],this.hostView=this.changeDetectorRef=new vr(n,void 0),this.componentType=t}setInput(t,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let i=this._rootLView,o=hg(r,i[P],i,t,n);this.previousInputValues.set(t,n);let s=Pt(r.index,i);gg(s,1)}get injector(){return new ii(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function xx(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var di=(()=>{class e{static __NG_ELEMENT_ID__=Ox}return e})();function Ox(){let e=We();return Px(e,X())}var kx=di,fw=class extends kx{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return nu(this._hostTNode,this._hostLView)}get injector(){return new ii(this._hostTNode,this._hostLView)}get parentInjector(){let t=Yp(this._hostTNode,this._hostLView);if(sC(t)){let n=Bl(t,this._hostLView),r=Ul(t),i=n[P].data[r+8];return new ii(i,n)}else return new ii(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=HI(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-lt}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=kI(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,OI(this._hostTNode,s)),a}createComponent(t,n,r,i,o,s,a){let c=t&&!uN(t),l;if(c)l=n;else{let b=n||{};l=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef,s=b.directives,a=b.bindings}let u=c?t:new ci(Wn(t)),d=r||this.parentInjector;if(!o&&u.ngModule==null){let N=(c?d:this.parentInjector).get(Te,null);N&&(o=N)}let f=Wn(u.componentType??{}),h=kI(this._lContainer,f?.id??null),g=h?.firstChild??null,_=u.create(d,i,g,o,s,a);return this.insertImpl(_.hostView,l,OI(this._hostTNode,h)),_}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(YE(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=i[Pe],l=new fw(c,c[xt],c[Pe]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(n),s=this._lContainer;return ox(s,i,o,r),t.attachToViewContainerRef(),Uh(Cp(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=HI(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Vp(this._lContainer,n);r&&(Ts(Cp(this._lContainer),n),jC(r[P],r))}detach(t){let n=this._adjustIndex(t,-1),r=Vp(this._lContainer,n);return r&&Ts(Cp(this._lContainer),n)!=null?new vr(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function HI(e){return e[xs]}function Cp(e){return e[xs]||(e[xs]=[])}function Px(e,t){let n,r=t[e.index];return Zt(r)?n=r:(n=XC(r,t,null,e),t[e.index]=n,sg(t,n)),Lx(n,t,e,r),new fw(n,e,t)}function Fx(e,t){let n=e[ge],r=n.createComment(""),i=Qt(t,e),o=n.parentNode(i);return Gl(n,o,r,n.nextSibling(i),!1),r}var Lx=Ux,Vx=()=>!1;function jx(e,t,n){return Vx(e,t,n)}function Ux(e,t,n,r){if(e[hr])return;let i;n.type&8?i=kt(r):i=Fx(t,n),e[hr]=i}var $I=new Set;function fi(e){$I.has(e)||($I.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var li=class{},fu=class{};var Kl=class extends li{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new ql(this);constructor(t,n,r,i=!0){super(),this.ngModuleType=t,this._parent=n;let o=$h(t);this._bootstrapComponents=NC(o.bootstrap),this._r3Injector=hp(t,n,[{provide:li,useValue:this},{provide:Ks,useValue:this.componentFactoryResolver},...r],Bn(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Zl=class extends fu{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Kl(this.moduleType,t,[])}};var $s=class extends li{injector;componentFactoryResolver=new ql(this);instance=null;constructor(t){super();let n=new Kr([...t.providers,{provide:li,useValue:this},{provide:Ks,useValue:this.componentFactoryResolver}],t.parent||As(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Do(e,t,n=null){return new $s({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var Bx=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=zh(!1,n.type),i=r.length>0?Do([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=I({token:e,providedIn:"environment",factory:()=>new e(M(Te))})}return e})();function Je(e){return zs(()=>{let t=hw(e),n=S(m({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Kp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(Bx).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Gn.Emulated,styles:e.styles||yt,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&fi("NgStandalone"),pw(n);let r=e.dependencies;return n.directiveDefs=WI(r,Hx),n.pipeDefs=WI(r,VE),n.id=zx(n),n})}function Hx(e){return Wn(e)||Wh(e)}function Cn(e){return zs(()=>({type:e.type,bootstrap:e.bootstrap||yt,declarations:e.declarations||yt,imports:e.imports||yt,exports:e.exports||yt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function $x(e,t){if(e==null)return dr;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=au.None,c=null),n[o]=[r,a,c],t[o]=s}return n}function Wx(e){if(e==null)return dr;let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function de(e){return zs(()=>{let t=hw(e);return pw(t),t})}function Ig(e){return{type:e.type,name:e.name,factory:null,pure:e.pure!==!1,standalone:e.standalone??!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function hw(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||dr,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||yt,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:$x(e.inputs,t),outputs:Wx(e.outputs),debugInfo:null}}function pw(e){e.features?.forEach(t=>t(e))}function WI(e,t){return e?()=>{let n=typeof e=="function"?e():e,r=[];for(let i of n){let o=t(i);o!==null&&r.push(o)}return r}:null}function zx(e){let t=0,n=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let o of r.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function Gx(e){return Object.getPrototypeOf(e.prototype).constructor}function tn(e){let t=Gx(e.type),n=!0,r=[e];for(;t;){let i;if(yn(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new E(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let s=e;s.inputs=wp(e.inputs),s.declaredInputs=wp(e.declaredInputs),s.outputs=wp(e.outputs);let a=i.hostBindings;a&&Qx(e,a);let c=i.viewQuery,l=i.contentQueries;if(c&&Kx(e,c),l&&Zx(e,l),qx(e,i),RE(e.outputs,i.outputs),yn(i)&&i.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(e),a===tn&&(n=!1)}}t=Object.getPrototypeOf(t)}Yx(r)}function qx(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n])}}function Yx(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Bs(i.hostAttrs,n=Bs(n,i.hostAttrs))}}function wp(e){return e===dr?{}:e===yt?[]:e}function Kx(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function Zx(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,o)=>{t(r,i,o),n(r,i,o)}:e.contentQueries=t}function Qx(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}function Jx(e,t,n,r,i,o,s,a){if(n.firstCreatePass){e.mergedAttrs=Bs(e.mergedAttrs,e.attrs);let u=e.tView=ig(2,e,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,e),u.queries=n.queries.embeddedTView(e))}a&&(e.flags|=a),yo(e,!1);let c=eO(n,t,e,r);Rl()&&lg(n,t,c,e),Io(c,t);let l=XC(c,t,c,e);t[r+Fe]=l,sg(t,l),jx(l,e,t)}function Xx(e,t,n,r,i,o,s,a,c,l,u){let d=n+Fe,f;return t.firstCreatePass?(f=mg(t,d,4,s||null,a||null),Tl()&&iw(t,e,f,ks(t.consts,l),fg),rC(t,f)):f=t.data[d],Jx(f,e,t,n,r,i,o,c),go(f)&&uu(t,e,f),l!=null&&dg(e,f,u),f}function Se(e,t,n,r,i,o,s,a){let c=X(),l=Et(),u=ks(l.consts,o);return Xx(c,l,e,t,n,r,i,u,void 0,s,a),Se}var eO=tO;function tO(e,t,n,r){return Fs(!0),t[ge].createComment("")}var hu=(function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e})(hu||{}),hi=new w(""),gw=!1,Hp=class extends re{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,WE()&&(this.destroyRef=v(_n,{optional:!0})??void 0,this.pendingTasks=v(zn,{optional:!0})??void 0)}emit(t){let n=j(null);try{super.next(t)}finally{j(n)}}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof ue&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},we=Hp;function mw(e){let t,n;function r(){e=Vs;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function zI(e){return queueMicrotask(()=>e()),()=>{e=Vs}}var Cg="isAngularZone",Ql=Cg+"_ID",nO=0,ve=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new we(!1);onMicrotaskEmpty=new we(!1);onStable=new we(!1);onError=new we(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=gw}=t;if(typeof Zone>"u")throw new E(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,oO(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Cg)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new E(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new E(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,rO,Vs,Vs);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},rO={};function wg(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function iO(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){mw(()=>{e.callbackScheduled=!1,$p(e),e.isCheckStableRunning=!0,wg(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),$p(e)}function oO(e){let t=()=>{iO(e)},n=nO++;e._inner=e._inner.fork({name:"angular",properties:{[Cg]:!0,[Ql]:n,[Ql+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(sO(c))return r.invokeTask(o,s,a,c);try{return GI(e),r.invokeTask(o,s,a,c)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),qI(e)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return GI(e),r.invoke(o,s,a,c,l)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!aO(c)&&t(),qI(e)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,$p(e),wg(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function $p(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function GI(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function qI(e){e._nesting--,wg(e)}var Jl=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new we;onMicrotaskEmpty=new we;onStable=new we;onError=new we;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function sO(e){return vw(e,"__ignore_ng_zone__")}function aO(e){return vw(e,"__scheduler_tick__")}function vw(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Dg=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=I({token:e,providedIn:"root",factory:()=>new e})}return e})(),yw=[0,1,2,3],_w=(()=>{class e{ngZone=v(ve);scheduler=v(ur);errorHandler=v(qt,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){v(hi,{optional:!0})}execute(){let n=this.sequences.size>0;n&&ee(16),this.executing=!0;for(let r of yw)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&ee(17)}register(n){let{view:r}=n;r!==void 0?((r[ni]??=[]).push(n),vo(r),r[k]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(hu.AFTER_NEXT_RENDER,n):n()}static \u0275prov=I({token:e,providedIn:"root",factory:()=>new e})}return e})(),Xl=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,n,r,i,o,s=null){this.impl=t,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[ni];t&&(this.view[ni]=t.filter(n=>n!==this))}};function Zs(e,t){let n=t?.injector??v(ct);return fi("NgAfterNextRender"),lO(e,n,t,!0)}function cO(e){return e instanceof Function?[void 0,void 0,e,void 0]:[e.earlyRead,e.write,e.mixedReadWrite,e.read]}function lO(e,t,n,r){let i=t.get(Dg);i.impl??=t.get(_w);let o=t.get(hi,null,{optional:!0}),s=n?.manualCleanup!==!0?t.get(_n):null,a=t.get(xl,null,{optional:!0}),c=new Xl(i.impl,cO(e),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var bg=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();var Tg=new w("");function _r(e){return!!e&&typeof e.then=="function"}function Sg(e){return!!e&&typeof e.subscribe=="function"}var Ag=new w("");function pu(e){return fr([{provide:Ag,multi:!0,useValue:e}])}var Mg=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=v(Ag,{optional:!0})??[];injector=v(ct);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=He(this.injector,i);if(_r(o))n.push(o);else if(Sg(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Qs=new w("");function Ew(){Xf(()=>{let e="";throw new E(600,e)})}function Iw(e){return e.isBoundToModule}var uO=10;var Yn=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=v(ut);afterRenderManager=v(Dg);zonelessEnabled=v(Ls);rootEffectScheduler=v(vp);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new re;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=v(zn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(U(n=>!n))}constructor(){v(hi,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=v(Te);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=ct.NULL){return this._injector.get(ve).run(()=>{ee(10);let s=n instanceof du;if(!this._injector.get(Mg).done){let g="";throw new E(405,g)}let c;s?c=n:c=this._injector.get(Ks).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let l=Iw(c)?void 0:this._injector.get(li),u=r||c.selector,d=c.create(i,[],u,l),f=d.location.nativeElement,h=d.injector.get(Tg,null);return h?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),Us(this.components,d),h?.unregisterApplication(f)}),this._loadComponent(d),ee(11,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ee(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(hu.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new E(101,!1);let n=j(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,j(n),this.afterTick.next(),ee(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(si,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<uO;)ee(14),this.synchronizeOnce(),ee(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Ps(i))continue;let o=r&&!this.zonelessEnabled?0:1;KC(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Ps(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Us(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Qs,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Us(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new E(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Us(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Js(e,t,n,r){let i=X(),o=Sl();if(ai(i,o,t)){let s=Et(),a=fp();VR(a,i,e,t,n,r)}return Js}var J6=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function q(e,t,n){let r=X(),i=Sl();if(ai(r,i,t)){let o=Et(),s=fp();xR(s,r,e,t,r[ge],n)}return q}function YI(e,t,n,r,i){hg(t,e,n,i?"class":"style",r)}function T(e,t,n,r){let i=X(),o=i[P],s=e+Fe,a=o.firstCreatePass?yg(s,i,2,t,fg,Tl(),n,r):o.data[s];if(HC(a,i,e,t,dO),go(a)){let c=i[P];uu(c,i,a),Xp(c,a,i)}return r!=null&&dg(i,a),T}function D(){let e=Et(),t=We(),n=$C(t);return e.firstCreatePass&&_g(e,n),rI(n)&&iI(),tI(),n.classesWithoutHost!=null&&mN(n)&&YI(e,n,X(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&vN(n)&&YI(e,n,X(),n.stylesWithoutHost,!1),D}function fe(e,t,n,r){return T(e,t,n,r),D(),fe}var dO=(e,t,n,r,i)=>(Fs(!0),xC(t[ge],r,yI()));function gu(e,t,n){let r=X(),i=r[P],o=e+Fe,s=i.firstCreatePass?yg(o,r,8,"ng-container",fg,Tl(),t,n):i.data[o];if(HC(s,r,e,"ng-container",fO),go(s)){let a=r[P];uu(a,r,s),Xp(a,s,r)}return n!=null&&dg(r,s),gu}function mu(){let e=Et(),t=We(),n=$C(t);return e.firstCreatePass&&_g(e,n),mu}var fO=(e,t,n,r,i)=>(Fs(!0),sR(t[ge],""));function wn(){return X()}var kl=void 0;function hO(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return t===1&&n===0?1:5}var pO=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],kl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],kl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",kl,"{1} 'at' {0}",kl],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",hO],Dp={};function Ct(e){let t=gO(e),n=KI(t);if(n)return n;let r=t.split("-")[0];if(n=KI(r),n)return n;if(r==="en")return pO;throw new E(701,!1)}function KI(e){return e in Dp||(Dp[e]=Hn.ng&&Hn.ng.common&&Hn.ng.common.locales&&Hn.ng.common.locales[e]),Dp[e]}var ye=(function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e})(ye||{});function gO(e){return e.toLowerCase().replace(/_/g,"-")}var Xs="en-US";var mO=Xs;function Cw(e){typeof e=="string"&&(mO=e.toLowerCase().replace(/_/g,"-"))}function ae(e,t,n){let r=X(),i=Et(),o=We();return vO(i,r,r[ge],o,e,t,n),ae}function vO(e,t,n,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=Ip(r,t,o),Cx(r,e,t,s,n,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let d=0;d<u.length;d+=2){let f=u[d],h=u[d+1];c??=Ip(r,t,o),UI(r,t,f,h,i,c)}if(l&&l.length)for(let d of l)c??=Ip(r,t,o),UI(r,t,d,i,i,c)}}function ie(e=1){return vI(e)}function vu(e){let t=aI();return Jh(t,Fe+e)}function Pl(e,t){return e<<17|t<<2}function ui(e){return e>>17&32767}function yO(e){return(e&2)==2}function _O(e,t){return e&131071|t<<17}function Wp(e){return e|2}function Co(e){return(e&131068)>>2}function bp(e,t){return e&-131069|t<<2}function EO(e){return(e&1)===1}function zp(e){return e|1}function IO(e,t,n,r,i,o){let s=o?t.classBindings:t.styleBindings,a=ui(s),c=Co(s);e[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||uo(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let f=ui(e[a+1]);e[r+1]=Pl(f,a),f!==0&&(e[f+1]=bp(e[f+1],r)),e[a+1]=_O(e[a+1],r)}else e[r+1]=Pl(a,0),a!==0&&(e[a+1]=bp(e[a+1],r)),a=r;else e[r+1]=Pl(c,0),a===0?a=r:e[c+1]=bp(e[c+1],r),c=r;l&&(e[r+1]=Wp(e[r+1])),ZI(e,u,r,!0),ZI(e,u,r,!1),CO(t,u,e,r,o),s=Pl(a,c),o?t.classBindings=s:t.styleBindings=s}function CO(e,t,n,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&uo(o,t)>=0&&(n[r+1]=zp(n[r+1]))}function ZI(e,t,n,r){let i=e[n+1],o=t===null,s=r?ui(i):Co(i),a=!1;for(;s!==0&&(a===!1||o);){let c=e[s],l=e[s+1];wO(c,t)&&(a=!0,e[s+1]=r?zp(l):Wp(l)),s=r?ui(l):Co(l)}a&&(e[n+1]=r?Wp(i):zp(i))}function wO(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?uo(e,t)>=0:!1}function Lt(e,t,n){return ww(e,t,n,!1),Lt}function ea(e,t){return ww(e,t,null,!0),ea}function ww(e,t,n,r){let i=X(),o=Et(),s=cp(2);if(o.firstUpdatePass&&bO(o,e,s,r),t!==Xt&&ai(i,s,t)){let a=o.data[gr()];NO(o,a,i,i[ge],e,i[s+1]=RO(t,n),r,s)}}function DO(e,t){return t>=e.expandoStartIndex}function bO(e,t,n,r){let i=e.data;if(i[n+1]===null){let o=i[gr()],s=DO(e,n);xO(o,r)&&t===null&&!s&&(t=!1),t=TO(i,o,t,r),IO(i,o,t,n,s,r)}}function TO(e,t,n,r){let i=hI(e),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=Tp(null,e,t,n,r),n=Ws(n,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==i)if(n=Tp(i,e,t,n,r),o===null){let c=SO(e,t,r);c!==void 0&&Array.isArray(c)&&(c=Tp(null,e,t,c[1],r),c=Ws(c,t.attrs,r),AO(e,t,r,c))}else o=MO(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function SO(e,t,n){let r=n?t.classBindings:t.styleBindings;if(Co(r)!==0)return e[ui(r)]}function AO(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[ui(i)]=r}function MO(e,t,n){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=e[o].hostAttrs;r=Ws(r,s,n)}return Ws(r,t.attrs,n)}function Tp(e,t,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=t[a],r=Ws(r,o.hostAttrs,i),o!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function Ws(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),LE(e,s,n?!0:t[++o]))}return e===void 0?null:e}function NO(e,t,n,r,i,o,s,a){if(!(t.type&3))return;let c=e.data,l=c[a+1],u=EO(l)?QI(c,t,n,i,Co(l),s):void 0;if(!eu(u)){eu(o)||yO(l)&&(o=QI(c,null,n,i,a,s));let d=Qh(gr(),n);SR(r,s,d,i,o)}}function QI(e,t,n,r,i,o){let s=t===null,a;for(;i>0;){let c=e[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,f=n[i+1];f===Xt&&(f=d?yt:void 0);let h=d?Il(f,r):u===r?f:void 0;if(l&&!eu(h)&&(h=Il(c,r)),eu(h)&&(a=h,s))return a;let g=e[i+1];i=s?ui(g):Co(g)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(a=Il(c,r))}return a}function eu(e){return e!==void 0}function RO(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=Bn(qs(e)))),e}function xO(e,t){return(e.flags&(t?8:16))!==0}function B(e,t=""){let n=X(),r=Et(),i=e+Fe,o=r.firstCreatePass?mg(r,i,1,t,null):r.data[i],s=OO(r,n,o,t,e);n[i]=s,Rl()&&lg(r,n,s,o),yo(o,!1)}var OO=(e,t,n,r,i)=>(Fs(!0),iR(t[ge],r));function kO(e,t,n,r=""){return ai(e,Sl(),n)?t+Qr(n)+r:Xt}function PO(e,t,n,r,i,o=""){let s=cI(),a=lw(e,s,n,i);return cp(2),a?t+Qr(n)+r+Qr(i)+o:Xt}function wt(e){return Vt("",e),wt}function Vt(e,t,n){let r=X(),i=kO(r,e,t,n);return i!==Xt&&Dw(r,gr(),i),Vt}function yu(e,t,n,r,i){let o=X(),s=PO(o,e,t,n,r,i);return s!==Xt&&Dw(o,gr(),s),yu}function Dw(e,t,n){let r=Qh(t,e);oR(e[ge],r,n)}function FO(e,t,n){let r=Et();if(r.firstCreatePass){let i=yn(e);Gp(n,r.data,r.blueprint,i,!0),Gp(t,r.data,r.blueprint,i,!1)}}function Gp(e,t,n,r,i){if(e=ke(e),Array.isArray(e))for(let o=0;o<e.length;o++)Gp(e[o],t,n,r,i);else{let o=Et(),s=X(),a=We(),c=Yr(e)?e:ke(e.provide),l=qh(e),u=a.providerIndexes&1048575,d=a.directiveStart,f=a.providerIndexes>>20;if(Yr(e)||!e.multi){let h=new oi(l,i,C,null),g=Ap(c,t,i?u:u+f,d);g===-1?(Np($l(a,s),o,c),Sp(o,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(h),s.push(h)):(n[g]=h,s[g]=h)}else{let h=Ap(c,t,u+f,d),g=Ap(c,t,u,u+f),_=h>=0&&n[h],b=g>=0&&n[g];if(i&&!b||!i&&!_){Np($l(a,s),o,c);let N=jO(i?VO:LO,n.length,i,r,l,e);!i&&b&&(n[g].providerFactory=N),Sp(o,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(N),s.push(N)}else{let N=bw(n[i?g:h],l,!i&&r);Sp(o,e,h>-1?h:g,N)}!i&&r&&b&&n[g].componentProviders++}}}function Sp(e,t,n,r){let i=Yr(t),o=$E(t);if(i||o){let c=(o?ke(t.useClass):t).prototype.ngOnDestroy;if(c){let l=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function bw(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Ap(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function LO(e,t,n,r,i){return qp(this.multi,[])}function VO(e,t,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Wl(r,r[P],this.providerFactory.index,i);s=c.slice(0,a),qp(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],qp(o,s);return s}function qp(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function jO(e,t,n,r,i,o){let s=new oi(e,n,C,null);return s.multi=[],s.index=t,s.componentProviders=0,bw(s,i,r&&!n),s}function pi(e,t=[]){return n=>{n.providersResolver=(r,i)=>FO(r,i?i(e):e,t)}}function Ng(e,t,n,r){return UO(X(),ap(),e,t,n,r)}function Tw(e,t){let n=e[t];return n===Xt?void 0:n}function UO(e,t,n,r,i,o){let s=t+n;return ai(e,s,i)?cw(e,s+1,o?r.call(o,i):r(i)):Tw(e,s+1)}function BO(e,t,n,r,i,o,s){let a=t+n;return lw(e,a,i,o)?cw(e,a+2,s?r.call(s,i,o):r(i,o)):Tw(e,a+2)}function Rg(e,t){let n=Et(),r,i=e+Fe;n.firstCreatePass?(r=HO(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=cr(r.type,!0)),s,a=Ye(C);try{let c=Hl(!1),l=o();return Hl(c),Xh(n,X(),i,l),l}finally{Ye(a)}}function HO(e,t){if(t)for(let n=t.length-1;n>=0;n--){let r=t[n];if(e===r.name)return r}}function xg(e,t,n,r){let i=e+Fe,o=X(),s=Jh(o,i);return $O(o,i)?BO(o,ap(),t,s.transform,n,r,s):s.transform(n,r)}function $O(e,t){return e[P].data[t].pure}function Og(e,t){return tw(e,t)}var tu=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},kg=(()=>{class e{compileModuleSync(n){return new Zl(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=$h(n),o=NC(i.declarations).reduce((s,a)=>{let c=Wn(a);return c&&s.push(new ci(c)),s},[]);return new tu(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var WO=(()=>{class e{zone=v(ve);changeDetectionScheduler=v(ur);applicationRef=v(Yn);applicationErrorHandler=v(ut);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Sw=new w("",{factory:()=>!1});function Pg({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new ve(S(m({},Lg()),{scheduleInRootZone:n})),[{provide:ve,useFactory:e},{provide:$n,multi:!0,useFactory:()=>{let r=v(WO,{optional:!0});return()=>r.initialize()}},{provide:$n,multi:!0,useFactory:()=>{let r=v(zO);return()=>{r.initialize()}}},t===!0?{provide:gp,useValue:!0}:[],{provide:mp,useValue:n??gw},{provide:ut,useFactory:()=>{let r=v(ve),i=v(Te),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(qt),o.handleError(s))})}}}]}function Fg(e){let t=e?.ignoreChangesOutsideZone,n=e?.scheduleInRootZone,r=Pg({ngZoneFactory:()=>{let i=Lg(e);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&fi("NgZone_CoalesceEvent"),new ve(i)},ignoreChangesOutsideZone:t,scheduleInRootZone:n});return fr([{provide:Sw,useValue:!0},{provide:Ls,useValue:!1},r])}function Lg(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var zO=(()=>{class e{subscription=new ue;initialized=!1;zone=v(ve);pendingTasks=v(zn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ve.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ve.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Aw=(()=>{class e{applicationErrorHandler=v(ut);appRef=v(Yn);taskService=v(zn);ngZone=v(ve);zonelessEnabled=v(Ls);tracing=v(hi,{optional:!0});disableScheduling=v(gp,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ue;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ql):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(v(mp,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Jl||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?zI:mw;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ql+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,zI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function GO(){return typeof $localize<"u"&&$localize.locale||Xs}var ta=new w("",{providedIn:"root",factory:()=>v(ta,{optional:!0,skipSelf:!0})||GO()});function Re(e){return AE(e)}function bo(e,t){return Uc(e,t?.equal)}var Mw=class{[qe];constructor(t){this[qe]=t}destroy(){this[qe].destroy()}};var Pw=Symbol("InputSignalNode#UNSET"),ak=S(m({},Bc),{transformFn:void 0,applyValueToInputSignal(e,t){Yi(e,t)}});function Fw(e,t){let n=Object.create(ak);n.value=e,n.transformFn=t?.transform;function r(){if(zi(n),n.value===Pw){let i=null;throw new E(-950,i)}return n.value}return r[qe]=n,r}var Eu=class{attributeName;constructor(t){this.attributeName=t}__NG_ELEMENT_ID__=()=>Gs(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},ck=new w("");ck.__NG_ELEMENT_ID__=e=>{let t=We();if(t===null)throw new E(204,!1);if(t.type&2)return t.value;if(e&8)return null;throw new E(204,!1)};function Nw(e,t){return Fw(e,t)}function lk(e){return Fw(Pw,e)}var Lw=(Nw.required=lk,Nw);var Vg=new w(""),uk=new w("");function na(e){return!e.moduleRef}function dk(e){let t=na(e)?e.r3Injector:e.moduleRef.injector,n=t.get(ve);return n.run(()=>{na(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(ut),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),na(e)){let o=()=>t.destroy(),s=e.platformInjector.get(Vg);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>e.moduleRef.destroy(),s=e.platformInjector.get(Vg);s.add(o),e.moduleRef.onDestroy(()=>{Us(e.allPlatformModules,e.moduleRef),i.unsubscribe(),s.delete(o)})}return hk(r,n,()=>{let o=t.get(zn),s=o.add(),a=t.get(Mg);return a.runInitializers(),a.donePromise.then(()=>{let c=t.get(ta,Xs);if(Cw(c||Xs),!t.get(uk,!0))return na(e)?t.get(Yn):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(na(e)){let u=t.get(Yn);return e.rootComponent!==void 0&&u.bootstrap(e.rootComponent),u}else return fk?.(e.moduleRef,e.allPlatformModules),e.moduleRef}).finally(()=>void o.remove(s))})})}var fk;function hk(e,t,n){try{let r=n();return _r(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e(r)),r}}var _u=null;function pk(e=[],t){return ct.create({name:t,providers:[{provide:Ss,useValue:"platform"},{provide:Vg,useValue:new Set([()=>_u=null])},...e]})}function gk(e=[]){if(_u)return _u;let t=pk(e);return _u=t,Ew(),mk(t),t}function mk(e){let t=e.get(iu,null);He(e,()=>{t?.forEach(n=>n())})}var gi=(()=>{class e{static __NG_ELEMENT_ID__=vk}return e})();function vk(e){return yk(We(),X(),(e&16)===16)}function yk(e,t,n){if(pr(e)&&!n){let r=Pt(e.index,t);return new vr(r,r)}else if(e.type&175){let r=t[Ot];return new vr(r,t)}return null}var jg=class{constructor(){}supports(t){return Eg(t)}create(t){return new Ug(t)}},_k=(e,t)=>t,Ug=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||_k}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<Rw(r,i,o)?n:r,a=Rw(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let f=0;f<l;f++){let h=f<o.length?o[f]:o[f]=0,g=h+f;u<=g&&g<l&&(o[f]=h+1)}let d=s.previousIndex;o[d]=u-l}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!Eg(t))throw new E(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,sw(t,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new Bg(n,r),o,i)),t}_verifyReinsertion(t,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let i=n===null?this._itHead:n._next;return t._next=i,t._prev=n,i===null?this._itTail=t:i._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new Iu),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Iu),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Bg=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,n){this.item=t,this.trackById=n}},Hg=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Iu=class{map=new Map;put(t){let n=t.trackById,r=this.map.get(n);r||(r=new Hg,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,i=this.map.get(r);return i?i.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Rw(e,t,n){let r=e.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function xw(){return new $g([new jg])}var $g=(()=>{class e{factories;static \u0275prov=I({token:e,providedIn:"root",factory:xw});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:()=>{let r=v(e,{optional:!0,skipSelf:!0});return e.create(n,r||xw())}}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new E(901,!1)}}return e})();function Vw(e){let{rootComponent:t,appProviders:n,platformProviders:r,platformRef:i}=e;ee(8);try{let o=i?.injector??gk(r),s=[Pg({}),{provide:ur,useExisting:Aw},EI,...n||[]],a=new $s({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return dk({r3Injector:a.injector,platformInjector:o,rootComponent:t})}catch(o){return Promise.reject(o)}finally{ee(9)}}function To(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function jw(e){let t=Wn(e);if(!t)return null;let n=new ci(t);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var Hw=null;function jt(){return Hw}function Wg(e){Hw??=e}var ra=class{},ia=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>v($w),providedIn:"platform"})}return e})(),zg=new w(""),$w=(()=>{class e extends ia{_location;_history;_doc=v(me);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return jt().getBaseHref(this._doc)}onPopState(n){let r=jt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=jt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function Cu(e,t){return e?t?e.endsWith("/")?t.startsWith("/")?e+t.slice(1):e+t:t.startsWith("/")?e+t:`${e}/${t}`:e:t}function Uw(e){let t=e.search(/#|\?|$/);return e[t-1]==="/"?e.slice(0,t-1)+e.slice(t):e}function nn(e){return e&&e[0]!=="?"?`?${e}`:e}var rn=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>v(Du),providedIn:"root"})}return e})(),wu=new w(""),Du=(()=>{class e extends rn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??v(me).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Cu(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+nn(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+nn(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+nn(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(M(ia),M(wu,8))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Er=(()=>{class e{_subject=new re;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=Ck(Uw(Bw(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+nn(r))}normalize(n){return e.stripTrailingSlash(Ik(this._basePath,Bw(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+nn(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+nn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=nn;static joinWithSlash=Cu;static stripTrailingSlash=Uw;static \u0275fac=function(r){return new(r||e)(M(rn))};static \u0275prov=I({token:e,factory:()=>Ek(),providedIn:"root"})}return e})();function Ek(){return new Er(M(rn))}function Ik(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function Bw(e){return e.replace(/\/index.html$/,"")}function Ck(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var Zg=(()=>{class e extends rn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=Cu(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+nn(o))||this._platformLocation.pathname;this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+nn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(M(ia),M(wu,8))};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})();var ze=(function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e})(ze||{}),ne=(function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e})(ne||{}),dt=(function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e})(dt||{}),Zn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Yw(e){return Ct(e)[ye.LocaleId]}function Kw(e,t,n){let r=Ct(e),i=[r[ye.DayPeriodsFormat],r[ye.DayPeriodsStandalone]],o=Ut(i,t);return Ut(o,n)}function Zw(e,t,n){let r=Ct(e),i=[r[ye.DaysFormat],r[ye.DaysStandalone]],o=Ut(i,t);return Ut(o,n)}function Qw(e,t,n){let r=Ct(e),i=[r[ye.MonthsFormat],r[ye.MonthsStandalone]],o=Ut(i,t);return Ut(o,n)}function Jw(e,t){let r=Ct(e)[ye.Eras];return Ut(r,t)}function oa(e,t){let n=Ct(e);return Ut(n[ye.DateFormat],t)}function sa(e,t){let n=Ct(e);return Ut(n[ye.TimeFormat],t)}function aa(e,t){let r=Ct(e)[ye.DateTimeFormat];return Ut(r,t)}function ca(e,t){let n=Ct(e),r=n[ye.NumberSymbols][t];if(typeof r>"u"){if(t===Zn.CurrencyDecimal)return n[ye.NumberSymbols][Zn.Decimal];if(t===Zn.CurrencyGroup)return n[ye.NumberSymbols][Zn.Group]}return r}function Xw(e){if(!e[ye.ExtraData])throw new E(2303,!1)}function eD(e){let t=Ct(e);return Xw(t),(t[ye.ExtraData][2]||[]).map(r=>typeof r=="string"?Gg(r):[Gg(r[0]),Gg(r[1])])}function tD(e,t,n){let r=Ct(e);Xw(r);let i=[r[ye.ExtraData][0],r[ye.ExtraData][1]],o=Ut(i,t)||[];return Ut(o,n)||[]}function Ut(e,t){for(let n=t;n>-1;n--)if(typeof e[n]<"u")return e[n];throw new E(2304,!1)}function Gg(e){let[t,n]=e.split(":");return{hours:+t,minutes:+n}}var wk=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,bu={},Dk=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function nD(e,t,n,r){let i=Ok(e);t=Kn(n,t)||t;let s=[],a;for(;t;)if(a=Dk.exec(t),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;t=u}else{s.push(t);break}let c=i.getTimezoneOffset();r&&(c=iD(r,c),i=xk(i,r));let l="";return s.forEach(u=>{let d=Nk(u);l+=d?d(i,n,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Nu(e,t,n){let r=new Date(0);return r.setFullYear(e,t,n),r.setHours(0,0,0),r}function Kn(e,t){let n=Yw(e);if(bu[n]??={},bu[n][t])return bu[n][t];let r="";switch(t){case"shortDate":r=oa(e,dt.Short);break;case"mediumDate":r=oa(e,dt.Medium);break;case"longDate":r=oa(e,dt.Long);break;case"fullDate":r=oa(e,dt.Full);break;case"shortTime":r=sa(e,dt.Short);break;case"mediumTime":r=sa(e,dt.Medium);break;case"longTime":r=sa(e,dt.Long);break;case"fullTime":r=sa(e,dt.Full);break;case"short":let i=Kn(e,"shortTime"),o=Kn(e,"shortDate");r=Tu(aa(e,dt.Short),[i,o]);break;case"medium":let s=Kn(e,"mediumTime"),a=Kn(e,"mediumDate");r=Tu(aa(e,dt.Medium),[s,a]);break;case"long":let c=Kn(e,"longTime"),l=Kn(e,"longDate");r=Tu(aa(e,dt.Long),[c,l]);break;case"full":let u=Kn(e,"fullTime"),d=Kn(e,"fullDate");r=Tu(aa(e,dt.Full),[u,d]);break}return r&&(bu[n][t]=r),r}function Tu(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(n,r){return t!=null&&r in t?t[r]:n})),e}function on(e,t,n="-",r,i){let o="";(e<0||i&&e<=0)&&(i?e=-e+1:(e=-e,o=n));let s=String(e);for(;s.length<t;)s="0"+s;return r&&(s=s.slice(s.length-t)),o+s}function bk(e,t){return on(e,3).substring(0,t)}function De(e,t,n=0,r=!1,i=!1){return function(o,s){let a=Tk(e,o);if((n>0||a>-n)&&(a+=n),e===3)a===0&&n===-12&&(a=12);else if(e===6)return bk(a,t);let c=ca(s,Zn.MinusSign);return on(a,t,c,r,i)}}function Tk(e,t){switch(e){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new E(2301,!1)}}function oe(e,t,n=ze.Format,r=!1){return function(i,o){return Sk(i,o,e,t,n,r)}}function Sk(e,t,n,r,i,o){switch(n){case 2:return Qw(t,i,r)[e.getMonth()];case 1:return Zw(t,i,r)[e.getDay()];case 0:let s=e.getHours(),a=e.getMinutes();if(o){let l=eD(t),u=tD(t,i,r),d=l.findIndex(f=>{if(Array.isArray(f)){let[h,g]=f,_=s>=h.hours&&a>=h.minutes,b=s<g.hours||s===g.hours&&a<g.minutes;if(h.hours<g.hours){if(_&&b)return!0}else if(_||b)return!0}else if(f.hours===s&&f.minutes===a)return!0;return!1});if(d!==-1)return u[d]}return Kw(t,i,r)[s<12?0:1];case 3:return Jw(t,r)[e.getFullYear()<=0?0:1];default:let c=n;throw new E(2302,!1)}}function Su(e){return function(t,n,r){let i=-1*r,o=ca(n,Zn.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(e){case 0:return(i>=0?"+":"")+on(s,2,o)+on(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+on(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+on(s,2,o)+":"+on(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+on(s,2,o)+":"+on(Math.abs(i%60),2,o);default:throw new E(2310,!1)}}}var Ak=0,Mu=4;function Mk(e){let t=Nu(e,Ak,1).getDay();return Nu(e,0,1+(t<=Mu?Mu:Mu+7)-t)}function rD(e){let t=e.getDay(),n=t===0?-3:Mu-t;return Nu(e.getFullYear(),e.getMonth(),e.getDate()+n)}function qg(e,t=!1){return function(n,r){let i;if(t){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=rD(n),s=Mk(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return on(i,e,ca(r,Zn.MinusSign))}}function Au(e,t=!1){return function(n,r){let o=rD(n).getFullYear();return on(o,e,ca(r,Zn.MinusSign),t)}}var Yg={};function Nk(e){if(Yg[e])return Yg[e];let t;switch(e){case"G":case"GG":case"GGG":t=oe(3,ne.Abbreviated);break;case"GGGG":t=oe(3,ne.Wide);break;case"GGGGG":t=oe(3,ne.Narrow);break;case"y":t=De(0,1,0,!1,!0);break;case"yy":t=De(0,2,0,!0,!0);break;case"yyy":t=De(0,3,0,!1,!0);break;case"yyyy":t=De(0,4,0,!1,!0);break;case"Y":t=Au(1);break;case"YY":t=Au(2,!0);break;case"YYY":t=Au(3);break;case"YYYY":t=Au(4);break;case"M":case"L":t=De(1,1,1);break;case"MM":case"LL":t=De(1,2,1);break;case"MMM":t=oe(2,ne.Abbreviated);break;case"MMMM":t=oe(2,ne.Wide);break;case"MMMMM":t=oe(2,ne.Narrow);break;case"LLL":t=oe(2,ne.Abbreviated,ze.Standalone);break;case"LLLL":t=oe(2,ne.Wide,ze.Standalone);break;case"LLLLL":t=oe(2,ne.Narrow,ze.Standalone);break;case"w":t=qg(1);break;case"ww":t=qg(2);break;case"W":t=qg(1,!0);break;case"d":t=De(2,1);break;case"dd":t=De(2,2);break;case"c":case"cc":t=De(7,1);break;case"ccc":t=oe(1,ne.Abbreviated,ze.Standalone);break;case"cccc":t=oe(1,ne.Wide,ze.Standalone);break;case"ccccc":t=oe(1,ne.Narrow,ze.Standalone);break;case"cccccc":t=oe(1,ne.Short,ze.Standalone);break;case"E":case"EE":case"EEE":t=oe(1,ne.Abbreviated);break;case"EEEE":t=oe(1,ne.Wide);break;case"EEEEE":t=oe(1,ne.Narrow);break;case"EEEEEE":t=oe(1,ne.Short);break;case"a":case"aa":case"aaa":t=oe(0,ne.Abbreviated);break;case"aaaa":t=oe(0,ne.Wide);break;case"aaaaa":t=oe(0,ne.Narrow);break;case"b":case"bb":case"bbb":t=oe(0,ne.Abbreviated,ze.Standalone,!0);break;case"bbbb":t=oe(0,ne.Wide,ze.Standalone,!0);break;case"bbbbb":t=oe(0,ne.Narrow,ze.Standalone,!0);break;case"B":case"BB":case"BBB":t=oe(0,ne.Abbreviated,ze.Format,!0);break;case"BBBB":t=oe(0,ne.Wide,ze.Format,!0);break;case"BBBBB":t=oe(0,ne.Narrow,ze.Format,!0);break;case"h":t=De(3,1,-12);break;case"hh":t=De(3,2,-12);break;case"H":t=De(3,1);break;case"HH":t=De(3,2);break;case"m":t=De(4,1);break;case"mm":t=De(4,2);break;case"s":t=De(5,1);break;case"ss":t=De(5,2);break;case"S":t=De(6,1);break;case"SS":t=De(6,2);break;case"SSS":t=De(6,3);break;case"Z":case"ZZ":case"ZZZ":t=Su(0);break;case"ZZZZZ":t=Su(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Su(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=Su(2);break;default:return null}return Yg[e]=t,t}function iD(e,t){e=e.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function Rk(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function xk(e,t,n){let i=e.getTimezoneOffset(),o=iD(t,i);return Rk(e,-1*(o-i))}function Ok(e){if(Ww(e))return e;if(typeof e=="number"&&!isNaN(e))return new Date(e);if(typeof e=="string"){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){let[i,o=1,s=1]=e.split("-").map(a=>+a);return Nu(i,o-1,s)}let n=parseFloat(e);if(!isNaN(e-n))return new Date(n);let r;if(r=e.match(wk))return kk(r)}let t=new Date(e);if(!Ww(t))throw new E(2311,!1);return t}function kk(e){let t=new Date(0),n=0,r=0,i=e[8]?t.setUTCFullYear:t.setFullYear,o=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),r=Number(e[9]+e[11])),i.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));let s=Number(e[4]||0)-n,a=Number(e[5]||0)-r,c=Number(e[6]||0),l=Math.floor(parseFloat("0."+(e[7]||0))*1e3);return o.call(t,s,a,c,l),t}function Ww(e){return e instanceof Date&&!isNaN(e.valueOf())}var Kg=/\s+/,zw=[],mi=(()=>{class e{_ngEl;_renderer;initialClasses=zw;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(Kg):zw}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(Kg):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(Kg).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||e)(C(Ft),C(en))};static \u0275dir=de({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return e})();var Ru=class{$implicit;ngForOf;index;count;constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Ir=(()=>{class e{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Ru(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Gw(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Gw(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(C(di),C(Ys),C($g))};static \u0275dir=de({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return e})();function Gw(e,t){e.context.$implicit=t.item}var sn=(()=>{class e{_viewContainer;_context=new xu;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){qw(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){qw(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(C(di),C(Ys))};static \u0275dir=de({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return e})(),xu=class{$implicit=null;ngIf=null};function qw(e,t){if(e&&!e.createEmbeddedView)throw new E(2020,!1)}function Pk(e,t){return new E(2100,!1)}var Fk="mediumDate",oD=new w(""),sD=new w(""),Qg=(()=>{class e{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??Fk,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return nD(n,s,o||this.locale,a)}catch(s){throw Pk(e,s.message)}}static \u0275fac=function(r){return new(r||e)(C(ta,16),C(oD,24),C(sD,24))};static \u0275pipe=Ig({name:"date",type:e,pure:!0})}return e})();var ft=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=Cn({type:e});static \u0275inj=Yt({})}return e})();function Jg(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var la=class{};var aD="browser";var cD=(()=>{class e{static \u0275prov=I({token:e,providedIn:"root",factory:()=>new Xg(v(me),window)})}return e})(),Xg=class{document;window;offset=()=>[0,0];constructor(t,n){this.document=t,this.window=n}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t,n){this.window.scrollTo(S(m({},n),{left:t[0],top:t[1]}))}scrollToAnchor(t,n){let r=Lk(this.document,t);r&&(this.scrollToElement(r,n),r.focus())}setHistoryScrollRestoration(t){try{this.window.history.scrollRestoration=t}catch{console.warn(lo(2400,!1))}}scrollToElement(t,n){let r=t.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(S(m({},n),{left:i-s[0],top:o-s[1]}))}};function Lk(e,t){let n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if(typeof e.createTreeWalker=="function"&&e.body&&typeof e.body.attachShadow=="function"){let r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}i=r.nextNode()}}return null}var ku=new w(""),im=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new E(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(M(ku),M(ve))};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})(),ua=class{_doc;constructor(t){this._doc=t}manager},em="ng-app-id";function lD(e){for(let t of e)t.remove()}function uD(e,t){let n=t.createElement("style");return n.textContent=e,n}function Vk(e,t,n,r){let i=e.head?.querySelectorAll(`style[${em}="${t}"],link[${em}="${t}"]`);if(i)for(let o of i)o.removeAttribute(em),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function nm(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var om=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,Vk(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,uD);r?.forEach(i=>this.addUsage(i,this.external,nm))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(lD(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])lD(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,uD(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,nm(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(M(me),M(ru),M(ou,8),M(wo))};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})(),tm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},sm=/%COMP%/g;var fD="%COMP%",jk=`_nghost-${fD}`,Uk=`_ngcontent-${fD}`,Bk=!0,Hk=new w("",{providedIn:"root",factory:()=>Bk});function $k(e){return Uk.replace(sm,e)}function Wk(e){return jk.replace(sm,e)}function hD(e,t){return t.map(n=>n.replace(sm,e))}var am=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,c,l=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new da(n,s,c,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof Ou?i.applyToHost(n):i instanceof fa&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,f=this.tracingService;switch(r.encapsulation){case Gn.Emulated:o=new Ou(c,l,r,this.appId,u,s,a,d,f);break;case Gn.ShadowDom:return new rm(c,l,n,r,s,a,this.nonce,d,f);default:o=new fa(c,l,r,u,s,a,d,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||e)(M(im),M(om),M(ru),M(Hk),M(me),M(wo),M(ve),M(ou),M(hi,8))};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})(),da=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,i,o){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(tm[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(dD(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(dD(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new E(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=tm[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=tm[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(In.DashCase|In.Important)?t.style.setProperty(n,r,i&In.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&In.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r,i){if(typeof t=="string"&&(t=jt().getGlobalEventTarget(this.doc,t),!t))throw new E(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,n,o)),this.eventManager.addEventListener(t,n,o,i)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;t(n)===!1&&n.preventDefault()}}};function dD(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var rm=class extends da{sharedStylesHost;hostEl;shadowRoot;constructor(t,n,r,i,o,s,a,c,l){super(t,o,s,c,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=hD(i.id,u);for(let f of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=f,this.shadowRoot.appendChild(h)}let d=i.getExternalStyles?.();if(d)for(let f of d){let h=nm(f,o);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},fa=class extends da{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,i,o,s,a,c,l){super(t,o,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?hD(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&cu.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Ou=class extends fa{contentAttr;hostAttr;constructor(t,n,r,i,o,s,a,c,l){let u=i+"-"+r.id;super(t,n,r,o,s,a,c,l,u),this.contentAttr=$k(u),this.hostAttr=Wk(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}};var Pu=class e extends ra{supportsDOMEvents=!0;static makeCurrent(){Wg(new e)}onAndCancel(t,n,r,i){return t.addEventListener(n,r,i),()=>{t.removeEventListener(n,r,i)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=zk();return n==null?null:Gk(n)}resetBaseElement(){ha=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Jg(document.cookie,t)}},ha=null;function zk(){return ha=ha||document.head.querySelector("base"),ha?ha.getAttribute("href"):null}function Gk(e){return new URL(e,document.baseURI).pathname}var qk=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})(),gD=(()=>{class e extends ua{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||e)(M(me))};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})(),pD=["alt","control","meta","shift"],Yk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Kk={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},mD=(()=>{class e extends ua{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>jt().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),pD.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=Yk[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),pD.forEach(s=>{if(s!==i){let a=Kk[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(M(me))};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})();function cm(e,t,n){let r=m({rootComponent:e,platformRef:n?.platformRef},Zk(t));return Vw(r)}function Zk(e){return{appProviders:[...tP,...e?.providers??[]],platformProviders:eP}}function Qk(){Pu.makeCurrent()}function Jk(){return new qt}function Xk(){return Zp(document),document}var eP=[{provide:wo,useValue:aD},{provide:iu,useValue:Qk,multi:!0},{provide:me,useFactory:Xk}];var tP=[{provide:Ss,useValue:"root"},{provide:qt,useFactory:Jk},{provide:ku,useClass:gD,multi:!0,deps:[me]},{provide:ku,useClass:mD,multi:!0,deps:[me]},am,om,im,{provide:si,useExisting:am},{provide:la,useClass:qk},[]];var vD=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||e)(M(me))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var L="primary",Ta=Symbol("RouteTitle"),hm=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ei(e){return new hm(e)}function bD(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=e[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function rP(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Dn(e[n],t[n]))return!1;return!0}function Dn(e,t){let n=e?pm(e):void 0,r=t?pm(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!TD(e[i],t[i]))return!1;return!0}function pm(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function TD(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function SD(e){return e.length>0?e[e.length-1]:null}function Qn(e){return hh(e)?e:_r(e)?ce(Promise.resolve(e)):A(e)}var iP={exact:MD,subset:ND},AD={exact:oP,subset:sP,ignored:()=>!0};function yD(e,t,n){return iP[n.paths](e.root,t.root,n.matrixParams)&&AD[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function oP(e,t){return Dn(e,t)}function MD(e,t,n){if(!yi(e.segments,t.segments)||!Vu(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!MD(e.children[r],t.children[r],n))return!1;return!0}function sP(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>TD(e[n],t[n]))}function ND(e,t,n){return RD(e,t,t.segments,n)}function RD(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!yi(i,n)||t.hasChildren()||!Vu(i,n,r))}else if(e.segments.length===n.length){if(!yi(e.segments,n)||!Vu(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!ND(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!yi(e.segments,i)||!Vu(e.segments,i,r)||!e.children[L]?!1:RD(e.children[L],t,o,r)}}function Vu(e,t,n){return t.every((r,i)=>AD[n](e[i].parameters,r.parameters))}var Tn=class{root;queryParams;fragment;_queryParamMap;constructor(t=new Z([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ei(this.queryParams),this._queryParamMap}toString(){return lP.serialize(this)}},Z=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ju(this)}},Cr=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=Ei(this.parameters),this._parameterMap}toString(){return OD(this)}};function aP(e,t){return yi(e,t)&&e.every((n,r)=>Dn(n.parameters,t[r].parameters))}function yi(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function cP(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===L&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==L&&(n=n.concat(t(i,r)))}),n}var Ii=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>new wr,providedIn:"root"})}return e})(),wr=class{parse(t){let n=new mm(t);return new Tn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${pa(t.root,!0)}`,r=fP(t.queryParams),i=typeof t.fragment=="string"?`#${uP(t.fragment)}`:"";return`${n}${r}${i}`}},lP=new wr;function ju(e){return e.segments.map(t=>OD(t)).join("/")}function pa(e,t){if(!e.hasChildren())return ju(e);if(t){let n=e.children[L]?pa(e.children[L],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==L&&r.push(`${i}:${pa(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=cP(e,(r,i)=>i===L?[pa(e.children[L],!1)]:[`${i}:${pa(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[L]!=null?`${ju(e)}/${n[0]}`:`${ju(e)}/(${n.join("//")})`}}function xD(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fu(e){return xD(e).replace(/%3B/gi,";")}function uP(e){return encodeURI(e)}function gm(e){return xD(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Uu(e){return decodeURIComponent(e)}function _D(e){return Uu(e.replace(/\+/g,"%20"))}function OD(e){return`${gm(e.path)}${dP(e.parameters)}`}function dP(e){return Object.entries(e).map(([t,n])=>`;${gm(t)}=${gm(n)}`).join("")}function fP(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Fu(n)}=${Fu(i)}`).join("&"):`${Fu(n)}=${Fu(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var hP=/^[^\/()?;#]+/;function lm(e){let t=e.match(hP);return t?t[0]:""}var pP=/^[^\/()?;=#]+/;function gP(e){let t=e.match(pP);return t?t[0]:""}var mP=/^[^=?&#]+/;function vP(e){let t=e.match(mP);return t?t[0]:""}var yP=/^[^&#]+/;function _P(e){let t=e.match(yP);return t?t[0]:""}var mm=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Z([],{}):new Z([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[L]=new Z(t,n)),r}parseSegment(){let t=lm(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new E(4009,!1);return this.capture(t),new Cr(Uu(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=gP(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=lm(this.remaining);i&&(r=i,this.capture(r))}t[Uu(n)]=Uu(r)}parseQueryParam(t){let n=vP(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=_P(this.remaining);s&&(r=s,this.capture(r))}let i=_D(n),o=_D(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=lm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new E(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=L);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[L]:new Z([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new E(4011,!1)}};function kD(e){return e.segments.length>0?new Z([],{[L]:e}):e}function PD(e){let t={};for(let[r,i]of Object.entries(e.children)){let o=PD(i);if(r===L&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new Z(e.segments,t);return EP(n)}function EP(e){if(e.numberOfChildren===1&&e.children[L]){let t=e.children[L];return new Z(e.segments.concat(t.segments),t.children)}return e}function Dr(e){return e instanceof Tn}function FD(e,t,n=null,r=null){let i=LD(e);return VD(i,t,n,r)}function LD(e){let t;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new Z(o.url,s);return o===e&&(t=a),a}let r=n(e.root),i=kD(r);return t??i}function VD(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return um(i,i,i,n,r);let o=IP(t);if(o.toRoot())return um(i,i,new Z([],{}),n,r);let s=CP(o,i,e),a=s.processChildren?ma(s.segmentGroup,s.index,o.commands):UD(s.segmentGroup,s.index,o.commands);return um(i,s.segmentGroup,a,n,r)}function Bu(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function ya(e){return typeof e=="object"&&e!=null&&e.outlets}function um(e,t,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;e===t?s=n:s=jD(e,t,n);let a=kD(PD(s));return new Tn(a,o,i)}function jD(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=jD(o,t,n)}),new Z(e.segments,r)}var Hu=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Bu(r[0]))throw new E(4003,!1);let i=r.find(ya);if(i&&i!==SD(r))throw new E(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function IP(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new Hu(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Hu(n,t,r)}var Mo=class{segmentGroup;processChildren;index;constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function CP(e,t,n){if(e.isAbsolute)return new Mo(t,!0,0);if(!n)return new Mo(t,!1,NaN);if(n.parent===null)return new Mo(n,!0,0);let r=Bu(e.commands[0])?0:1,i=n.segments.length-1+r;return wP(n,i,e.numberOfDoubleDots)}function wP(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new E(4005,!1);i=r.segments.length}return new Mo(r,!1,i-o)}function DP(e){return ya(e[0])?e[0].outlets:{[L]:e}}function UD(e,t,n){if(e??=new Z([],{}),e.segments.length===0&&e.hasChildren())return ma(e,t,n);let r=bP(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new Z(e.segments.slice(0,r.pathIndex),{});return o.children[L]=new Z(e.segments.slice(r.pathIndex),e.children),ma(o,0,i)}else return r.match&&i.length===0?new Z(e.segments,{}):r.match&&!e.hasChildren()?vm(e,t,n):r.match?ma(e,0,i):vm(e,t,n)}function ma(e,t,n){if(n.length===0)return new Z(e.segments,{});{let r=DP(n),i={};if(Object.keys(r).some(o=>o!==L)&&e.children[L]&&e.numberOfChildren===1&&e.children[L].segments.length===0){let o=ma(e.children[L],t,n);return new Z(e.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=UD(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Z(e.segments,i)}}function bP(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let s=e.segments[i],a=n[r];if(ya(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!ID(c,l,s))return o;r+=2}else{if(!ID(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function vm(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(ya(o)){let c=TP(o.outlets);return new Z(r,c)}if(i===0&&Bu(n[0])){let c=e.segments[t];r.push(new Cr(c.path,ED(n[0]))),i++;continue}let s=ya(o)?o.outlets[L]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Bu(a)?(r.push(new Cr(s,ED(a))),i+=2):(r.push(new Cr(s,{})),i++)}return new Z(r,{})}function TP(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=vm(new Z([],{}),0,r))}),t}function ED(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function ID(e,t,n){return e==n.path&&Dn(t,n.parameters)}var No="imperative",Ae=(function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e})(Ae||{}),bt=class{id;url;constructor(t,n){this.id=t,this.url=n}},br=class extends bt{type=Ae.NavigationStart;navigationTrigger;restoredState;constructor(t,n,r="imperative",i=null){super(t,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ht=class extends bt{urlAfterRedirects;type=Ae.NavigationEnd;constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Xe=(function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e[e.Aborted=4]="Aborted",e})(Xe||{}),xo=(function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e})(xo||{}),bn=class extends bt{reason;code;type=Ae.NavigationCancel;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Sn=class extends bt{reason;code;type=Ae.NavigationSkipped;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}},Oo=class extends bt{error;target;type=Ae.NavigationError;constructor(t,n,r,i){super(t,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},_a=class extends bt{urlAfterRedirects;state;type=Ae.RoutesRecognized;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$u=class extends bt{urlAfterRedirects;state;type=Ae.GuardsCheckStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wu=class extends bt{urlAfterRedirects;state;shouldActivate;type=Ae.GuardsCheckEnd;constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},zu=class extends bt{urlAfterRedirects;state;type=Ae.ResolveStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gu=class extends bt{urlAfterRedirects;state;type=Ae.ResolveEnd;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qu=class{route;type=Ae.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Yu=class{route;type=Ae.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ku=class{snapshot;type=Ae.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zu=class{snapshot;type=Ae.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qu=class{snapshot;type=Ae.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ju=class{snapshot;type=Ae.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ko=class{routerEvent;position;anchor;type=Ae.Scroll;constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Ea=class{},Po=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function SP(e){return!(e instanceof Ea)&&!(e instanceof Po)}function AP(e,t){return e.providers&&!e._injector&&(e._injector=Do(e.providers,t,`Route: ${e.path}`)),e._injector??t}function an(e){return e.outlet||L}function MP(e,t){let n=e.filter(r=>an(r)===t);return n.push(...e.filter(r=>an(r)!==t)),n}function Vo(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Xu=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Vo(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Ci(this.rootInjector)}},Ci=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Xu(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||e)(M(Te))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),ed=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=ym(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=ym(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=_m(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return _m(t,this._root).map(n=>n.value)}};function ym(e,t){if(e===t.value)return t;for(let n of t.children){let r=ym(e,n);if(r)return r}return null}function _m(e,t){if(e===t.value)return[t];for(let n of t.children){let r=_m(e,n);if(r.length)return r.unshift(t),r}return[]}var Dt=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ao(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var Ia=class extends ed{snapshot;constructor(t,n){super(t),this.snapshot=n,Sm(this,t)}toString(){return this.snapshot.toString()}};function BD(e){let t=NP(e),n=new Oe([new Cr("",{})]),r=new Oe({}),i=new Oe({}),o=new Oe({}),s=new Oe(""),a=new pt(n,r,o,s,i,L,e,t.root);return a.snapshot=t.root,new Ia(new Dt(a,[]),t)}function NP(e){let t={},n={},r={},o=new _i([],t,r,"",n,L,e,null,{});return new Ca("",new Dt(o,[]))}var pt=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,r,i,o,s,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(U(l=>l[Ta]))??A(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(U(t=>Ei(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(U(t=>Ei(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function td(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:m(m({},t.params),e.params),data:m(m({},t.data),e.data),resolve:m(m(m(m({},e.data),t.data),i?.data),e._resolvedData)}:r={params:m({},e.params),data:m({},e.data),resolve:m(m({},e.data),e._resolvedData??{})},i&&$D(i)&&(r.resolve[Ta]=i.title),r}var _i=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ta]}constructor(t,n,r,i,o,s,a,c,l){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ei(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ei(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},Ca=class extends ed{url;constructor(t,n){super(n),this.url=t,Sm(this,n)}toString(){return HD(this._root)}};function Sm(e,t){t.value._routerState=e,t.children.forEach(n=>Sm(e,n))}function HD(e){let t=e.children.length>0?` { ${e.children.map(HD).join(", ")} } `:"";return`${e.value}${t}`}function dm(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Dn(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Dn(t.params,n.params)||e.paramsSubject.next(n.params),rP(t.url,n.url)||e.urlSubject.next(n.url),Dn(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Em(e,t){let n=Dn(e.params,t.params)&&aP(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||Em(e.parent,t.parent))}function $D(e){return typeof e.title=="string"||e.title===null}var WD=new w(""),Sa=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=L;activateEvents=new we;deactivateEvents=new we;attachEvents=new we;detachEvents=new we;routerOutletData=Lw(void 0);parentContexts=v(Ci);location=v(di);changeDetector=v(gi);inputBinder=v(Aa,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new E(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new E(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new E(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new E(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Im(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=de({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[qn]})}return e})(),Im=class{route;childContexts;parent;outletData;constructor(t,n,r,i){this.route=t,this.childContexts=n,this.parent=r,this.outletData=i}get(t,n){return t===pt?this.route:t===Ci?this.childContexts:t===WD?this.outletData:this.parent.get(t,n)}},Aa=new w(""),Am=(()=>{class e{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,i=zr([r.queryParams,r.params,r.data]).pipe(Ne(([o,s,a],c)=>(a=m(m(m({},o),s),a),c===0?A(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let s=jw(r.component);if(!s){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(n,i)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})(),Mm=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Je({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&fe(0,"router-outlet")},dependencies:[Sa],encapsulation:2})}return e})();function Nm(e){let t=e.children&&e.children.map(Nm),n=t?S(m({},e),{children:t}):m({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==L&&(n.component=Mm),n}function RP(e,t,n){let r=wa(e,t._root,n?n._root:void 0);return new Ia(r,t)}function wa(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=xP(e,t,n);return new Dt(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>wa(e,a)),s}}let r=OP(t.value),i=t.children.map(o=>wa(e,o));return new Dt(r,i)}}function xP(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return wa(e,r,i);return wa(e,r)})}function OP(e){return new pt(new Oe(e.url),new Oe(e.params),new Oe(e.queryParams),new Oe(e.fragment),new Oe(e.data),e.outlet,e.component,e)}var Fo=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},zD="ngNavigationCancelingError";function nd(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=Dr(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=GD(!1,Xe.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function GD(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[zD]=!0,n.cancellationCode=t,n}function kP(e){return qD(e)&&Dr(e.url)}function qD(e){return!!e&&e[zD]}var PP=(e,t,n,r)=>U(i=>(new Cm(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),Cm=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),dm(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=Ao(n);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Ao(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Ao(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=Ao(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Ju(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Zu(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(dm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),dm(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},rd=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Ro=class{component;route;constructor(t,n){this.component=t,this.route=n}};function FP(e,t,n){let r=e._root,i=t?t._root:null;return ga(r,i,n,[r.value])}function LP(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function jo(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!xh(e)?e:t.get(e):r}function ga(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ao(t);return e.children.forEach(s=>{VP(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>va(a,n.getContext(s),i)),i}function VP(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=jP(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new rd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ga(e,t,a?a.children:null,r,i):ga(e,t,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ro(a.outlet.component,s))}else s&&va(t,a,i),i.canActivateChecks.push(new rd(r)),o.component?ga(e,null,a?a.children:null,r,i):ga(e,null,n,r,i);return i}function jP(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!yi(e.url,t.url);case"pathParamsOrQueryParamsChange":return!yi(e.url,t.url)||!Dn(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Em(e,t)||!Dn(e.queryParams,t.queryParams);case"paramsChange":default:return!Em(e,t)}}function va(e,t,n){let r=Ao(e),i=e.value;Object.entries(r).forEach(([o,s])=>{i.component?t?va(s,t.children.getContext(o),n):va(s,null,n):va(s,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Ro(t.outlet.component,i)):n.canDeactivateChecks.push(new Ro(null,i)):n.canDeactivateChecks.push(new Ro(null,i))}function Ma(e){return typeof e=="function"}function UP(e){return typeof e=="boolean"}function BP(e){return e&&Ma(e.canLoad)}function HP(e){return e&&Ma(e.canActivate)}function $P(e){return e&&Ma(e.canActivateChild)}function WP(e){return e&&Ma(e.canDeactivate)}function zP(e){return e&&Ma(e.canMatch)}function YD(e){return e instanceof Ln||e?.name==="EmptyError"}var Lu=Symbol("INITIAL_VALUE");function Lo(){return Ne(e=>zr(e.map(t=>t.pipe(Nt(1),yh(Lu)))).pipe(U(t=>{for(let n of t)if(n!==!0){if(n===Lu)return Lu;if(n===!1||GP(n))return n}return!0}),at(t=>t!==Lu),Nt(1)))}function GP(e){return Dr(e)||e instanceof Fo}function qP(e,t){return pe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?A(S(m({},n),{guardsResult:!0})):YP(s,r,i,e).pipe(pe(a=>a&&UP(a)?KP(r,o,e,t):A(a)),U(a=>S(m({},n),{guardsResult:a})))})}function YP(e,t,n,r){return ce(e).pipe(pe(i=>e1(i.component,i.route,n,t,r)),jn(i=>i!==!0,!0))}function KP(e,t,n,r){return ce(t).pipe(sr(i=>oo(QP(i.route.parent,r),ZP(i.route,r),XP(e,i.path,n),JP(e,i.route,n))),jn(i=>i!==!0,!0))}function ZP(e,t){return e!==null&&t&&t(new Qu(e)),A(!0)}function QP(e,t){return e!==null&&t&&t(new Ku(e)),A(!0)}function JP(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return A(!0);let i=r.map(o=>Es(()=>{let s=Vo(t)??n,a=jo(o,s),c=HP(a)?a.canActivate(t,e):He(s,()=>a(t,e));return Qn(c).pipe(jn())}));return A(i).pipe(Lo())}function XP(e,t,n){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>LP(s)).filter(s=>s!==null).map(s=>Es(()=>{let a=s.guards.map(c=>{let l=Vo(s.node)??n,u=jo(c,l),d=$P(u)?u.canActivateChild(r,e):He(l,()=>u(r,e));return Qn(d).pipe(jn())});return A(a).pipe(Lo())}));return A(o).pipe(Lo())}function e1(e,t,n,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return A(!0);let s=o.map(a=>{let c=Vo(t)??i,l=jo(a,c),u=WP(l)?l.canDeactivate(e,t,n,r):He(c,()=>l(e,t,n,r));return Qn(u).pipe(jn())});return A(s).pipe(Lo())}function t1(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return A(!0);let o=i.map(s=>{let a=jo(s,e),c=BP(a)?a.canLoad(t,n):He(e,()=>a(t,n));return Qn(c)});return A(o).pipe(Lo(),KD(r))}function KD(e){return ah(Ce(t=>{if(typeof t!="boolean")throw nd(e,t)}),U(t=>t===!0))}function n1(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return A(!0);let o=i.map(s=>{let a=jo(s,e),c=zP(a)?a.canMatch(t,n):He(e,()=>a(t,n));return Qn(c)});return A(o).pipe(Lo(),KD(r))}var Da=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},ba=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function So(e){return ro(new Da(e))}function r1(e){return ro(new E(4e3,!1))}function i1(e){return ro(GD(!1,Xe.GuardRejected))}var wm=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return A(r);if(i.numberOfChildren>1||!i.children[L])return r1(`${t.redirectTo}`);i=i.children[L]}}applyRedirectCommands(t,n,r,i,o){return o1(n,i,o).pipe(U(s=>{if(s instanceof Tn)throw new ba(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),t,r);if(s[0]==="/")throw new ba(a);return a}))}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new Tn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,i)}),new Z(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new E(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}};function o1(e,t,n){if(typeof e=="string")return A(e);let r=e,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:u,title:d}=t;return Qn(He(n,()=>r({params:l,data:u,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:d})))}var Dm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function s1(e,t,n,r,i){let o=ZD(e,t,n);return o.matched?(r=AP(t,r),n1(r,t,n,i).pipe(U(s=>s===!0?o:m({},Dm)))):A(o)}function ZD(e,t,n){if(t.path==="**")return a1(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?m({},Dm):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||bD)(n,e,t);if(!i)return m({},Dm);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?m(m({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function a1(e){return{matched:!0,parameters:e.length>0?SD(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function CD(e,t,n,r){return n.length>0&&u1(e,n,r)?{segmentGroup:new Z(t,l1(r,new Z(n,e.children))),slicedSegments:[]}:n.length===0&&d1(e,n,r)?{segmentGroup:new Z(e.segments,c1(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new Z(e.segments,e.children),slicedSegments:n}}function c1(e,t,n,r){let i={};for(let o of n)if(od(e,t,o)&&!r[an(o)]){let s=new Z([],{});i[an(o)]=s}return m(m({},r),i)}function l1(e,t){let n={};n[L]=t;for(let r of e)if(r.path===""&&an(r)!==L){let i=new Z([],{});n[an(r)]=i}return n}function u1(e,t,n){return n.some(r=>od(e,t,r)&&an(r)!==L)}function d1(e,t,n){return n.some(r=>od(e,t,r))}function od(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function f1(e,t,n){return t.length===0&&!e.children[n]}var bm=class{};function h1(e,t,n,r,i,o,s="emptyOnly"){return new Tm(e,t,n,r,i,s,o).recognize()}var p1=31,Tm=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,r,i,o,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new wm(this.urlSerializer,this.urlTree)}noMatchError(t){return new E(4002,`'${t.segmentGroup}'`)}recognize(){let t=CD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(U(({children:n,rootSnapshot:r})=>{let i=new Dt(r,n),o=new Ca("",i),s=FD(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let n=new _i([],Object.freeze({}),Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),L,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,L,n).pipe(U(r=>({children:r,rootSnapshot:n})),Vn(r=>{if(r instanceof ba)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Da?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,o):this.processSegment(t,n,r,r.segments,i,!0,o).pipe(U(s=>s instanceof Dt?[s]:[]))}processChildren(t,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ce(o).pipe(sr(s=>{let a=r.children[s],c=MP(n,s);return this.processSegmentGroup(t,c,a,s,i)}),vh((s,a)=>(s.push(...a),s)),ar(null),mh(),pe(s=>{if(s===null)return So(r);let a=QD(s);return g1(a),A(a)}))}processSegment(t,n,r,i,o,s,a){return ce(n).pipe(sr(c=>this.processSegmentAgainstRoute(c._injector??t,n,c,r,i,o,s,a).pipe(Vn(l=>{if(l instanceof Da)return A(null);throw l}))),jn(c=>!!c),Vn(c=>{if(YD(c))return f1(r,i,o)?A(new bm):So(r);throw c}))}processSegmentAgainstRoute(t,n,r,i,o,s,a,c){return an(r)!==s&&(s===L||!od(i,o,r))?So(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,s,c):So(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=ZD(n,i,o);if(!c)return So(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>p1&&(this.allowRedirects=!1));let h=new _i(o,l,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,wD(i),an(i),i.component??i._loadedComponent??null,i,DD(i)),g=td(h,a,this.paramsInheritanceStrategy);return h.params=Object.freeze(g.params),h.data=Object.freeze(g.data),this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,h,t).pipe(Ne(b=>this.applyRedirects.lineralizeSegments(i,b)),pe(b=>this.processSegment(t,r,n,b.concat(f),s,!1,a)))}matchSegmentAgainstRoute(t,n,r,i,o,s){let a=s1(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Ne(c=>c.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(Ne(({routes:l})=>{let u=r._loadedInjector??t,{parameters:d,consumedSegments:f,remainingSegments:h}=c,g=new _i(f,d,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,wD(r),an(r),r.component??r._loadedComponent??null,r,DD(r)),_=td(g,s,this.paramsInheritanceStrategy);g.params=Object.freeze(_.params),g.data=Object.freeze(_.data);let{segmentGroup:b,slicedSegments:N}=CD(n,f,h,l);if(N.length===0&&b.hasChildren())return this.processChildren(u,l,b,g).pipe(U(Mt=>new Dt(g,Mt)));if(l.length===0&&N.length===0)return A(new Dt(g,[]));let mt=an(r)===o;return this.processSegment(u,l,b,N,mt?L:o,!0,g).pipe(U(Mt=>new Dt(g,Mt instanceof Dt?[Mt]:[])))}))):So(n)))}getChildConfig(t,n,r){return n.children?A({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?A({routes:n._loadedRoutes,injector:n._loadedInjector}):t1(t,n,r,this.urlSerializer).pipe(pe(i=>i?this.configLoader.loadChildren(t,n).pipe(Ce(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):i1(n))):A({routes:[],injector:t})}};function g1(e){e.sort((t,n)=>t.value.outlet===L?-1:n.value.outlet===L?1:t.value.outlet.localeCompare(n.value.outlet))}function m1(e){let t=e.value.routeConfig;return t&&t.path===""}function QD(e){let t=[],n=new Set;for(let r of e){if(!m1(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=QD(r.children);t.push(new Dt(r.value,i))}return t.filter(r=>!n.has(r))}function wD(e){return e.data||{}}function DD(e){return e.resolve||{}}function v1(e,t,n,r,i,o){return pe(s=>h1(e,t,n,r,s.extractedUrl,i,o).pipe(U(({state:a,tree:c})=>S(m({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function y1(e,t){return pe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return A(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of JD(c))s.add(l);let a=0;return ce(s).pipe(sr(c=>o.has(c)?_1(c,r,e,t):(c.data=td(c,c.parent,e).resolve,A(void 0))),Ce(()=>a++),so(1),pe(c=>a===s.size?A(n):ot))})}function JD(e){let t=e.children.map(n=>JD(n)).flat();return[e,...t]}function _1(e,t,n,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!$D(i)&&(o[Ta]=i.title),Es(()=>(e.data=td(e,e.parent,n).resolve,E1(o,e,t,r).pipe(U(s=>(e._resolvedData=s,e.data=m(m({},e.data),s),null)))))}function E1(e,t,n,r){let i=pm(e);if(i.length===0)return A({});let o={};return ce(i).pipe(pe(s=>I1(e[s],t,n,r).pipe(jn(),Ce(a=>{if(a instanceof Fo)throw nd(new wr,a);o[s]=a}))),so(1),U(()=>o),Vn(s=>YD(s)?ot:ro(s)))}function I1(e,t,n,r){let i=Vo(t)??r,o=jo(e,i),s=o.resolve?o.resolve(t,n):He(i,()=>o(t,n));return Qn(s)}function fm(e){return Ne(t=>{let n=e(t);return n?ce(n).pipe(U(()=>t)):A(t)})}var Rm=(()=>{class e{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===L);return r}getResolvedTitleForRoute(n){return n.data[Ta]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>v(XD),providedIn:"root"})}return e})(),XD=(()=>{class e extends Rm{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(M(vD))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Tr=new w("",{providedIn:"root",factory:()=>({})}),wi=new w(""),sd=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=v(kg);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return A(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Qn(He(n,()=>r.loadComponent())).pipe(U(tb),Ne(nb),Ce(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Is(()=>{this.componentLoaders.delete(r)})),o=new to(i,()=>new re).pipe(eo());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return A({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=eb(r,this.compiler,n,this.onLoadEndListener).pipe(Is(()=>{this.childrenLoaders.delete(r)})),s=new to(o,()=>new re).pipe(eo());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function eb(e,t,n,r){return Qn(He(n,()=>e.loadChildren())).pipe(U(tb),Ne(nb),pe(i=>i instanceof fu||Array.isArray(i)?A(i):ce(t.compileModuleAsync(i))),U(i=>{r&&r(e);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(wi,[],{optional:!0,self:!0}).flat()),{routes:s.map(Nm),injector:o}}))}function C1(e){return e&&typeof e=="object"&&"default"in e}function tb(e){return C1(e)?e.default:e}function nb(e){return A(e)}var ad=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>v(w1),providedIn:"root"})}return e})(),w1=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),xm=new w(""),Om=new w("");function rb(e,t,n){let r=e.get(Om),i=e.get(me);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),D1(e)));a.ready.catch(l=>{});let{onViewTransitionCreated:c}=r;return c&&He(e,()=>c({transition:a,from:t,to:n})),s}function D1(e){return new Promise(t=>{Zs({read:()=>setTimeout(t)},{injector:e})})}var km=new w(""),cd=(()=>{class e{currentNavigation=It(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new re;transitionAbortWithErrorSubject=new re;configLoader=v(sd);environmentInjector=v(Te);destroyRef=v(_n);urlSerializer=v(Ii);rootContexts=v(Ci);location=v(Er);inputBindingEnabled=v(Aa,{optional:!0})!==null;titleStrategy=v(Rm);options=v(Tr,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=v(ad);createViewTransition=v(xm,{optional:!0});navigationErrorHandler=v(km,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>A(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new qu(i)),r=i=>this.events.next(new Yu(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;Re(()=>{this.transitions?.next(S(m({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new Oe(null),this.transitions.pipe(at(r=>r!==null),Ne(r=>{let i=!1;return A(r).pipe(Ne(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Xe.SupersededByNewNavigation),ot;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?S(m({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Sn(o.id,this.urlSerializer.serialize(o.rawUrl),"",xo.IgnoredSameUrlNavigation)),o.resolve(!1),ot;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return A(o).pipe(Ne(c=>(this.events.next(new br(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?ot:Promise.resolve(c))),v1(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Ce(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(u=>(u.finalUrl=c.urlAfterRedirects,u));let l=new _a(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:l,source:u,restoredState:d,extras:f}=o,h=new br(c,this.urlSerializer.serialize(l),u,d);this.events.next(h);let g=BD(this.rootComponentType).snapshot;return this.currentTransition=r=S(m({},o),{targetSnapshot:g,urlAfterRedirects:l,extras:S(m({},f),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(_=>(_.finalUrl=l,_)),A(r)}else return this.events.next(new Sn(o.id,this.urlSerializer.serialize(o.extractedUrl),"",xo.IgnoredByUrlHandlingStrategy)),o.resolve(!1),ot}),Ce(o=>{let s=new $u(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),U(o=>(this.currentTransition=r=S(m({},o),{guards:FP(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),qP(this.environmentInjector,o=>this.events.next(o)),Ce(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw nd(this.urlSerializer,o.guardsResult);let s=new Wu(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),at(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Xe.GuardRejected),!1)),fm(o=>{if(o.guards.canActivateChecks.length!==0)return A(o).pipe(Ce(s=>{let a=new zu(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Ne(s=>{let a=!1;return A(s).pipe(y1(this.paramsInheritanceStrategy,this.environmentInjector),Ce({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Xe.NoDataFromResolver)}}))}),Ce(s=>{let a=new Gu(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),fm(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent){let l=Vo(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(Ce(u=>{a.component=u}),U(()=>{})))}for(let l of a.children)c.push(...s(l));return c};return zr(s(o.targetSnapshot.root)).pipe(ar(null),Nt(1))}),fm(()=>this.afterPreactivation()),Ne(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?ce(a).pipe(U(()=>r)):A(r)}),U(o=>{let s=RP(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=S(m({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),Ce(()=>{this.events.next(new Ea)}),PP(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Nt(1),ao(new O(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(at(()=>!i&&!r.targetRouterState),Ce(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Xe.Aborted)}))),Ce({next:o=>{i=!0,this.lastSuccessfulNavigation=Re(this.currentNavigation),this.events.next(new ht(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),ao(this.transitionAbortWithErrorSubject.pipe(Ce(o=>{throw o}))),Is(()=>{i||this.cancelNavigationTransition(r,"",Xe.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Vn(o=>{if(this.destroyed)return r.resolve(!1),ot;if(i=!0,qD(o))this.events.next(new bn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),kP(o)?this.events.next(new Po(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Oo(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=He(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Fo){let{message:c,cancellationCode:l}=nd(this.urlSerializer,a);this.events.next(new bn(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new Po(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return ot}))}))}cancelNavigationTransition(n,r,i){let o=new bn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Re(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function b1(e){return e!==No}var ib=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>v(T1),providedIn:"root"})}return e})(),id=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},T1=(()=>{class e extends id{static \u0275fac=(()=>{let n;return function(i){return(n||(n=yr(e)))(i||e)}})();static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),ob=(()=>{class e{urlSerializer=v(Ii);options=v(Tr,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=v(Er);urlHandlingStrategy=v(ad);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Tn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Tn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=BD(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>v(S1),providedIn:"root"})}return e})(),S1=(()=>{class e extends ob{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof br?this.updateStateMemento():n instanceof Sn?this.commitTransition(r):n instanceof _a?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Ea?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof bn&&n.code!==Xe.SupersededByNewNavigation&&n.code!==Xe.Redirect?this.restoreHistory(r):n instanceof Oo?this.restoreHistory(r,!0):n instanceof ht&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,c=m(m({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",c)}else{let a=m(m({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=yr(e)))(i||e)}})();static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ld(e,t){e.events.pipe(at(n=>n instanceof ht||n instanceof bn||n instanceof Oo||n instanceof Sn),U(n=>n instanceof ht||n instanceof Sn?0:(n instanceof bn?n.code===Xe.Redirect||n.code===Xe.SupersededByNewNavigation:!1)?2:1),at(n=>n!==2),Nt(1)).subscribe(()=>{t()})}var A1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},M1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},_e=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=v(bg);stateManager=v(ob);options=v(Tr,{optional:!0})||{};pendingTasks=v(zn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=v(cd);urlSerializer=v(Ii);location=v(Er);urlHandlingStrategy=v(ad);injector=v(Te);_events=new re;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=v(ib);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=v(wi,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!v(Aa,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ue;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Re(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof bn&&r.code!==Xe.Redirect&&r.code!==Xe.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ht)this.navigated=!0;else if(r instanceof Po){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=m({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||b1(i.source)},s);this.scheduleNavigation(a,No,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}SP(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),No,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=m({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(ut)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Re(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Nm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=m(m({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let f=i?i.snapshot:this.routerState.snapshot.root;d=LD(f)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return VD(d,n,u,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Dr(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,No,null,r)}navigate(n,r={skipLocationChange:!1}){return N1(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=m({},A1):r===!1?i=m({},M1):i=r,Dr(n))return yD(this.currentUrlTree,n,i);let o=this.parseUrl(n);return yD(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,f)=>{a=d,c=f});let u=this.pendingTasks.add();return ld(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function N1(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new E(4008,!1)}var Uo=(()=>{class e{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=It(null);get href(){return Re(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new re;applicationErrorHandler=v(ut);options=v(Tr,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(v(new Eu("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof ht&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Dr(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:Dr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||e)(C(_e),C(pt),Gs("tabindex"),C(en),C(Ft),C(rn))};static \u0275dir=de({type:e,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&ae("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Js("href",i.reactiveHref(),tg)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",To],skipLocationChange:[2,"skipLocationChange","skipLocationChange",To],replaceUrl:[2,"replaceUrl","replaceUrl",To],routerLink:"routerLink"},features:[qn]})}return e})();var Na=class{};var sb=(()=>{class e{router;injector;preloadingStrategy;loader;subscription;constructor(n,r,i,o){this.router=n,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(at(n=>n instanceof ht),sr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Do(o.providers,n,`Route: ${o.path}`));let s=o._injector??n,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ce(i).pipe(io())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(n,r):i=A(null);let o=i.pipe(pe(s=>s===null?A(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(n,r);return ce([o,s]).pipe(io())}else return o})}static \u0275fac=function(r){return new(r||e)(M(_e),M(Te),M(Na),M(sd))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),ab=new w(""),R1=(()=>{class e{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=No;restoredId=0;store={};constructor(n,r,i,o,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof br?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof ht?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Sn&&n.code===xo.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof ko&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>p(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new ko(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){vg()};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})();function Fm(e,...t){return fr([{provide:wi,multi:!0,useValue:e},[],{provide:pt,useFactory:cb,deps:[_e]},{provide:Qs,multi:!0,useFactory:lb},t.map(n=>n.\u0275providers)])}function cb(e){return e.routerState.root}function Ra(e,t){return{\u0275kind:e,\u0275providers:t}}function lb(){let e=v(ct);return t=>{let n=e.get(Yn);if(t!==n.components[0])return;let r=e.get(_e),i=e.get(ub);e.get(Lm)===1&&r.initialNavigation(),e.get(hb,null,{optional:!0})?.setUpPreloading(),e.get(ab,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var ub=new w("",{factory:()=>new re}),Lm=new w("",{providedIn:"root",factory:()=>1});function db(){let e=[{provide:Qp,useValue:!0},{provide:Lm,useValue:0},pu(()=>{let t=v(ct);return t.get(zg,Promise.resolve()).then(()=>new Promise(r=>{let i=t.get(_e),o=t.get(ub);ld(i,()=>{r(!0)}),t.get(cd).afterPreactivation=()=>(r(!0),o.closed?A(void 0):o),i.initialNavigation()}))})];return Ra(2,e)}function fb(){let e=[pu(()=>{v(_e).setUpLocationChangeListener()}),{provide:Lm,useValue:2}];return Ra(3,e)}var hb=new w("");function pb(e){return Ra(0,[{provide:hb,useExisting:sb},{provide:Na,useExisting:e}])}function gb(){return Ra(8,[Am,{provide:Aa,useExisting:Am}])}function mb(e){fi("NgRouterViewTransitions");let t=[{provide:xm,useValue:rb},{provide:Om,useValue:m({skipNextTransition:!!e?.skipInitialTransition},e)}];return Ra(9,t)}var vb=[Er,{provide:Ii,useClass:wr},_e,Ci,{provide:pt,useFactory:cb,deps:[_e]},sd,[]],Di=(()=>{class e{constructor(){}static forRoot(n,r){return{ngModule:e,providers:[vb,[],{provide:wi,multi:!0,useValue:n},[],r?.errorHandler?{provide:km,useValue:r.errorHandler}:[],{provide:Tr,useValue:r||{}},r?.useHash?O1():k1(),x1(),r?.preloadingStrategy?pb(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?P1(r):[],r?.bindToComponentInputs?gb().\u0275providers:[],r?.enableViewTransitions?mb().\u0275providers:[],F1()]}}static forChild(n){return{ngModule:e,providers:[{provide:wi,multi:!0,useValue:n}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=Cn({type:e});static \u0275inj=Yt({})}return e})();function x1(){return{provide:ab,useFactory:()=>{let e=v(cD),t=v(ve),n=v(Tr),r=v(cd),i=v(Ii);return n.scrollOffset&&e.setOffset(n.scrollOffset),new R1(i,r,e,t,n)}}}function O1(){return{provide:rn,useClass:Zg}}function k1(){return{provide:rn,useClass:Du}}function P1(e){return[e.initialNavigation==="disabled"?fb().\u0275providers:[],e.initialNavigation==="enabledBlocking"?db().\u0275providers:[]]}var Pm=new w("");function F1(){return[{provide:Pm,useFactory:lb},{provide:Qs,multi:!0,useExisting:Pm}]}var Sb=(()=>{class e{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||e)(C(en),C(Ft))};static \u0275dir=de({type:e})}return e})(),Hm=(()=>{class e extends Sb{static \u0275fac=(()=>{let n;return function(i){return(n||(n=yr(e)))(i||e)}})();static \u0275dir=de({type:e,features:[tn]})}return e})(),_d=new w("");var L1={provide:_d,useExisting:gn(()=>Ed),multi:!0};function V1(){let e=jt()?jt().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var j1=new w(""),Ed=(()=>{class e extends Sb{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!V1())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||e)(C(en),C(Ft),C(j1,8))};static \u0275dir=de({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ae("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[pi([L1]),tn]})}return e})();function $m(e){return e==null||Wm(e)===0}function Wm(e){return e==null?null:Array.isArray(e)||typeof e=="string"?e.length:e instanceof Set?e.size:null}var Ab=new w(""),Mb=new w(""),U1=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Wo=class{static min(t){return B1(t)}static max(t){return H1(t)}static required(t){return $1(t)}static requiredTrue(t){return W1(t)}static email(t){return z1(t)}static minLength(t){return G1(t)}static maxLength(t){return q1(t)}static pattern(t){return Y1(t)}static nullValidator(t){return Nb()}static compose(t){return Fb(t)}static composeAsync(t){return Vb(t)}};function B1(e){return t=>{if(t.value==null||e==null)return null;let n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}function H1(e){return t=>{if(t.value==null||e==null)return null;let n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}function $1(e){return $m(e.value)?{required:!0}:null}function W1(e){return e.value===!0?null:{required:!0}}function z1(e){return $m(e.value)||U1.test(e.value)?null:{email:!0}}function G1(e){return t=>{let n=t.value?.length??Wm(t.value);return n===null||n===0?null:n<e?{minlength:{requiredLength:e,actualLength:n}}:null}}function q1(e){return t=>{let n=t.value?.length??Wm(t.value);return n!==null&&n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}}function Y1(e){if(!e)return Nb;let t,n;return typeof e=="string"?(n="",e.charAt(0)!=="^"&&(n+="^"),n+=e,e.charAt(e.length-1)!=="$"&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),r=>{if($m(r.value))return null;let i=r.value;return t.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function Nb(e){return null}function Rb(e){return e!=null}function xb(e){return _r(e)?ce(e):e}function Ob(e){let t={};return e.forEach(n=>{t=n!=null?m(m({},t),n):t}),Object.keys(t).length===0?null:t}function kb(e,t){return t.map(n=>n(e))}function K1(e){return!e.validate}function Pb(e){return e.map(t=>K1(t)?t:n=>t.validate(n))}function Fb(e){if(!e)return null;let t=e.filter(Rb);return t.length==0?null:function(n){return Ob(kb(n,t))}}function Lb(e){return e!=null?Fb(Pb(e)):null}function Vb(e){if(!e)return null;let t=e.filter(Rb);return t.length==0?null:function(n){let r=kb(n,t).map(xb);return ph(r).pipe(U(Ob))}}function jb(e){return e!=null?Vb(Pb(e)):null}function yb(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function Ub(e){return e._rawValidators}function Bb(e){return e._rawAsyncValidators}function Vm(e){return e?Array.isArray(e)?e:[e]:[]}function fd(e,t){return Array.isArray(e)?e.includes(t):e===t}function _b(e,t){let n=Vm(t);return Vm(e).forEach(i=>{fd(n,i)||n.push(i)}),n}function Eb(e,t){return Vm(t).filter(n=>!fd(e,n))}var hd=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Lb(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=jb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},zo=class extends hd{name;get formDirective(){return null}get path(){return null}},Fa=class extends hd{_parent=null;name=null;valueAccessor=null},pd=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Z1={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},_X=S(m({},Z1),{"[class.ng-submitted]":"isSubmitted"}),Hb=(()=>{class e extends pd{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(C(Fa,2))};static \u0275dir=de({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ea("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[tn]})}return e})(),$b=(()=>{class e extends pd{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(C(zo,10))};static \u0275dir=de({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&ea("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[tn]})}return e})();var xa="VALID",ud="INVALID",Ho="PENDING",Oa="DISABLED",Sr=class{},gd=class extends Sr{value;source;constructor(t,n){super(),this.value=t,this.source=n}},ka=class extends Sr{pristine;source;constructor(t,n){super(),this.pristine=t,this.source=n}},Pa=class extends Sr{touched;source;constructor(t,n){super(),this.touched=t,this.source=n}},$o=class extends Sr{status;source;constructor(t,n){super(),this.status=t,this.source=n}},jm=class extends Sr{source;constructor(t){super(),this.source=t}},La=class extends Sr{source;constructor(t){super(),this.source=t}};function zm(e){return(Id(e)?e.validators:e)||null}function Q1(e){return Array.isArray(e)?Lb(e):e||null}function Gm(e,t){return(Id(t)?t.asyncValidators:e)||null}function J1(e){return Array.isArray(e)?jb(e):e||null}function Id(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function Wb(e,t,n){let r=e.controls;if(!(t?Object.keys(r):r).length)throw new E(1e3,"");if(!r[n])throw new E(1001,"")}function zb(e,t,n){e._forEachChild((r,i)=>{if(n[i]===void 0)throw new E(1002,"")})}var Go=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,n){this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Re(this.statusReactive)}set status(t){Re(()=>this.statusReactive.set(t))}_status=bo(()=>this.statusReactive());statusReactive=It(void 0);get valid(){return this.status===xa}get invalid(){return this.status===ud}get pending(){return this.status==Ho}get disabled(){return this.status===Oa}get enabled(){return this.status!==Oa}errors;get pristine(){return Re(this.pristineReactive)}set pristine(t){Re(()=>this.pristineReactive.set(t))}_pristine=bo(()=>this.pristineReactive());pristineReactive=It(!0);get dirty(){return!this.pristine}get touched(){return Re(this.touchedReactive)}set touched(t){Re(()=>this.touchedReactive.set(t))}_touched=bo(()=>this.touchedReactive());touchedReactive=It(!1);get untouched(){return!this.touched}_events=new re;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(_b(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(_b(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Eb(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Eb(t,this._rawAsyncValidators))}hasValidator(t){return fd(this._rawValidators,t)}hasAsyncValidator(t){return fd(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(S(m({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new Pa(!0,r))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),n&&t.emitEvent!==!1&&this._events.next(new Pa(!1,r))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(S(m({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new ka(!1,r))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),n&&t.emitEvent!==!1&&this._events.next(new ka(!0,r))}markAsPending(t={}){this.status=Ho;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new $o(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(S(m({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Oa,this.errors=null,this._forEachChild(i=>{i.disable(S(m({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new gd(this.value,r)),this._events.next(new $o(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(S(m({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=xa,this._forEachChild(r=>{r.enable(S(m({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(S(m({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===xa||this.status===Ho)&&this._runAsyncValidator(r,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new gd(this.value,n)),this._events.next(new $o(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(S(m({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Oa:xa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=Ho,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:t!==!1};let r=xb(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new $o(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,r)}_initObservables(){this.valueChanges=new we,this.statusChanges=new we}_calculateStatus(){return this._allControlsDisabled()?Oa:this.errors?ud:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ho)?Ho:this._anyControlsHaveStatus(ud)?ud:xa}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),i&&this._events.next(new ka(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new Pa(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Id(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=Q1(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=J1(this._rawAsyncValidators)}},md=class extends Go{constructor(t,n,r){super(zm(n),Gm(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){zb(this,!0,t),Object.keys(t).forEach(r=>{Wb(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new La(this))}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Um=class extends md{};var Gb=new w("",{providedIn:"root",factory:()=>qm}),qm="always";function X1(e,t){return[...t.path,e]}function Ib(e,t,n=qm){Ym(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),tF(e,t),rF(e,t),nF(e,t),eF(e,t)}function Cb(e,t,n=!0){let r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),yd(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function vd(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function eF(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function Ym(e,t){let n=Ub(e);t.validator!==null?e.setValidators(yb(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=Bb(e);t.asyncValidator!==null?e.setAsyncValidators(yb(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();vd(t._rawValidators,i),vd(t._rawAsyncValidators,i)}function yd(e,t){let n=!1;if(e!==null){if(t.validator!==null){let i=Ub(e);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.validator);o.length!==i.length&&(n=!0,e.setValidators(o))}}if(t.asyncValidator!==null){let i=Bb(e);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.asyncValidator);o.length!==i.length&&(n=!0,e.setAsyncValidators(o))}}}let r=()=>{};return vd(t._rawValidators,r),vd(t._rawAsyncValidators,r),n}function tF(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&qb(e,t)})}function nF(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&qb(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function qb(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function rF(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function iF(e,t){e==null,Ym(e,t)}function oF(e,t){return yd(e,t)}function sF(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function aF(e){return Object.getPrototypeOf(e.constructor)===Hm}function cF(e,t){e._syncPendingControls(),t.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function lF(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(o=>{o.constructor===Ed?n=o:aF(o)?r=o:i=o}),i||r||n||null}function uF(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function wb(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Db(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var dd=class extends Go{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,n,r){super(zm(n),Gm(r,n)),this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Id(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Db(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new La(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){wb(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){wb(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Db(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var dF=e=>e instanceof dd;var Yb=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275dir=de({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return e})();var Kb=new w("");var fF={provide:zo,useExisting:gn(()=>Km)},Km=(()=>{class e extends zo{callSetDisabledState;get submitted(){return Re(this._submittedReactive)}set submitted(n){this._submittedReactive.set(n)}_submitted=bo(()=>this._submittedReactive());_submittedReactive=It(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new we;constructor(n,r,i){super(),this.callSetDisabledState=i,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(yd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){let r=this.form.get(n.path);return Ib(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){Cb(n.control||null,n,!1),uF(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this._submittedReactive.set(!0),cF(this.form,this.directives),this.ngSubmit.emit(n),this.form._events.next(new jm(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0,r={}){this.form.reset(n,r),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(n=>{let r=n.control,i=this.form.get(n.path);r!==i&&(Cb(r||null,n),dF(i)&&(Ib(i,n,this.callSetDisabledState),n.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){let r=this.form.get(n.path);iF(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){let r=this.form.get(n.path);r&&oF(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ym(this.form,this),this._oldForm&&yd(this._oldForm,this)}static \u0275fac=function(r){return new(r||e)(C(Ab,10),C(Mb,10),C(Gb,8))};static \u0275dir=de({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&ae("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[pi([fF]),tn,qn]})}return e})();var hF={provide:Fa,useExisting:gn(()=>Zm)},Zm=(()=>{class e extends Fa{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(n){}model;update=new we;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=lF(this,o)}ngOnChanges(n){this._added||this._setUpControl(),sF(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return X1(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||e)(C(zo,13),C(Ab,10),C(Mb,10),C(_d,10),C(Kb,8))};static \u0275dir=de({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[pi([hF]),tn,qn]})}return e})();var pF={provide:_d,useExisting:gn(()=>Cd),multi:!0};function Zb(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function gF(e){return e.split(":")[0]}var Cd=(()=>{class e extends Hm{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=v(Yn).injector;destroyRef=v(_n);cdr=v(gi);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Zs({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let r=this._getOptionId(n),i=Zb(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=gF(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=yr(e)))(i||e)}})();static \u0275dir=de({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ae("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[pi([pF]),tn]})}return e})(),Qb=(()=>{class e{_element;_renderer;_select;id;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(Zb(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||e)(C(Ft),C(en),C(Cd,9))};static \u0275dir=de({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})(),mF={provide:_d,useExisting:gn(()=>Jb),multi:!0};function bb(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function vF(e){return e.split(":")[0]}var Jb=(()=>{class e extends Hm{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=vF(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=yr(e)))(i||e)}})();static \u0275dir=de({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ae("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[pi([mF]),tn]})}return e})(),Xb=(()=>{class e{_element;_renderer;_select;id;_value;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(bb(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(bb(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||e)(C(Ft),C(en),C(Jb,9))};static \u0275dir=de({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})();var yF=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=Cn({type:e});static \u0275inj=Yt({})}return e})(),Bm=class extends Go{constructor(t,n,r){super(zm(n),Gm(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,n={}){Array.isArray(t)?t.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(t,n,r={}){this.controls.splice(t,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,n={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(t,n,r={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,n={}){zb(this,!1,t),t.forEach((r,i)=>{Wb(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t=[],n={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new La(this))}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((n,r)=>{t(n,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(n=>n.enabled&&t(n))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function Tb(e){return!!e&&(e.asyncValidators!==void 0||e.validators!==void 0||e.updateOn!==void 0)}var eT=(()=>{class e{useNonNullable=!1;get nonNullable(){let n=new e;return n.useNonNullable=!0,n}group(n,r=null){let i=this._reduceControls(n),o={};return Tb(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new md(i,o)}record(n,r=null){let i=this._reduceControls(n);return new Um(i,r)}control(n,r,i){let o={};return this.useNonNullable?(Tb(r)?o=r:(o.validators=r,o.asyncValidators=i),new dd(n,S(m({},o),{nonNullable:!0}))):new dd(n,r,i)}array(n,r,i){let o=n.map(s=>this._createControl(s));return new Bm(o,r,i)}_reduceControls(n){let r={};return Object.keys(n).forEach(i=>{r[i]=this._createControl(n[i])}),r}_createControl(n){if(n instanceof dd)return n;if(n instanceof Go)return n;if(Array.isArray(n)){let r=n[0],i=n.length>1?n[1]:null,o=n.length>2?n[2]:null;return this.control(r,i,o)}else return this.control(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var tT=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:Kb,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:Gb,useValue:n.callSetDisabledState??qm}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=Cn({type:e});static \u0275inj=Yt({imports:[yF]})}return e})();function nT(e=6){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="";for(let r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}var rT=()=>{};var Jm={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var y=function(e,t){if(!e)throw bi(t)},bi=function(e){return new Error("Firebase Database ("+Jm.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};var sT=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},EF=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=e[n++],s=e[n++],a=e[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let o=e[n++],s=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return t.join("")},Dd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){let o=e[i],s=i+1<e.length,a=s?e[i+1]:0,c=i+2<e.length,l=c?e[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4,f=(a&15)<<2|l>>6,h=l&63;c||(h=64,s||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(sT(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):EF(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){let o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;let l=i<e.length?n[e.charAt(i)]:64;++i;let d=i<e.length?n[e.charAt(i)]:64;if(++i,o==null||a==null||l==null||d==null)throw new Xm;let f=o<<2|a>>4;if(r.push(f),l!==64){let h=a<<4&240|l>>2;if(r.push(h),d!==64){let g=l<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Xm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},tv=function(e){let t=sT(e);return Dd.encodeByteArray(t,!0)},ja=function(e){return tv(e).replace(/\./g,"")},qo=function(e){try{return Dd.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function aT(e){return cT(void 0,e)}function cT(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:let n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(let n in t)!t.hasOwnProperty(n)||!IF(n)||(e[n]=cT(e[n],t[n]));return e}function IF(e){return e!=="__proto__"}function CF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var wF=()=>CF().__FIREBASE_DEFAULTS__,DF=()=>{if(typeof process>"u"||typeof process.env>"u")return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},bF=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&qo(e[1]);return t&&JSON.parse(t)},nv=()=>{try{return rT()||wF()||DF()||bF()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},rv=e=>nv()?.emulatorHosts?.[e],lT=e=>{let t=rv(e);if(!t)return;let n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},iv=()=>nv()?.config,ov=e=>nv()?.[`_${e}`];var Jn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}};function Ar(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}function bd(e){return p(this,null,function*(){return(yield fetch(e,{credentials:"include"})).ok})}function uT(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=m({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ja(JSON.stringify(n)),ja(JSON.stringify(s)),""].join(".")}var Va={};function TF(){let e={prod:[],emulator:[]};for(let t of Object.keys(Va))Va[t]?e.emulator.push(t):e.prod.push(t);return e}function SF(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}var iT=!1;function Td(e,t){if(typeof window>"u"||typeof document>"u"||!Ar(window.location.host)||Va[e]===t||Va[e]||iT)return;Va[e]=t;function n(f){return`__firebase__banner__${f}`}let r="__firebase__banner",o=TF().prod.length>0;function s(){let f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,h){f.setAttribute("width","24"),f.setAttribute("id",h),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function l(){let f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{iT=!0,s()},f}function u(f,h){f.setAttribute("id",h),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){let f=SF(r),h=n("text"),g=document.getElementById(h)||document.createElement("span"),_=n("learnmore"),b=document.getElementById(_)||document.createElement("a"),N=n("preprendIcon"),mt=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){let Mt=f.element;a(Mt),u(b,_);let qf=l();c(mt,N),Mt.append(mt,g,b,qf),document.body.appendChild(Mt)}o?(g.innerText="Preview backend disconnected.",mt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(mt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function Ge(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ua(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ge())}function dT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Sd(){let e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Ad(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fT(){let e=Ge();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function An(){return Jm.NODE_CLIENT===!0||Jm.NODE_ADMIN===!0}function Md(){try{return typeof indexedDB=="object"}catch{return!1}}function Nd(){return new Promise((e,t)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(n){t(n)}})}function hT(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var AF="FirebaseError",et=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=AF,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tt.prototype.create)}},Tt=class{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){let r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],s=o?MF(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new et(i,a,r)}};function MF(e,t){return e.replace(NF,(n,r)=>{let i=t[r];return i!=null?String(i):`<${r}?>`})}var NF=/\{\$([^}]+)}/g;function Yo(e){return JSON.parse(e)}function be(e){return JSON.stringify(e)}var pT=function(e){let t={},n={},r={},i="";try{let o=e.split(".");t=Yo(qo(o[0])||""),n=Yo(qo(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}};var gT=function(e){let t=pT(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},mT=function(e){let t=pT(e).claims;return typeof t=="object"&&t.admin===!0};function cn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ti(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function Ba(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ha(e,t,n){let r={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Bt(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let o=e[i],s=t[i];if(oT(o)&&oT(s)){if(!Bt(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function oT(e){return e!==null&&typeof e=="object"}function Mr(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}var wd=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);let r=this.W_;if(typeof t=="string")for(let d=0;d<16;d++)r[d]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^o&(s^a),u=1518500249):(l=o^s^a,u=1859775393):d<60?(l=o&s|a&(o|s),u=2400959708):(l=o^s^a,u=3395469782);let f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);let r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(o[s]=t.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=t[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let t=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)t[r]=this.chain_[i]>>o&255,++r;return t}};function vT(e,t){let n=new ev(e,t);return n.subscribe.bind(n)}var ev=class{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");RF(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=Qm),i.error===void 0&&(i.error=Qm),i.complete===void 0&&(i.complete=Qm);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function RF(e,t){if(typeof e!="object"||e===null)return!1;for(let n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Qm(){}function Ko(e,t){return`${e} failed: ${t} argument `}var yT=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,y(r<e.length,"Surrogate pair missing trail surrogate.");let s=e.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},$a=function(e){let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};var xF=1e3,OF=2,kF=14400*1e3,PF=.5;function sv(e,t=xF,n=OF){let r=t*Math.pow(n,e),i=Math.round(PF*r*(Math.random()-.5)*2);return Math.min(kF,r+i)}function Ee(e){return e&&e._delegate?e._delegate:e}var xe=class{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var Si="[DEFAULT]";var Rd=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){let r=new Jn;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){let n=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(LF(t))try{this.getOrInitializeService({instanceIdentifier:Si})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=Si){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return p(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=Si){return this.instances.has(t)}getOptions(t=Si){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(t,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(t),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&t(o,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:FF(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Si){return this.component?this.component.multipleInstances?t:Si:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function FF(e){return e===Si?void 0:e}function LF(e){return e.instantiationMode==="EAGER"}var Wa=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let n=new Rd(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}};var VF=[],te=(function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e})(te||{}),jF={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},UF=te.INFO,BF={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},HF=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=BF[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},Mn=class{constructor(t){this.name=t,this._logLevel=UF,this._logHandler=HF,this._userLogHandler=null,VF.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in te))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?jF[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...t),this._logHandler(this,te.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...t),this._logHandler(this,te.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,te.INFO,...t),this._logHandler(this,te.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,te.WARN,...t),this._logHandler(this,te.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...t),this._logHandler(this,te.ERROR,...t)}};var $F=(e,t)=>t.some(n=>e instanceof n),_T,ET;function WF(){return _T||(_T=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zF(){return ET||(ET=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var IT=new WeakMap,cv=new WeakMap,CT=new WeakMap,av=new WeakMap,uv=new WeakMap;function GF(e){let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{n(Nn(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)});return t.then(n=>{n instanceof IDBCursor&&IT.set(n,e)}).catch(()=>{}),uv.set(t,e),t}function qF(e){if(cv.has(e))return;let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});cv.set(e,t)}var lv={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return cv.get(e);if(t==="objectStoreNames")return e.objectStoreNames||CT.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function wT(e){lv=e(lv)}function YF(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){let r=e.call(xd(this),t,...n);return CT.set(r,t.sort?t.sort():[t]),Nn(r)}:zF().includes(e)?function(...t){return e.apply(xd(this),t),Nn(IT.get(this))}:function(...t){return Nn(e.apply(xd(this),t))}}function KF(e){return typeof e=="function"?YF(e):(e instanceof IDBTransaction&&qF(e),$F(e,WF())?new Proxy(e,lv):e)}function Nn(e){if(e instanceof IDBRequest)return GF(e);if(av.has(e))return av.get(e);let t=KF(e);return t!==e&&(av.set(e,t),uv.set(t,e)),t}var xd=e=>uv.get(e);function Od(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(e,t),a=Nn(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Nn(s.result),c.oldVersion,c.newVersion,Nn(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var ZF=["get","getKey","getAll","getAllKeys","count"],QF=["put","add","delete","clear"],dv=new Map;function DT(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(dv.get(t))return dv.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,i=QF.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ZF.includes(n)))return;let o=function(s,...a){return p(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return dv.set(t,o),o}wT(e=>S(m({},e),{get:(t,n,r)=>DT(t,n)||e.get(t,n,r),has:(t,n)=>!!DT(t,n)||e.has(t,n)}));var hv=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(JF(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function JF(e){return e.getComponent()?.type==="VERSION"}var pv="@firebase/app",bT="0.14.6";var Xn=new Mn("@firebase/app"),XF="@firebase/app-compat",eL="@firebase/analytics-compat",tL="@firebase/analytics",nL="@firebase/app-check-compat",rL="@firebase/app-check",iL="@firebase/auth",oL="@firebase/auth-compat",sL="@firebase/database",aL="@firebase/data-connect",cL="@firebase/database-compat",lL="@firebase/functions",uL="@firebase/functions-compat",dL="@firebase/installations",fL="@firebase/installations-compat",hL="@firebase/messaging",pL="@firebase/messaging-compat",gL="@firebase/performance",mL="@firebase/performance-compat",vL="@firebase/remote-config",yL="@firebase/remote-config-compat",_L="@firebase/storage",EL="@firebase/storage-compat",IL="@firebase/firestore",CL="@firebase/ai",wL="@firebase/firestore-compat",DL="firebase",bL="12.6.0";var gv="[DEFAULT]",TL={[pv]:"fire-core",[XF]:"fire-core-compat",[tL]:"fire-analytics",[eL]:"fire-analytics-compat",[rL]:"fire-app-check",[nL]:"fire-app-check-compat",[iL]:"fire-auth",[oL]:"fire-auth-compat",[sL]:"fire-rtdb",[aL]:"fire-data-connect",[cL]:"fire-rtdb-compat",[lL]:"fire-fn",[uL]:"fire-fn-compat",[dL]:"fire-iid",[fL]:"fire-iid-compat",[hL]:"fire-fcm",[pL]:"fire-fcm-compat",[gL]:"fire-perf",[mL]:"fire-perf-compat",[vL]:"fire-rc",[yL]:"fire-rc-compat",[_L]:"fire-gcs",[EL]:"fire-gcs-compat",[IL]:"fire-fst",[wL]:"fire-fst-compat",[CL]:"fire-vertex","fire-js":"fire-js",[DL]:"fire-js-all"};var kd=new Map,SL=new Map,mv=new Map;function TT(e,t){try{e.container.addComponent(t)}catch(n){Xn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function gt(e){let t=e.name;if(mv.has(t))return Xn.debug(`There were multiple attempts to register component ${t}.`),!1;mv.set(t,e);for(let n of kd.values())TT(n,e);for(let n of SL.values())TT(n,e);return!0}function ln(e,t){let n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function St(e){return e==null?!1:e.settings!==void 0}var AL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nr=new Tt("app","Firebase",AL);var vv=class{constructor(t,n,r){this._isDeleted=!1,this._options=m({},t),this._config=m({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xe("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}};var Rr=bL;function Ev(e,t={}){let n=e;typeof t!="object"&&(t={name:t});let r=m({name:gv,automaticDataCollectionEnabled:!0},t),i=r.name;if(typeof i!="string"||!i)throw Nr.create("bad-app-name",{appName:String(i)});if(n||(n=iv()),!n)throw Nr.create("no-options");let o=kd.get(i);if(o){if(Bt(n,o.options)&&Bt(r,o.config))return o;throw Nr.create("duplicate-app",{appName:i})}let s=new Wa(i);for(let c of mv.values())s.addComponent(c);let a=new vv(n,r,s);return kd.set(i,a),a}function Ai(e=gv){let t=kd.get(e);if(!t&&e===gv&&iv())return Ev();if(!t)throw Nr.create("no-app",{appName:e});return t}function Ve(e,t,n){let r=TL[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=t.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${t}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Xn.warn(s.join(" "));return}gt(new xe(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}var ML="firebase-heartbeat-database",NL=1,za="firebase-heartbeat-store",fv=null;function NT(){return fv||(fv=Od(ML,NL,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(za)}catch(n){console.warn(n)}}}}).catch(e=>{throw Nr.create("idb-open",{originalErrorMessage:e.message})})),fv}function RL(e){return p(this,null,function*(){try{let n=(yield NT()).transaction(za),r=yield n.objectStore(za).get(RT(e));return yield n.done,r}catch(t){if(t instanceof et)Xn.warn(t.message);else{let n=Nr.create("idb-get",{originalErrorMessage:t?.message});Xn.warn(n.message)}}})}function ST(e,t){return p(this,null,function*(){try{let r=(yield NT()).transaction(za,"readwrite");yield r.objectStore(za).put(t,RT(e)),yield r.done}catch(n){if(n instanceof et)Xn.warn(n.message);else{let r=Nr.create("idb-set",{originalErrorMessage:n?.message});Xn.warn(r.message)}}})}function RT(e){return`${e.name}!${e.options.appId}`}var xL=1024,OL=30,yv=class{constructor(t){this.container=t,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new _v(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=AT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>OL){let i=PL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Xn.warn(t)}})}getHeartbeatsHeader(){return p(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=AT(),{heartbeatsToSend:n,unsentEntries:r}=kL(this._heartbeatsCache.heartbeats),i=ja(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Xn.warn(t),""}})}};function AT(){return new Date().toISOString().substring(0,10)}function kL(e,t=xL){let n=[],r=e.slice();for(let i of e){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),MT(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),MT(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var _v=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return Md()?Nd().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield RL(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return ST(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return ST(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return})}};function MT(e){return ja(JSON.stringify({version:2,heartbeats:e})).length}function PL(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function FL(e){gt(new xe("platform-logger",t=>new hv(t),"PRIVATE")),gt(new xe("heartbeat",t=>new yv(t),"PRIVATE")),Ve(pv,bT,e),Ve(pv,bT,"esm2020"),Ve("fire-js","")}FL("");var xT="@firebase/database",OT="1.1.0";var Ty="";function LL(e){Ty=e}var Av=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),be(n))}get(t){let n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:Yo(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var Mv=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return cn(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var uS=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Av(t)}}catch{}return new Mv},Ni=uS("localStorage"),Nv=uS("sessionStorage");var Jo=new Mn("@firebase/database"),VL=(function(){let e=1;return function(){return e++}})(),dS=function(e){let t=yT(e),n=new wd;n.update(t);let r=n.digest();return Dd.encodeByteArray(r)},fc=function(...e){let t="";for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=fc.apply(null,r):typeof r=="object"?t+=be(r):t+=r,t+=" "}return t},Ri=null,kT=!0,jL=function(e,t){y(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(Jo.logLevel=te.VERBOSE,Ri=Jo.log.bind(Jo),t&&Nv.set("logging_enabled",!0)):typeof e=="function"?Ri=e:(Ri=null,Nv.remove("logging_enabled"))},je=function(...e){if(kT===!0&&(kT=!1,Ri===null&&Nv.get("logging_enabled")===!0&&jL(!0)),Ri){let t=fc.apply(null,e);Ri(t)}},hc=function(e){return function(...t){je(e,...t)}},Rv=function(...e){let t="FIREBASE INTERNAL ERROR: "+fc(...e);Jo.error(t)},er=function(...e){let t=`FIREBASE FATAL ERROR: ${fc(...e)}`;throw Jo.error(t),new Error(t)},nt=function(...e){let t="FIREBASE WARNING: "+fc(...e);Jo.warn(t)},UL=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&nt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Sy=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},BL=function(e){if(An()||document.readyState==="complete")e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Oi="[MIN_NAME]",Pr="[MAX_NAME]",Pi=function(e,t){if(e===t)return 0;if(e===Oi||t===Pr)return-1;if(t===Oi||e===Pr)return 1;{let n=PT(e),r=PT(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1}},HL=function(e,t){return e===t?0:e<t?-1:1},Ga=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+be(t))},Ay=function(e){if(typeof e!="object"||e===null)return be(e);let t=[];for(let r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)r!==0&&(n+=","),n+=be(t[r]),n+=":",n+=Ay(e[t[r]]);return n+="}",n},fS=function(e,t){let n=e.length;if(n<=t)return[e];let r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Ue(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var hS=function(e){y(!Sy(e),"Invalid JSON number");let t=11,n=52,r=(1<<t-1)-1,i,o,s,a,c;e===0?(o=0,s=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),r),o=a+r,s=Math.round(e*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(e/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},$L=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},WL=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function zL(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");let r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}var GL=new RegExp("^-?(0*)\\d{1,10}$"),qL=-2147483648,YL=2147483647,PT=function(e){if(GL.test(e)){let t=Number(e);if(t>=qL&&t<=YL)return t}return null},cs=function(e){try{e()}catch(t){setTimeout(()=>{let n=t.stack||"";throw nt("Exception was thrown by user callback.",n),t},Math.floor(0))}},KL=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Qa=function(e,t){let n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var xv=class{constructor(t,n){this.appCheckProvider=n,this.appName=t.name,St(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.appCheckProvider?.get().then(n=>n.addTokenListener(t))}notifyForInvalidToken(){nt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Ov=class{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(je("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',nt(t)}},Ja=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),Fd="5",pS="v",gS="s",mS="r",vS="f",yS=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,_S="ls",ES="p",kv="ac",IS="websocket",CS="long_polling";var Ld=class{constructor(t,n,r,i,o=!1,s="",a=!1,c=!1,l=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ni.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Ni.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}};function ZL(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function wS(e,t,n){y(typeof t=="string","typeof type must == string"),y(typeof n=="object","typeof params must == object");let r;if(t===IS)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===CS)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);ZL(e)&&(n.ns=e.namespace);let i=[];return Ue(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var Pv=class{constructor(){this.counters_={}}incrementCounter(t,n=1){cn(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return aT(this.counters_)}};var Iv={},Cv={};function My(e){let t=e.toString();return Iv[t]||(Iv[t]=new Pv),Iv[t]}function QL(e,t){let n=e.toString();return Cv[n]||(Cv[n]=t()),Cv[n]}var Fv=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&cs(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var FT="start",JL="close",XL="pLPCommand",eV="pRTLPCB",DS="id",bS="pw",TS="ser",tV="cb",nV="seg",rV="ts",iV="d",oV="dframe",SS=1870,AS=30,sV=SS-AS,aV=25e3,cV=3e4,Lv=class e{constructor(t,n,r,i,o,s,a){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hc(t),this.stats_=My(n),this.urlFn=c=>(this.appCheckToken&&(c[kv]=this.appCheckToken),wS(n,CS,c))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Fv(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(cV)),BL(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Vv((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===FT)this.id=a,this.password=c;else if(s===JL)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[FT]="t",r[TS]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[tV]=this.scriptTagHolder.uniqueCallbackIdentifier),r[pS]=Fd,this.transportSessionId&&(r[gS]=this.transportSessionId),this.lastSessionId&&(r[_S]=this.lastSessionId),this.applicationId&&(r[ES]=this.applicationId),this.appCheckToken&&(r[kv]=this.appCheckToken),typeof location<"u"&&location.hostname&&yS.test(location.hostname)&&(r[mS]=vS);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return An()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!$L()&&!WL()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let n=be(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=tv(n),i=fS(r,sV);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,n){if(An())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[oV]="t",r[DS]=t,r[bS]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let n=be(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Vv=class e{constructor(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,An())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=VL(),window[XL+this.uniqueCallbackIdentifier]=t,window[eV+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){je("frame writing exception"),a.stack&&je(a.stack),je(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||je("No IE domain setting required")}catch{let r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[DS]=this.myID,t[bS]=this.myPW,t[TS]=this.currentSerial;let n=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+AS+r.length<=SS;){let s=this.pendingSegs.shift();r=r+"&"+nV+i+"="+s.seg+"&"+rV+i+"="+s.ts+"&"+iV+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(aV)),o=()=>{clearTimeout(i),r()};this.addTag(t,o)}addTag(t,n){An()?this.doNodeLongPoll(t,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{je("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var lV=16384,uV=45e3,Vd=null;typeof MozWebSocket<"u"?Vd=MozWebSocket:typeof WebSocket<"u"&&(Vd=WebSocket);var qa=(()=>{class e{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hc(this.connId),this.stats_=My(r),this.connURL=e.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[pS]=Fd,!An()&&typeof location<"u"&&location.hostname&&yS.test(location.hostname)&&(a[mS]=vS),r&&(a[gS]=r),i&&(a[_S]=i),o&&(a[kv]=o),s&&(a[ES]=s),wS(n,IS,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ni.set("previous_websocket_failure",!0);try{let i;if(An()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Fd}/${Ty}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Vd(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Vd!==null&&!e.forceDisallow_}static previouslyFailed(){return Ni.isInMemoryStorage||Ni.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ni.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Yo(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(y(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=be(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=fS(r,lV);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(uV))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),dV=(()=>{class e{static get ALL_TRANSPORTS(){return[Lv,qa]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(n){this.initTransports_(n)}initTransports_(n){let r=qa&&qa.isAvailable(),i=r&&!qa.previouslyFailed();if(n.webSocketOnly&&(r||nt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[qa];else{let o=this.transports_=[];for(let s of e.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),fV=6e4,hV=5e3,pV=10*1024,gV=100*1024,wv="t",LT="d",mV="s",VT="r",vV="e",jT="o",UT="a",BT="n",HT="p",yV="h",jv=class{constructor(t,n,r,i,o,s,a,c,l,u){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hc("c:"+this.id+":"),this.transportManager_=new dV(n),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Qa(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>gV?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>pV?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){let n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(wv in t){let n=t[wv];n===UT?this.upgradeIfSecondaryHealthy_():n===VT?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===jT&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let n=Ga("t",t),r=Ga("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:HT,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:UT,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:BT,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let n=Ga("t",t),r=Ga("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let n=Ga(wv,t);if(LT in t){let r=t[LT];if(n===yV){let i=m({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===BT){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===mV?this.onConnectionShutdown_(r):n===VT?this.onReset_(r):n===vV?Rv("Server Error: "+r):n===jT?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Rv("Unknown control packet command: "+n)}}onHandshake_(t){let n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Fd!==r&&nt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Qa(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(fV))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Qa(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(hV))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:HT,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ni.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var jd=class{put(t,n,r,i){}merge(t,n,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}};var Ud=class{constructor(t){this.allowedEvents_=t,this.listeners_={},y(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){let r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});let i=this.getInitialEvent(t);i&&n.apply(r,i)}off(t,n,r){this.validateEventType_(t);let i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(t){y(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}};var Bd=class e extends Ud{static getInstance(){return new e}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ua()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return y(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var $T=32,WT=768,Q=class{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}};function K(){return new Q("")}function $(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Fr(e){return e.pieces_.length-e.pieceNum_}function se(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Q(e.pieces_,t)}function Ny(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function _V(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function nc(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function MS(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Q(t,0)}function he(e,t){let n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Q)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{let r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Q(n,0)}function W(e){return e.pieceNum_>=e.pieces_.length}function tt(e,t){let n=$(e),r=$(t);if(n===null)return t;if(n===r)return tt(se(e),se(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function EV(e,t){let n=nc(e,0),r=nc(t,0);for(let i=0;i<n.length&&i<r.length;i++){let o=Pi(n[i],r[i]);if(o!==0)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Ry(e,t){if(Fr(e)!==Fr(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Ht(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Fr(e)>Fr(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Uv=class{constructor(t,n){this.errorPrefix_=n,this.parts_=nc(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=$a(this.parts_[r]);NS(this)}};function IV(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=$a(t),NS(e)}function CV(e){let t=e.parts_.pop();e.byteLength_-=$a(t),e.parts_.length>0&&(e.byteLength_-=1)}function NS(e){if(e.byteLength_>WT)throw new Error(e.errorPrefix_+"has a key path longer than "+WT+" bytes ("+e.byteLength_+").");if(e.parts_.length>$T)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+$T+") or object contains a cycle "+Mi(e))}function Mi(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var Bv=class e extends Ud{static getInstance(){return new e}constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(t){return y(t==="visible","Unknown event type: "+t),[this.visible_]}};var Ya=1e3,wV=300*1e3,zT=30*1e3,DV=1.3,bV=3e4,TV="server_kill",GT=3,xy=(()=>{class e extends jd{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=e.nextPersistentConnectionId_++,this.log_=hc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ya,this.maxReconnectDelay_=wV,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!An())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Bv.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Bd.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(be(s)),y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new Jn,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),y(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;e.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&cn(n,"w")){let i=Ti(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();nt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||mT(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=zT)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=gT(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+be(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):Rv("Unrecognized action received from server: "+be(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ya,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Ya,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>bV&&(this.reconnectDelay_=Ya),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*DV)}this.onConnectStatus_(!1)}establishConnection_(){return p(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){y(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?je("getToken() completed but was canceled"):(je("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new jv(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,g=>{nt(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(TV)},s))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&nt(f),l())}}})}interrupt(n){je("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){je("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Ba(this.interruptReasons_)&&(this.reconnectDelay_=Ya,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>Ay(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new Q(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){je("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=GT&&(this.reconnectDelay_=zT,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){je("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=GT&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";An()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Ty.replace(/\./g,"-")]=1,Ua()?n["framework.cordova"]=1:Ad()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Bd.getInstance().currentlyOnline();return Ba(this.interruptReasons_)&&n}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),z=class e{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new e(t,n)}};var Xo=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){let r=new z(Oi,t),i=new z(Oi,n);return this.compare(r,i)!==0}minPost(){return z.MIN}};var Pd,Hd=class extends Xo{static get __EMPTY_NODE(){return Pd}static set __EMPTY_NODE(t){Pd=t}compare(t,n){return Pi(t.name,n.name)}isDefinedOn(t){throw bi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return z.MIN}maxPost(){return new z(Pr,Pd)}makePost(t,n){return y(typeof t=="string","KeyIndex indexValue must always be a string."),new z(t,Pd)}toString(){return".key"}},xi=new Hd;var Qo=class{constructor(t,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(t=t,s=n?r(t.key,n):1,i&&(s*=-1),s<0)this.isReverse_?t=t.left:t=t.right;else if(s===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},un=(()=>{class e{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??e.RED,this.left=o??$t.EMPTY_NODE,this.right=s??$t.EMPTY_NODE}copy(n,r,i,o,s){return new e(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return $t.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return $t.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),Hv=class{copy(t,n,r,i,o){return this}insert(t,n,r){return new un(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},$t=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,un.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,un.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Qo(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new Qo(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new Qo(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new Qo(this.root_,null,this.comparator_,!0,t)}};$t.EMPTY_NODE=new Hv;function SV(e,t){return Pi(e.name,t.name)}function Oy(e,t){return Pi(e,t)}var $v;function AV(e){$v=e}var RS=function(e){return typeof e=="number"?"number:"+hS(e):"string:"+e},xS=function(e){if(e.isLeafNode()){let t=e.val();y(typeof t=="string"||typeof t=="number"||typeof t=="object"&&cn(t,".sv"),"Priority must be a string or number.")}else y(e===$v||e.isEmpty(),"priority of unexpected type.");y(e===$v||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var qT,es=(()=>{class e{static set __childrenNodeConstructor(n){qT=n}static get __childrenNodeConstructor(){return qT}constructor(n,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,y(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),xS(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return W(n)?this:$(n)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=$(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(y(i!==".priority"||Fr(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(se(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+RS(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=hS(this.value_):n+=this.value_,this.lazyHash_=dS(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(y(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(r),s=e.VALUE_TYPE_ORDER.indexOf(i);return y(o>=0,"Unknown leaf type: "+r),y(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),OS,kS;function MV(e){OS=e}function NV(e){kS=e}var Wv=class extends Xo{compare(t,n){let r=t.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?Pi(t.name,n.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return z.MIN}maxPost(){return new z(Pr,new es("[PRIORITY-POST]",kS))}makePost(t,n){let r=OS(t);return new z(n,new es("[PRIORITY-POST]",r))}toString(){return".priority"}},le=new Wv;var RV=Math.log(2),zv=class{constructor(t){let n=o=>parseInt(Math.log(o)/RV,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;let i=r(this.count);this.bits_=t+1&i}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},$d=function(e,t,n,r){e.sort(t);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=e[c],f=n?n(d):d,new un(f,d.node,un.BLACK,null,null);{let h=parseInt(u/2,10)+c,g=i(c,h),_=i(h+1,l);return d=e[h],f=n?n(d):d,new un(f,d.node,un.BLACK,g,_)}},o=function(c){let l=null,u=null,d=e.length,f=function(g,_){let b=d-g,N=d;d-=g;let mt=i(b+1,N),Mt=e[b],qf=n?n(Mt):Mt;h(new un(qf,Mt.node,_,null,mt))},h=function(g){l?(l.left=g,l=g):(u=g,l=g)};for(let g=0;g<c.count;++g){let _=c.nextBitIsOne(),b=Math.pow(2,c.count-(g+1));_?f(b,un.BLACK):(f(b,un.BLACK),f(b,un.RED))}return u},s=new zv(e.length),a=o(s);return new $t(r||t,a)};var Dv,Zo={},ts=class e{static get Default(){return y(Zo&&le,"ChildrenNode.ts has not been loaded"),Dv=Dv||new e({".priority":Zo},{".priority":le}),Dv}constructor(t,n){this.indexes_=t,this.indexSet_=n}get(t){let n=Ti(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof $t?n:null}hasIndex(t){return cn(this.indexSet_,t.toString())}addIndex(t,n){y(t!==xi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(z.Wrap),s=o.getNext();for(;s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=$d(r,t.getCompare()):a=Zo;let c=t.toString(),l=m({},this.indexSet_);l[c]=t;let u=m({},this.indexes_);return u[c]=a,new e(u,l)}addToIndexes(t,n){let r=Ha(this.indexes_,(i,o)=>{let s=Ti(this.indexSet_,o);if(y(s,"Missing index implementation for "+o),i===Zo)if(s.isDefinedOn(t.node)){let a=[],c=n.getIterator(z.Wrap),l=c.getNext();for(;l;)l.name!==t.name&&a.push(l),l=c.getNext();return a.push(t),$d(a,s.getCompare())}else return Zo;else{let a=n.get(t.name),c=i;return a&&(c=c.remove(new z(t.name,a))),c.insert(t,t.node)}});return new e(r,this.indexSet_)}removeFromIndexes(t,n){let r=Ha(this.indexes_,i=>{if(i===Zo)return i;{let o=n.get(t.name);return o?i.remove(new z(t.name,o)):i}});return new e(r,this.indexSet_)}};var Ka,V=(()=>{class e{static get EMPTY_NODE(){return Ka||(Ka=new e(new $t(Oy),null,ts.Default))}constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&xS(this.priorityNode_),this.children_.isEmpty()&&y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ka}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Ka:r}}getChild(n){let r=$(n);return r===null?this:this.getImmediateChild(r).getChild(se(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(y(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new z(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?Ka:this.priorityNode_;return new e(o,a,s)}}updateChild(n,r){let i=$(n);if(i===null)return r;{y($(n)!==".priority"||Fr(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(se(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(le,(a,c)=>{r[a]=c.val(n),i++,s&&e.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+RS(this.getPriority().val())+":"),this.forEachChild(le,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":dS(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new z(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new z(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new z(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,z.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,z.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===pc?-1:0}withIndex(n){if(n===xi||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===xi||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(le),o=r.getIterator(le),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===xi?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),Gv=class extends V{constructor(){super(new $t(Oy),V.EMPTY_NODE,ts.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return V.EMPTY_NODE}isEmpty(){return!1}},pc=new Gv;Object.defineProperties(z,{MIN:{value:new z(Oi,V.EMPTY_NODE)},MAX:{value:new z(Pr,pc)}});Hd.__EMPTY_NODE=V.EMPTY_NODE;es.__childrenNodeConstructor=V;AV(pc);NV(pc);var xV=!0;function Me(e,t=null){if(e===null)return V.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),y(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let n=e;return new es(n,Me(t))}if(!(e instanceof Array)&&xV){let n=[],r=!1;if(Ue(e,(s,a)=>{if(s.substring(0,1)!=="."){let c=Me(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new z(s,c)))}}),n.length===0)return V.EMPTY_NODE;let o=$d(n,SV,s=>s.name,Oy);if(r){let s=$d(n,le.getCompare());return new V(o,Me(t),new ts({".priority":s},{".priority":le}))}else return new V(o,Me(t),ts.Default)}else{let n=V.EMPTY_NODE;return Ue(e,(r,i)=>{if(cn(e,r)&&r.substring(0,1)!=="."){let o=Me(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(Me(t))}}MV(Me);var rc=class extends Xo{constructor(t){super(),this.indexPath_=t,y(!W(t)&&$(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){let r=this.extractChild(t.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?Pi(t.name,n.name):o}makePost(t,n){let r=Me(t),i=V.EMPTY_NODE.updateChild(this.indexPath_,r);return new z(n,i)}maxPost(){let t=V.EMPTY_NODE.updateChild(this.indexPath_,pc);return new z(Pr,t)}toString(){return nc(this.indexPath_,0).join("/")}};var qv=class extends Xo{compare(t,n){let r=t.node.compareTo(n.node);return r===0?Pi(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return z.MIN}maxPost(){return z.MAX}makePost(t,n){let r=Me(t);return new z(n,r)}toString(){return".value"}},PS=new qv;function FS(e){return{type:"value",snapshotNode:e}}function ns(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function ic(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function oc(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function OV(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var sc=class{constructor(t){this.index_=t}updateChild(t,n,r,i,o,s){y(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=t.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?t.hasChild(n)?s.trackChildChange(ic(n,a)):y(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ns(n,r)):s.trackChildChange(oc(n,r,a))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(le,(i,o)=>{n.hasChild(i)||r.trackChildChange(ic(i,o))}),n.isLeafNode()||n.forEachChild(le,(i,o)=>{if(t.hasChild(i)){let s=t.getImmediateChild(i);s.equals(o)||r.trackChildChange(oc(i,o,s))}else r.trackChildChange(ns(i,o))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?V.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Wd=class e{constructor(t){this.indexedFilter_=new sc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,i,o,s){return this.matches(new z(n,r))||(r=V.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,o,s)}updateFullNode(t,n,r){n.isLeafNode()&&(n=V.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(V.EMPTY_NODE);let o=this;return n.forEachChild(le,(s,a)=>{o.matches(new z(s,a))||(i=i.updateImmediateChild(s,V.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}};var Yv=class{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Wd(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,i,o,s){return this.rangedFilter_.matches(new z(n,r))||(r=V.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,o,s):this.fullLimitUpdateChild_(t,n,r,o,s)}updateFullNode(t,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=V.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=V.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(V.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,V.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(f,h)=>d(h,f)}else s=this.index_.getCompare();let a=t;y(a.numChildren()===this.limit_,"");let c=new z(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:s(f,c);if(u&&!r.isEmpty()&&h>=0)return o?.trackChildChange(oc(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(ic(n,d));let _=a.updateImmediateChild(n,V.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(o?.trackChildChange(ns(f.name,f.node)),_.updateImmediateChild(f.name,f.node)):_}}else return r.isEmpty()?t:u&&s(l,c)>=0?(o!=null&&(o.trackChildChange(ic(l.name,l.node)),o.trackChildChange(ns(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,V.EMPTY_NODE)):t}};var Kv=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=le}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Oi}hasEnd(){return this.endSet_}getIndexEndValue(){return y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Pr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return y(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===le}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function kV(e){return e.loadsAllData()?new sc(e.getIndex()):e.hasLimit()?new Yv(e):new Wd(e)}function PV(e,t,n){let r=e.copy();return r.startSet_=!0,t===void 0&&(t=null),r.indexStartValue_=t,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function FV(e,t,n){let r=e.copy();return r.endSet_=!0,t===void 0&&(t=null),r.indexEndValue_=t,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function LV(e,t){let n=e.copy();return n.index_=t,n}function YT(e){let t={};if(e.isDefault())return t;let n;if(e.index_===le?n="$priority":e.index_===PS?n="$value":e.index_===xi?n="$key":(y(e.index_ instanceof rc,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=be(n),e.startSet_){let r=e.startAfterSet_?"startAfter":"startAt";t[r]=be(e.indexStartValue_),e.startNameSet_&&(t[r]+=","+be(e.indexStartName_))}if(e.endSet_){let r=e.endBeforeSet_?"endBefore":"endAt";t[r]=be(e.indexEndValue_),e.endNameSet_&&(t[r]+=","+be(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function KT(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==le&&(t.i=e.index_.toString()),t}var Zv=class e extends jd{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(y(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,n,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=hc("p:rest:"),this.listens_={}}listen(t,n,r,i){let o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);let s=e.getListenId_(t,r),a={};this.listens_[s]=a;let c=YT(t._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),Ti(this.listens_,s)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(t,n){let r=e.getListenId_(t,n);delete this.listens_[r]}get(t){let n=YT(t._queryParams),r=t._path.toString(),i=new Jn;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Mr(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Yo(a.responseText)}catch{nt("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&nt("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var Qv=class{constructor(){this.rootNode_=V.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}};function zd(){return{value:null,children:new Map}}function LS(e,t,n){if(W(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let r=$(t);e.children.has(r)||e.children.set(r,zd());let i=e.children.get(r);t=se(t),LS(i,t,n)}}function Jv(e,t,n){e.value!==null?n(t,e.value):VV(e,(r,i)=>{let o=new Q(t.toString()+"/"+r);Jv(i,o,n)})}function VV(e,t){e.children.forEach((n,r)=>{t(r,n)})}var Xv=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),n=m({},t);return this.last_&&Ue(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=t,n}};var ZT=10*1e3,jV=30*1e3,UV=300*1e3,ey=class{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Xv(t);let r=ZT+(jV-ZT)*Math.random();Qa(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let t=this.statsListener_.get(),n={},r=!1;Ue(t,(i,o)=>{o>0&&cn(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Qa(this.reportStats_.bind(this),Math.floor(Math.random()*2*UV))}};var Rn=(function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e})(Rn||{});function ky(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Py(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Fy(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var ty=class e{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=Rn.ACK_USER_WRITE,this.source=ky()}operationForChild(t){if(W(this.path)){if(this.affectedTree.value!=null)return y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Q(t));return new e(K(),n,this.revert)}}else return y($(this.path)===t,"operationForChild called for unrelated child."),new e(se(this.path),this.affectedTree,this.revert)}};var Gd=class e{constructor(t,n){this.source=t,this.path=n,this.type=Rn.LISTEN_COMPLETE}operationForChild(t){return W(this.path)?new e(this.source,K()):new e(this.source,se(this.path))}};var rs=class e{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=Rn.OVERWRITE}operationForChild(t){return W(this.path)?new e(this.source,K(),this.snap.getImmediateChild(t)):new e(this.source,se(this.path),this.snap)}};var ac=class e{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=Rn.MERGE}operationForChild(t){if(W(this.path)){let n=this.children.subtree(new Q(t));return n.isEmpty()?null:n.value?new rs(this.source,K(),n.value):new e(this.source,K(),n)}else return y($(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,se(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var xn=class{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(W(t))return this.isFullyInitialized()&&!this.filtered_;let n=$(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var ny=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function BV(e,t,n,r){let i=[],o=[];return t.forEach(s=>{s.type==="child_changed"&&e.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(OV(s.childName,s.snapshotNode))}),Za(e,i,"child_removed",t,r,n),Za(e,i,"child_added",t,r,n),Za(e,i,"child_moved",o,r,n),Za(e,i,"child_changed",t,r,n),Za(e,i,"value",t,r,n),i}function Za(e,t,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>$V(e,a,c)),s.forEach(a=>{let c=HV(e,a,o);i.forEach(l=>{l.respondsTo(a.type)&&t.push(l.createEvent(c,e.query_))})})}function HV(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function $V(e,t,n){if(t.childName==null||n.childName==null)throw bi("Should only compare child_ events.");let r=new z(t.childName,t.snapshotNode),i=new z(n.childName,n.snapshotNode);return e.index_.compare(r,i)}function cf(e,t){return{eventCache:e,serverCache:t}}function Xa(e,t,n,r){return cf(new xn(t,n,r),e.serverCache)}function VS(e,t,n,r){return cf(e.eventCache,new xn(t,n,r))}function qd(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ki(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var bv,WV=()=>(bv||(bv=new $t(HL)),bv),rt=class e{static fromObject(t){let n=new e(null);return Ue(t,(r,i)=>{n=n.set(new Q(r),i)}),n}constructor(t,n=WV()){this.value=t,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:K(),value:this.value};if(W(t))return null;{let r=$(t),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(se(t),n);return o!=null?{path:he(new Q(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(W(t))return this;{let n=$(t),r=this.children.get(n);return r!==null?r.subtree(se(t)):new e(null)}}set(t,n){if(W(t))return new e(n,this.children);{let r=$(t),o=(this.children.get(r)||new e(null)).set(se(t),n),s=this.children.insert(r,o);return new e(this.value,s)}}remove(t){if(W(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=$(t),r=this.children.get(n);if(r){let i=r.remove(se(t)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new e(null):new e(this.value,o)}else return this}}get(t){if(W(t))return this.value;{let n=$(t),r=this.children.get(n);return r?r.get(se(t)):null}}setTree(t,n){if(W(t))return n;{let r=$(t),o=(this.children.get(r)||new e(null)).setTree(se(t),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new e(this.value,s)}}fold(t){return this.fold_(K(),t)}fold_(t,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(he(t,i),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,K(),n)}findOnPath_(t,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(W(t))return null;{let o=$(t),s=this.children.get(o);return s?s.findOnPath_(se(t),he(n,o),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,K(),n)}foreachOnPath_(t,n,r){if(W(t))return this;{this.value&&r(n,this.value);let i=$(t),o=this.children.get(i);return o?o.foreachOnPath_(se(t),he(n,i),r):new e(null)}}foreach(t){this.foreach_(K(),t)}foreach_(t,n){this.children.inorderTraversal((r,i)=>{i.foreach_(he(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}};var dn=class e{constructor(t){this.writeTree_=t}static empty(){return new e(new rt(null))}};function ec(e,t,n){if(W(t))return new dn(new rt(n));{let r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){let i=r.path,o=r.value,s=tt(i,t);return o=o.updateChild(s,n),new dn(e.writeTree_.set(i,o))}else{let i=new rt(n),o=e.writeTree_.setTree(t,i);return new dn(o)}}}function ry(e,t,n){let r=e;return Ue(n,(i,o)=>{r=ec(r,he(t,i),o)}),r}function QT(e,t){if(W(t))return dn.empty();{let n=e.writeTree_.setTree(t,new rt(null));return new dn(n)}}function iy(e,t){return Fi(e,t)!=null}function Fi(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(tt(n.path,t)):null}function JT(e){let t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(le,(r,i)=>{t.push(new z(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&t.push(new z(r,i.value))}),t}function Or(e,t){if(W(t))return e;{let n=Fi(e,t);return n!=null?new dn(new rt(n)):new dn(e.writeTree_.subtree(t))}}function oy(e){return e.writeTree_.isEmpty()}function is(e,t){return jS(K(),e.writeTree_,t)}function jS(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((i,o)=>{i===".priority"?(y(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=jS(he(e,i),o,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(he(e,".priority"),r)),n}}function lf(e,t){return $S(t,e)}function zV(e,t,n,r,i){y(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=ec(e.visibleWrites,t,n)),e.lastWriteId=r}function GV(e,t,n,r){y(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=ry(e.visibleWrites,t,n),e.lastWriteId=r}function qV(e,t){for(let n=0;n<e.allWrites.length;n++){let r=e.allWrites[n];if(r.writeId===t)return r}return null}function YV(e,t){let n=e.allWrites.findIndex(a=>a.writeId===t);y(n>=0,"removeWrite called with nonexistent writeId.");let r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,s=e.allWrites.length-1;for(;i&&s>=0;){let a=e.allWrites[s];a.visible&&(s>=n&&KV(a,r.path)?i=!1:Ht(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return ZV(e),!0;if(r.snap)e.visibleWrites=QT(e.visibleWrites,r.path);else{let a=r.children;Ue(a,c=>{e.visibleWrites=QT(e.visibleWrites,he(r.path,c))})}return!0}else return!1}function KV(e,t){if(e.snap)return Ht(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&Ht(he(e.path,n),t))return!0;return!1}function ZV(e){e.visibleWrites=US(e.allWrites,QV,K()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function QV(e){return e.visible}function US(e,t,n){let r=dn.empty();for(let i=0;i<e.length;++i){let o=e[i];if(t(o)){let s=o.path,a;if(o.snap)Ht(n,s)?(a=tt(n,s),r=ec(r,a,o.snap)):Ht(s,n)&&(a=tt(s,n),r=ec(r,K(),o.snap.getChild(a)));else if(o.children){if(Ht(n,s))a=tt(n,s),r=ry(r,a,o.children);else if(Ht(s,n))if(a=tt(s,n),W(a))r=ry(r,K(),o.children);else{let c=Ti(o.children,$(a));if(c){let l=c.getChild(se(a));r=ec(r,K(),l)}}}else throw bi("WriteRecord should have .snap or .children")}}return r}function BS(e,t,n,r,i){if(!r&&!i){let o=Fi(e.visibleWrites,t);if(o!=null)return o;{let s=Or(e.visibleWrites,t);if(oy(s))return n;if(n==null&&!iy(s,K()))return null;{let a=n||V.EMPTY_NODE;return is(s,a)}}}else{let o=Or(e.visibleWrites,t);if(!i&&oy(o))return n;if(!i&&n==null&&!iy(o,K()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Ht(l.path,t)||Ht(t,l.path))},a=US(e.allWrites,s,t),c=n||V.EMPTY_NODE;return is(a,c)}}}function JV(e,t,n){let r=V.EMPTY_NODE,i=Fi(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(le,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=Or(e.visibleWrites,t);return n.forEachChild(le,(s,a)=>{let c=is(Or(o,new Q(s)),a);r=r.updateImmediateChild(s,c)}),JT(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=Or(e.visibleWrites,t);return JT(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function XV(e,t,n,r,i){y(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=he(t,n);if(iy(e.visibleWrites,o))return null;{let s=Or(e.visibleWrites,o);return oy(s)?i.getChild(n):is(s,i.getChild(n))}}function ej(e,t,n,r){let i=he(t,n),o=Fi(e.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=Or(e.visibleWrites,i);return is(s,r.getNode().getImmediateChild(n))}else return null}function tj(e,t){return Fi(e.visibleWrites,t)}function nj(e,t,n,r,i,o,s){let a,c=Or(e.visibleWrites,t),l=Fi(c,K());if(l!=null)a=l;else if(n!=null)a=is(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function rj(){return{visibleWrites:dn.empty(),allWrites:[],lastWriteId:-1}}function Yd(e,t,n,r){return BS(e.writeTree,e.treePath,t,n,r)}function Ly(e,t){return JV(e.writeTree,e.treePath,t)}function XT(e,t,n,r){return XV(e.writeTree,e.treePath,t,n,r)}function Kd(e,t){return tj(e.writeTree,he(e.treePath,t))}function ij(e,t,n,r,i,o){return nj(e.writeTree,e.treePath,t,n,r,i,o)}function Vy(e,t,n){return ej(e.writeTree,e.treePath,t,n)}function HS(e,t){return $S(he(e.treePath,t),e.writeTree)}function $S(e,t){return{treePath:e,writeTree:t}}var sy=class{constructor(){this.changeMap=new Map}trackChildChange(t){let n=t.type,r=t.childName;y(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),y(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,oc(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,ic(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,ns(r,t.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,oc(r,t.snapshotNode,i.oldSnap));else throw bi("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}};var ay=class{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}},WS=new ay,cc=class{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{let r=this.optCompleteServerCache_!=null?new xn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Vy(this.writes_,t,r)}}getChildAfterChild(t,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ki(this.viewCache_),o=ij(this.writes_,i,n,1,r,t);return o.length===0?null:o[0]}};function oj(e){return{filter:e}}function sj(e,t){y(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),y(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function aj(e,t,n,r,i){let o=new sy,s,a;if(n.type===Rn.OVERWRITE){let l=n;l.source.fromUser?s=cy(e,t,l.path,l.snap,r,i,o):(y(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!W(l.path),s=Zd(e,t,l.path,l.snap,r,i,a,o))}else if(n.type===Rn.MERGE){let l=n;l.source.fromUser?s=lj(e,t,l.path,l.children,r,i,o):(y(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),s=ly(e,t,l.path,l.children,r,i,a,o))}else if(n.type===Rn.ACK_USER_WRITE){let l=n;l.revert?s=fj(e,t,l.path,r,i,o):s=uj(e,t,l.path,l.affectedTree,r,i,o)}else if(n.type===Rn.LISTEN_COMPLETE)s=dj(e,t,n.path,r,o);else throw bi("Unknown operation type: "+n.type);let c=o.getChanges();return cj(t,s,c),{viewCache:s,changes:c}}function cj(e,t,n){let r=t.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=qd(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(FS(qd(t)))}}function zS(e,t,n,r,i,o){let s=t.eventCache;if(Kd(r,n)!=null)return t;{let a,c;if(W(n))if(y(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let l=ki(t),u=l instanceof V?l:V.EMPTY_NODE,d=Ly(r,u);a=e.filter.updateFullNode(t.eventCache.getNode(),d,o)}else{let l=Yd(r,ki(t));a=e.filter.updateFullNode(t.eventCache.getNode(),l,o)}else{let l=$(n);if(l===".priority"){y(Fr(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=t.serverCache.getNode();let d=XT(r,n,u,c);d!=null?a=e.filter.updatePriority(u,d):a=s.getNode()}else{let u=se(n),d;if(s.isCompleteForChild(l)){c=t.serverCache.getNode();let f=XT(r,n,s.getNode(),c);f!=null?d=s.getNode().getImmediateChild(l).updateChild(u,f):d=s.getNode().getImmediateChild(l)}else d=Vy(r,l,t.serverCache);d!=null?a=e.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return Xa(t,a,s.isFullyInitialized()||W(n),e.filter.filtersNodes())}}function Zd(e,t,n,r,i,o,s,a){let c=t.serverCache,l,u=s?e.filter:e.filter.getIndexedFilter();if(W(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=$(n);if(!c.isCompleteForPath(n)&&Fr(n)>1)return t;let g=se(n),b=c.getNode().getImmediateChild(h).updateChild(g,r);h===".priority"?l=u.updatePriority(c.getNode(),b):l=u.updateChild(c.getNode(),h,b,g,WS,null)}let d=VS(t,l,c.isFullyInitialized()||W(n),u.filtersNodes()),f=new cc(i,d,o);return zS(e,d,n,i,f,a)}function cy(e,t,n,r,i,o,s){let a=t.eventCache,c,l,u=new cc(i,t,o);if(W(n))l=e.filter.updateFullNode(t.eventCache.getNode(),r,s),c=Xa(t,l,!0,e.filter.filtersNodes());else{let d=$(n);if(d===".priority")l=e.filter.updatePriority(t.eventCache.getNode(),r),c=Xa(t,l,a.isFullyInitialized(),a.isFiltered());else{let f=se(n),h=a.getNode().getImmediateChild(d),g;if(W(f))g=r;else{let _=u.getCompleteChild(d);_!=null?Ny(f)===".priority"&&_.getChild(MS(f)).isEmpty()?g=_:g=_.updateChild(f,r):g=V.EMPTY_NODE}if(h.equals(g))c=t;else{let _=e.filter.updateChild(a.getNode(),d,g,f,u,s);c=Xa(t,_,a.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function eS(e,t){return e.eventCache.isCompleteForChild(t)}function lj(e,t,n,r,i,o,s){let a=t;return r.foreach((c,l)=>{let u=he(n,c);eS(t,$(u))&&(a=cy(e,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=he(n,c);eS(t,$(u))||(a=cy(e,a,u,l,i,o,s))}),a}function tS(e,t,n){return n.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function ly(e,t,n,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,l;W(n)?l=r:l=new rt(null).setTree(n,r);let u=t.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=t.serverCache.getNode().getImmediateChild(d),g=tS(e,h,f);c=Zd(e,c,new Q(d),g,i,o,s,a)}}),l.children.inorderTraversal((d,f)=>{let h=!t.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let g=t.serverCache.getNode().getImmediateChild(d),_=tS(e,g,f);c=Zd(e,c,new Q(d),_,i,o,s,a)}}),c}function uj(e,t,n,r,i,o,s){if(Kd(i,n)!=null)return t;let a=t.serverCache.isFiltered(),c=t.serverCache;if(r.value!=null){if(W(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Zd(e,t,n,c.getNode().getChild(n),i,o,a,s);if(W(n)){let l=new rt(null);return c.getNode().forEachChild(xi,(u,d)=>{l=l.set(new Q(u),d)}),ly(e,t,n,l,i,o,a,s)}else return t}else{let l=new rt(null);return r.foreach((u,d)=>{let f=he(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),ly(e,t,n,l,i,o,a,s)}}function dj(e,t,n,r,i){let o=t.serverCache,s=VS(t,o.getNode(),o.isFullyInitialized()||W(n),o.isFiltered());return zS(e,s,n,r,WS,i)}function fj(e,t,n,r,i,o){let s;if(Kd(r,n)!=null)return t;{let a=new cc(r,t,i),c=t.eventCache.getNode(),l;if(W(n)||$(n)===".priority"){let u;if(t.serverCache.isFullyInitialized())u=Yd(r,ki(t));else{let d=t.serverCache.getNode();y(d instanceof V,"serverChildren would be complete if leaf node"),u=Ly(r,d)}u=u,l=e.filter.updateFullNode(c,u,o)}else{let u=$(n),d=Vy(r,u,t.serverCache);d==null&&t.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=e.filter.updateChild(c,u,d,se(n),a,o):t.eventCache.getNode().hasChild(u)?l=e.filter.updateChild(c,u,V.EMPTY_NODE,se(n),a,o):l=c,l.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=Yd(r,ki(t)),s.isLeafNode()&&(l=e.filter.updateFullNode(l,s,o)))}return s=t.serverCache.isFullyInitialized()||Kd(r,K())!=null,Xa(t,l,s,e.filter.filtersNodes())}}var uy=class{constructor(t,n){this.query_=t,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new sc(r.getIndex()),o=kV(r);this.processor_=oj(o);let s=n.serverCache,a=n.eventCache,c=i.updateFullNode(V.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(V.EMPTY_NODE,a.getNode(),null),u=new xn(c,s.isFullyInitialized(),i.filtersNodes()),d=new xn(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=cf(d,u),this.eventGenerator_=new ny(this.query_)}get query(){return this.query_}};function hj(e){return e.viewCache_.serverCache.getNode()}function pj(e){return qd(e.viewCache_)}function gj(e,t){let n=ki(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!W(t)&&!n.getImmediateChild($(t)).isEmpty())?n.getChild(t):null}function nS(e){return e.eventRegistrations_.length===0}function mj(e,t){e.eventRegistrations_.push(t)}function rS(e,t,n){let r=[];if(n){y(t==null,"A cancel should cancel all event registrations.");let i=e.query._path;e.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(t){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){let s=e.eventRegistrations_[o];if(!s.matches(t))i.push(s);else if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function iS(e,t,n,r){t.type===Rn.MERGE&&t.source.queryId!==null&&(y(ki(e.viewCache_),"We should always have a full cache before handling merges"),y(qd(e.viewCache_),"Missing event cache, even though we have a server cache"));let i=e.viewCache_,o=aj(e.processor_,i,t,n,r);return sj(e.processor_,o.viewCache),y(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,GS(e,o.changes,o.viewCache.eventCache.getNode(),null)}function vj(e,t){let n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(le,(o,s)=>{r.push(ns(o,s))}),n.isFullyInitialized()&&r.push(FS(n.getNode())),GS(e,r,n.getNode(),t)}function GS(e,t,n,r){let i=r?[r]:e.eventRegistrations_;return BV(e.eventGenerator_,t,n,i)}var Qd,Jd=class{constructor(){this.views=new Map}};function yj(e){y(!Qd,"__referenceConstructor has already been defined"),Qd=e}function _j(){return y(Qd,"Reference.ts has not been loaded"),Qd}function Ej(e){return e.views.size===0}function jy(e,t,n,r){let i=t.source.queryId;if(i!==null){let o=e.views.get(i);return y(o!=null,"SyncTree gave us an op for an invalid query."),iS(o,t,n,r)}else{let o=[];for(let s of e.views.values())o=o.concat(iS(s,t,n,r));return o}}function qS(e,t,n,r,i){let o=t._queryIdentifier,s=e.views.get(o);if(!s){let a=Yd(n,i?r:null),c=!1;a?c=!0:r instanceof V?(a=Ly(n,r),c=!1):(a=V.EMPTY_NODE,c=!1);let l=cf(new xn(a,c,!1),new xn(r,i,!1));return new uy(t,l)}return s}function Ij(e,t,n,r,i,o){let s=qS(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),mj(s,n),vj(s,n)}function Cj(e,t,n,r){let i=t._queryIdentifier,o=[],s=[],a=Lr(e);if(i==="default")for(let[c,l]of e.views.entries())s=s.concat(rS(l,n,r)),nS(l)&&(e.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{let c=e.views.get(i);c&&(s=s.concat(rS(c,n,r)),nS(c)&&(e.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!Lr(e)&&o.push(new(_j())(t._repo,t._path)),{removed:o,events:s}}function YS(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function kr(e,t){let n=null;for(let r of e.views.values())n=n||gj(r,t);return n}function KS(e,t){if(t._queryParams.loadsAllData())return uf(e);{let r=t._queryIdentifier;return e.views.get(r)}}function ZS(e,t){return KS(e,t)!=null}function Lr(e){return uf(e)!=null}function uf(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var Xd;function wj(e){y(!Xd,"__referenceConstructor has already been defined"),Xd=e}function Dj(){return y(Xd,"Reference.ts has not been loaded"),Xd}var bj=1,ef=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new rt(null),this.pendingWriteTree_=rj(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function QS(e,t,n,r,i){return zV(e.pendingWriteTree_,t,n,r,i),i?ls(e,new rs(ky(),t,n)):[]}function Tj(e,t,n,r){GV(e.pendingWriteTree_,t,n,r);let i=rt.fromObject(n);return ls(e,new ac(ky(),t,i))}function xr(e,t,n=!1){let r=qV(e.pendingWriteTree_,t);if(YV(e.pendingWriteTree_,t)){let o=new rt(null);return r.snap!=null?o=o.set(K(),!0):Ue(r.children,s=>{o=o.set(new Q(s),!0)}),ls(e,new ty(r.path,o,n))}else return[]}function gc(e,t,n){return ls(e,new rs(Py(),t,n))}function Sj(e,t,n){let r=rt.fromObject(n);return ls(e,new ac(Py(),t,r))}function Aj(e,t){return ls(e,new Gd(Py(),t))}function Mj(e,t,n){let r=By(e,n);if(r){let i=Hy(r),o=i.path,s=i.queryId,a=tt(o,t),c=new Gd(Fy(s),a);return $y(e,o,c)}else return[]}function tf(e,t,n,r,i=!1){let o=t._path,s=e.syncPointTree_.get(o),a=[];if(s&&(t._queryIdentifier==="default"||ZS(s,t))){let c=Cj(s,t,n,r);Ej(s)&&(e.syncPointTree_=e.syncPointTree_.remove(o));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=e.syncPointTree_.findOnPath(o,(f,h)=>Lr(h));if(u&&!d){let f=e.syncPointTree_.subtree(o);if(!f.isEmpty()){let h=xj(f);for(let g=0;g<h.length;++g){let _=h[g],b=_.query,N=t0(e,_);e.listenProvider_.startListening(tc(b),lc(e,b),N.hashFn,N.onComplete)}}}!d&&l.length>0&&!r&&(u?e.listenProvider_.stopListening(tc(t),null):l.forEach(f=>{let h=e.queryToTagMap.get(df(f));e.listenProvider_.stopListening(tc(f),h)}))}Oj(e,l)}return a}function JS(e,t,n,r){let i=By(e,r);if(i!=null){let o=Hy(i),s=o.path,a=o.queryId,c=tt(s,t),l=new rs(Fy(a),c,n);return $y(e,s,l)}else return[]}function Nj(e,t,n,r){let i=By(e,r);if(i){let o=Hy(i),s=o.path,a=o.queryId,c=tt(s,t),l=rt.fromObject(n),u=new ac(Fy(a),c,l);return $y(e,s,u)}else return[]}function dy(e,t,n,r=!1){let i=t._path,o=null,s=!1;e.syncPointTree_.foreachOnPath(i,(f,h)=>{let g=tt(f,i);o=o||kr(h,g),s=s||Lr(h)});let a=e.syncPointTree_.get(i);a?(s=s||Lr(a),o=o||kr(a,K())):(a=new Jd,e.syncPointTree_=e.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=V.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((h,g)=>{let _=kr(g,K());_&&(o=o.updateImmediateChild(h,_))}));let l=ZS(a,t);if(!l&&!t._queryParams.loadsAllData()){let f=df(t);y(!e.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=kj();e.queryToTagMap.set(f,h),e.tagToQueryMap.set(h,f)}let u=lf(e.pendingWriteTree_,i),d=Ij(a,t,n,u,o,c);if(!l&&!s&&!r){let f=KS(a,t);d=d.concat(Pj(e,t,f))}return d}function Uy(e,t,n){let i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(s,a)=>{let c=tt(s,t),l=kr(a,c);if(l)return l});return BS(i,t,o,n,!0)}function Rj(e,t){let n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(l,u)=>{let d=tt(l,n);r=r||kr(u,d)});let i=e.syncPointTree_.get(n);i?r=r||kr(i,K()):(i=new Jd,e.syncPointTree_=e.syncPointTree_.set(n,i));let o=r!=null,s=o?new xn(r,!0,!1):null,a=lf(e.pendingWriteTree_,t._path),c=qS(i,t,a,o?s.getNode():V.EMPTY_NODE,o);return pj(c)}function ls(e,t){return XS(t,e.syncPointTree_,null,lf(e.pendingWriteTree_,K()))}function XS(e,t,n,r){if(W(e.path))return e0(e,t,n,r);{let i=t.get(K());n==null&&i!=null&&(n=kr(i,K()));let o=[],s=$(e.path),a=e.operationForChild(s),c=t.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=HS(r,s);o=o.concat(XS(a,c,l,u))}return i&&(o=o.concat(jy(i,e,r,n))),o}}function e0(e,t,n,r){let i=t.get(K());n==null&&i!=null&&(n=kr(i,K()));let o=[];return t.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=HS(r,s),u=e.operationForChild(s);u&&(o=o.concat(e0(u,a,c,l)))}),i&&(o=o.concat(jy(i,e,r,n))),o}function t0(e,t){let n=t.query,r=lc(e,n);return{hashFn:()=>(hj(t)||V.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?Mj(e,n._path,r):Aj(e,n._path);{let o=zL(i,n);return tf(e,n,null,o)}}}}function lc(e,t){let n=df(t);return e.queryToTagMap.get(n)}function df(e){return e._path.toString()+"$"+e._queryIdentifier}function By(e,t){return e.tagToQueryMap.get(t)}function Hy(e){let t=e.indexOf("$");return y(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Q(e.substr(0,t))}}function $y(e,t,n){let r=e.syncPointTree_.get(t);y(r,"Missing sync point for query tag that we're tracking");let i=lf(e.pendingWriteTree_,t);return jy(r,n,i,null)}function xj(e){return e.fold((t,n,r)=>{if(n&&Lr(n))return[uf(n)];{let i=[];return n&&(i=YS(n)),Ue(r,(o,s)=>{i=i.concat(s)}),i}})}function tc(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Dj())(e._repo,e._path):e}function Oj(e,t){for(let n=0;n<t.length;++n){let r=t[n];if(!r._queryParams.loadsAllData()){let i=df(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}function kj(){return bj++}function Pj(e,t,n){let r=t._path,i=lc(e,t),o=t0(e,n),s=e.listenProvider_.startListening(tc(t),i,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(r);if(i)y(!Lr(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!W(l)&&u&&Lr(u))return[uf(u).query];{let f=[];return u&&(f=f.concat(YS(u).map(h=>h.query))),Ue(d,(h,g)=>{f=f.concat(g)}),f}});for(let l=0;l<c.length;++l){let u=c[l];e.listenProvider_.stopListening(tc(u),lc(e,u))}}return s}var fy=class e{constructor(t){this.node_=t}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},hy=class e{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){let n=he(this.path_,t);return new e(this.syncTree_,n)}node(){return Uy(this.syncTree_,this.path_)}},Fj=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},oS=function(e,t,n){if(!e||typeof e!="object")return e;if(y(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return Lj(e[".sv"],t,n);if(typeof e[".sv"]=="object")return Vj(e[".sv"],t);y(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},Lj=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:y(!1,"Unexpected server value: "+e)}},Vj=function(e,t,n){e.hasOwnProperty("increment")||y(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let r=e.increment;typeof r!="number"&&y(!1,"Unexpected increment value: "+r);let i=t.node();if(y(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},n0=function(e,t,n,r){return Wy(t,new hy(n,e),r)},r0=function(e,t,n){return Wy(e,new fy(t),n)};function Wy(e,t,n){let r=e.getPriority().val(),i=oS(r,t.getImmediateChild(".priority"),n),o;if(e.isLeafNode()){let s=e,a=oS(s.getValue(),t,n);return a!==s.getValue()||i!==s.getPriority().val()?new es(a,Me(i)):e}else{let s=e;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new es(i))),s.forEachChild(le,(a,c)=>{let l=Wy(c,t.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var uc=class{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}};function zy(e,t){let n=t instanceof Q?t:new Q(t),r=e,i=$(n);for(;i!==null;){let o=Ti(r.node.children,i)||{children:{},childCount:0};r=new uc(i,r,o),n=se(n),i=$(n)}return r}function us(e){return e.node.value}function i0(e,t){e.node.value=t,py(e)}function o0(e){return e.node.childCount>0}function jj(e){return us(e)===void 0&&!o0(e)}function ff(e,t){Ue(e.node.children,(n,r)=>{t(new uc(n,e,r))})}function s0(e,t,n,r){n&&!r&&t(e),ff(e,i=>{s0(i,t,!0,r)}),n&&r&&t(e)}function Uj(e,t,n){let r=n?e:e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function mc(e){return new Q(e.parent===null?e.name:mc(e.parent)+"/"+e.name)}function py(e){e.parent!==null&&Bj(e.parent,e.name,e)}function Bj(e,t,n){let r=jj(n),i=cn(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,py(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,py(e))}var Hj=/[\[\].#$\/\u0000-\u001F\u007F]/,$j=/[\[\].#$\u0000-\u001F\u007F]/,Tv=10*1024*1024,hf=function(e){return typeof e=="string"&&e.length!==0&&!Hj.test(e)},a0=function(e){return typeof e=="string"&&e.length!==0&&!$j.test(e)},Wj=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),a0(e)},gy=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!Sy(e)||e&&typeof e=="object"&&cn(e,".sv")},pf=function(e,t,n,r){r&&t===void 0||gf(Ko(e,"value"),t,n)},gf=function(e,t,n){let r=n instanceof Q?new Uv(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+Mi(r));if(typeof t=="function")throw new Error(e+"contains a function "+Mi(r)+" with contents = "+t.toString());if(Sy(t))throw new Error(e+"contains "+t.toString()+" "+Mi(r));if(typeof t=="string"&&t.length>Tv/3&&$a(t)>Tv)throw new Error(e+"contains a string greater than "+Tv+" utf8 bytes "+Mi(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let i=!1,o=!1;if(Ue(t,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!hf(s)))throw new Error(e+" contains an invalid key ("+s+") "+Mi(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);IV(r,s),gf(e,a,r),CV(r)}),i&&o)throw new Error(e+' contains ".value" child '+Mi(r)+" in addition to actual children.")}},zj=function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];let o=nc(r);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!hf(o[s]))throw new Error(e+"contains an invalid key ("+o[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(EV);let i=null;for(n=0;n<t.length;n++){if(r=t[n],i!==null&&Ht(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},Gj=function(e,t,n,r){if(r&&t===void 0)return;let i=Ko(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");let o=[];Ue(t,(s,a)=>{let c=new Q(s);if(gf(i,a,he(n,c)),Ny(c)===".priority"&&!gy(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(c)}),zj(i,o)};var qj=function(e,t,n,r){if(!(r&&n===void 0)&&!hf(n))throw new Error(Ko(e,t)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Gy=function(e,t,n,r){if(!(r&&n===void 0)&&!a0(n))throw new Error(Ko(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Yj=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Gy(e,t,n,r)},c0=function(e,t){if($(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},Kj=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!hf(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Wj(n))throw new Error(Ko(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var my=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function mf(e,t){let n=null;for(let r=0;r<t.length;r++){let i=t[r],o=i.getPath();n!==null&&!Ry(o,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function l0(e,t,n){mf(e,n),u0(e,r=>Ry(r,t))}function Wt(e,t,n){mf(e,n),u0(e,r=>Ht(r,t)||Ht(t,r))}function u0(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){let i=e.eventLists_[r];if(i){let o=i.path;t(o)?(Zj(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Zj(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let r=n.getEventRunner();Ri&&je("event: "+n.toString()),cs(r)}}}var Qj="repo_interrupt",Jj=25,vy=class{constructor(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new my,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=zd(),this.transactionQueueTree_=new uc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function Xj(e,t,n){if(e.stats_=My(e.repoInfo_),e.forceRestClient_||KL())e.server_=new Zv(e.repoInfo_,(r,i,o,s)=>{sS(e,r,i,o,s)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>aS(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{be(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new xy(e.repoInfo_,t,(r,i,o,s)=>{sS(e,r,i,o,s)},r=>{aS(e,r)},r=>{tU(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=QL(e.repoInfo_,()=>new ey(e.stats_,e.server_)),e.infoData_=new Qv,e.infoSyncTree_=new ef({startListening:(r,i,o,s)=>{let a=[],c=e.infoData_.getNode(r._path);return c.isEmpty()||(a=gc(e.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),qy(e,"connected",!1),e.serverSyncTree_=new ef({startListening:(r,i,o,s)=>(e.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);Wt(e.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}function eU(e){let n=e.infoData_.getNode(new Q(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function vf(e){return Fj({timestamp:eU(e)})}function sS(e,t,n,r,i){e.dataUpdateCount++;let o=new Q(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i)if(r){let c=Ha(n,l=>Me(l));s=Nj(e.serverSyncTree_,o,c,i)}else{let c=Me(n);s=JS(e.serverSyncTree_,o,c,i)}else if(r){let c=Ha(n,l=>Me(l));s=Sj(e.serverSyncTree_,o,c)}else{let c=Me(n);s=gc(e.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=os(e,o)),Wt(e.eventQueue_,a,s)}function aS(e,t){qy(e,"connected",t),t===!1&&oU(e)}function tU(e,t){Ue(t,(n,r)=>{qy(e,n,r)})}function qy(e,t,n){let r=new Q("/.info/"+t),i=Me(n);e.infoData_.updateSnapshot(r,i);let o=gc(e.infoSyncTree_,r,i);Wt(e.eventQueue_,r,o)}function Yy(e){return e.nextWriteId_++}function nU(e,t,n){let r=Rj(e.serverSyncTree_,t);return r!=null?Promise.resolve(r):e.server_.get(t).then(i=>{let o=Me(i).withIndex(t._queryParams.getIndex());dy(e.serverSyncTree_,t,n,!0);let s;if(t._queryParams.loadsAllData())s=gc(e.serverSyncTree_,t._path,o);else{let a=lc(e.serverSyncTree_,t);s=JS(e.serverSyncTree_,t._path,o,a)}return Wt(e.eventQueue_,t._path,s),tf(e.serverSyncTree_,t,n,null,!0),o},i=>(vc(e,"get for query "+be(t)+" failed: "+i),Promise.reject(new Error(i))))}function rU(e,t,n,r,i){vc(e,"set",{path:t.toString(),value:n,priority:r});let o=vf(e),s=Me(n,r),a=Uy(e.serverSyncTree_,t),c=r0(s,a,o),l=Yy(e),u=QS(e.serverSyncTree_,t,c,l,!0);mf(e.eventQueue_,u),e.server_.put(t.toString(),s.val(!0),(f,h)=>{let g=f==="ok";g||nt("set at "+t+" failed: "+f);let _=xr(e.serverSyncTree_,l,!g);Wt(e.eventQueue_,t,_),yy(e,i,f,h)});let d=Zy(e,t);os(e,d),Wt(e.eventQueue_,d,[])}function iU(e,t,n,r){vc(e,"update",{path:t.toString(),value:n});let i=!0,o=vf(e),s={};if(Ue(n,(a,c)=>{i=!1,s[a]=n0(he(t,a),Me(c),e.serverSyncTree_,o)}),i)je("update() called with empty data.  Don't do anything."),yy(e,r,"ok",void 0);else{let a=Yy(e),c=Tj(e.serverSyncTree_,t,s,a);mf(e.eventQueue_,c),e.server_.merge(t.toString(),n,(l,u)=>{let d=l==="ok";d||nt("update at "+t+" failed: "+l);let f=xr(e.serverSyncTree_,a,!d),h=f.length>0?os(e,t):t;Wt(e.eventQueue_,h,f),yy(e,r,l,u)}),Ue(n,l=>{let u=Zy(e,he(t,l));os(e,u)}),Wt(e.eventQueue_,t,[])}}function oU(e){vc(e,"onDisconnectEvents");let t=vf(e),n=zd();Jv(e.onDisconnect_,K(),(i,o)=>{let s=n0(i,o,e.serverSyncTree_,t);LS(n,i,s)});let r=[];Jv(n,K(),(i,o)=>{r=r.concat(gc(e.serverSyncTree_,i,o));let s=Zy(e,i);os(e,s)}),e.onDisconnect_=zd(),Wt(e.eventQueue_,K(),r)}function sU(e,t,n){let r;$(t._path)===".info"?r=dy(e.infoSyncTree_,t,n):r=dy(e.serverSyncTree_,t,n),l0(e.eventQueue_,t._path,r)}function cS(e,t,n){let r;$(t._path)===".info"?r=tf(e.infoSyncTree_,t,n):r=tf(e.serverSyncTree_,t,n),l0(e.eventQueue_,t._path,r)}function aU(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Qj)}function vc(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),je(n,...t)}function yy(e,t,n,r){t&&cs(()=>{if(n==="ok")t(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,t(s)}})}function d0(e,t,n){return Uy(e.serverSyncTree_,t,n)||V.EMPTY_NODE}function Ky(e,t=e.transactionQueueTree_){if(t||yf(e,t),us(t)){let n=h0(e,t);y(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&cU(e,mc(t),n)}else o0(t)&&ff(t,n=>{Ky(e,n)})}function cU(e,t,n){let r=n.map(l=>l.currentWriteId),i=d0(e,t,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];y(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=tt(t,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=t;e.server_.put(c.toString(),a,l=>{vc(e,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(xr(e.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();yf(e,zy(e.transactionQueueTree_,t)),Ky(e,e.transactionQueueTree_),Wt(e.eventQueue_,t,u);for(let f=0;f<d.length;f++)cs(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{nt("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}os(e,t)}},s)}function os(e,t){let n=f0(e,t),r=mc(n),i=h0(e,n);return lU(e,i,r),r}function lU(e,t,n){if(t.length===0)return;let r=[],i=[],s=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let c=t[a],l=tt(n,c.path),u=!1,d;if(y(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(xr(e.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Jj)u=!0,d="maxretry",i=i.concat(xr(e.serverSyncTree_,c.currentWriteId,!0));else{let f=d0(e,c.path,s);c.currentInputSnapshot=f;let h=t[a].update(f.val());if(h!==void 0){gf("transaction failed: Data returned ",h,c.path);let g=Me(h);typeof h=="object"&&h!=null&&cn(h,".priority")||(g=g.updatePriority(f.getPriority()));let b=c.currentWriteId,N=vf(e),mt=r0(g,f,N);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=mt,c.currentWriteId=Yy(e),s.splice(s.indexOf(b),1),i=i.concat(QS(e.serverSyncTree_,c.path,mt,c.currentWriteId,c.applyLocally)),i=i.concat(xr(e.serverSyncTree_,b,!0))}else u=!0,d="nodata",i=i.concat(xr(e.serverSyncTree_,c.currentWriteId,!0))}Wt(e.eventQueue_,n,i),i=[],u&&(t[a].status=2,(function(f){setTimeout(f,Math.floor(0))})(t[a].unwatcher),t[a].onComplete&&(d==="nodata"?r.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):r.push(()=>t[a].onComplete(new Error(d),!1,null))))}yf(e,e.transactionQueueTree_);for(let a=0;a<r.length;a++)cs(r[a]);Ky(e,e.transactionQueueTree_)}function f0(e,t){let n,r=e.transactionQueueTree_;for(n=$(t);n!==null&&us(r)===void 0;)r=zy(r,n),t=se(t),n=$(t);return r}function h0(e,t){let n=[];return p0(e,t,n),n.sort((r,i)=>r.order-i.order),n}function p0(e,t,n){let r=us(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);ff(t,i=>{p0(e,i,n)})}function yf(e,t){let n=us(t);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,i0(t,n.length>0?n:void 0)}ff(t,r=>{yf(e,r)})}function Zy(e,t){let n=mc(f0(e,t)),r=zy(e.transactionQueueTree_,t);return Uj(r,i=>{Sv(e,i)}),Sv(e,r),s0(r,i=>{Sv(e,i)}),n}function Sv(e,t){let n=us(t);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(y(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(y(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(xr(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?i0(t,void 0):n.length=o+1,Wt(e.eventQueue_,mc(t),i);for(let s=0;s<r.length;s++)cs(r[s])}}function uU(e){let t="",n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function dU(e){let t={};e.charAt(0)==="?"&&(e=e.substring(1));for(let n of e.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):nt(`Invalid query segment '${n}' in query '${e}'`)}return t}var lS=function(e,t){let n=fU(e),r=n.namespace;n.domain==="firebase.com"&&er(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&er("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||UL();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Ld(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Q(n.pathString)}},fU=function(e){let t="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof e=="string"){let l=e.indexOf("//");l>=0&&(a=e.substring(0,l-1),e=e.substring(l+2));let u=e.indexOf("/");u===-1&&(u=e.length);let d=e.indexOf("?");d===-1&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=uU(e.substring(u,d)));let f=dU(e.substring(Math.min(e.length,d)));l=t.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(t.substring(l+1),10)):l=t.length;let h=t.slice(0,l);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let g=t.indexOf(".");r=t.substring(0,g).toLowerCase(),n=t.substring(g+1),o=r}"ns"in f&&(o=f.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var nf=class{constructor(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+be(this.snapshot.exportVal())}},rf=class{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var of=class{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return y(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var ss=class e{constructor(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return W(this._path)?null:Ny(this._path)}get ref(){return new On(this._repo,this._path)}get _queryIdentifier(){let t=KT(this._queryParams),n=Ay(t);return n==="{}"?"default":n}get _queryObject(){return KT(this._queryParams)}isEqual(t){if(t=Ee(t),!(t instanceof e))return!1;let n=this._repo===t._repo,r=Ry(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+_V(this._path)}};function hU(e,t){if(e._orderByCalled===!0)throw new Error(t+": You can't combine multiple orderBy calls.")}function Qy(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===xi){let r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==Oi)throw new Error(r);if(typeof t!="string")throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==Pr)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(e.getIndex()===le){if(t!=null&&!gy(t)||n!=null&&!gy(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(y(e.getIndex()instanceof rc||e.getIndex()===PS,"unknown index type."),t!=null&&typeof t=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function g0(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var On=class e extends ss{constructor(t,n){super(t,n,new Kv,!1)}get parent(){let t=MS(this._path);return t===null?null:new e(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},dc=class e{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let n=new Q(t),r=sf(this.ref,t);return new e(this._node.getChild(n),r,le)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>t(new e(i,sf(this.ref,r),le)))}hasChild(t){let n=new Q(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function zt(e,t){return e=Ee(e),e._checkNotDeleted("ref"),t!==void 0?sf(e._root,t):e._root}function sf(e,t){return e=Ee(e),$(e._path)===null?Yj("child","path",t,!1):Gy("child","path",t,!1),new On(e._repo,he(e._path,t))}function Jy(e){return c0("remove",e._path),_f(e,null)}function _f(e,t){e=Ee(e),c0("set",e._path),pf("set",t,e._path,!1);let n=new Jn;return rU(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function Ef(e,t){Gj("update",t,e._path,!1);let n=new Jn;return iU(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}function m0(e){e=Ee(e);let t=new of(()=>{}),n=new af(t);return nU(e._repo,e,n).then(r=>new dc(r,new On(e._repo,e._path),e._queryParams.getIndex()))}var af=class e{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){let r=n._queryParams.getIndex();return new nf("value",this,new dc(t.snapshotNode,new On(n._repo,n._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new rf(this,t,n):null}matches(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},_y=class e{constructor(t,n){this.eventType=t,this.callbackContext=n}respondsTo(t){let n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new rf(this,t,n):null}createEvent(t,n){y(t.childName!=null,"Child events should have a childName.");let r=sf(new On(n._repo,n._path),t.childName),i=n._queryParams.getIndex();return new nf(t.type,this,new dc(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function pU(e,t,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{cS(e._repo,e,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let s=new of(n,o||void 0),a=t==="value"?new af(s):new _y(t,s);return sU(e._repo,e,a),()=>cS(e._repo,e,a)}function yc(e,t,n,r){return pU(e,"value",t,n,r)}var as=class{},Ey=class extends as{constructor(t,n){super(),this._value=t,this._key=n,this.type="endAt"}_apply(t){pf("endAt",this._value,t._path,!0);let n=FV(t._queryParams,this._value,this._key);if(g0(n),Qy(n),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ss(t._repo,t._path,n,t._orderByCalled)}};var Iy=class extends as{constructor(t,n){super(),this._value=t,this._key=n,this.type="startAt"}_apply(t){pf("startAt",this._value,t._path,!0);let n=PV(t._queryParams,this._value,this._key);if(g0(n),Qy(n),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ss(t._repo,t._path,n,t._orderByCalled)}};var Cy=class extends as{constructor(t){super(),this._path=t,this.type="orderByChild"}_apply(t){hU(t,"orderByChild");let n=new Q(this._path);if(W(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let r=new rc(n),i=LV(t._queryParams,r);return Qy(i),new ss(t._repo,t._path,i,!0)}};function v0(e){if(e==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(e==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(e==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Gy("orderByChild","path",e,!1),new Cy(e)}var wy=class extends as{constructor(t,n){super(),this._value=t,this._key=n,this.type="equalTo"}_apply(t){if(pf("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ey(this._value,this._key)._apply(new Iy(this._value,this._key)._apply(t))}};function y0(e,t){return qj("equalTo","key",t,!0),new wy(e,t)}function _0(e,...t){let n=Ee(e);for(let r of t)n=r._apply(n);return n}yj(On);wj(On);var gU="FIREBASE_DATABASE_EMULATOR_HOST",Dy={},mU=!1;function vU(e,t,n,r){let i=t.lastIndexOf(":"),o=t.substring(0,i),s=Ar(o);e.repoInfo_=new Ld(t,s,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}function yU(e,t,n,r,i){let o=r||e.options.databaseURL;o===void 0&&(e.options.projectId||er("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),je("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let s=lS(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[gU]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=lS(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new Ja(Ja.OWNER):new Ov(e.name,e.options,t);Kj("Invalid Firebase Database URL",s),W(s.path)||er("Database URL must point to the root of a Firebase Database (not including a child path).");let d=EU(a,e,u,new xv(e,n));return new by(d,e)}function _U(e,t){let n=Dy[t];(!n||n[e.key]!==e)&&er(`Database ${t}(${e.repoInfo_}) has already been deleted.`),aU(e),delete n[e.key]}function EU(e,t,n,r){let i=Dy[t.name];i||(i={},Dy[t.name]=i);let o=i[e.toURLString()];return o&&er("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new vy(e,mU,n,r),i[e.toURLString()]=o,o}var by=class{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Xj(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new On(this._repo,K())),this._rootInternal}_delete(){return this._rootInternal!==null&&(_U(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&er("Cannot call "+t+" on a deleted database.")}};function E0(e=Ai(),t){let n=ln(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){let r=lT("database");r&&IU(n,...r)}return n}function IU(e,t,n,r={}){e=Ee(e),e._checkNotDeleted("useEmulator");let i=`${t}:${n}`,o=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&Bt(r,o.repoInfo_.emulatorOptions))return;er("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let s;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&er('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ja(Ja.OWNER);else if(r.mockUserToken){let a=typeof r.mockUserToken=="string"?r.mockUserToken:uT(r.mockUserToken,e.app.options.projectId);s=new Ja(a)}Ar(t)&&(bd(t),Td("Database",!0)),vU(o,i,r,s)}function CU(e){LL(Rr),gt(new xe("database",(t,{instanceIdentifier:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return yU(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),Ve(xT,OT,e),Ve(xT,OT,"esm2020")}xy.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};xy.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};CU();var wU="firebase",DU="12.7.0";Ve(wU,DU,"app");var w0="@firebase/installations",n_="0.6.19";var D0=1e4,b0=`w:${n_}`,T0="FIS_v2",bU="https://firebaseinstallations.googleapis.com/v1",TU=3600*1e3,SU="installations",AU="Installations";var MU={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Vi=new Tt(SU,AU,MU);function S0(e){return e instanceof et&&e.code.includes("request-failed")}function A0({projectId:e}){return`${bU}/projects/${e}/installations`}function M0(e){return{token:e.token,requestStatus:2,expiresIn:RU(e.expiresIn),creationTime:Date.now()}}function N0(e,t){return p(this,null,function*(){let r=(yield t.json()).error;return Vi.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function R0({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function NU(e,{refreshToken:t}){let n=R0(e);return n.append("Authorization",xU(t)),n}function x0(e){return p(this,null,function*(){let t=yield e();return t.status>=500&&t.status<600?e():t})}function RU(e){return Number(e.replace("s","000"))}function xU(e){return`${T0} ${e}`}function OU(r,i){return p(this,arguments,function*({appConfig:e,heartbeatServiceProvider:t},{fid:n}){let o=A0(e),s=R0(e),a=t.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}let c={fid:n,authVersion:T0,appId:e.appId,sdkVersion:b0},l={method:"POST",headers:s,body:JSON.stringify(c)},u=yield x0(()=>fetch(o,l));if(u.ok){let d=yield u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:M0(d.authToken)}}else throw yield N0("Create Installation",u)})}function O0(e){return new Promise(t=>{setTimeout(t,e)})}function kU(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}var PU=/^[cdef][\w-]{21}$/,t_="";function FU(){try{let e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;let n=LU(e);return PU.test(n)?n:t_}catch{return t_}}function LU(e){return kU(e).substr(0,22)}function Cf(e){return`${e.appName}!${e.appId}`}var k0=new Map;function P0(e,t){let n=Cf(e);F0(n,t),VU(n,t)}function F0(e,t){let n=k0.get(e);if(n)for(let r of n)r(t)}function VU(e,t){let n=jU();n&&n.postMessage({key:e,fid:t}),UU()}var Li=null;function jU(){return!Li&&"BroadcastChannel"in self&&(Li=new BroadcastChannel("[Firebase] FID Change"),Li.onmessage=e=>{F0(e.data.key,e.data.fid)}),Li}function UU(){k0.size===0&&Li&&(Li.close(),Li=null)}var BU="firebase-installations-database",HU=1,ji="firebase-installations-store",Xy=null;function r_(){return Xy||(Xy=Od(BU,HU,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(ji)}}})),Xy}function If(e,t){return p(this,null,function*(){let n=Cf(e),i=(yield r_()).transaction(ji,"readwrite"),o=i.objectStore(ji),s=yield o.get(n);return yield o.put(t,n),yield i.done,(!s||s.fid!==t.fid)&&P0(e,t.fid),t})}function L0(e){return p(this,null,function*(){let t=Cf(e),r=(yield r_()).transaction(ji,"readwrite");yield r.objectStore(ji).delete(t),yield r.done})}function wf(e,t){return p(this,null,function*(){let n=Cf(e),i=(yield r_()).transaction(ji,"readwrite"),o=i.objectStore(ji),s=yield o.get(n),a=t(s);return a===void 0?yield o.delete(n):yield o.put(a,n),yield i.done,a&&(!s||s.fid!==a.fid)&&P0(e,a.fid),a})}function i_(e){return p(this,null,function*(){let t,n=yield wf(e.appConfig,r=>{let i=$U(r),o=WU(e,i);return t=o.registrationPromise,o.installationEntry});return n.fid===t_?{installationEntry:yield t}:{installationEntry:n,registrationPromise:t}})}function $U(e){let t=e||{fid:FU(),registrationStatus:0};return V0(t)}function WU(e,t){if(t.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(Vi.create("app-offline"));return{installationEntry:t,registrationPromise:i}}let n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=zU(e,n);return{installationEntry:n,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:GU(e)}:{installationEntry:t}}function zU(e,t){return p(this,null,function*(){try{let n=yield OU(e,t);return If(e.appConfig,n)}catch(n){throw S0(n)&&n.customData.serverCode===409?yield L0(e.appConfig):yield If(e.appConfig,{fid:t.fid,registrationStatus:0}),n}})}function GU(e){return p(this,null,function*(){let t=yield I0(e.appConfig);for(;t.registrationStatus===1;)yield O0(100),t=yield I0(e.appConfig);if(t.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield i_(e);return r||n}return t})}function I0(e){return wf(e,t=>{if(!t)throw Vi.create("installation-not-found");return V0(t)})}function V0(e){return qU(e)?{fid:e.fid,registrationStatus:0}:e}function qU(e){return e.registrationStatus===1&&e.registrationTime+D0<Date.now()}function YU(r,i){return p(this,arguments,function*({appConfig:e,heartbeatServiceProvider:t},n){let o=KU(e,n),s=NU(e,n),a=t.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}let c={installation:{sdkVersion:b0,appId:e.appId}},l={method:"POST",headers:s,body:JSON.stringify(c)},u=yield x0(()=>fetch(o,l));if(u.ok){let d=yield u.json();return M0(d)}else throw yield N0("Generate Auth Token",u)})}function KU(e,{fid:t}){return`${A0(e)}/${t}/authTokens:generate`}function o_(e,t=!1){return p(this,null,function*(){let n,r=yield wf(e.appConfig,o=>{if(!j0(o))throw Vi.create("not-registered");let s=o.authToken;if(!t&&JU(s))return o;if(s.requestStatus===1)return n=ZU(e,t),o;{if(!navigator.onLine)throw Vi.create("app-offline");let a=eB(o);return n=QU(e,a),a}});return n?yield n:r.authToken})}function ZU(e,t){return p(this,null,function*(){let n=yield C0(e.appConfig);for(;n.authToken.requestStatus===1;)yield O0(100),n=yield C0(e.appConfig);let r=n.authToken;return r.requestStatus===0?o_(e,t):r})}function C0(e){return wf(e,t=>{if(!j0(t))throw Vi.create("not-registered");let n=t.authToken;return tB(n)?S(m({},t),{authToken:{requestStatus:0}}):t})}function QU(e,t){return p(this,null,function*(){try{let n=yield YU(e,t),r=S(m({},t),{authToken:n});return yield If(e.appConfig,r),n}catch(n){if(S0(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield L0(e.appConfig);else{let r=S(m({},t),{authToken:{requestStatus:0}});yield If(e.appConfig,r)}throw n}})}function j0(e){return e!==void 0&&e.registrationStatus===2}function JU(e){return e.requestStatus===2&&!XU(e)}function XU(e){let t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+TU}function eB(e){let t={requestStatus:1,requestTime:Date.now()};return S(m({},e),{authToken:t})}function tB(e){return e.requestStatus===1&&e.requestTime+D0<Date.now()}function nB(e){return p(this,null,function*(){let t=e,{installationEntry:n,registrationPromise:r}=yield i_(t);return r?r.catch(console.error):o_(t).catch(console.error),n.fid})}function rB(e,t=!1){return p(this,null,function*(){let n=e;return yield iB(n),(yield o_(n,t)).token})}function iB(e){return p(this,null,function*(){let{registrationPromise:t}=yield i_(e);t&&(yield t)})}function oB(e){if(!e||!e.options)throw e_("App Configuration");if(!e.name)throw e_("App Name");let t=["projectId","apiKey","appId"];for(let n of t)if(!e.options[n])throw e_(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function e_(e){return Vi.create("missing-app-config-values",{valueName:e})}var U0="installations",sB="installations-internal",aB=e=>{let t=e.getProvider("app").getImmediate(),n=oB(t),r=ln(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},cB=e=>{let t=e.getProvider("app").getImmediate(),n=ln(t,U0).getImmediate();return{getId:()=>nB(n),getToken:i=>rB(n,i)}};function lB(){gt(new xe(U0,aB,"PUBLIC")),gt(new xe(sB,cB,"PRIVATE"))}lB();Ve(w0,n_);Ve(w0,n_,"esm2020");var Df="analytics",uB="firebase_id",dB="origin",fB=60*1e3,hB="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",f_="https://www.googletagmanager.com/gtag/js";var it=new Mn("@firebase/analytics");var pB={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},At=new Tt("analytics","Analytics",pB);function gB(e){if(!e.startsWith(f_)){let t=At.create("invalid-gtag-resource",{gtagURL:e});return it.warn(t.message),""}return e}function q0(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function mB(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function vB(e,t){let n=mB("firebase-js-sdk-policy",{createScriptURL:gB}),r=document.createElement("script"),i=`${f_}?l=${e}&id=${t}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function yB(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}function _B(e,t,n,r,i,o){return p(this,null,function*(){let s=r[i];try{if(s)yield t[s];else{let c=(yield q0(n)).find(l=>l.measurementId===i);c&&(yield t[c.appId])}}catch(a){it.error(a)}e("config",i,o)})}function EB(e,t,n,r,i){return p(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield q0(n);for(let c of s){let l=a.find(d=>d.measurementId===c),u=l&&t[l.appId];if(u)o.push(u);else{o=[];break}}}o.length===0&&(o=Object.values(t)),yield Promise.all(o),e("event",r,i||{})}catch(o){it.error(o)}})}function IB(e,t,n,r){function i(o,...s){return p(this,null,function*(){try{if(o==="event"){let[a,c]=s;yield EB(e,t,n,a,c)}else if(o==="config"){let[a,c]=s;yield _B(e,t,n,r,a,c)}else if(o==="consent"){let[a,c]=s;e("consent",a,c)}else if(o==="get"){let[a,c,l]=s;e("get",a,c,l)}else if(o==="set"){let[a]=s;e("set",a)}else e(o,...s)}catch(a){it.error(a)}})}return i}function CB(e,t,n,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=IB(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}function wB(e){let t=window.document.getElementsByTagName("script");for(let n of Object.values(t))if(n.src&&n.src.includes(f_)&&n.src.includes(e))return n;return null}var DB=30,bB=1e3,a_=class{constructor(t={},n=bB){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}},Y0=new a_;function TB(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function SB(e){return p(this,null,function*(){let{appId:t,apiKey:n}=e,r={method:"GET",headers:TB(n)},i=hB.replace("{app-id}",t),o=yield fetch(i,r);if(o.status!==200&&o.status!==304){let s="";try{let a=yield o.json();a.error?.message&&(s=a.error.message)}catch{}throw At.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s})}return o.json()})}function AB(r){return p(this,arguments,function*(e,t=Y0,n){let{appId:i,apiKey:o,measurementId:s}=e.options;if(!i)throw At.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw At.create("no-api-key")}let a=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new c_;return setTimeout(()=>p(null,null,function*(){c.abort()}),n!==void 0?n:fB),K0({appId:i,apiKey:o,measurementId:s},a,c,t)})}function K0(o,s,a){return p(this,arguments,function*(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=Y0){let{appId:c,measurementId:l}=e;try{yield MB(r,t)}catch(u){if(l)return it.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:c,measurementId:l};throw u}try{let u=yield SB(e);return i.deleteThrottleMetadata(c),u}catch(u){let d=u;if(!NB(d)){if(i.deleteThrottleMetadata(c),l)return it.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:c,measurementId:l};throw u}let f=Number(d?.customData?.httpStatus)===503?sv(n,i.intervalMillis,DB):sv(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return i.setThrottleMetadata(c,h),it.debug(`Calling attemptFetch again in ${f} millis`),K0(e,h,r,i)}})}function MB(e,t){return new Promise((n,r)=>{let i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(o),r(At.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function NB(e){if(!(e instanceof et)||!e.customData)return!1;let t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var c_=class{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}};var l_;function RB(e,t,n,r,i){return p(this,null,function*(){if(i&&i.global){e("event",n,r);return}else{let o=yield t,s=S(m({},r),{send_to:o});e("event",n,s)}})}function xB(e,t,n,r){return p(this,null,function*(){if(r&&r.global){let i={};for(let o of Object.keys(n))i[`user_properties.${o}`]=n[o];return e("set",i),Promise.resolve()}else{let i=yield t;e("config",i,{update:!0,user_properties:n})}})}var u_;function OB(e){u_=e}function kB(e){l_=e}function PB(){return p(this,null,function*(){if(Md())try{yield Nd()}catch(e){return it.warn(At.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}else return it.warn(At.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function FB(e,t,n,r,i,o,s){return p(this,null,function*(){let a=AB(e);a.then(f=>{n[f.measurementId]=f.appId,e.options.measurementId&&f.measurementId!==e.options.measurementId&&it.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>it.error(f)),t.push(a);let c=PB().then(f=>{if(f)return r.getId()}),[l,u]=yield Promise.all([a,c]);wB(o)||vB(o,l.measurementId),u_&&(i("consent","default",u_),OB(void 0)),i("js",new Date);let d=s?.config??{};return d[dB]="firebase",d.update=!0,u!=null&&(d[uB]=u),i("config",l.measurementId,d),l_&&(i("set",l_),kB(void 0)),l.measurementId})}var d_=class{constructor(t){this.app=t}_delete(){return delete ds[this.app.options.appId],Promise.resolve()}},ds={},B0=[],H0={},s_="dataLayer",LB="gtag",$0,h_,W0=!1;function VB(){let e=[];if(Sd()&&e.push("This is a browser extension environment."),hT()||e.push("Cookies are not available."),e.length>0){let t=e.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=At.create("invalid-analytics-context",{errorInfo:t});it.warn(n.message)}}function jB(e,t,n){VB();let r=e.options.appId;if(!r)throw At.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)it.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw At.create("no-api-key");if(ds[r]!=null)throw At.create("already-exists",{id:r});if(!W0){yB(s_);let{wrappedGtag:o,gtagCore:s}=CB(ds,B0,H0,s_,LB);h_=o,$0=s,W0=!0}return ds[r]=FB(e,B0,H0,t,$0,s_,n),new d_(e)}function Z0(e=Ai()){e=Ee(e);let t=ln(e,Df);return t.isInitialized()?t.getImmediate():UB(e)}function UB(e,t={}){let n=ln(e,Df);if(n.isInitialized()){let i=n.getImmediate();if(Bt(t,n.getOptions()))return i;throw At.create("already-initialized")}return n.initialize({options:t})}function BB(e,t,n){e=Ee(e),xB(h_,ds[e.app.options.appId],t,n).catch(r=>it.error(r))}function HB(e,t,n,r){e=Ee(e),RB(h_,ds[e.app.options.appId],t,n,r).catch(i=>it.error(i))}var z0="@firebase/analytics",G0="0.10.19";function $B(){gt(new xe(Df,(t,{options:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return jB(r,i,n)},"PUBLIC")),gt(new xe("analytics-internal",e,"PRIVATE")),Ve(z0,G0),Ve(z0,G0,"esm2020");function e(t){try{let n=t.getProvider(Df).getImmediate();return{logEvent:(r,i,o)=>HB(n,r,i,o),setUserProperties:(r,i)=>BB(n,r,i)}}catch(n){throw At.create("interop-component-reg-failed",{reason:n})}}}$B();function dA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var fA=dA,hA=new Tt("auth","Firebase",dA());var Nf=new Mn("@firebase/auth");function WB(e,...t){Nf.logLevel<=te.WARN&&Nf.warn(`Auth (${Rr}): ${e}`,...t)}function Tf(e,...t){Nf.logLevel<=te.ERROR&&Nf.error(`Auth (${Rr}): ${e}`,...t)}function Pn(e,...t){throw R_(e,...t)}function fn(e,...t){return R_(e,...t)}function N_(e,t,n){let r=S(m({},fA()),{[t]:n});return new Tt("auth","Firebase",r).create(t,{appName:e.name})}function Ui(e){return N_(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zB(e,t,n){let r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Pn(e,"argument-error"),N_(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function R_(e,...t){if(typeof e!="string"){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return hA.create(e,...t)}function x(e,t,...n){if(!e)throw R_(t,...n)}function tr(e){let t="INTERNAL ASSERTION FAILED: "+e;throw Tf(t),new Error(t)}function rr(e,t){e||tr(t)}function m_(){return typeof self<"u"&&self.location?.href||""}function GB(){return Q0()==="http:"||Q0()==="https:"}function Q0(){return typeof self<"u"&&self.location?.protocol||null}function qB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(GB()||Sd()||"connection"in navigator)?navigator.onLine:!0}function YB(){if(typeof navigator>"u")return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var Bi=class{constructor(t,n){this.shortDelay=t,this.longDelay=n,rr(n>t,"Short delay should be less than long delay!"),this.isMobile=Ua()||Ad()}get(){return qB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function x_(e,t){rr(e.emulator,"Emulator should always be set here");let{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}var Rf=class{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var KB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var ZB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QB=new Bi(3e4,6e4);function O_(e,t){return e.tenantId&&!t.tenantId?S(m({},t),{tenantId:e.tenantId}):t}function hs(o,s,a,c){return p(this,arguments,function*(e,t,n,r,i={}){return pA(e,i,()=>p(null,null,function*(){let l={},u={};r&&(t==="GET"?u=r:l={body:JSON.stringify(r)});let d=Mr(m({key:e.config.apiKey},u)).slice(1),f=yield e._getAdditionalHeaders();f["Content-Type"]="application/json",e.languageCode&&(f["X-Firebase-Locale"]=e.languageCode);let h=m({method:t,headers:f},l);return dT()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&Ar(e.emulatorConfig.host)&&(h.credentials="include"),Rf.fetch()(yield gA(e,e.config.apiHost,n,d),h)}))})}function pA(e,t,n){return p(this,null,function*(){e._canInitEmulator=!1;let r=m(m({},KB),t);try{let i=new v_(e),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw bf(e,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw bf(e,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw bf(e,"email-already-in-use",s);if(c==="USER_DISABLED")throw bf(e,"user-disabled",s);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw N_(e,u,l);Pn(e,u)}}catch(i){if(i instanceof et)throw i;Pn(e,"network-request-failed",{message:String(i)})}})}function JB(o,s,a,c){return p(this,arguments,function*(e,t,n,r,i={}){let l=yield hs(e,t,n,r,i);return"mfaPendingCredential"in l&&Pn(e,"multi-factor-auth-required",{_serverResponse:l}),l})}function gA(e,t,n,r){return p(this,null,function*(){let i=`${t}${n}?${r}`,o=e,s=o.config.emulator?x_(e.config,i):`${e.config.apiScheme}://${i}`;return ZB.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var v_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(fn(this.auth,"network-request-failed")),QB.get())})}};function bf(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=fn(e,t,r);return i.customData._tokenResponse=n,i}function XB(e,t){return p(this,null,function*(){return hs(e,"POST","/v1/accounts:delete",t)})}function xf(e,t){return p(this,null,function*(){return hs(e,"POST","/v1/accounts:lookup",t)})}function _c(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function mA(e,t=!1){return p(this,null,function*(){let n=Ee(e),r=yield n.getIdToken(t),i=k_(r);x(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:_c(p_(i.auth_time)),issuedAtTime:_c(p_(i.iat)),expirationTime:_c(p_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function p_(e){return Number(e)*1e3}function k_(e){let[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return Tf("JWT malformed, contained fewer than 3 sections"),null;try{let i=qo(n);return i?JSON.parse(i):(Tf("Failed to decode base64 JWT payload"),null)}catch(i){return Tf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function J0(e){let t=k_(e);return x(t,"internal-error"),x(typeof t.exp<"u","internal-error"),x(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}function Ic(e,t,n=!1){return p(this,null,function*(){if(n)return t;try{return yield t}catch(r){throw r instanceof et&&e2(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})}function e2({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}var y_=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;let n=this.getInterval(t);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),n)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Cc=class{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=_c(this.lastLoginAt),this.creationTime=_c(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Of(e){return p(this,null,function*(){let t=e.auth,n=yield e.getIdToken(),r=yield Ic(e,xf(t,{idToken:n}));x(r?.users.length,t,"internal-error");let i=r.users[0];e._notifyReloadListener(i);let o=i.providerUserInfo?.length?yA(i.providerUserInfo):[],s=t2(e.providerData,o),a=e.isAnonymous,c=!(e.email&&i.passwordHash)&&!s?.length,l=a?c:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Cc(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(e,u)})}function vA(e){return p(this,null,function*(){let t=Ee(e);yield Of(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})}function t2(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function yA(e){return e.map(r=>{var i=r,{providerId:t}=i,n=Nc(i,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function n2(e,t){return p(this,null,function*(){let n=yield pA(e,{},()=>p(null,null,function*(){let r=Mr({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=e.config,s=yield gA(e,i,"/v1/token",`key=${o}`),a=yield e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return e.emulatorConfig&&Ar(e.emulatorConfig.host)&&(c.credentials="include"),Rf.fetch()(s,c)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function r2(e,t){return p(this,null,function*(){return hs(e,"POST","/v2/accounts:revokeToken",O_(e,t))})}var Ec=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){x(t.idToken,"internal-error"),x(typeof t.idToken<"u","internal-error"),x(typeof t.refreshToken<"u","internal-error");let n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):J0(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){x(t.length!==0,"internal-error");let n=J0(t);this.updateTokensAndExpiration(t,null,n)}getToken(t,n=!1){return p(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(x(this.refreshToken,t,"user-token-expired"),this.refreshToken?(yield this.refresh(t,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(t,n){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield n2(t,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new e;return r&&(x(typeof r=="string","internal-error",{appName:t}),s.refreshToken=r),i&&(x(typeof i=="string","internal-error",{appName:t}),s.accessToken=i),o&&(x(typeof o=="number","internal-error",{appName:t}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return tr("not implemented")}};function Vr(e,t){x(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}var jr=class e{constructor(o){var s=o,{uid:t,auth:n,stsTokenManager:r}=s,i=Nc(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new y_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Cc(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(t){return p(this,null,function*(){let n=yield Ic(this,this.stsTokenManager.getToken(this.auth,t));return x(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(t){return mA(this,t)}reload(){return vA(this)}_assign(t){this!==t&&(x(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>m({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let n=new e(S(m({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){x(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,n=!1){return p(this,null,function*(){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&(yield Of(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){if(St(this.auth.app))return Promise.reject(Ui(this.auth));let t=yield this.getIdToken();return yield Ic(this,XB(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return S(m({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>m({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){let r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:h,providerData:g,stsTokenManager:_}=n;x(d&&_,t,"internal-error");let b=Ec.fromJSON(this.name,_);x(typeof d=="string",t,"internal-error"),Vr(r,t.name),Vr(i,t.name),x(typeof f=="boolean",t,"internal-error"),x(typeof h=="boolean",t,"internal-error"),Vr(o,t.name),Vr(s,t.name),Vr(a,t.name),Vr(c,t.name),Vr(l,t.name),Vr(u,t.name);let N=new e({uid:d,auth:t,email:i,emailVerified:f,displayName:r,isAnonymous:h,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:b,createdAt:l,lastLoginAt:u});return g&&Array.isArray(g)&&(N.providerData=g.map(mt=>m({},mt))),c&&(N._redirectEventId=c),N}static _fromIdTokenResponse(t,n,r=!1){return p(this,null,function*(){let i=new Ec;i.updateFromServerResponse(n);let o=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return yield Of(o),o})}static _fromGetAccountInfoResponse(t,n,r){return p(this,null,function*(){let i=n.users[0];x(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?yA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Ec;a.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Cc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var X0=new Map;function nr(e){rr(e instanceof Function,"Expected a class definition");let t=X0.get(e);return t?(rr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,X0.set(e,t),t)}var i2=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(n,r){return p(this,null,function*(){this.storage[n]=r})}_get(n){return p(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return p(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return e.type="NONE",e})(),__=i2;function Sf(e,t,n){return`firebase:${e}:${t}:${n}`}var kf=class e{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Sf(this.userKey,i.apiKey,o),this.fullPersistenceKey=Sf("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){return p(this,null,function*(){let t=yield this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){let n=yield xf(this.auth,{idToken:t}).catch(()=>{});return n?jr._fromGetAccountInfoResponse(this.auth,n,t):null}return jr._fromJSON(this.auth,t)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){return p(this,null,function*(){if(this.persistence===t)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,n,r="authUser"){return p(this,null,function*(){if(!n.length)return new e(nr(__),t,r);let i=(yield Promise.all(n.map(l=>p(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||nr(__),s=Sf(r,t.config.apiKey,t.name),a=null;for(let l of n)try{let u=yield l._get(s);if(u){let d;if(typeof u=="string"){let f=yield xf(t,{idToken:u}).catch(()=>{});if(!f)break;d=yield jr._fromGetAccountInfoResponse(t,f,u)}else d=jr._fromJSON(t,u);l!==o&&(a=d),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new e(o,t,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>p(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new e(o,t,r))})}};function eA(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(CA(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(_A(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(DA(t))return"Blackberry";if(bA(t))return"Webos";if(EA(t))return"Safari";if((t.includes("chrome/")||IA(t))&&!t.includes("edge/"))return"Chrome";if(wA(t))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if(r?.length===2)return r[1]}return"Other"}function _A(e=Ge()){return/firefox\//i.test(e)}function EA(e=Ge()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function IA(e=Ge()){return/crios\//i.test(e)}function CA(e=Ge()){return/iemobile/i.test(e)}function wA(e=Ge()){return/android/i.test(e)}function DA(e=Ge()){return/blackberry/i.test(e)}function bA(e=Ge()){return/webos/i.test(e)}function P_(e=Ge()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function o2(e=Ge()){return P_(e)&&!!window.navigator?.standalone}function s2(){return fT()&&document.documentMode===10}function TA(e=Ge()){return P_(e)||wA(e)||bA(e)||DA(e)||/windows phone/i.test(e)||CA(e)}function SA(e,t=[]){let n;switch(e){case"Browser":n=eA(Ge());break;case"Worker":n=`${eA(Ge())}-${e}`;break;default:n=e}let r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Rr}/${r}`}var E_=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){let r=o=>new Promise((s,a)=>{try{let c=t(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(t){return p(this,null,function*(){if(this.auth.currentUser===t)return;let n=[];try{for(let r of this.queue)yield r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function a2(n){return p(this,arguments,function*(e,t={}){return hs(e,"GET","/v2/passwordPolicy",O_(e,t))})}var c2=6,I_=class{constructor(t){let n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??c2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){let n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}};var C_=class{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pf(this),this.idTokenSubscription=new Pf(this),this.beforeStateQueue=new E_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=nr(n)),this._initializationPromise=this.queue(()=>p(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield kf.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let t=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(t,!0)}})}initializeCurrentUserFromIdToken(t){return p(this,null,function*(){try{let n=yield xf(this,{idToken:t}),r=yield jr._fromGetAccountInfoResponse(this,n,t);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(t){return p(this,null,function*(){if(St(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let n=yield this.assertedPersistence.getCurrentUser(),r=n,i=!1;if(t&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=yield this.tryRedirectSignIn(t);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return x(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(t){return p(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(t){return p(this,null,function*(){try{yield Of(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)})}useDeviceLanguage(){this.languageCode=YB()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(t){return p(this,null,function*(){if(St(this.app))return Promise.reject(Ui(this));let n=t?Ee(t):null;return n&&x(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(t,n=!1){return p(this,null,function*(){if(!this._deleted)return t&&x(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(t)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(t),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return St(this.app)?Promise.reject(Ui(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(t){return St(this.app)?Promise.reject(Ui(this)):this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(nr(t))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(t){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let t=yield a2(this),n=new I_(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Tt("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{let r=this.onAuthStateChanged(()=>{r(),t()},n)}})}revokeAccessToken(t){return p(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield r2(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(t,n){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)})}getOrInitRedirectPersistenceManager(t){return p(this,null,function*(){if(!this.redirectPersistenceManager){let n=t&&nr(t)||this._popupRedirectResolver;x(n,this,"argument-error"),this.redirectPersistenceManager=yield kf.create(this,[nr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(t){return p(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null})}_persistUserIfCurrent(t){return p(this,null,function*(){if(t===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(t)}))})}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(x(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=t.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=t.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(t){return p(this,null,function*(){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?yield this.assertedPersistence.setCurrentUser(t):yield this.assertedPersistence.removeCurrentUser()})}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return x(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=SA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let n=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return p(this,null,function*(){if(St(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&WB(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function $f(e){return Ee(e)}var Pf=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=vT(n=>this.observer=n)}get next(){return x(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var F_={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function l2(e){F_=e}function u2(e){return F_.loadJS(e)}function d2(){return F_.gapiScript}function AA(e){return`__${e}${Math.floor(Math.random()*1e6)}`}function MA(e,t){let n=ln(e,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Bt(o,t??{}))return i;Pn(i,"already-initialized")}return n.initialize({options:t})}function f2(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(nr);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function NA(e,t,n){let r=$f(e);x(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=RA(t),{host:s,port:a}=h2(t),c=a===null?"":`:${a}`,l={url:`${o}//${s}${c}/`},u=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){x(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),x(Bt(l,r.config.emulator)&&Bt(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Ar(s)?(bd(`${o}//${s}${c}`),Td("Auth",!0)):i||p2()}function RA(e){let t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function h2(e){let t=RA(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:tA(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:tA(s)}}}function tA(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function p2(){function e(){let t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}var wc=class{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return tr("not implemented")}_getIdTokenResponse(t){return tr("not implemented")}_linkToIdToken(t,n){return tr("not implemented")}_getReauthenticationResolver(t){return tr("not implemented")}};function fs(e,t){return p(this,null,function*(){return JB(e,"POST","/v1/accounts:signInWithIdp",O_(e,t))})}var g2="http://localhost",Ff=class e extends wc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){let n=new e(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Pn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){let a=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=a,o=Nc(a,["providerId","signInMethod"]);if(!r||!i)return null;let s=new e(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(t){let n=this.buildRequest();return fs(t,n)}_linkToIdToken(t,n){let r=this.buildRequest();return r.idToken=n,fs(t,r)}_getReauthenticationResolver(t){let n=this.buildRequest();return n.autoCreate=!1,fs(t,n)}buildRequest(){let t={requestUri:g2,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Mr(n)}return t}};var Dc=class{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}};var Lf=class extends Dc{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}};var L_=(()=>{class e extends Lf{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return Ff._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return e.credentialFromTaggedObject(n)}static credentialFromError(n){return e.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return e.credential(r,i)}catch{return null}}}e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com";return e})();var bc=class e{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static _fromIdTokenResponse(t,n,r,i=!1){return p(this,null,function*(){let o=yield jr._fromIdTokenResponse(t,r,i),s=nA(r);return new e({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(t,n,r){return p(this,null,function*(){yield t._updateTokensIfNecessary(r,!0);let i=nA(r);return new e({user:t,providerId:i,_tokenResponse:r,operationType:n})})}};function nA(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var w_=class e extends et{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new e(t,n,r,i)}};function xA(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?w_._fromErrorAndOperation(e,o,t,r):o})}function m2(e,t,n=!1){return p(this,null,function*(){let r=yield Ic(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return bc._forOperation(e,"link",r)})}function v2(e,t,n=!1){return p(this,null,function*(){let{auth:r}=e;if(St(r.app))return Promise.reject(Ui(r));let i="reauthenticate";try{let o=yield Ic(e,xA(r,i,t,e),n);x(o.idToken,r,"internal-error");let s=k_(o.idToken);x(s,r,"internal-error");let{sub:a}=s;return x(e.uid===a,r,"user-mismatch"),bc._forOperation(e,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Pn(r,"user-mismatch"),o}})}function y2(e,t,n=!1){return p(this,null,function*(){if(St(e.app))return Promise.reject(Ui(e));let r="signIn",i=yield xA(e,r,t),o=yield bc._fromIdTokenResponse(e,r,i);return n||(yield e._updateCurrentUser(o.user)),o})}function OA(e,t,n,r){return Ee(e).onIdTokenChanged(t,n,r)}function kA(e,t,n){return Ee(e).beforeAuthStateChanged(t,n)}function V_(e,t,n,r){return Ee(e).onAuthStateChanged(t,n,r)}function j_(e){return Ee(e).signOut()}var Vf="__sak";var jf=class{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vf,"1"),this.storage.removeItem(Vf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){let n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}};var _2=1e3,E2=10,I2=(()=>{class e extends jf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TA(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);s2()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,E2):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},_2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return p(this,null,function*(){yield Ur(e.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return p(this,null,function*(){let r=yield Ur(e.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return p(this,null,function*(){yield Ur(e.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return e.type="LOCAL",e})(),PA=I2;var C2=(()=>{class e extends jf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return e.type="SESSION",e})(),U_=C2;function w2(e){return Promise.all(e.map(t=>p(null,null,function*(){try{return{fulfilled:!0,value:yield t}}catch(n){return{fulfilled:!1,reason:n}}})))}var D2=(()=>{class e{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new e(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return p(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(u=>p(this,null,function*(){return u(r.origin,s)})),l=yield w2(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}e.receivers=[];return e})();function B_(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}var D_=class{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}_send(t,n,r=50){return p(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=B_("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(d){let f=d;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(f.data.response);break;default:clearTimeout(u),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function kn(){return window}function b2(e){kn().location.href=e}function FA(){return typeof kn().WorkerGlobalScope<"u"&&typeof kn().importScripts=="function"}function T2(){return p(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function S2(){return navigator?.serviceWorker?.controller||null}function A2(){return FA()?self:null}var LA="firebaseLocalStorageDb",M2=1,Uf="firebaseLocalStorage",VA="fbase_key",Hi=class{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Wf(e,t){return e.transaction([Uf],t?"readwrite":"readonly").objectStore(Uf)}function N2(){let e=indexedDB.deleteDatabase(LA);return new Hi(e).toPromise()}function b_(){let e=indexedDB.open(LA,M2);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{let r=e.result;try{r.createObjectStore(Uf,{keyPath:VA})}catch(i){n(i)}}),e.addEventListener("success",()=>p(null,null,function*(){let r=e.result;r.objectStoreNames.contains(Uf)?t(r):(r.close(),yield N2(),t(yield b_()))}))})}function rA(e,t,n){return p(this,null,function*(){let r=Wf(e,!0).put({[VA]:t,value:n});return new Hi(r).toPromise()})}function R2(e,t){return p(this,null,function*(){let n=Wf(e,!1).get(t),r=yield new Hi(n).toPromise();return r===void 0?null:r.value})}function iA(e,t){let n=Wf(e,!0).delete(t);return new Hi(n).toPromise()}var x2=800,O2=3,k2=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return p(this,null,function*(){return this.db?this.db:(this.db=yield b_(),this.db)})}_withRetries(n){return p(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>O2)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return p(this,null,function*(){return FA()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return p(this,null,function*(){this.receiver=D2._getInstance(A2()),this.receiver._subscribe("keyChanged",(n,r)=>p(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>p(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return p(this,null,function*(){if(this.activeServiceWorker=yield T2(),!this.activeServiceWorker)return;this.sender=new D_(this.activeServiceWorker);let n=yield this.sender._send("ping",{},800);n&&n[0]?.fulfilled&&n[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return p(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||S2()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return p(this,null,function*(){try{if(!indexedDB)return!1;let n=yield b_();return yield rA(n,Vf,"1"),yield iA(n,Vf),!0}catch{}return!1})}_withPendingWrite(n){return p(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(i=>rA(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return p(this,null,function*(){let r=yield this._withRetries(i=>R2(i,n));return this.localCache[n]=r,r})}_remove(n){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(r=>iA(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return p(this,null,function*(){let n=yield this._withRetries(o=>{let s=Wf(o,!1).getAll();return new Hi(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>p(this,null,function*(){return this._poll()}),x2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return e.type="LOCAL",e})(),jA=k2;var bee=AA("rcb"),Tee=new Bi(3e4,6e4);function UA(e,t){return t?nr(t):(x(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}var Tc=class extends wc{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return fs(t,this._buildIdpRequest())}_linkToIdToken(t,n){return fs(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return fs(t,this._buildIdpRequest())}_buildIdpRequest(t){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}};function P2(e){return y2(e.auth,new Tc(e),e.bypassAuthState)}function F2(e){let{auth:t,user:n}=e;return x(n,t,"internal-error"),v2(n,new Tc(e),e.bypassAuthState)}function L2(e){return p(this,null,function*(){let{auth:t,user:n}=e;return x(n,t,"internal-error"),m2(n,new Tc(e),e.bypassAuthState)})}var Bf=class{constructor(t,n,r,i,o=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((t,n)=>p(this,null,function*(){this.pendingPromise={resolve:t,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(t){return p(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=t;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return P2;case"linkViaPopup":case"linkViaRedirect":return L2;case"reauthViaPopup":case"reauthViaRedirect":return F2;default:Pn(this.auth,"internal-error")}}resolve(t){rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var V2=new Bi(2e3,1e4);function H_(e,t,n){return p(this,null,function*(){if(St(e.app))return Promise.reject(fn(e,"operation-not-supported-in-this-environment"));let r=$f(e);zB(e,t,Dc);let i=UA(r,n);return new j2(r,"signInViaPopup",t,i).executeNotNull()})}var j2=(()=>{class e extends Bf{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}executeNotNull(){return p(this,null,function*(){let n=yield this.execute();return x(n,this.auth,"internal-error"),n})}onExecution(){return p(this,null,function*(){rr(this.filter.length===1,"Popup operations only handle one event");let n=B_();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){let n=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,V2.get())};n()}}e.currentPopupAction=null;return e})(),U2="pendingRedirect",Af=new Map,T_=class e extends Bf{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return p(this,null,function*(){let t=Af.get(this.auth._key());if(!t){try{let r=(yield B2(this.resolver,this.auth))?yield Ur(e.prototype,this,"execute").call(this):null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}Af.set(this.auth._key(),t)}return this.bypassAuthState||Af.set(this.auth._key(),()=>Promise.resolve(null)),t()})}onAuthEvent(t){return p(this,null,function*(){if(t.type==="signInViaRedirect")return Ur(e.prototype,this,"onAuthEvent").call(this,t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){let n=yield this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,Ur(e.prototype,this,"onAuthEvent").call(this,t);this.resolve(null)}})}onExecution(){return p(this,null,function*(){})}cleanUp(){}};function B2(e,t){return p(this,null,function*(){let n=W2(t),r=$2(e);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function H2(e,t){Af.set(e._key(),t)}function $2(e){return nr(e._redirectPersistence)}function W2(e){return Sf(U2,e.config.apiKey,e.name)}function z2(e,t,n=!1){return p(this,null,function*(){if(St(e.app))return Promise.reject(Ui(e));let r=$f(e),i=UA(r,t),s=yield new T_(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,t)),s})}var G2=600*1e3,S_=class{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!q2(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!BA(t)){let r=t.error.code?.split("auth/")[1]||"internal-error";n.onError(fn(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){let r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=G2&&this.cachedEventUids.clear(),this.cachedEventUids.has(oA(t))}saveEventToCache(t){this.cachedEventUids.add(oA(t)),this.lastProcessedEventTime=Date.now()}};function oA(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function BA({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function q2(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BA(e);default:return!1}}function Y2(n){return p(this,arguments,function*(e,t={}){return hs(e,"GET","/v1/projects",t)})}var K2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Z2=/^https?/;function Q2(e){return p(this,null,function*(){if(e.config.emulator)return;let{authorizedDomains:t}=yield Y2(e);for(let n of t)try{if(J2(n))return}catch{}Pn(e,"unauthorized-domain")})}function J2(e){let t=m_(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){let s=new URL(e);return s.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!Z2.test(n))return!1;if(K2.test(e))return r===e;let i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var X2=new Bi(3e4,6e4);function sA(){let e=kn().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function eH(e){return new Promise((t,n)=>{function r(){sA(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{sA(),n(fn(e,"network-request-failed"))},timeout:X2.get()})}if(kn().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(kn().gapi?.load)r();else{let i=AA("iframefcb");return kn()[i]=()=>{gapi.load?r():n(fn(e,"network-request-failed"))},u2(`${d2()}?onload=${i}`).catch(o=>n(o))}}).catch(t=>{throw Mf=null,t})}var Mf=null;function tH(e){return Mf=Mf||eH(e),Mf}var nH=new Bi(5e3,15e3),rH="__/auth/iframe",iH="emulator/auth/iframe",oH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aH(e){let t=e.config;x(t.authDomain,e,"auth-domain-config-required");let n=t.emulator?x_(t,iH):`https://${e.config.authDomain}/${rH}`,r={apiKey:t.apiKey,appName:e.name,v:Rr},i=sH.get(e.config.apiHost);i&&(r.eid=i);let o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Mr(r).slice(1)}`}function cH(e){return p(this,null,function*(){let t=yield tH(e),n=kn().gapi;return x(n,e,"internal-error"),t.open({where:document.body,url:aH(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oH,dontclear:!0},r=>new Promise((i,o)=>p(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=fn(e,"network-request-failed"),a=kn().setTimeout(()=>{o(s)},nH.get());function c(){kn().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var lH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uH=500,dH=600,fH="_blank",hH="http://localhost",Hf=class{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function pH(e,t,n,r=uH,i=dH){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=S(m({},lH),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Ge().toLowerCase();n&&(a=IA(l)?fH:n),_A(l)&&(t=t||hH,c.scrollbars="yes");let u=Object.entries(c).reduce((f,[h,g])=>`${f}${h}=${g},`,"");if(o2(l)&&a!=="_self")return gH(t||"",a),new Hf(null);let d=window.open(t||"",a,u);x(d,e,"popup-blocked");try{d.focus()}catch{}return new Hf(d)}function gH(e,t){let n=document.createElement("a");n.href=e,n.target=t;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var mH="__/auth/handler",vH="emulator/auth/handler",yH=encodeURIComponent("fac");function aA(e,t,n,r,i,o){return p(this,null,function*(){x(e.config.authDomain,e,"auth-domain-config-required"),x(e.config.apiKey,e,"invalid-api-key");let s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Rr,eventId:i};if(t instanceof Dc){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",Ba(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(let[u,d]of Object.entries(o||{}))s[u]=d}if(t instanceof Lf){let u=t.getScopes().filter(d=>d!=="");u.length>0&&(s.scopes=u.join(","))}e.tenantId&&(s.tid=e.tenantId);let a=s;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield e._getAppCheckToken(),l=c?`#${yH}=${encodeURIComponent(c)}`:"";return`${_H(e)}?${Mr(a).slice(1)}${l}`})}function _H({config:e}){return e.emulator?x_(e,vH):`https://${e.authDomain}/${mH}`}var g_="webStorageSupport",A_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=U_,this._completeRedirectFn=z2,this._overrideRedirectResult=H2}_openPopup(t,n,r,i){return p(this,null,function*(){rr(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");let o=yield aA(t,n,r,m_(),i);return pH(t,o,B_())})}_openRedirect(t,n,r,i){return p(this,null,function*(){yield this._originValidation(t);let o=yield aA(t,n,r,m_(),i);return b2(o),new Promise(()=>{})})}_initialize(t){let n=t._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(rr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(t){return p(this,null,function*(){let n=yield cH(t),r=new S_(t);return n.register("authEvent",i=>(x(i?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r})}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(g_,{type:g_},i=>{let o=i?.[0]?.[g_];o!==void 0&&n(!!o),Pn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){let n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Q2(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return TA()||EA()||P_()}},HA=A_;var cA="@firebase/auth",lA="1.12.0";var M_=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(t){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(t)}:null})}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){x(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function EH(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function IH(e){gt(new xe("auth",(t,{options:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;x(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SA(e)},l=new C_(r,i,o,c);return f2(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),gt(new xe("auth-internal",t=>{let n=$f(t.getProvider("auth").getImmediate());return(r=>new M_(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ve(cA,lA,EH(e)),Ve(cA,lA,"esm2020")}var CH=300,wH=ov("authIdTokenMaxAge")||CH,uA=null,DH=e=>t=>p(null,null,function*(){let n=t&&(yield t.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>wH)return;let i=n?.token;uA!==i&&(uA=i,yield fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function $_(e=Ai()){let t=ln(e,"auth");if(t.isInitialized())return t.getImmediate();let n=MA(e,{popupRedirectResolver:HA,persistence:[jA,PA,U_]}),r=ov("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=DH(o.toString());kA(n,s,()=>s(n.currentUser)),OA(n,a=>s(a))}}let i=rv("auth");return i&&NA(n,`http://${i}`),n}function bH(){return document.getElementsByTagName("head")?.[0]??document}l2({loadJS(e){return new Promise((t,n)=>{let r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{let o=fn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",bH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});IH("Browser");var TH={apiKey:"AIzaSyDgBCejpvZHSbQYGXSfSlLfAbzSzqjWouY",authDomain:"animatic-7d235.firebaseapp.com",databaseURL:"https://animatic-7d235-default-rtdb.firebaseio.com",projectId:"animatic-7d235",storageBucket:"animatic-7d235.firebasestorage.app",messagingSenderId:"737458226045",appId:"1:737458226045:web:8da82aec2fa8c12a18c214",measurementId:"G-KDGHMVCXKH"},zf=Ev(TH),Jte=typeof window<"u"?Z0(zf):null,ir=typeof window<"u"?$_(zf):null;var Fn=(()=>{class e{collectionName="cards";db=E0(zf);cardsCache=new Map;cardUpdates$=new re;saveUserProfile(n,r){return p(this,null,function*(){let i=zt(this.db,`users/${n}`),o=yield m0(i),s=o.exists()?o.val():void 0,a={displayName:r.displayName??s?.displayName??"",email:r.email??s?.email??"",profilePic:r.profilePic??s?.profilePic??null,lastLogin:r.lastLogin??Math.floor(Date.now()/1e3),createdAt:s?.createdAt??Date.now()};return Ef(i,a)})}removeUndefined(n){return Object.fromEntries(Object.entries(n).filter(([r,i])=>i!==void 0))}createCard(n){return p(this,null,function*(){let r={title:n.title,description:n.description??"",animationType:n.animationType,font:n.font,backgroundColor:n.backgroundColor??"#ffffffff",createdAt:n.createdAt?n.createdAt.getTime():Date.now(),createdBy:n.createdBy},i={revealTime:n.revealTime?n.revealTime.getTime():null,createdBy:n.createdBy},o=this.removeUndefined(r),s=this.removeUndefined(i),a=zt(this.db,`${this.collectionName}/${n.code}`),c=zt(this.db,`cardsMeta/${n.code}`);return yield _f(a,o),_f(c,s)})}getCardMeta(n){return new O(r=>{let i=zt(this.db,`cardsMeta/${n}`),o=yc(i,s=>{r.next(s.exists()?s.val():null)},s=>r.error(s));return()=>o()})}getCardByCode(n,r){let i=new O(s=>{let a=zt(this.db,`${this.collectionName}/${n}`),c=yc(a,l=>s.next(l.exists()?l.val():null),l=>s.error(l));return()=>c()}),o=new O(s=>{let a=zt(this.db,`cardsMeta/${n}`),c=yc(a,l=>s.next(l.exists()?l.val():null),l=>s.error(l));return()=>c()});return zr([i,o]).pipe(U(([s,a])=>{if(!s)return null;let c=a&&a.createdBy||s.createdBy||null,l=a&&typeof a.revealTime<"u"?a.revealTime:null;return!(l!==null&&Date.now()>=l||l===null)&&!(!!r&&r===c)?null:{title:s.title,description:s.description,animationType:s.animationType,font:s.font,revealTime:l?new Date(l):void 0,code:n,createdBy:s.createdBy,createdAt:s.createdAt?new Date(s.createdAt):new Date(0)}}))}getUserCards(n){return this.cardsCache.has(n)?A(this.cardsCache.get(n)):new O(r=>{let i=_0(zt(this.db,this.collectionName),v0("createdBy"),y0(n)),o=yc(i,s=>{let a=s.exists()?s.val():{},c=Object.keys(a).map(l=>{let u=a[l];return{title:u.title,description:u.description,animationType:u.animationType,font:u.font,revealTime:u.revealTime?new Date(u.revealTime):void 0,code:l,createdBy:u.createdBy,createdAt:u.createdAt?new Date(u.createdAt):new Date(0)}}).sort((l,u)=>u.createdAt.getTime()-l.createdAt.getTime());this.cardsCache.set(n,c),r.next(c)});return()=>o()})}refreshUserCards(n){this.cardsCache.delete(n),this.cardUpdates$.next()}updateCard(n){return p(this,null,function*(){let r={title:n.title,description:n.description??"",animationType:n.animationType,font:n.font,backgroundColor:n.backgroundColor??"#ffffffff",createdAt:n.createdAt?n.createdAt.getTime():Date.now(),createdBy:n.createdBy},i={createdBy:n.createdBy};n.revealTime!==void 0&&(i.revealTime=n.revealTime?n.revealTime.getTime():null);let o=this.removeUndefined(r),s=this.removeUndefined(i),a=zt(this.db,`${this.collectionName}/${n.code}`),c=zt(this.db,`cardsMeta/${n.code}`);return yield Ef(a,o),Ef(c,s)})}deleteCard(n){return p(this,null,function*(){let r=zt(this.db,`${this.collectionName}/${n}`),i=zt(this.db,`cardsMeta/${n}`);return yield Jy(r),Jy(i)})}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var hn=(()=>{class e{provider=new L_;user$=this.authState();signInWithGoogle(){return p(this,null,function*(){return ir?(yield H_(ir,this.provider)).user:Promise.reject(new Error("Auth not initialized"))})}googleSignIn(){return this.signInWithGoogle()}signOut(){return ir?j_(ir):Promise.reject(new Error("Auth not initialized"))}authState(){return new O(n=>{if(!ir){n.next(null),n.complete();return}let r=V_(ir,i=>n.next(i),i=>n.error(i));return()=>r()})}getCurrentUser(){return ir?ir.currentUser??null:null}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function SH(e,t){if(e&1&&(T(0,"option",16),B(1),D()),e&2){let n=t.$implicit;q("value",n),R(),wt(n)}}function AH(e,t){if(e&1&&(T(0,"div",17)(1,"h3"),B(2),D(),T(3,"p"),B(4),D()()),e&2){let n=ie();q("ngClass",n.previewCard.animationType),R(),Lt("font-family",n.previewCard.font),R(),wt(n.previewCard.title||"Preview Title"),R(),Lt("font-family",n.previewCard.font),R(),wt(n.previewCard.description||"Description will appear here...")}}var W_=(()=>{class e{fb;firebaseService;authService;router;route;cardForm;previewCard={};editMode=!1;cardCode=null;fonts=["Roboto","Open Sans","Bradley Hand","Cursive","Monospace"];animations=["fade-in","slide","typewriter"];constructor(n,r,i,o,s){this.fb=n,this.firebaseService=r,this.authService=i,this.router=o,this.route=s}ngOnInit(){this.cardForm=this.fb.group({title:["",Wo.required],description:[""],animationType:["",Wo.required],font:["",Wo.required],revealTime:[""]}),this.route.paramMap.subscribe(n=>{this.cardCode=n.get("code"),this.editMode=!!this.cardCode,this.editMode&&this.cardCode&&this.firebaseService.getCardByCode(this.cardCode,this.authService.getCurrentUser()?.uid).subscribe(r=>{r&&(this.cardForm.patchValue({title:r.title,description:r.description,animationType:r.animationType,font:r.font,revealTime:r.revealTime?this.formatDate(r.revealTime):""}),this.previewCard=r)})}),this.cardForm.valueChanges.subscribe(n=>this.previewCard=n)}formatDate(n){return new Date(n).toISOString().slice(0,16)}onSubmit(){return p(this,null,function*(){if(this.cardForm.invalid)return;let n=this.authService.getCurrentUser(),r=this.cardForm.value,i={code:this.editMode?this.cardCode:nT(),title:r.title,description:r.description,animationType:r.animationType,font:r.font,revealTime:r.revealTime?new Date(r.revealTime):void 0,createdBy:n?.uid||"anonymous",createdAt:new Date};this.editMode?(yield this.firebaseService.updateCard(i),this.firebaseService.refreshUserCards(n?.uid||""),this.router.navigate(["/dashboard"])):(yield this.firebaseService.createCard(i),this.firebaseService.refreshUserCards(n?.uid||""),this.router.navigate(["/view",i.code]))})}static \u0275fac=function(r){return new(r||e)(C(eT),C(Fn),C(hn),C(_e),C(pt))};static \u0275cmp=Je({type:e,selectors:[["app-creator-page"]],decls:35,vars:5,consts:[[1,"creator-container","container","py-5"],[1,"row","justify-content-center","g-4"],[1,"col-lg-5"],[1,"creator-form",3,"ngSubmit","formGroup"],[1,"form-group"],["formControlName","title","type","text","placeholder","Amazing Surprise!",1,"form-control","premium-input"],["formControlName","description","rows","2",1,"form-control","premium-input"],["formControlName","animationType",1,"form-control","premium-input"],["value","fade-in"],["value","slide"],["value","typewriter"],["formControlName","font",1,"form-control","premium-input"],[3,"value",4,"ngFor","ngForOf"],["formControlName","revealTime","type","datetime-local",1,"form-control","premium-input"],[1,"btn","create-btn","w-100","mt-3",3,"disabled"],["class","preview-box",3,"ngClass",4,"ngIf"],[3,"value"],[1,"preview-box",3,"ngClass"]],template:function(r,i){r&1&&(T(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),ae("ngSubmit",function(){return i.onSubmit()}),T(4,"div",4)(5,"label"),B(6,"Title"),D(),fe(7,"input",5),D(),T(8,"div",4)(9,"label"),B(10,"Description"),D(),fe(11,"textarea",6),D(),T(12,"div",4)(13,"label"),B(14,"Animation Style"),D(),T(15,"select",7)(16,"option",8),B(17,"Fade In"),D(),T(18,"option",9),B(19,"Slide"),D(),T(20,"option",10),B(21,"Typewriter"),D()()(),T(22,"div",4)(23,"label"),B(24,"Font Style"),D(),T(25,"select",11),Se(26,SH,2,2,"option",12),D()(),T(27,"div",4)(28,"label"),B(29,"Reveal Time (Optional)"),D(),fe(30,"input",13),D(),T(31,"button",14),B(32),D()()(),T(33,"div",2),Se(34,AH,5,7,"div",15),D()()()),r&2&&(R(3),q("formGroup",i.cardForm),R(23),q("ngForOf",i.fonts),R(5),q("disabled",i.cardForm.invalid),R(),Vt(" ",i.editMode?"Update":"Create"," Card "),R(2),q("ngIf",i.previewCard))},dependencies:[ft,mi,Ir,sn,tT,Yb,Qb,Xb,Ed,Cd,Hb,$b,Km,Zm],styles:[".creator-container[_ngcontent-%COMP%]{color:#fff}.page-title[_ngcontent-%COMP%]{font-size:2.4rem;font-weight:700;background:linear-gradient(90deg,#805bff,#3b82f6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 18px rgba(128,91,255,.7)}.creator-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-bottom:.3rem;color:#dcdcff}.premium-input[_ngcontent-%COMP%]{background:#181818!important;color:#fff!important;border:1px solid rgba(128,91,255,.3);border-radius:12px;transition:.25s ease}.premium-input[_ngcontent-%COMP%]:focus{border-color:#8f7aff;box-shadow:0 0 12px #805bffa6}.create-btn[_ngcontent-%COMP%]{background:linear-gradient(90deg,#6e42ff,#4d8dff);font-weight:700;border-radius:10px;padding:12px;box-shadow:0 0 22px #7846ffa6;transition:.25s ease}.create-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.preview-box[_ngcontent-%COMP%]{background:#101010;padding:25px;border-radius:16px;min-height:250px;text-align:center;border:1px solid rgba(128,91,255,.35);box-shadow:0 0 22px #805bff99;transition:transform .4s}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .8s ease both}.slide[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .8s ease both}.typewriter[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;border-right:3px solid #fff;animation:_ngcontent-%COMP%_typing 2.5s steps(25) infinite,_ngcontent-%COMP%_blink .75s step-end infinite}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px);opacity:0}}@keyframes _ngcontent-%COMP%_typing{0%{width:0}to{width:100%}}@keyframes _ngcontent-%COMP%_blink{50%{border-color:transparent}}"]})}return e})();function MH(e,t){e&1&&(T(0,"div",6)(1,"h1",7),B(2,"Animatic"),D(),T(3,"p",8),B(4,"Loading your surprise..."),D()())}function NH(e,t){if(e&1&&(T(0,"div",9)(1,"h1",10),B(2),D()()),e&2){let n=ie();R(2),wt(n.countdown)}}function RH(e,t){if(e&1){let n=wn();T(0,"div",11),ae("click",function(){Ze(n);let i=ie();return Qe(i.goFullscreen())}),B(1," Click here to view.! "),D()}}function xH(e,t){if(e&1&&(T(0,"div",12)(1,"h1",13),B(2),D(),T(3,"p",14),B(4),D()()),e&2){let n=ie();q("ngClass",n.getAnimationClass()),R(),Lt("font-family",n.card.font),R(),Vt(" ",n.card.title," "),R(),Lt("font-family",n.card.font),R(),Vt(" ",n.card.description," ")}}function OH(e,t){e&1&&fe(0,"div",15)}var $A=(()=>{class e{route;firebaseService;card=null;showFullscreenBtn=!0;countdown=null;timerSub=null;revealReady=!1;loading=!0;code=null;showFlash=!1;constructor(n,r){this.route=n,this.firebaseService=r}ngOnInit(){this.route.params.subscribe(n=>{let r=n.code;this.code=r,this.firebaseService.getCardMeta(r).subscribe(i=>{if(!i)return;let o=i.revealTime?new Date(i.revealTime):null;o&&o>new Date?(this.revealReady=!1,this.startCountdown(o)):(this.revealReady=!0,this.loading=!1,this.loadCard(r))})})}loadCard(n){this.firebaseService.getCardByCode(n).subscribe(r=>{this.card=r,this.showFlash=!0,console.log("Card Loaded:",r)})}startCountdown(n){this.updateCountdown(n),this.loading=!1,this.timerSub=gh(1e3).subscribe(()=>{this.updateCountdown(n)})}updateCountdown(n){let r=new Date,i=n.getTime()-r.getTime();if(i<=0){this.countdown=null,this.revealReady=!0,this.showFullscreenBtn=!0,this.showFlash=!0,setTimeout(()=>{document.querySelector(".reveal-title")?.classList.add("light-burst")},100),this.timerSub&&(this.timerSub.unsubscribe(),this.timerSub=null,this.loadCard(this.code));return}let o=Math.floor(i/36e5),s=Math.floor(i%36e5/6e4),a=Math.floor(i%6e4/1e3),c=o>0?String(o).padStart(2,"0"):null,l=String(s).padStart(2,"0"),u=String(a).padStart(2,"0");this.countdown=c?`${c}:${l}:${u}`:`${l}:${u}`}goFullscreen(){this.showFullscreenBtn=!1,document.documentElement.requestFullscreen(),this.showFlash=!1}getAnimationClass(){if(!this.card)return"";switch(this.card.animationType){case"fade-in":return"fade-in";case"slide":return"slide";case"typewriter":return"typewriter";default:return""}}ngOnDestroy(){this.timerSub&&this.timerSub.unsubscribe()}static \u0275fac=function(r){return new(r||e)(C(pt),C(Fn))};static \u0275cmp=Je({type:e,selectors:[["app-view-page"]],decls:6,vars:5,consts:[[1,"view-container"],["class","center-box",4,"ngIf"],["class","countdown-box center-box",4,"ngIf"],["class","center-box tap-hint",3,"click",4,"ngIf"],["class","reveal-box",3,"ngClass",4,"ngIf"],["class","flash-beam",4,"ngIf"],[1,"center-box"],[1,"loading-text"],[1,"loading-subtext"],[1,"countdown-box","center-box"],[1,"countdown-timer"],[1,"center-box","tap-hint",3,"click"],[1,"reveal-box",3,"ngClass"],[1,"reveal-title"],[1,"reveal-desc"],[1,"flash-beam"]],template:function(r,i){r&1&&(T(0,"div",0),Se(1,MH,5,0,"div",1)(2,NH,3,1,"div",2)(3,RH,2,0,"div",3)(4,xH,5,7,"div",4)(5,OH,1,0,"div",5),D()),r&2&&(R(),q("ngIf",i.loading),R(),q("ngIf",!i.loading&&i.countdown&&!i.revealReady),R(),q("ngIf",!i.loading&&i.card&&i.revealReady&&i.showFullscreenBtn),R(),q("ngIf",i.card&&i.revealReady&&!i.showFullscreenBtn),R(),q("ngIf",i.showFlash))},dependencies:[ft,mi,sn],styles:[".view-container[_ngcontent-%COMP%]{height:100vh;width:100vw;display:flex;justify-content:center;align-items:center;background:#0e0e11;color:#fff;text-align:center}[_nghost-%COMP%]{display:block;margin:0;padding:0}.loading-text[_ngcontent-%COMP%]{font-size:3.8rem;font-weight:900;background:linear-gradient(90deg,#805bff,#3b82f6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:_ngcontent-%COMP%_pulse-glow 1.1s infinite alternate}.countdown-timer[_ngcontent-%COMP%]{font-size:4.2rem;font-weight:900;font-family:Courier New,monospace;letter-spacing:2px;color:#edf1f0;text-shadow:0 0 18px rgba(0,255,200,.55);animation:_ngcontent-%COMP%_pulse-timer 1s infinite ease-in-out}.reveal-box[_ngcontent-%COMP%]{max-width:90%;padding:0 20px;animation:_ngcontent-%COMP%_fade-in 1.2s ease forwards}.reveal-title[_ngcontent-%COMP%]{font-size:4rem;font-weight:900;line-height:1.1;text-shadow:0 0 28px rgba(132,94,255,.8);margin-bottom:20px}.reveal-desc[_ngcontent-%COMP%]{font-size:1.5rem;opacity:.85;text-shadow:0 0 14px rgba(255,255,255,.25)}.flash-beam[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#fff;opacity:0;pointer-events:none;animation:_ngcontent-%COMP%_flashBeam .7s ease-out forwards}@keyframes _ngcontent-%COMP%_flashBeam{0%{opacity:.9}60%{opacity:.4}to{opacity:0}}.swipe-hint[_ngcontent-%COMP%]{margin-top:28px;opacity:.7;font-size:.95rem;background:#ffffff1a;padding:10px 14px;border-radius:10px;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);animation:_ngcontent-%COMP%_up-down 1.4s infinite ease-in-out;cursor:pointer}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_pulse-glow{0%{opacity:.7}to{opacity:1}}@keyframes _ngcontent-%COMP%_up-down{0%,to{transform:translateY(5px)}50%{transform:translateY(-5px)}}@keyframes _ngcontent-%COMP%_pulse-timer{0%{transform:scale(.95)}to{transform:scale(1.05)}}.fade-in[_ngcontent-%COMP%]   .reveal-title[_ngcontent-%COMP%], .fade-in[_ngcontent-%COMP%]   .reveal-desc[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in 1.4s ease forwards}.slide[_ngcontent-%COMP%]   .reveal-title[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .9s ease-out forwards}.slide[_ngcontent-%COMP%]   .reveal-desc[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .6s .3s ease forwards}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(60px);opacity:0}}.typewriter[_ngcontent-%COMP%]   .reveal-title[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;border-right:3px solid #fff;animation:_ngcontent-%COMP%_typing 2.6s steps(25),_ngcontent-%COMP%_blink .8s infinite}@keyframes _ngcontent-%COMP%_typing{0%{width:0}to{width:100%}}@keyframes _ngcontent-%COMP%_blink{50%{border-color:transparent}}"]})}return e})();function kH(e,t){if(e&1&&(T(0,"span"),B(1),D()),e&2){let n=t.$implicit,r=t.index;Lt("animation-delay",r*.12+"s"),R(),Vt(" ",n," ")}}var WA=(()=>{class e{name="Angular User";titleLetters="ANIMATIC".split("");ngOnInit(){console.log("AnimaticLoaderComponent initialized")}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Je({type:e,selectors:[["app-animatic-loader"]],decls:3,vars:1,consts:[[1,"animatic-loader"],[1,"animatic-title"],[3,"animationDelay",4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(T(0,"div",0)(1,"h1",1),Se(2,kH,2,3,"span",2),D()()),r&2&&(R(2),q("ngForOf",i.titleLetters))},dependencies:[ft,Ir,Di],styles:['@charset "UTF-8";.animatic-loader[_ngcontent-%COMP%]{position:fixed;inset:0;background:var(--bg-color);display:flex;align-items:center;justify-content:center;z-index:9999}.animatic-title[_ngcontent-%COMP%]{display:flex;gap:8px;font-size:4rem;font-weight:900}.animatic-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_letterPop .45s ease forwards,_ngcontent-%COMP%_colorShift 2.2s linear infinite alternate}@keyframes _ngcontent-%COMP%_letterPop{0%{transform:translateY(20px) scale(.6);opacity:0}60%{transform:translateY(-5px) scale(1.1);opacity:1}to{transform:translateY(0) scale(1);opacity:1}}@keyframes _ngcontent-%COMP%_colorShift{0%{color:#7b61ff;text-shadow:0 0 10px #7b61ff}50%{color:#67e8f9;text-shadow:0 0 12px #67e8f9}to{color:#ff80bf;text-shadow:0 0 14px #ff80bf}}.animatic-title[_ngcontent-%COMP%]{font-size:4rem;gap:8px}@media (max-width: 992px){.animatic-title[_ngcontent-%COMP%]{font-size:3rem;gap:6px}}@media (max-width: 600px){.animatic-title[_ngcontent-%COMP%]{font-size:2.3rem;gap:4px}}@media (max-width: 380px){.animatic-title[_ngcontent-%COMP%]{font-size:2rem;gap:3px}}']})}return e})();var PH=e=>({"card-animated":e});function FH(e,t){e&1&&fe(0,"app-animatic-loader")}function LH(e,t){if(e&1){let n=wn();T(0,"div",12),ae("click",function(){let i=Ze(n).$implicit,o=ie(4);return Qe(o.viewCard(i.code))}),T(1,"div",13)(2,"h4",14),B(3),D(),T(4,"p",15),B(5),D(),T(6,"span",16),B(7),Rg(8,"date"),D(),T(9,"div",17)(10,"button",18),ae("click",function(i){let o=Ze(n).$implicit;return ie(4).editCard(o.code),Qe(i.stopPropagation())}),fe(11,"i",19),D(),T(12,"button",18),ae("click",function(i){let o=Ze(n).$implicit;return ie(4).copyShareLink(o.code),Qe(i.stopPropagation())}),fe(13,"i",20),D(),T(14,"button",21),ae("click",function(i){let o=Ze(n).$implicit;return ie(4).deleteCard(o.code),Qe(i.stopPropagation())}),fe(15,"i",22),D()()()()}if(e&2){let n=t.$implicit,r=t.index,i=ie(4);q("ngClass",Ng(9,PH,r>=i.animatedStartIndex)),R(2),Lt("font-family",n.font),R(),Vt(" ",n.title," "),R(2),wt(n.description||"No description yet"),R(2),wt(xg(8,6,n.createdAt,"medium"))}}function VH(e,t){if(e&1&&(T(0,"div",10),Se(1,LH,16,11,"div",11),D()),e&2){let n=ie(3);R(),q("ngForOf",n.visibleCards)}}function jH(e,t){e&1&&(T(0,"div",23),fe(1,"div",24),D())}function UH(e,t){if(e&1&&(gu(0),Se(1,VH,2,1,"div",8)(2,jH,2,0,"div",9),mu()),e&2){ie();let n=vu(8),r=ie();R(),q("ngIf",r.cards.length>0)("ngIfElse",n),R(),q("ngIf",r.isLoadingMore)}}function BH(e,t){e&1&&(T(0,"div",25)(1,"p",26),B(2,"No Cards Yet"),D(),T(3,"button",6),B(4,"+ Create Card"),D()())}function HH(e,t){if(e&1&&(T(0,"div",3)(1,"div",4)(2,"h1",5),B(3,"Your Cards"),D(),T(4,"button",6),B(5," Create + "),D()(),Se(6,UH,3,3,"ng-container",7)(7,BH,5,0,"ng-template",null,0,Og),D()),e&2){let n=vu(8),r=ie();R(6),q("ngIf",r.cards&&r.cards.length)("ngIfElse",n)}}var zA=(()=>{class e{firebaseService;auth;router;cards=[];visibleCards=[];limit=5;loggedInUser=null;isLoading=!0;isLoadingMore=!1;animatedStartIndex=0;destroy$=new re;constructor(n,r,i){this.firebaseService=n,this.auth=r,this.router=i}ngOnInit(){this.auth.user$.pipe(Ne(n=>n?(this.loggedInUser={uid:n.uid,displayName:n.displayName||"",email:n.email||"",profilePic:n.photoURL||null},this.firebaseService.getUserCards(n.uid)):(this.isLoading=!1,A([])))).subscribe(n=>{this.cards=n,this.visibleCards=this.cards.slice(0,this.limit),this.isLoading=!1})}onScroll(){this.checkLoadMore()}checkLoadMore(){if(this.isLoadingMore||this.visibleCards.length>=this.cards.length)return;let n=window.innerHeight+window.scrollY,r=document.documentElement.scrollHeight;n+50>=r&&this.loadMoreCards()}loadMoreCards(){this.visibleCards.length>=this.cards.length||(this.isLoadingMore=!0,this.animatedStartIndex=this.visibleCards.length,setTimeout(()=>{let n=this.visibleCards.length+this.limit;this.visibleCards=this.cards.slice(0,n),this.isLoadingMore=!1,setTimeout(()=>this.checkLoadMore(),100)},350))}editCard(n){console.log("Editing card:",n),this.router.navigate(["/creator",n])}deleteCard(n){return p(this,null,function*(){if(confirm("Are you sure you want to delete this card?"))try{yield this.firebaseService.deleteCard(n),this.firebaseService.refreshUserCards(this.loggedInUser.uid),console.log(`Deleted card: ${n}`)}catch(r){console.error("Failed to delete card:",r)}})}isLocked(n){if(!n.revealTime)return!1;let r=new Date;return new Date(n.revealTime)>r}viewCard(n){this.router.navigate(["/view",n])}copyShareLink(n){let r=`${location.origin}/Animatic/view/${n}`;navigator.clipboard.writeText(r),alert("Link copied! \u{1F4CB}")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(r){return new(r||e)(C(Fn),C(hn),C(_e))};static \u0275cmp=Je({type:e,selectors:[["app-dashboard"]],hostBindings:function(r,i){r&1&&ae("scroll",function(){return i.onScroll()},ng)},decls:2,vars:2,consts:[["noCards",""],[4,"ngIf"],["class","dashboard-container container py-5",4,"ngIf"],[1,"dashboard-container","container","py-5"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"dashboard-title"],["routerLink","/creator",1,"btn","create-btn"],[4,"ngIf","ngIfElse"],["class","row g-4",4,"ngIf","ngIfElse"],["class","text-center py-2",4,"ngIf"],[1,"row","g-4"],["class","col-12 col-sm-6 col-xl-4",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col-12","col-sm-6","col-xl-4",3,"click","ngClass"],[1,"animatic-card"],[1,"card-title"],[1,"card-desc"],[1,"card-date"],[1,"actions"],[3,"click"],[1,"bi","bi-pencil-square"],[1,"bi","bi-share-fill"],[1,"del",3,"click"],[1,"bi","bi-trash-fill"],[1,"text-center","py-2"],[1,"spinner-border","text-primary","spinner-sm"],[1,"text-center","mt-5"],[1,"text-secondary","fw-semibold"]],template:function(r,i){r&1&&Se(0,FH,1,0,"app-animatic-loader",1)(1,HH,9,2,"div",2),r&2&&(q("ngIf",i.isLoading),R(),q("ngIf",!i.isLoading))},dependencies:[ft,mi,Ir,sn,Di,Uo,WA,Qg],styles:[".dashboard-title[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:800;letter-spacing:-1px}.create-btn[_ngcontent-%COMP%]{background:linear-gradient(90deg,#805bff,#3b82f6);color:#fff;border-radius:10px;padding:10px 22px;font-weight:700;border:none;transition:.3s ease;box-shadow:0 4px 12px #805bff59}.create-btn[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 10px 20px #805bff73}.premium-card[_ngcontent-%COMP%]{border-radius:18px;background:#ffffffd9;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:transform .25s ease,box-shadow .25s ease}.premium-card[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 15px 35px #0000001f}.card-preview[_ngcontent-%COMP%]{height:140px;border-radius:18px 18px 0 0;padding:14px;color:#000;position:relative}.badge-status[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:.75rem;padding:4px 8px;border-radius:6px}.preview-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;bottom:12px;text-shadow:0 2px 6px rgba(255,255,255,.8)}.preview-description[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500}.btn-action[_ngcontent-%COMP%]{border-radius:8px;padding:5px 10px;font-size:.8rem;transition:.25s}.view-btn[_ngcontent-%COMP%]{border:1px solid #16a34a;color:#16a34a}.view-btn[_ngcontent-%COMP%]:hover{background:#16a34a;color:#fff}.edit-btn[_ngcontent-%COMP%]{border:1px solid #2563eb;color:#2563eb}.edit-btn[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}.share-btn[_ngcontent-%COMP%]{border:1px solid #6b7280;color:#6b7280}.share-btn[_ngcontent-%COMP%]:hover{background:#6b7280;color:#fff}.delete-btn[_ngcontent-%COMP%]{border:1px solid #dc2626;color:#dc2626}.delete-btn[_ngcontent-%COMP%]:hover{background:#dc2626;color:#fff}.premium-card[_ngcontent-%COMP%]{background:#fff;border-radius:18px;padding:15px 18px;transition:.3s ease}.premium-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 15px 30px #0000001a}.status-ribbon[_ngcontent-%COMP%]{position:absolute;top:-6px;right:-6px;padding:6px 14px;border-radius:12px 12px 0;font-size:.75rem;font-weight:700;display:flex;align-items:center;gap:5px}.status-ribbon.unlocked[_ngcontent-%COMP%]{background:#10b981;color:#fff}.status-ribbon.locked[_ngcontent-%COMP%]{background:#facc15;color:#000}.card-title[_ngcontent-%COMP%]{font-weight:800;font-size:1.2rem}.btn-premium[_ngcontent-%COMP%]{background:#ffffff0d;border-radius:6px;font-size:.82rem;font-weight:600;padding:6px 12px;transition:.2s ease;color:var(--text-color)}.btn-premium[_ngcontent-%COMP%]:hover{background:var(--accent);color:#fff!important}.btn-premium.view[_ngcontent-%COMP%]{background:#10b98126;color:#064e3b}.btn-premium.view[_ngcontent-%COMP%]:hover{background:#10b981;color:#fff}.btn-premium.edit[_ngcontent-%COMP%]{background:#2563eb26;color:#1e3a8a}.btn-premium.edit[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}.btn-premium.share[_ngcontent-%COMP%]{background:#6b728026;color:#111827}.btn-premium.share[_ngcontent-%COMP%]:hover{background:#6b7280;color:#fff}.btn-premium.delete[_ngcontent-%COMP%]{background:#dc26261a;color:#991b1b}.btn-premium.delete[_ngcontent-%COMP%]:hover{background:#dc2626;color:#fff}.premium-card[_ngcontent-%COMP%]{background:var(--card-bg);color:var(--text-color);box-shadow:0 10px 25px var(--glow)}.card-title[_ngcontent-%COMP%]{color:var(--text-color)}.btn-premium.view[_ngcontent-%COMP%]{border-color:var(--accent)}.btn-premium.view[_ngcontent-%COMP%]:hover{background:var(--accent);color:#fff}.badge-status.unlocked[_ngcontent-%COMP%]{background:#00ffa5;color:#032;font-weight:700;box-shadow:0 0 10px #00ffa566}app-animatic-loader[_ngcontent-%COMP%]{transition:opacity .5s ease}.animatic-card[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:18px;padding:18px;position:relative;overflow:hidden;transition:.35s;display:flex;flex-direction:column;gap:10px;box-shadow:0 12px 25px var(--glow);border:1px solid rgba(255,255,255,.08)}.animatic-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px) scale(1.02);box-shadow:0 15px 35px var(--accent)}.card-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:800;letter-spacing:-.5px;color:var(--text-color)}.card-desc[_ngcontent-%COMP%]{font-size:.9rem;opacity:.9;color:var(--text-color)}.card-date[_ngcontent-%COMP%]{font-size:.78rem;opacity:.7;color:var(--text-color)}.status-tag[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;padding:6px 12px;border-radius:8px;font-size:.75rem;display:flex;align-items:center;gap:6px}.status-tag.unlocked[_ngcontent-%COMP%]{background:#00ffa577;color:#032;box-shadow:0 0 15px #00ffa573}.status-tag.locked[_ngcontent-%COMP%]{background:#fb07;color:#4a3000;box-shadow:0 0 15px #ffbb0073}.actions[_ngcontent-%COMP%]{margin-top:8px;display:flex;gap:12px}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#ffffff14;border:none;padding:8px 10px;border-radius:10px;cursor:pointer;transition:.3s ease;color:var(--text-color)}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--accent);color:#fff;box-shadow:0 0 12px var(--accent)}.actions[_ngcontent-%COMP%]   button.del[_ngcontent-%COMP%]{background:#ff00002e}.actions[_ngcontent-%COMP%]   button.del[_ngcontent-%COMP%]:hover{background:#f44}.spinner-sm[_ngcontent-%COMP%]{width:22px;height:22px;border-width:2px}.card-animated[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeSlideIn .45s ease forwards}@keyframes _ngcontent-%COMP%_fadeSlideIn{0%{opacity:0;transform:translateY(18px) scale(.97);filter:blur(3px)}to{opacity:1;transform:translateY(0) scale(1);filter:blur(0)}}"]})}return e})();var Gf=(()=>{class e{auth;router;constructor(n,r){this.auth=n,this.router=r}canActivate(){return this.auth.authState().pipe(Nt(1),U(n=>!!n),Ce(n=>{n||this.router.navigate(["/login"])}))}static \u0275fac=function(r){return new(r||e)(M(hn),M(_e))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),GA=(()=>{class e{auth;router;constructor(n,r){this.auth=n,this.router=r}canActivate(){return this.auth.authState().pipe(Nt(1),U(n=>n?(this.router.navigate(["/dashboard"]),!1):!0))}static \u0275fac=function(r){return new(r||e)(M(hn),M(_e))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function $H(e,t){e&1&&(T(0,"h2"),B(1,"Sign in with Google"),D())}function WH(e,t){if(e&1){let n=wn();T(0,"button",5),ae("click",function(){Ze(n);let i=ie();return Qe(i.signIn())}),fe(1,"img",6),T(2,"span"),B(3),D()()}if(e&2){let n=ie();q("disabled",n.loading),R(3),wt(n.loading?"Signing in...":"Sign in with Google")}}function zH(e,t){if(e&1){let n=wn();T(0,"div",7)(1,"p"),B(2),D(),T(3,"button",8),ae("click",function(){Ze(n);let i=ie();return Qe(i.logout())}),B(4,"Sign out"),D()()}if(e&2){let n=ie();R(2),yu("Welcome, ",n.loggedInUser.displayName," (",n.loggedInUser.email,")")}}function GH(e,t){e&1&&(T(0,"p",9),B(1,"You will be redirected after successful sign-in."),D())}var qA=(()=>{class e{auth;router;firebaseService;loading=!1;loggedInUser=null;destroy$=new re;constructor(n,r,i){this.auth=n,this.router=r,this.firebaseService=i}ngOnInit(){this.auth.authState().pipe(ao(this.destroy$)).subscribe(n=>{this.loggedInUser=n,n&&this.router.navigate(["/dashboard"])})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}signIn(){this.loading=!0,this.auth.signInWithGoogle().then(n=>{console.log("Signed in user:",n),n?this.firebaseService.saveUserProfile(n.uid,{displayName:n.displayName||"",email:n.email||"",profilePic:n.photoURL||null,lastLogin:Math.floor(Date.now()/1e3)}).catch(r=>console.warn("saveUserProfile failed",r)).finally(()=>this.router.navigate(["/dashboard"])):this.router.navigate(["/dashboard"])}).catch(n=>{console.error("Sign-in error:",n),alert("Sign-in failed: "+(n?.message||n))}).finally(()=>this.loading=!1)}logout(){this.auth.signOut().then(()=>{this.loggedInUser=null,this.router.navigate(["/login"])}).catch(n=>console.error("Sign-out error:",n))}static \u0275fac=function(r){return new(r||e)(C(hn),C(_e),C(Fn))};static \u0275cmp=Je({type:e,selectors:[["app-login"]],decls:5,vars:4,consts:[[1,"login-card"],[4,"ngIf"],["class","google-btn",3,"disabled","click",4,"ngIf"],["class","user-info",4,"ngIf"],["class","hint",4,"ngIf"],[1,"google-btn",3,"click","disabled"],["src","https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","alt","Google"],[1,"user-info"],[1,"btn-cancel",3,"click"],[1,"hint"]],template:function(r,i){r&1&&(T(0,"div",0),Se(1,$H,2,0,"h2",1)(2,WH,4,2,"button",2)(3,zH,5,2,"div",3)(4,GH,2,0,"p",4),D()),r&2&&(R(),q("ngIf",!i.loggedInUser),R(),q("ngIf",!i.loggedInUser),R(),q("ngIf",i.loggedInUser),R(),q("ngIf",!i.loggedInUser))},dependencies:[ft,sn],styles:[".login-card[_ngcontent-%COMP%]{width:320px;padding:1.25rem;border-radius:8px;box-shadow:0 6px 18px #10182814;background:#fff;display:flex;flex-direction:column;gap:.75rem}[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;padding:1rem;background:#f3f4f6}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .25rem}.login-card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:.9rem;gap:.25rem}.login-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #e5e7eb;border-radius:4px}.login-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem .8rem;border:none;background:linear-gradient(90deg,#ff6b6b,#b649ff);color:#fff;border-radius:6px;cursor:pointer}.login-card[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:.8rem;color:#6b7280}.google-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.75rem;padding:.6rem .8rem;border-radius:6px;border:1px solid #e5e7eb;background:#fff;cursor:pointer}.google-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}.google-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}"]})}return e})();var YA=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:qA,canActivate:[GA]},{path:"creator",component:W_,canActivate:[Gf]},{path:"creator/:code",component:W_,canActivate:[Gf]},{path:"view/:code",component:$A},{path:"dashboard",component:zA,canActivate:[Gf]},{path:"**",redirectTo:"dashboard"}];var KA={providers:[pp(),Fg({eventCoalescing:!0}),Fm(YA)]};function qH(e,t){e&1&&fe(0,"i",9)}function YH(e,t){e&1&&fe(0,"i",10)}function KH(e,t){if(e&1){let n=wn();T(0,"header",2)(1,"a",3),B(2,"Animatic"),D(),T(3,"div",4)(4,"button",5),ae("click",function(){Ze(n);let i=ie();return Qe(i.toggleTheme())}),Se(5,qH,1,0,"i",6)(6,YH,1,0,"i",7),D(),T(7,"a",8),ae("click",function(){Ze(n);let i=ie();return Qe(i.logout())}),B(8,"Logout"),D()()()}if(e&2){let n=ie();R(5),q("ngIf",!n.isDarkMode),R(),q("ngIf",n.isDarkMode)}}var ZA=(()=>{class e{auth;router;firebaseService;title=It("FireTest");user$;isDarkMode=!1;showHeader=!0;constructor(n,r,i){this.auth=n,this.router=r,this.firebaseService=i,this.user$=this.auth.user$,r.events.subscribe(o=>{o instanceof ht&&(this.showHeader=!o.url.startsWith("/view/"))})}ngOnInit(){localStorage.getItem("theme")==="dark"&&(this.isDarkMode=!0,document.body.classList.add("dark-theme"))}toggleTheme(){this.isDarkMode=!this.isDarkMode,document.body.classList.toggle("dark-theme",this.isDarkMode),localStorage.setItem("theme",this.isDarkMode?"dark":"light")}logout(){this.auth.signOut().then(()=>{this.router.navigate(["/login"])}).catch(n=>{console.error("Sign-out error:",n)})}static \u0275fac=function(r){return new(r||e)(C(hn),C(_e),C(Fn))};static \u0275cmp=Je({type:e,selectors:[["app-root"]],decls:3,vars:1,consts:[[1,"content-wrapper"],["class","header-container",4,"ngIf"],[1,"header-container"],["routerLink","/",1,"brand"],[1,"actions"],[1,"theme-toggle",3,"click"],["class","bi bi-moon-stars-fill",4,"ngIf"],["class","bi bi-brightness-high-fill",4,"ngIf"],[1,"logout",3,"click"],[1,"bi","bi-moon-stars-fill"],[1,"bi","bi-brightness-high-fill"]],template:function(r,i){r&1&&(T(0,"div",0),Se(1,KH,9,2,"header",1),fe(2,"router-outlet"),D()),r&2&&(R(),q("ngIf",i.showHeader))},dependencies:[ft,sn,Di,Sa,Uo],styles:[".app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;font-family:Roboto,sans-serif}.content[_ngcontent-%COMP%]{flex:1;padding:1rem}.header-container[_ngcontent-%COMP%]{width:100%;padding:12px 24px;display:flex;justify-content:space-between;align-items:center;background:var(--bg-color);color:var(--text-color);border-bottom:1px solid rgba(255,255,255,.06);box-shadow:0 4px 20px var(--glow);position:sticky;top:0;z-index:999}.brand[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:900;background:linear-gradient(90deg,#a78bfa,#3b82f6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;filter:drop-shadow(0 0 12px rgba(128,91,255,.6));letter-spacing:-1px}.actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px}.theme-toggle[_ngcontent-%COMP%]{border:none;background:transparent;font-size:1.25rem;cursor:pointer;color:var(--text-color);transition:.3s}.theme-toggle[_ngcontent-%COMP%]:hover{transform:scale(1.2);color:var(--accent)}.logout[_ngcontent-%COMP%]{color:var(--accent);font-weight:600;cursor:pointer;text-decoration:none}.logout[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}return e})();cm(ZA,KA).catch(e=>console.error(e));
