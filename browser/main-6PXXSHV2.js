var nN=Object.defineProperty,rN=Object.defineProperties;var iN=Object.getOwnPropertyDescriptors;var Mc=Object.getOwnPropertySymbols,oN=Object.getPrototypeOf,K_=Object.prototype.hasOwnProperty,Z_=Object.prototype.propertyIsEnumerable,sN=Reflect.get;var Y_=(e,t,n)=>t in e?nN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m=(e,t)=>{for(var n in t||={})K_.call(t,n)&&Y_(e,n,t[n]);if(Mc)for(var n of Mc(t))Z_.call(t,n)&&Y_(e,n,t[n]);return e},S=(e,t)=>rN(e,iN(t));var Rc=(e,t)=>{var n={};for(var r in e)K_.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Mc)for(var r of Mc(e))t.indexOf(r)<0&&Z_.call(e,r)&&(n[r]=e[r]);return n};var jr=(e,t,n)=>sN(oN(e),n,t);var p=(e,t,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(e,t)).next())});var eh;function Oc(){return eh}function hn(e){let t=eh;return eh=e,t}var Q_=Symbol("NotFound");function Ui(e){return e===Q_||e?.name==="\u0275NotFound"}function Lc(e,t){return Object.is(e,t)}var Ve=null,xc=!1,th=1,aN=null,ze=Symbol("SIGNAL");function j(e){let t=Ve;return Ve=e,t}function Vc(){return Ve}var Bi={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Hi(e){if(xc)throw new Error("");if(Ve===null)return;Ve.consumerOnSignalRead(e);let t=Ve.producersTail;if(t!==void 0&&t.producer===e)return;let n,r=Ve.recomputing;if(r&&(n=t!==void 0?t.nextProducer:Ve.producers,n!==void 0&&n.producer===e)){Ve.producersTail=n,n.lastReadVersion=e.version;return}let i=e.consumersTail;if(i!==void 0&&i.consumer===Ve&&(!r||lN(i,Ve)))return;let o=Wi(Ve),s={producer:e,consumer:Ve,nextProducer:n,prevConsumer:i,lastReadVersion:e.version,nextConsumer:void 0};Ve.producersTail=s,t!==void 0?t.nextProducer=s:Ve.producers=s,o&&tE(e,s)}function J_(){th++}function jc(e){if(!(Wi(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===th)){if(!e.producerMustRecompute(e)&&!gs(e)){Fc(e);return}e.producerRecomputeValue(e),Fc(e)}}function nh(e){if(e.consumers===void 0)return;let t=xc;xc=!0;try{for(let n=e.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||cN(r)}}finally{xc=t}}function rh(){return Ve?.consumerAllowSignalWrites!==!1}function cN(e){e.dirty=!0,nh(e),e.consumerMarkedDirty?.(e)}function Fc(e){e.dirty=!1,e.lastCleanEpoch=th}function $i(e){return e&&X_(e),j(e)}function X_(e){e.producersTail=void 0,e.recomputing=!0}function ps(e,t){j(t),e&&eE(e)}function eE(e){e.recomputing=!1;let t=e.producersTail,n=t!==void 0?t.nextProducer:e.producers;if(n!==void 0){if(Wi(e))do n=ih(n);while(n!==void 0);t!==void 0?t.nextProducer=void 0:e.producers=void 0}}function gs(e){for(let t=e.producers;t!==void 0;t=t.nextProducer){let n=t.producer,r=t.lastReadVersion;if(r!==n.version||(jc(n),r!==n.version))return!0}return!1}function ms(e){if(Wi(e)){let t=e.producers;for(;t!==void 0;)t=ih(t)}e.producers=void 0,e.producersTail=void 0,e.consumers=void 0,e.consumersTail=void 0}function tE(e,t){let n=e.consumersTail,r=Wi(e);if(n!==void 0?(t.nextConsumer=n.nextConsumer,n.nextConsumer=t):(t.nextConsumer=void 0,e.consumers=t),t.prevConsumer=n,e.consumersTail=t,!r)for(let i=e.producers;i!==void 0;i=i.nextProducer)tE(i.producer,i)}function ih(e){let t=e.producer,n=e.nextProducer,r=e.nextConsumer,i=e.prevConsumer;if(e.nextConsumer=void 0,e.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:t.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(t.consumers=r,!Wi(t)){let o=t.producers;for(;o!==void 0;)o=ih(o)}return n}function Wi(e){return e.consumerIsAlwaysLive||e.consumers!==void 0}function Uc(e){aN?.(e)}function lN(e,t){let n=t.producersTail;if(n!==void 0){let r=t.producers;do{if(r===e)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Bc(e,t){let n=Object.create(uN);n.computation=e,t!==void 0&&(n.equal=t);let r=()=>{if(jc(n),Hi(n),n.value===hs)throw n.error;return n.value};return r[ze]=n,Uc(n),r}var kc=Symbol("UNSET"),Pc=Symbol("COMPUTING"),hs=Symbol("ERRORED"),uN=S(m({},Bi),{value:kc,dirty:!0,error:null,equal:Lc,kind:"computed",producerMustRecompute(e){return e.value===kc||e.value===Pc},producerRecomputeValue(e){if(e.value===Pc)throw new Error("");let t=e.value;e.value=Pc;let n=$i(e),r,i=!1;try{r=e.computation(),j(null),i=t!==kc&&t!==hs&&r!==hs&&e.equal(t,r)}catch(o){r=hs,e.error=o}finally{ps(e,n)}if(i){e.value=t;return}e.value=r,e.version++}});function dN(){throw new Error}var nE=dN;function rE(e){nE(e)}function oh(e){nE=e}var fN=null;function sh(e,t){let n=Object.create(Hc);n.value=e,t!==void 0&&(n.equal=t);let r=()=>iE(n);return r[ze]=n,Uc(n),[r,s=>Gi(n,s),s=>ah(n,s)]}function iE(e){return Hi(e),e.value}function Gi(e,t){rh()||rE(e),e.equal(e.value,t)||(e.value=t,hN(e))}function ah(e,t){rh()||rE(e),Gi(e,t(e.value))}var Hc=S(m({},Bi),{equal:Lc,value:void 0,kind:"signal"});function hN(e){e.version++,J_(),nh(e),fN?.(e)}function F(e){return typeof e=="function"}function zi(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var $c=zi(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ur(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var ce=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(F(r))try{r()}catch(o){t=o instanceof $c?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{oE(o)}catch(s){t=t??[],s instanceof $c?t=[...t,...s.errors]:t.push(s)}}if(t)throw new $c(t)}}add(t){var n;if(t&&t!==this)if(this.closed)oE(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Ur(n,t)}remove(t){let{_finalizers:n}=this;n&&Ur(n,t),t instanceof e&&t._removeParent(this)}};ce.EMPTY=(()=>{let e=new ce;return e.closed=!0,e})();var ch=ce.EMPTY;function Wc(e){return e instanceof ce||e&&"closed"in e&&F(e.remove)&&F(e.add)&&F(e.unsubscribe)}function oE(e){F(e)?e():e.unsubscribe()}var Wt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var qi={setTimeout(e,t,...n){let{delegate:r}=qi;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=qi;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Gc(e){qi.setTimeout(()=>{let{onUnhandledError:t}=Wt;if(t)t(e);else throw e})}function vs(){}var sE=lh("C",void 0,void 0);function aE(e){return lh("E",void 0,e)}function cE(e){return lh("N",e,void 0)}function lh(e,t,n){return{kind:e,value:t,error:n}}var Br=null;function Yi(e){if(Wt.useDeprecatedSynchronousErrorHandling){let t=!Br;if(t&&(Br={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=Br;if(Br=null,n)throw r}}else e()}function lE(e){Wt.useDeprecatedSynchronousErrorHandling&&Br&&(Br.errorThrown=!0,Br.error=e)}var Hr=class extends ce{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Wc(t)&&t.add(this)):this.destination=mN}static create(t,n,r){return new Ki(t,n,r)}next(t){this.isStopped?dh(cE(t),this):this._next(t)}error(t){this.isStopped?dh(aE(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?dh(sE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},pN=Function.prototype.bind;function uh(e,t){return pN.call(e,t)}var fh=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){zc(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){zc(r)}else zc(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){zc(n)}}},Ki=class extends Hr{constructor(t,n,r){super();let i;if(F(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Wt.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&uh(t.next,o),error:t.error&&uh(t.error,o),complete:t.complete&&uh(t.complete,o)}):i=t}this.destination=new fh(i)}};function zc(e){Wt.useDeprecatedSynchronousErrorHandling?lE(e):Gc(e)}function gN(e){throw e}function dh(e,t){let{onStoppedNotification:n}=Wt;n&&qi.setTimeout(()=>n(e,t))}var mN={closed:!0,next:vs,error:gN,complete:vs};var Zi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function dt(e){return e}function hh(...e){return ph(e)}function ph(e){return e.length===0?dt:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var x=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=yN(n)?n:new Ki(n,r,i);return Yi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=uE(r),new r((i,o)=>{let s=new Ki({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Zi](){return this}pipe(...n){return ph(n)(this)}toPromise(n){return n=uE(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function uE(e){var t;return(t=e??Wt.Promise)!==null&&t!==void 0?t:Promise}function vN(e){return e&&F(e.next)&&F(e.error)&&F(e.complete)}function yN(e){return e&&e instanceof Hr||vN(e)&&Wc(e)}function gh(e){return F(e?.lift)}function q(e){return t=>{if(gh(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function z(e,t,n,r,i){return new mh(e,t,n,r,i)}var mh=class extends Hr{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Qi(){return q((e,t)=>{let n=null;e._refCount++;let r=z(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var Ji=class extends x{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,gh(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new ce;let n=this.getSubject();t.add(this.source.subscribe(z(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=ce.EMPTY)}return t}refCount(){return Qi()(this)}};var dE=zi(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=(()=>{class e extends x{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new qc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new dE}next(n){Yi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Yi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Yi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?ch:(this.currentObservers=null,o.push(n),new ce(()=>{this.currentObservers=null,Ur(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new x;return n.source=this,n}}return e.create=(t,n)=>new qc(t,n),e})(),qc=class extends oe{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:ch}};var Re=class extends oe{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var vh={now(){return(vh.delegate||Date).now()},delegate:void 0};var Yc=class extends ce{constructor(t,n){super()}schedule(t,n=0){return this}};var ys={setInterval(e,t,...n){let{delegate:r}=ys;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=ys;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var Kc=class extends Yc{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,r=0){return ys.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ys.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r=!1,i;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ur(r,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var Xi=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}};Xi.now=vh.now;var Zc=class extends Xi{constructor(t,n=Xi.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}};var yh=new Zc(Kc),fE=yh;var nt=new x(e=>e.complete());function Qc(e){return e&&F(e.schedule)}function hE(e){return e[e.length-1]}function Jc(e){return F(hE(e))?e.pop():void 0}function or(e){return Qc(hE(e))?e.pop():void 0}function gE(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function pE(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function $r(e){return this instanceof $r?(this.v=e,this):new $r(e)}function mE(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(h){return function(g){return Promise.resolve(g).then(h,d)}}function a(h,g){r[h]&&(i[h]=function(_){return new Promise(function(T,R){o.push([h,_,T,R])>1||c(h,_)})},g&&(i[h]=g(i[h])))}function c(h,g){try{l(r[h](g))}catch(_){f(o[0][3],_)}}function l(h){h.value instanceof $r?Promise.resolve(h.value.v).then(u,d):f(o[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,g){h(g),o.shift(),o.length&&c(o[0][0],o[0][1])}}function vE(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof pE=="function"?pE(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Xc=e=>e&&typeof e.length=="number"&&typeof e!="function";function el(e){return F(e?.then)}function tl(e){return F(e[Zi])}function nl(e){return Symbol.asyncIterator&&F(e?.[Symbol.asyncIterator])}function rl(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function _N(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var il=_N();function ol(e){return F(e?.[il])}function sl(e){return mE(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield $r(n.read());if(i)return yield $r(void 0);yield yield $r(r)}}finally{n.releaseLock()}})}function al(e){return F(e?.getReader)}function ye(e){if(e instanceof x)return e;if(e!=null){if(tl(e))return EN(e);if(Xc(e))return IN(e);if(el(e))return CN(e);if(nl(e))return yE(e);if(ol(e))return wN(e);if(al(e))return DN(e)}throw rl(e)}function EN(e){return new x(t=>{let n=e[Zi]();if(F(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function IN(e){return new x(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function CN(e){return new x(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Gc)})}function wN(e){return new x(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function yE(e){return new x(t=>{bN(e,t).catch(n=>t.error(n))})}function DN(e){return yE(sl(e))}function bN(e,t){var n,r,i,o;return gE(this,void 0,void 0,function*(){try{for(n=vE(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function rt(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function cl(e,t=0){return q((n,r)=>{n.subscribe(z(r,i=>rt(r,e,()=>r.next(i),t),()=>rt(r,e,()=>r.complete(),t),i=>rt(r,e,()=>r.error(i),t)))})}function ll(e,t=0){return q((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function _E(e,t){return ye(e).pipe(ll(t),cl(t))}function EE(e,t){return ye(e).pipe(ll(t),cl(t))}function IE(e,t){return new x(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function CE(e,t){return new x(n=>{let r;return rt(n,t,()=>{r=e[il](),rt(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>F(r?.return)&&r.return()})}function ul(e,t){if(!e)throw new Error("Iterable cannot be null");return new x(n=>{rt(n,t,()=>{let r=e[Symbol.asyncIterator]();rt(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function wE(e,t){return ul(sl(e),t)}function DE(e,t){if(e!=null){if(tl(e))return _E(e,t);if(Xc(e))return IE(e,t);if(el(e))return EE(e,t);if(nl(e))return ul(e,t);if(ol(e))return CE(e,t);if(al(e))return wE(e,t)}throw rl(e)}function se(e,t){return t?DE(e,t):ye(e)}function M(...e){let t=or(e);return se(e,t)}function eo(e,t){let n=F(e)?e:()=>e,r=i=>i.error(n());return new x(t?i=>t.schedule(r,0,i):r)}function _h(e){return!!e&&(e instanceof x||F(e.lift)&&F(e.subscribe))}var Fn=zi(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function bE(e){return e instanceof Date&&!isNaN(e)}function U(e,t){return q((n,r)=>{let i=0;n.subscribe(z(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:TN}=Array;function SN(e,t){return TN(t)?e(...t):e(t)}function dl(e){return U(t=>SN(e,t))}var{isArray:AN}=Array,{getPrototypeOf:NN,prototype:MN,keys:RN}=Object;function fl(e){if(e.length===1){let t=e[0];if(AN(t))return{args:t,keys:null};if(ON(t)){let n=RN(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function ON(e){return e&&typeof e=="object"&&NN(e)===MN}function hl(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function Wr(...e){let t=or(e),n=Jc(e),{args:r,keys:i}=fl(e);if(r.length===0)return se([],t);let o=new x(xN(r,t,i?s=>hl(i,s):dt));return n?o.pipe(dl(n)):o}function xN(e,t,n=dt){return r=>{TE(t,()=>{let{length:i}=e,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)TE(t,()=>{let l=se(e[c],t),u=!1;l.subscribe(z(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function TE(e,t,n){e?rt(n,e,t):t()}function SE(e,t,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&t.complete()},h=_=>l<r?g(_):c.push(_),g=_=>{o&&t.next(_),l++;let T=!1;ye(n(_,u++)).subscribe(z(t,R=>{i?.(R),o?h(R):t.next(R)},()=>{T=!0},void 0,()=>{if(T)try{for(l--;c.length&&l<r;){let R=c.shift();s?rt(t,s,()=>g(R)):g(R)}f()}catch(R){t.error(R)}}))};return e.subscribe(z(t,h,()=>{d=!0,f()})),()=>{a?.()}}function de(e,t,n=1/0){return F(t)?de((r,i)=>U((o,s)=>t(r,o,i,s))(ye(e(r,i))),n):(typeof t=="number"&&(n=t),q((r,i)=>SE(r,i,e,n)))}function to(e=1/0){return de(dt,e)}function AE(){return to(1)}function no(...e){return AE()(se(e,or(e)))}function _s(e){return new x(t=>{ye(e()).subscribe(t)})}function Eh(...e){let t=Jc(e),{args:n,keys:r}=fl(e),i=new x(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;ye(n[u]).subscribe(z(o,f=>{d||(d=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?hl(r,a):a),o.complete())}))}});return t?i.pipe(dl(t)):i}function NE(e=0,t,n=fE){let r=-1;return t!=null&&(Qc(t)?n=t:r=t),new x(i=>{let o=bE(e)?+e-n.now():e;o<0&&(o=0);let s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function Ih(e=0,t=yh){return e<0&&(e=0),NE(e,e,t)}function it(e,t){return q((n,r)=>{let i=0;n.subscribe(z(r,o=>e.call(t,o,i++)&&r.next(o)))})}function Ln(e){return q((t,n)=>{let r=null,i=!1,o;r=t.subscribe(z(n,void 0,void 0,s=>{o=ye(e(s,Ln(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function ME(e,t,n,r,i){return(o,s)=>{let a=n,c=t,l=0;o.subscribe(z(s,u=>{let d=l++;c=a?e(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function sr(e,t){return F(t)?de(e,t,1):de(e,1)}function ar(e){return q((t,n)=>{let r=!1;t.subscribe(z(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function Tt(e){return e<=0?()=>nt:q((t,n)=>{let r=0;t.subscribe(z(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function pl(e=kN){return q((t,n)=>{let r=!1;t.subscribe(z(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function kN(){return new Fn}function Es(e){return q((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function Vn(e,t){let n=arguments.length>=2;return r=>r.pipe(e?it((i,o)=>e(i,o,r)):dt,Tt(1),n?ar(t):pl(()=>new Fn))}function ro(e){return e<=0?()=>nt:q((t,n)=>{let r=[];t.subscribe(z(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Ch(e,t){let n=arguments.length>=2;return r=>r.pipe(e?it((i,o)=>e(i,o,r)):dt,ro(1),n?ar(t):pl(()=>new Fn))}function wh(e,t){return q(ME(e,t,arguments.length>=2,!0))}function Dh(...e){let t=or(e);return q((n,r)=>{(t?no(e,n,t):no(e,n)).subscribe(r)})}function Ae(e,t){return q((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(z(r,c=>{i?.unsubscribe();let l=0,u=o++;ye(e(c,u)).subscribe(i=z(r,d=>r.next(t?t(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function io(e){return q((t,n)=>{ye(e).subscribe(z(n,()=>n.complete(),vs)),!n.closed&&t.subscribe(n)})}function _e(e,t,n){let r=F(e)||t||n?{next:e,error:t,complete:n}:e;return r?q((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(z(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):dt}function RE(e){let t=j(null);try{return e()}finally{j(t)}}var yl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",E=class extends Error{code;constructor(t,n){super(so(t,n)),this.code=t}};function PN(e){return`NG0${Math.abs(e)}`}function so(e,t){return`${PN(e)}${t?": "+t:""}`}var Bn=globalThis;function J(e){for(let t in e)if(e[t]===J)return t;throw Error("")}function kE(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Un(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(Un).join(", ")}]`;if(e==null)return""+e;let t=e.overriddenName||e.name;if(t)return`${t}`;let n=e.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Fh(e,t){return e?t?`${e} ${t}`:e:t||""}var FN=J({__forward_ref__:J});function pn(e){return e.__forward_ref__=pn,e.toString=function(){return Un(this())},e}function Oe(e){return Lh(e)?e():e}function Lh(e){return typeof e=="function"&&e.hasOwnProperty(FN)&&e.__forward_ref__===pn}function I(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function zt(e){return{providers:e.providers||[],imports:e.imports||[]}}function Ds(e){return LN(e,_l)}function Vh(e){return Ds(e)!==null}function LN(e,t){return e.hasOwnProperty(t)&&e[t]||null}function VN(e){let t=e?.[_l]??null;return t||null}function Th(e){return e&&e.hasOwnProperty(ml)?e[ml]:null}var _l=J({\u0275prov:J}),ml=J({\u0275inj:J}),D=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=I({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function jh(e){return e&&!!e.\u0275providers}var Uh=J({\u0275cmp:J}),Bh=J({\u0275dir:J}),Hh=J({\u0275pipe:J}),$h=J({\u0275mod:J}),Cs=J({\u0275fac:J}),Kr=J({__NG_ELEMENT_ID__:J}),OE=J({__NG_ENV_ID__:J});function Zr(e){return typeof e=="string"?e:e==null?"":String(e)}function PE(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Zr(e)}var FE=J({ngErrorCode:J}),jN=J({ngErrorMessage:J}),UN=J({ngTokenPath:J});function Wh(e,t){return LE("",-200,t)}function El(e,t){throw new E(-201,!1)}function LE(e,t,n){let r=new E(t,e);return r[FE]=t,r[jN]=e,n&&(r[UN]=n),r}function BN(e){return e[FE]}var Sh;function VE(){return Sh}function qe(e){let t=Sh;return Sh=e,t}function Gh(e,t,n){let r=Ds(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(t!==void 0)return t;El(e,"Injector")}var HN={},Gr=HN,$N="__NG_DI_FLAG__",Ah=class{injector;constructor(t){this.injector=t}retrieve(t,n){let r=zr(n)||0;try{return this.injector.get(t,r&8?null:Gr,r)}catch(i){if(Ui(i))return i;throw i}}};function WN(e,t=0){let n=Oc();if(n===void 0)throw new E(-203,!1);if(n===null)return Gh(e,void 0,t);{let r=GN(t),i=n.retrieve(e,r);if(Ui(i)){if(r.optional)return null;throw i}return i}}function N(e,t=0){return(VE()||WN)(Oe(e),t)}function v(e,t){return N(e,zr(t))}function zr(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function GN(e){return{optional:!!(e&8),host:!!(e&1),self:!!(e&2),skipSelf:!!(e&4)}}function Nh(e){let t=[];for(let n=0;n<e.length;n++){let r=Oe(e[n]);if(Array.isArray(r)){if(r.length===0)throw new E(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=zN(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}t.push(N(i,o))}else t.push(N(r))}return t}function zN(e){return e[$N]}function cr(e,t){let n=e.hasOwnProperty(Cs);return n?e[Cs]:null}function Il(e,t){e.forEach(n=>Array.isArray(n)?Il(n,t):t(n))}function zh(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function bs(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function jE(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}function UE(e,t,n){let r=ao(e,t);return r>=0?e[r|1]=n:(r=~r,jE(e,r,t,n)),r}function Cl(e,t){let n=ao(e,t);if(n>=0)return e[n|1]}function ao(e,t){return qN(e,t,1)}function qN(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=e[o<<n];if(t===s)return o<<n;s>t?i=o:r=o+1}return~(i<<n)}var dr={},ft=[],Hn=new D(""),qh=new D("",-1),Yh=new D(""),ws=class{get(t,n=Gr){if(n===Gr){let i=LE("",-201);throw i.name="\u0275NotFound",i}return n}};function Kh(e){return e[$h]||null}function $n(e){return e[Uh]||null}function Zh(e){return e[Bh]||null}function BE(e){return e[Hh]||null}function fr(e){return{\u0275providers:e}}function HE(e){return fr([{provide:Hn,multi:!0,useValue:e}])}function $E(...e){return{\u0275providers:Qh(!0,e),\u0275fromNgModule:!0}}function Qh(e,...t){let n=[],r=new Set,i,o=s=>{n.push(s)};return Il(t,s=>{let a=s;vl(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&WE(i,o),n}function WE(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];Jh(i,o=>{t(o,r)})}}function vl(e,t,n,r){if(e=Oe(e),!e)return!1;let i=null,o=Th(e),s=!o&&$n(e);if(!o&&!s){let c=e.ngModule;if(o=Th(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=e}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)vl(l,t,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Il(o.imports,u=>{vl(u,t,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&WE(l,t)}if(!a){let l=cr(i)||(()=>new i);t({provide:i,useFactory:l,deps:ft},i),t({provide:Yh,useValue:i,multi:!0},i),t({provide:Hn,useValue:()=>N(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=e;Jh(c,u=>{t(u,l)})}}else return!1;return i!==e&&e.providers!==void 0}function Jh(e,t){for(let n of e)jh(n)&&(n=n.\u0275providers),Array.isArray(n)?Jh(n,t):t(n)}var YN=J({provide:String,useValue:J});function GE(e){return e!==null&&typeof e=="object"&&YN in e}function KN(e){return!!(e&&e.useExisting)}function ZN(e){return!!(e&&e.useFactory)}function qr(e){return typeof e=="function"}function zE(e){return!!e.useClass}var Ts=new D(""),gl={},xE={},bh;function Ss(){return bh===void 0&&(bh=new ws),bh}var De=class{},Yr=class extends De{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Rh(t,s=>this.processProvider(s)),this.records.set(qh,oo(void 0,this)),i.has("environment")&&this.records.set(De,oo(void 0,this));let o=this.records.get(Ts);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Yh,ft,{self:!0}))}retrieve(t,n){let r=zr(n)||0;try{return this.get(t,Gr,r)}catch(i){if(Ui(i))return i;throw i}}destroy(){Is(this),this._destroyed=!0;let t=j(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),j(t)}}onDestroy(t){return Is(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Is(this);let n=hn(this),r=qe(void 0),i;try{return t()}finally{hn(n),qe(r)}}get(t,n=Gr,r){if(Is(this),t.hasOwnProperty(OE))return t[OE](this);let i=zr(r),o,s=hn(this),a=qe(void 0);try{if(!(i&4)){let l=this.records.get(t);if(l===void 0){let u=tM(t)&&Ds(t);u&&this.injectableDefInScope(u)?l=oo(Mh(t),gl):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l,i)}let c=i&2?Ss():this.parent;return n=i&8&&n===Gr?null:n,c.get(t,n)}catch(c){let l=BN(c);throw l===-200||l===-201?new E(l,null):c}finally{qe(a),hn(s)}}resolveInjectorInitializers(){let t=j(null),n=hn(this),r=qe(void 0),i;try{let o=this.get(Hn,ft,{self:!0});for(let s of o)s()}finally{hn(n),qe(r),j(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(Un(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=Oe(t);let n=qr(t)?t:Oe(t&&t.provide),r=JN(t);if(!qr(t)&&t.multi===!0){let i=this.records.get(n);i||(i=oo(void 0,gl,!0),i.factory=()=>Nh(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n,r){let i=j(null);try{if(n.value===xE)throw Wh(Un(t));return n.value===gl&&(n.value=xE,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&eM(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{j(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Oe(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Mh(e){let t=Ds(e),n=t!==null?t.factory:cr(e);if(n!==null)return n;if(e instanceof D)throw new E(204,!1);if(e instanceof Function)return QN(e);throw new E(204,!1)}function QN(e){if(e.length>0)throw new E(204,!1);let n=VN(e);return n!==null?()=>n.factory(e):()=>new e}function JN(e){if(GE(e))return oo(void 0,e.useValue);{let t=Xh(e);return oo(t,gl)}}function Xh(e,t,n){let r;if(qr(e)){let i=Oe(e);return cr(i)||Mh(i)}else if(GE(e))r=()=>Oe(e.useValue);else if(ZN(e))r=()=>e.useFactory(...Nh(e.deps||[]));else if(KN(e))r=(i,o)=>N(Oe(e.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Oe(e&&(e.useClass||e.provide));if(XN(e))r=()=>new i(...Nh(e.deps));else return cr(i)||Mh(i)}return r}function Is(e){if(e.destroyed)throw new E(205,!1)}function oo(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function XN(e){return!!e.deps}function eM(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function tM(e){return typeof e=="function"||typeof e=="object"&&e.ngMetadataName==="InjectionToken"}function Rh(e,t){for(let n of e)Array.isArray(n)?Rh(n,t):n&&jh(n)?Rh(n.\u0275providers,t):t(n)}function je(e,t){let n;e instanceof Yr?(Is(e),n=e):n=new Ah(e);let r,i=hn(n),o=qe(void 0);try{return t()}finally{hn(i),qe(o)}}function qE(){return VE()!==void 0||Oc()!=null}var qt=0,P=1,k=2,xe=3,St=4,At=5,As=6,co=7,Ue=8,lo=9,gn=10,fe=11,uo=12,ep=13,Qr=14,Nt=15,Jr=16,Xr=17,ei=18,Ns=19,tp=20,jn=21,wl=22,Ms=23,ht=24,ti=25,Ye=26,Ne=27,YE=1;var hr=7,Rs=8,Os=9,st=10;function mn(e){return Array.isArray(e)&&typeof e[YE]=="object"}function Yt(e){return Array.isArray(e)&&e[YE]===!0}function np(e){return(e.flags&4)!==0}function pr(e){return e.componentOffset>-1}function fo(e){return(e.flags&1)===1}function vn(e){return!!e.template}function ho(e){return(e[k]&512)!==0}function ni(e){return(e[k]&256)===256}var KE="svg",ZE="math";function Mt(e){for(;Array.isArray(e);)e=e[qt];return e}function rp(e,t){return Mt(t[e])}function Kt(e,t){return Mt(t[e.index])}function Dl(e,t){return e.data[t]}function bl(e,t){return e[t]}function ip(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}function Rt(e,t){let n=t[e];return mn(n)?n:n[qt]}function Tl(e){return(e[k]&128)===128}function QE(e){return Yt(e[xe])}function xs(e,t){return t==null?null:e[t]}function op(e){e[Xr]=0}function sp(e){e[k]&1024||(e[k]|=1024,Tl(e)&&po(e))}function JE(e,t){for(;e>0;)t=t[Qr],e--;return t}function ks(e){return!!(e[k]&9216||e[ht]?.dirty)}function Sl(e){e[gn].changeDetectionScheduler?.notify(8),e[k]&64&&(e[k]|=1024),ks(e)&&po(e)}function po(e){e[gn].changeDetectionScheduler?.notify(0);let t=lr(e);for(;t!==null&&!(t[k]&8192||(t[k]|=8192,!Tl(t)));)t=lr(t)}function ap(e,t){if(ni(e))throw new E(911,!1);e[jn]===null&&(e[jn]=[]),e[jn].push(t)}function XE(e,t){if(e[jn]===null)return;let n=e[jn].indexOf(t);n!==-1&&e[jn].splice(n,1)}function lr(e){let t=e[xe];return Yt(t)?t[xe]:t}function eI(e){return e[co]??=[]}function tI(e){return e.cleanup??=[]}var H={lFrame:yI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Oh=!1;function nI(){return H.lFrame.elementDepthCount}function rI(){H.lFrame.elementDepthCount++}function iI(){H.lFrame.elementDepthCount--}function Al(){return H.bindingsEnabled}function oI(){return H.skipHydrationRootTNode!==null}function sI(e){return H.skipHydrationRootTNode===e}function aI(){H.skipHydrationRootTNode=null}function K(){return H.lFrame.lView}function pt(){return H.lFrame.tView}function Ot(e){return H.lFrame.contextLView=e,e[Ue]}function xt(e){return H.lFrame.contextLView=null,e}function Be(){let e=cp();for(;e!==null&&e.type===64;)e=e.parent;return e}function cp(){return H.lFrame.currentTNode}function cI(){let e=H.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function go(e,t){let n=H.lFrame;n.currentTNode=e,n.isParent=t}function lp(){return H.lFrame.isParent}function lI(){H.lFrame.isParent=!1}function uI(){return H.lFrame.contextLView}function up(){return Oh}function dp(e){let t=Oh;return Oh=e,t}function Nl(){let e=H.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function dI(){return H.lFrame.bindingIndex}function fI(e){return H.lFrame.bindingIndex=e}function Ml(){return H.lFrame.bindingIndex++}function fp(e){let t=H.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function hI(){return H.lFrame.inI18n}function pI(e,t){let n=H.lFrame;n.bindingIndex=n.bindingRootIndex=e,Rl(t)}function gI(){return H.lFrame.currentDirectiveIndex}function Rl(e){H.lFrame.currentDirectiveIndex=e}function mI(e){let t=H.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function hp(e){H.lFrame.currentQueryIndex=e}function nM(e){let t=e[P];return t.type===2?t.declTNode:t.type===1?e[At]:null}function pp(e,t,n){if(n&4){let i=t,o=e;for(;i=i.parent,i===null&&!(n&1);)if(i=nM(o),i===null||(o=o[Qr],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=H.lFrame=vI();return r.currentTNode=t,r.lView=e,!0}function Ol(e){let t=vI(),n=e[P];H.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function vI(){let e=H.lFrame,t=e===null?null:e.child;return t===null?yI(e):t}function yI(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function _I(){let e=H.lFrame;return H.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var gp=_I;function xl(){let e=_I();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function EI(e){return(H.lFrame.contextLView=JE(e,H.lFrame.contextLView))[Ue]}function gr(){return H.lFrame.selectedIndex}function mr(e){H.lFrame.selectedIndex=e}function mp(){let e=H.lFrame;return Dl(e.tView,e.selectedIndex)}function II(){return H.lFrame.currentNamespace}var CI=!0;function kl(){return CI}function Ps(e){CI=e}function xh(e,t=null,n=null,r){let i=vp(e,t,n,r);return i.resolveInjectorInitializers(),i}function vp(e,t=null,n=null,r,i=new Set){let o=[n||ft,$E(e)];return r=r||(typeof e=="object"?void 0:Un(e)),new Yr(o,t||Ss(),r||null,i)}var ot=class e{static THROW_IF_NOT_FOUND=Gr;static NULL=new ws;static create(t,n){if(Array.isArray(t))return xh({name:""},n,t,"");{let r=t.name??"";return xh({name:r},t.parent,t.providers,r)}}static \u0275prov=I({token:e,providedIn:"any",factory:()=>N(qh)});static __NG_ELEMENT_ID__=-1},he=new D(""),yn=(()=>{class e{static __NG_ELEMENT_ID__=rM;static __NG_ENV_ID__=n=>n}return e})(),kh=class extends yn{_lView;constructor(t){super(),this._lView=t}get destroyed(){return ni(this._lView)}onDestroy(t){let n=this._lView;return ap(n,t),()=>XE(n,t)}};function rM(){return new kh(K())}var Gt=class{_console=console;handleError(t){this._console.error("ERROR",t)}},Ke=new D("",{providedIn:"root",factory:()=>{let e=v(De),t;return n=>{e.destroyed&&!t?setTimeout(()=>{throw n}):(t??=e.get(Gt),t.handleError(n))}}}),wI={provide:Hn,useValue:()=>void v(Gt),multi:!0},iM=new D("",{providedIn:"root",factory:()=>{let e=v(he).defaultView;if(!e)return;let t=v(Ke),n=o=>{t(o.reason),o.preventDefault()},r=o=>{o.error?t(o.error):t(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{e.addEventListener("unhandledrejection",n),e.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),v(yn).onDestroy(()=>{e.removeEventListener("error",r),e.removeEventListener("unhandledrejection",n)})}});function yp(){return fr([HE(()=>void v(iM))])}function gt(e,t){let[n,r,i]=sh(e,t?.equal),o=n,s=o[ze];return o.set=r,o.update=i,o.asReadonly=DI.bind(o),o}function DI(){let e=this[ze];if(e.readonlyFn===void 0){let t=()=>this();t[ze]=e,e.readonlyFn=t}return e.readonlyFn}var ur=class{},Fs=new D("",{providedIn:"root",factory:()=>!1});var _p=new D(""),Ep=new D("");var Pl=(()=>{class e{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=oM}return e})();function oM(){return new Pl(K(),Be())}var Wn=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Re(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new x(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=I({token:e,providedIn:"root",factory:()=>new e})}return e})();function Ls(...e){}var Ip=(()=>{class e{static \u0275prov=I({token:e,providedIn:"root",factory:()=>new Ph})}return e})(),Ph=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let n=t.zone,r=this.queues.get(n);r.has(t)&&(r.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||r.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[n,r]of this.queues)n===null?t||=this.flushQueue(r):t||=n.run(()=>this.flushQueue(r));t||(this.dirtyEffectCount=0)}}flushQueue(t){let n=!1;for(let r of t)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function Ws(e){return{toString:e}.toString()}function gM(e){return typeof e=="function"}var Hl=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function nC(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var zn=(()=>{let e=()=>rC;return e.ngInherit=!0,e})();function rC(e){return e.type.prototype.ngOnChanges&&(e.setInput=vM),mM}function mM(){let e=oC(this),t=e?.current;if(t){let n=e.previous;if(n===dr)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function vM(e,t,n,r,i){let o=this.declaredInputs[r],s=oC(e)||yM(e,{previous:dr,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Hl(l&&l.currentValue,n,c===dr),nC(e,t,i,n)}var iC="__ngSimpleChanges__";function oC(e){return e[iC]||null}function yM(e,t){return e[iC]=t}var bI=[];var X=function(e,t=null,n){for(let r=0;r<bI.length;r++){let i=bI[r];i(e,t,n)}};function _M(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=rC(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function sC(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function jl(e,t,n){aC(e,t,3,n)}function Ul(e,t,n,r){(e[k]&3)===n&&aC(e,t,n,r)}function Cp(e,t){let n=e[k];(n&3)===t&&(n&=16383,n+=1,e[k]=n)}function aC(e,t,n,r){let i=r!==void 0?e[Xr]&65535:0,o=r??-1,s=t.length-1,a=0;for(let c=i;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[Xr]+=65536),(a<o||o==-1)&&(EM(e,n,t,c),e[Xr]=(e[Xr]&4294901760)+c+2),c++}function TI(e,t){X(4,e,t);let n=j(null);try{t.call(e)}finally{j(n),X(5,e,t)}}function EM(e,t,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=e[s];i?e[k]>>14<e[Xr]>>16&&(e[k]&3)===t&&(e[k]+=16384,TI(a,o)):TI(a,o)}var vo=-1,ii=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r,i){this.factory=t,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function IM(e){return(e.flags&8)!==0}function CM(e){return(e.flags&16)!==0}function wM(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{let o=i,s=n[++r];DM(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function cC(e){return e===3||e===4||e===6}function DM(e){return e.charCodeAt(0)===64}function Us(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?SI(e,n,i,null,t[++r]):SI(e,n,i,null,null))}}return e}function SI(e,t,n,r,i){let o=0,s=e.length;if(t===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===n){i!==null&&(e[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),i!==null&&e.splice(o++,0,i)}function lC(e){return e!==vo}function $l(e){return e&32767}function bM(e){return e>>16}function Wl(e,t){let n=bM(e),r=t;for(;n>0;)r=r[Qr],n--;return r}var xp=!0;function Gl(e){let t=xp;return xp=e,t}var TM=256,uC=TM-1,dC=5,SM=0,_n={};function AM(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Kr)&&(r=n[Kr]),r==null&&(r=n[Kr]=SM++);let i=r&uC,o=1<<i;t.data[e+(i>>dC)]|=o}function zl(e,t){let n=fC(e,t);if(n!==-1)return n;let r=t[P];r.firstCreatePass&&(e.injectorIndex=t.length,wp(r.data,e),wp(t,null),wp(r.blueprint,null));let i=Jp(e,t),o=e.injectorIndex;if(lC(i)){let s=$l(i),a=Wl(i,t),c=a[P].data;for(let l=0;l<8;l++)t[o+l]=a[s+l]|c[s+l]}return t[o+8]=i,o}function wp(e,t){e.push(0,0,0,0,0,0,0,0,t)}function fC(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function Jp(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=vC(i),r===null)return vo;if(n++,i=i[Qr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return vo}function kp(e,t,n){AM(e,t,n)}function NM(e,t){if(t==="class")return e.classes;if(t==="style")return e.styles;let n=e.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(cC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===t)return n[i+1];i=i+2}}}return null}function hC(e,t,n){if(n&8||e!==void 0)return e;El(t,"NodeInjector")}function pC(e,t,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=e[lo],o=qe(void 0);try{return i?i.get(t,r,n&8):Gh(t,r,n&8)}finally{qe(o)}}return hC(r,t,n)}function gC(e,t,n,r=0,i){if(e!==null){if(t[k]&2048&&!(r&2)){let s=kM(e,t,n,r,_n);if(s!==_n)return s}let o=mC(e,t,n,r,_n);if(o!==_n)return o}return pC(t,n,r,i)}function mC(e,t,n,r,i){let o=OM(n);if(typeof o=="function"){if(!pp(t,e,r))return r&1?hC(i,n,r):pC(t,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))El(n);else return s}finally{gp()}}else if(typeof o=="number"){let s=null,a=fC(e,t),c=vo,l=r&1?t[Nt][At]:null;for((a===-1||r&4)&&(c=a===-1?Jp(e,t):t[a+8],c===vo||!NI(r,!1)?a=-1:(s=t[P],a=$l(c),t=Wl(c,t)));a!==-1;){let u=t[P];if(AI(o,a,u.data)){let d=MM(a,t,n,s,r,l);if(d!==_n)return d}c=t[a+8],c!==vo&&NI(r,t[P].data[a+8]===l)&&AI(o,a,t)?(s=u,a=$l(c),t=Wl(c,t)):a=-1}}return i}function MM(e,t,n,r,i,o){let s=t[P],a=s.data[e+8],c=r==null?pr(a)&&xp:r!=s&&(a.type&3)!==0,l=i&1&&o===a,u=RM(a,s,n,c,l);return u!==null?ql(t,s,u,a,i):_n}function RM(e,t,n,r,i){let o=e.providerIndexes,s=t.data,a=o&1048575,c=e.directiveStart,l=e.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let g=s[h];if(h<c&&n===g||h>=c&&g.type===n)return h}if(i){let h=s[c];if(h&&vn(h)&&h.type===n)return c}return null}function ql(e,t,n,r,i){let o=e[n],s=t.data;if(o instanceof ii){let a=o;if(a.resolving){let h=PE(s[n]);throw Wh(h)}let c=Gl(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],u,d=a.injectImpl?qe(a.injectImpl):null,f=pp(e,r,0);try{o=e[n]=a.factory(void 0,i,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&_M(n,s[n],t)}finally{d!==null&&qe(d),Gl(c),a.resolving=!1,gp()}}return o}function OM(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Kr)?e[Kr]:void 0;return typeof t=="number"?t>=0?t&uC:xM:t}function AI(e,t,n){let r=1<<e;return!!(n[t+(e>>dC)]&r)}function NI(e,t){return!(e&2)&&!(e&1&&t)}var ri=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return gC(this._tNode,this._lView,t,zr(r),n)}};function xM(){return new ri(Be(),K())}function yr(e){return Ws(()=>{let t=e.prototype.constructor,n=t[Cs]||Pp(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[Cs]||Pp(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Pp(e){return Lh(e)?()=>{let t=Pp(Oe(e));return t&&t()}:cr(e)}function kM(e,t,n,r,i){let o=e,s=t;for(;o!==null&&s!==null&&s[k]&2048&&!ho(s);){let a=mC(o,s,n,r|2,_n);if(a!==_n)return a;let c=o.parent;if(!c){let l=s[tp];if(l){let u=l.get(n,_n,r);if(u!==_n)return u}c=vC(s),s=s[Qr]}o=c}return i}function vC(e){let t=e[P],n=t.type;return n===2?t.declTNode:n===1?e[At]:null}function Gs(e){return NM(Be(),e)}function PM(){return ou(Be(),K())}function ou(e,t){return new kt(Kt(e,t))}var kt=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=PM}return e})();function yC(e){return(e.flags&128)===128}var Xp=(function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e})(Xp||{}),_C=new Map,FM=0;function LM(){return FM++}function VM(e){_C.set(e[Ns],e)}function Fp(e){_C.delete(e[Ns])}var MI="__ngContext__";function yo(e,t){mn(t)?(e[MI]=t[Ns],VM(t)):e[MI]=t}function EC(e){return CC(e[uo])}function IC(e){return CC(e[St])}function CC(e){for(;e!==null&&!Yt(e);)e=e[St];return e}var Lp;function eg(e){Lp=e}function wC(){if(Lp!==void 0)return Lp;if(typeof document<"u")return document;throw new E(210,!1)}var su=new D("",{providedIn:"root",factory:()=>jM}),jM="ng",au=new D(""),Eo=new D("",{providedIn:"platform",factory:()=>"unknown"});var cu=new D("",{providedIn:"root",factory:()=>wC().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var UM="h",BM="b";var DC=!1,bC=new D("",{providedIn:"root",factory:()=>DC});var tg=new D("");var HM=(e,t,n,r)=>{};function $M(e,t,n,r){HM(e,t,n,r)}function ng(e){return(e.flags&32)===32}var WM=()=>null;function TC(e,t,n=!1){return WM(e,t,n)}function SC(e,t){let n=e.contentQueries;if(n!==null){let r=j(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=e.data[s];hp(o),a.contentQueries(2,t[s],s)}}}finally{j(r)}}}function Vp(e,t,n){hp(0);let r=j(null);try{t(e,n)}finally{j(r)}}function rg(e,t,n){if(np(t)){let r=j(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=e.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{j(r)}}}var Gn=(function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e})(Gn||{});var Fl;function GM(){if(Fl===void 0&&(Fl=null,Bn.trustedTypes))try{Fl=Bn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Fl}function RI(e){return GM()?.createScriptURL(e)||e}var Yl=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${yl})`}};function zs(e){return e instanceof Yl?e.changingThisBreaksApplicationSecurity:e}function ig(e,t){let n=AC(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${yl})`)}return n===t}function AC(e){return e instanceof Yl&&e.getTypeName()||null}var zM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function NC(e){return e=String(e),e.match(zM)?e:"unsafe:"+e}var lu=(function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e})(lu||{});function MC(e){let t=OC();return t?t.sanitize(lu.URL,e)||"":ig(e,"URL")?zs(e):NC(Zr(e))}function RC(e){let t=OC();if(t)return RI(t.sanitize(lu.RESOURCE_URL,e)||"");if(ig(e,"ResourceURL"))return RI(zs(e));throw new E(904,!1)}function qM(e,t){return t==="src"&&(e==="embed"||e==="frame"||e==="iframe"||e==="media"||e==="script")||t==="href"&&(e==="base"||e==="link")?RC:MC}function og(e,t,n){return qM(t,n)(e)}function OC(){let e=K();return e&&e[gn].sanitizer}var YM=/^>|^->|<!--|-->|--!>|<!-$/g,KM=/(<|>)/g,ZM="\u200B$1\u200B";function QM(e){return e.replace(YM,t=>t.replace(KM,ZM))}function xC(e){return e instanceof Function?e():e}function JM(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}var kC="ng-template";function XM(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&JM(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(sg(e))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function sg(e){return e.type===4&&e.value!==kC}function eR(e,t,n){let r=e.type===4&&!n?kC:e.value;return t===r}function tR(e,t,n){let r=4,i=e.attrs,o=i!==null?iR(i):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!Zt(r)&&!Zt(c))return!1;if(s&&Zt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!eR(e,c,n)||c===""&&t.length===1){if(Zt(r))return!1;s=!0}}else if(r&8){if(i===null||!XM(e,i,c,n)){if(Zt(r))return!1;s=!0}}else{let l=t[++a],u=nR(c,i,sg(e),n);if(u===-1){if(Zt(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Zt(r))return!1;s=!0}}}}return Zt(r)||s}function Zt(e){return(e&1)===0}function nR(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let s=t[i];if(s===e)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return oR(t,e)}function rR(e,t,n=!1){for(let r=0;r<t.length;r++)if(tR(e,t[r],n))return!0;return!1}function iR(e){for(let t=0;t<e.length;t++){let n=e[t];if(cC(n))return t}return e.length}function oR(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function OI(e,t){return e?":not("+t.trim()+")":t}function sR(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Zt(s)&&(t+=OI(o,i),i=""),r=s,o=o||!Zt(r);n++}return i!==""&&(t+=OI(o,i)),t}function aR(e){return e.map(sR).join(",")}function cR(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!Zt(i))break;i=o}r++}return n.length&&t.push(1,...n),t}var Qt={};function lR(e,t){return e.createText(t)}function uR(e,t,n){e.setValue(t,n)}function dR(e,t){return e.createComment(QM(t))}function PC(e,t,n){return e.createElement(t,n)}function Kl(e,t,n,r,i){e.insertBefore(t,n,r,i)}function FC(e,t,n){e.appendChild(t,n)}function xI(e,t,n,r,i){r!==null?Kl(e,t,n,r,i):FC(e,t,n)}function fR(e,t,n,r){e.removeChild(null,t,n,r)}function hR(e,t,n){e.setAttribute(t,"style",n)}function pR(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function LC(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&wM(e,t,r),i!==null&&pR(e,t,i),o!==null&&hR(e,t,o)}function ag(e,t,n,r,i,o,s,a,c,l,u){let d=Ne+r,f=d+i,h=gR(d,f),g=typeof l=="function"?l():l;return h[P]={type:e,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:u}}function gR(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:Qt);return n}function mR(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=ag(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function cg(e,t,n,r,i,o,s,a,c,l,u){let d=t.blueprint.slice();return d[qt]=i,d[k]=r|4|128|8|64|1024,(l!==null||e&&e[k]&2048)&&(d[k]|=2048),op(d),d[xe]=d[Qr]=e,d[Ue]=n,d[gn]=s||e&&e[gn],d[fe]=a||e&&e[fe],d[lo]=c||e&&e[lo]||null,d[At]=o,d[Ns]=LM(),d[As]=u,d[tp]=l,d[Nt]=t.type==2?e[Nt]:d,d}function vR(e,t,n){let r=Kt(t,e),i=mR(n),o=e[gn].rendererFactory,s=lg(e,cg(e,i,null,VC(n),r,t,null,o.createRenderer(r,n),null,null,null));return e[t.index]=s}function VC(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function jC(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function lg(e,t){return e[uo]?e[ep][St]=t:e[uo]=t,e[ep]=t,t}function B(e=1){UC(pt(),K(),gr()+e,!1)}function UC(e,t,n,r){if(!r)if((t[k]&3)===3){let o=e.preOrderCheckHooks;o!==null&&jl(t,o,n)}else{let o=e.preOrderHooks;o!==null&&Ul(t,o,0,n)}mr(n)}var uu=(function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e})(uu||{});function jp(e,t,n,r){let i=j(null);try{let[o,s,a]=e.inputs[n],c=null;(s&uu.SignalBased)!==0&&(c=t[o][ze]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(t,r)),e.setInput!==null?e.setInput(t,c,r,n,o):nC(t,c,o,r)}finally{j(i)}}var En=(function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e})(En||{}),yR;function ug(e,t){return yR(e,t)}var du=new Set;function mo(e,t,n,r,i,o){if(r!=null){let s,a=!1;Yt(r)?s=r:mn(r)&&(a=!0,r=r[qt]);let c=Mt(r);e===0&&n!==null?i==null?FC(t,n,c):Kl(t,n,c,i||null,!0):e===1&&n!==null?Kl(t,n,c,i||null,!0):e===2?kI(o,l=>{fR(t,c,a,l)}):e===3&&kI(o,()=>{t.destroyNode(c)}),s!=null&&RR(t,e,s,n,i)}}function _R(e,t){BC(e,t),t[qt]=null,t[At]=null}function ER(e,t,n,r,i,o){r[qt]=i,r[At]=t,fu(e,r,n,1,i,o)}function BC(e,t){t[gn].changeDetectionScheduler?.notify(9),fu(e,t,t[fe],2,null,null)}function IR(e){let t=e[uo];if(!t)return Dp(e[P],e);for(;t;){let n=null;if(mn(t))n=t[uo];else{let r=t[st];r&&(n=r)}if(!n){for(;t&&!t[St]&&t!==e;)mn(t)&&Dp(t[P],t),t=t[xe];t===null&&(t=e),mn(t)&&Dp(t[P],t),n=t&&t[St]}t=n}}function dg(e,t){let n=e[Os],r=n.indexOf(t);n.splice(r,1)}function HC(e,t){if(ni(t))return;let n=t[fe];n.destroyNode&&fu(e,t,n,3,null,null),IR(t)}function Dp(e,t){if(ni(t))return;let n=j(null);try{t[k]&=-129,t[k]|=256,t[ht]&&ms(t[ht]),DR(e,t),wR(e,t),t[P].type===1&&t[fe].destroy();let r=t[Jr];if(r!==null&&Yt(t[xe])){r!==t[xe]&&dg(r,t);let i=t[ei];i!==null&&i.detachView(e)}Fp(t)}finally{j(n)}}function kI(e,t){if(e&&e[Ye]&&e[Ye].leave)if(e[Ye].skipLeaveAnimations)e[Ye].skipLeaveAnimations=!1;else{let n=e[Ye].leave,r=[];for(let i=0;i<n.length;i++){let o=n[i];r.push(o())}e[Ye].running=Promise.allSettled(r),e[Ye].leave=void 0}CR(e,t)}function CR(e,t){if(e&&e[Ye]&&e[Ye].running){e[Ye].running.then(()=>{e[Ye]&&e[Ye].running&&(e[Ye].running=void 0),du.delete(e),t(!0)});return}t(!1)}function wR(e,t){let n=e.cleanup,r=t[co];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(t[co]=null);let i=t[jn];if(i!==null){t[jn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=t[Ms];if(o!==null){t[Ms]=null;for(let s of o)s.destroy()}}function DR(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof ii)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];X(4,a,c);try{c.call(a)}finally{X(5,a,c)}}else{X(4,i,o);try{o.call(i)}finally{X(5,i,o)}}}}}function bR(e,t,n){return TR(e,t.parent,n)}function TR(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[qt];if(pr(r)){let{encapsulation:i}=e.data[r.directiveStart+r.componentOffset];if(i===Gn.None||i===Gn.Emulated)return null}return Kt(r,n)}function SR(e,t,n){return NR(e,t,n)}function AR(e,t,n){return e.type&40?Kt(e,n):null}var NR=AR,PI;function fg(e,t,n,r){let i=bR(e,r,t),o=t[fe],s=r.parent||t[At],a=SR(s,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)xI(o,i,n[c],a,!1);else xI(o,i,n,a,!1);PI!==void 0&&PI(o,r,t,n,i)}function Vs(e,t){if(t!==null){let n=t.type;if(n&3)return Kt(t,e);if(n&4)return Up(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Vs(e,r);{let i=e[t.index];return Yt(i)?Up(-1,i):Mt(i)}}else{if(n&128)return Vs(e,t.next);if(n&32)return ug(t,e)()||Mt(e[t.index]);{let r=$C(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=lr(e[Nt]);return Vs(i,r)}else return Vs(e,t.next)}}}return null}function $C(e,t){if(t!==null){let r=e[Nt][At],i=t.projection;return r.projection[i]}return null}function Up(e,t){let n=st+e+1;if(n<t.length){let r=t[n],i=r[P].firstChild;if(i!==null)return Vs(r,i)}return t[hr]}function hg(e,t,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&t===0&&(a&&yo(Mt(a),r),n.flags|=2),!ng(n))if(c&8)hg(e,t,n.child,r,i,o,!1),mo(t,e,i,a,o,r);else if(c&32){let l=ug(n,r),u;for(;u=l();)mo(t,e,i,u,o,r);mo(t,e,i,a,o,r)}else c&16?MR(e,t,r,n,i,o):mo(t,e,i,a,o,r);n=s?n.projectionNext:n.next}}function fu(e,t,n,r,i,o){hg(n,r,e.firstChild,t,i,o,!1)}function MR(e,t,n,r,i,o){let s=n[Nt],c=s[At].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];mo(t,e,i,u,o,n)}else{let l=c,u=s[xe];yC(r)&&(l.flags|=128),hg(e,t,l,u,i,o,!0)}}function RR(e,t,n,r,i){let o=n[hr],s=Mt(n);o!==s&&mo(t,e,r,o,i);for(let a=st;a<n.length;a++){let c=n[a];fu(c[P],c,e,t,r,o)}}function OR(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:En.DashCase;i==null?e.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=En.Important),e.setStyle(n,r,i,o))}}function WC(e,t,n,r,i){let o=gr(),s=r&2;try{mr(-1),s&&t.length>Ne&&UC(e,t,Ne,!1),X(s?2:0,i,n),n(r,i)}finally{mr(o),X(s?3:1,i,n)}}function hu(e,t,n){UR(e,t,n),(n.flags&64)===64&&BR(e,t,n)}function pg(e,t,n=Kt){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(t,e):e[s];e[i++]=a}}}function xR(e,t,n,r){let o=r.get(bC,DC)||n===Gn.ShadowDom,s=e.selectRootElement(t,o);return kR(s),s}function kR(e){PR(e)}var PR=()=>null;function FR(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function LR(e,t,n,r,i,o){let s=t[P];if(mg(e,s,t,n,r)){pr(e)&&jR(t,e.index);return}e.type&3&&(n=FR(n)),VR(e,t,n,r,i,o)}function VR(e,t,n,r,i,o){if(e.type&3){let s=Kt(e,t);r=o!=null?o(r,e.value||"",n):r,i.setProperty(s,n,r)}else e.type&12}function jR(e,t){let n=Rt(t,e);n[k]&16||(n[k]|=64)}function UR(e,t,n){let r=n.directiveStart,i=n.directiveEnd;pr(n)&&vR(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||zl(n,t);let o=n.initialInputs;for(let s=r;s<i;s++){let a=e.data[s],c=ql(t,e,s,n);if(yo(c,t),o!==null&&GR(t,s-r,c,a,n,o),vn(a)){let l=Rt(n.index,t);l[Ue]=ql(t,e,s,n)}}}function BR(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=gI();try{mr(o);for(let a=r;a<i;a++){let c=e.data[a],l=t[a];Rl(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&HR(c,l)}}finally{mr(-1),Rl(s)}}function HR(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function gg(e,t){let n=e.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];rR(t,o.selectors,!1)&&(r??=[],vn(o)?r.unshift(o):r.push(o))}return r}function $R(e,t,n,r,i,o){let s=Kt(e,t);WR(t[fe],s,o,e.value,n,r,i)}function WR(e,t,n,r,i,o,s){if(o==null)e.removeAttribute(t,i,n);else{let a=s==null?Zr(o):s(o,r||"",i);e.setAttribute(t,i,a,n)}}function GR(e,t,n,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];jp(r,n,c,l)}}function GC(e,t,n,r,i){let o=Ne+n,s=t[P],a=i(s,t,e,r,n);t[o]=a,go(e,!0);let c=e.type===2;return c?(LC(t[fe],a,e),(nI()===0||fo(e))&&yo(a,t),rI()):yo(a,t),kl()&&(!c||!ng(e))&&fg(s,t,a,e),e}function zC(e){let t=e;return lp()?lI():(t=t.parent,go(t,!1)),t}function zR(e,t){let n=e[lo];if(!n)return;let r;try{r=n.get(Ke,null)}catch{r=null}r?.(t)}function mg(e,t,n,r,i){let o=e.inputs?.[r],s=e.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],d=t.data[l];jp(d,n[l],u,i),a=!0}if(o)for(let c of o){let l=n[c],u=t.data[c];jp(u,l,r,i),a=!0}return a}function qR(e,t){let n=Rt(t,e),r=n[P];YR(r,n);let i=n[qt];i!==null&&n[As]===null&&(n[As]=TC(i,n[lo])),X(18),vg(r,n,n[Ue]),X(19,n[Ue])}function YR(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function vg(e,t,n){Ol(t);try{let r=e.viewQuery;r!==null&&Vp(1,r,n);let i=e.template;i!==null&&WC(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[ei]?.finishViewCreation(e),e.staticContentQueries&&SC(e,t),e.staticViewQueries&&Vp(2,e.viewQuery,n);let o=e.components;o!==null&&KR(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[k]&=-5,xl()}}function KR(e,t){for(let n=0;n<t.length;n++)qR(e,t[n])}function ZR(e,t,n,r){let i=j(null);try{let o=t.tView,a=e[k]&4096?4096:16,c=cg(e,o,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=e[t.index];c[Jr]=l;let u=e[ei];return u!==null&&(c[ei]=u.createEmbeddedView(o)),vg(o,c,n),c}finally{j(i)}}function FI(e,t){return!t||t.firstChild===null||yC(e)}function Bs(e,t,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=t[n.index];o!==null&&r.push(Mt(o)),Yt(o)&&qC(o,r);let s=n.type;if(s&8)Bs(e,t,n.child,r);else if(s&32){let a=ug(n,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=$C(t,n);if(Array.isArray(a))r.push(...a);else{let c=lr(t[Nt]);Bs(c[P],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function qC(e,t){for(let n=st;n<e.length;n++){let r=e[n],i=r[P].firstChild;i!==null&&Bs(r[P],r,i,t)}e[hr]!==e[qt]&&t.push(e[hr])}function YC(e){if(e[ti]!==null){for(let t of e[ti])t.impl.addSequence(t);e[ti].length=0}}var KC=[];function QR(e){return e[ht]??JR(e)}function JR(e){let t=KC.pop()??Object.create(eO);return t.lView=e,t}function XR(e){e.lView[ht]!==e&&(e.lView=null,KC.push(e))}var eO=S(m({},Bi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{po(e.lView)},consumerOnSignalRead(){this.lView[ht]=this}});function tO(e){let t=e[ht]??Object.create(nO);return t.lView=e,t}var nO=S(m({},Bi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=lr(e.lView);for(;t&&!ZC(t[P]);)t=lr(t);t&&sp(t)},consumerOnSignalRead(){this.lView[ht]=this}});function ZC(e){return e.type!==2}function QC(e){if(e[Ms]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[Ms])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[k]&8192)}}var rO=100;function JC(e,t=0){let r=e[gn].rendererFactory,i=!1;i||r.begin?.();try{iO(e,t)}finally{i||r.end?.()}}function iO(e,t){let n=up();try{dp(!0),Bp(e,t);let r=0;for(;ks(e);){if(r===rO)throw new E(103,!1);r++,Bp(e,1)}}finally{dp(n)}}function oO(e,t,n,r){if(ni(t))return;let i=t[k],o=!1,s=!1;Ol(t);let a=!0,c=null,l=null;o||(ZC(e)?(l=QR(t),c=$i(l)):Vc()===null?(a=!1,l=tO(t),c=$i(l)):t[ht]&&(ms(t[ht]),t[ht]=null));try{op(t),fI(e.bindingStartIndex),n!==null&&WC(e,t,n,2,r),sO(t);let u=(i&3)===3;if(!o)if(u){let h=e.preOrderCheckHooks;h!==null&&jl(t,h,null)}else{let h=e.preOrderHooks;h!==null&&Ul(t,h,0,null),Cp(t,0)}if(s||aO(t),QC(t),XC(t,0),e.contentQueries!==null&&SC(e,t),!o)if(u){let h=e.contentCheckHooks;h!==null&&jl(t,h)}else{let h=e.contentHooks;h!==null&&Ul(t,h,1),Cp(t,1)}lO(e,t);let d=e.components;d!==null&&tw(t,d,0);let f=e.viewQuery;if(f!==null&&Vp(2,f,r),!o)if(u){let h=e.viewCheckHooks;h!==null&&jl(t,h)}else{let h=e.viewHooks;h!==null&&Ul(t,h,2),Cp(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[wl]){for(let h of t[wl])h();t[wl]=null}o||(YC(t),t[k]&=-73)}catch(u){throw o||po(t),u}finally{l!==null&&(ps(l,c),a&&XR(l)),xl()}}function sO(e){let t=e[Ye];if(t?.enter){for(let n of t.enter)n();t.enter=void 0}}function XC(e,t){for(let n=EC(e);n!==null;n=IC(n))for(let r=st;r<n.length;r++){let i=n[r];ew(i,t)}}function aO(e){for(let t=EC(e);t!==null;t=IC(t)){if(!(t[k]&2))continue;let n=t[Os];for(let r=0;r<n.length;r++){let i=n[r];sp(i)}}}function cO(e,t,n){X(18);let r=Rt(t,e);ew(r,n),X(19,r[Ue])}function ew(e,t){Tl(e)&&Bp(e,t)}function Bp(e,t){let r=e[P],i=e[k],o=e[ht],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&gs(o)),s||=!1,o&&(o.dirty=!1),e[k]&=-9217,s)oO(r,e,r.template,e[Ue]);else if(i&8192){let a=j(null);try{QC(e),XC(e,1);let c=r.components;c!==null&&tw(e,c,1),YC(e)}finally{j(a)}}}function tw(e,t,n){for(let r=0;r<t.length;r++)cO(e,t[r],n)}function lO(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)mr(~i);else{let o=i,s=n[++r],a=n[++r];pI(s,o);let c=t[o];X(24,c),a(2,c),X(25,c)}}}finally{mr(-1)}}function yg(e,t){let n=up()?64:1088;for(e[gn].changeDetectionScheduler?.notify(t);e;){e[k]|=n;let r=lr(e);if(ho(e)&&!r)return e;e=r}return null}function nw(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function uO(e,t,n,r=!0){let i=t[P];if(dO(i,t,e,n),r){let s=Up(n,e),a=t[fe],c=a.parentNode(e[hr]);c!==null&&ER(i,e[At],a,t,c,s)}let o=t[As];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Hp(e,t){if(e.length<=st)return;let n=st+t,r=e[n];if(r){let i=r[Jr];i!==null&&i!==e&&dg(i,r),t>0&&(e[n-1][St]=r[St]);let o=bs(e,st+t);_R(r[P],r);let s=o[ei];s!==null&&s.detachView(o[P]),r[xe]=null,r[St]=null,r[k]&=-129}return r}function dO(e,t,n,r){let i=st+r,o=n.length;r>0&&(n[i-1][St]=t),r<o-st?(t[St]=n[i],zh(n,st+r,t)):(n.push(t),t[St]=null),t[xe]=n;let s=t[Jr];s!==null&&n!==s&&rw(s,t);let a=t[ei];a!==null&&a.insertView(e),Sl(t),t[k]|=128}function rw(e,t){let n=e[Os],r=t[xe];if(mn(r))e[k]|=2;else{let i=r[xe][Nt];t[Nt]!==i&&(e[k]|=2)}n===null?e[Os]=[t]:n.push(t)}var vr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,n=t[P];return Bs(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n}get context(){return this._lView[Ue]}set context(t){this._lView[Ue]=t}get destroyed(){return ni(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[xe];if(Yt(t)){let n=t[Rs],r=n?n.indexOf(this):-1;r>-1&&(Hp(t,r),bs(n,r))}this._attachedToViewContainer=!1}HC(this._lView[P],this._lView)}onDestroy(t){ap(this._lView,t)}markForCheck(){yg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[k]&=-129}reattach(){Sl(this._lView),this._lView[k]|=128}detectChanges(){this._lView[k]|=1024,JC(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new E(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=ho(this._lView),n=this._lView[Jr];n!==null&&!t&&dg(n,this._lView),BC(this._lView[P],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new E(902,!1);this._appRef=t;let n=ho(this._lView),r=this._lView[Jr];r!==null&&!n&&rw(r,this._lView),Sl(this._lView)}};var qs=(()=>{class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=fO;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=ZR(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new vr(o)}}return e})();function fO(){return iw(Be(),K())}function iw(e,t){return e.type&4?new qs(t,e,ou(e,t)):null}function _g(e,t,n,r,i){let o=e.data[t];if(o===null)o=hO(e,t,n,r,i),hI()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=cI();o.injectorIndex=s===null?-1:s.injectorIndex}return go(o,!0),o}function hO(e,t,n,r,i){let o=cp(),s=lp(),a=s?o:o&&o.parent,c=e.data[t]=gO(e,a,n,t,r,i);return pO(e,c,o,s),c}function pO(e,t,n,r){e.firstChild===null&&(e.firstChild=t),n!==null&&(r?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function gO(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return oI()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Gq=new RegExp(`^(\\d+)*(${BM}|${UM})*(.*)`);var mO=()=>null;function LI(e,t){return mO(e,t)}var ow=class{},pu=class{},$p=class{resolveComponentFactory(t){throw new E(917,!1)}},Ys=class{static NULL=new $p},oi=class{},Jt=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>vO()}return e})();function vO(){let e=K(),t=Be(),n=Rt(t.index,e);return(mn(n)?n:e)[fe]}var sw=(()=>{class e{static \u0275prov=I({token:e,providedIn:"root",factory:()=>null})}return e})();var Bl={},Wp=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){let i=this.injector.get(t,Bl,r);return i!==Bl||n===Bl?i:this.parentInjector.get(t,n,r)}};function VI(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=Fh(i,a);else if(o==2){let c=a,l=t[++s];r=Fh(r,c+": "+l+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function C(e,t=0){let n=K();if(n===null)return N(e,t);let r=Be();return gC(r,n,Oe(e),t)}function Eg(){let e="invalid";throw new Error(e)}function aw(e,t,n,r,i){let o=r===null?null:{"":-1},s=i(e,n);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}EO(e,t,n,a,o,c,l)}o!==null&&r!==null&&yO(n,r,o)}function yO(e,t,n){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new E(-301,!1);r.push(t[i],o)}}function _O(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function EO(e,t,n,r,i,o,s){let a=r.length,c=!1;for(let f=0;f<a;f++){let h=r[f];!c&&vn(h)&&(c=!0,_O(e,n,f)),kp(zl(n,t),e,h.type)}TO(n,e.data.length,a);for(let f=0;f<a;f++){let h=r[f];h.providersResolver&&h.providersResolver(h)}let l=!1,u=!1,d=jC(e,t,a,null);a>0&&(n.directiveToIndex=new Map);for(let f=0;f<a;f++){let h=r[f];if(n.mergedAttrs=Us(n.mergedAttrs,h.hostAttrs),CO(e,n,t,d,h),bO(d,h,i),s!==null&&s.has(h)){let[_,T]=s.get(h);n.directiveToIndex.set(h.type,[d,_+n.directiveStart,T+n.directiveStart])}else(o===null||!o.has(h))&&n.directiveToIndex.set(h.type,d);h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let g=h.type.prototype;!l&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),l=!0),!u&&(g.ngOnChanges||g.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),u=!0),d++}IO(e,n,o)}function IO(e,t,n){for(let r=t.directiveStart;r<t.directiveEnd;r++){let i=e.data[r];if(n===null||!n.has(i))jI(0,t,i,r),jI(1,t,i,r),BI(t,r,!1);else{let o=n.get(i);UI(0,t,o,r),UI(1,t,o,r),BI(t,r,!0)}}}function jI(e,t,n,r){let i=e===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;e===0?s=t.inputs??={}:s=t.outputs??={},s[o]??=[],s[o].push(r),cw(t,o)}}function UI(e,t,n,r){let i=e===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;e===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),cw(t,s)}}function cw(e,t){t==="class"?e.flags|=8:t==="style"&&(e.flags|=16)}function BI(e,t,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=e;if(r===null||!n&&i===null||n&&o===null||sg(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===t){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===t){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}e.initialInputs??=[],e.initialInputs.push(s)}function CO(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=cr(i.type,!0)),s=new ii(o,vn(i),C,null);e.blueprint[r]=s,n[r]=s,wO(e,t,r,jC(e,n,i.hostVars,Qt),i)}function wO(e,t,n,r,i){let o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;DO(s)!=a&&s.push(a),s.push(n,r,o)}}function DO(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function bO(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;vn(t)&&(n[""]=e)}}function TO(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Ig(e,t,n,r,i,o,s,a){let c=t[P],l=c.consts,u=xs(l,s),d=_g(c,e,n,r,u);return o&&aw(c,t,d,xs(l,a),i),d.mergedAttrs=Us(d.mergedAttrs,d.attrs),d.attrs!==null&&VI(d,d.attrs,!1),d.mergedAttrs!==null&&VI(d,d.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,d),d}function Cg(e,t){sC(e,t),np(t)&&e.queries.elementEnd(t)}function wg(e){return uw(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function lw(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function uw(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function dw(e,t,n){return e[t]=n}function si(e,t,n){if(n===Qt)return!1;let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function fw(e,t,n,r){let i=si(e,t,n);return si(e,t+1,r)||i}function bp(e,t,n){return function r(i){let o=pr(e)?Rt(e.index,t):t;yg(o,5);let s=t[Ue],a=HI(t,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=HI(t,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function HI(e,t,n,r){let i=j(null);try{return X(6,t,n),n(r)!==!1}catch(o){return zR(e,o),!1}finally{X(7,t,n),j(i)}}function SO(e,t,n,r,i,o,s,a){let c=fo(e),l=!1,u=null;if(!r&&c&&(u=NO(t,n,o,e.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let d=Kt(e,n),f=r?r(d):d;$M(n,f,o,a);let h=i.listen(f,o,a);if(!AO(o)){let g=r?_=>r(Mt(_[e.index])):e.index;hw(g,t,n,o,a,h,!1)}}return l}function AO(e){return e.startsWith("animation")||e.startsWith("transition")}function NO(e,t,n,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=t[co],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function hw(e,t,n,r,i,o,s){let a=t.firstCreatePass?tI(t):null,c=eI(n),l=c.length;c.push(i,o),a&&a.push(r,e,l,(l+1)*(s?-1:1))}function $I(e,t,n,r,i,o){let s=t[n],a=t[P],l=a.data[n].outputs[r],d=s[l].subscribe(o);hw(e.index,a,t,i,o,d,!0)}var Gp=Symbol("BINDING");var Zl=class extends Ys{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=$n(t);return new ai(n,this.ngModule)}};function MO(e){return Object.keys(e).map(t=>{let[n,r,i]=e[t],o={propName:n,templateName:t,isSignal:(r&uu.SignalBased)!==0};return i&&(o.transform=i),o})}function RO(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}function OO(e,t,n){let r=t instanceof De?t:t?.injector;return r&&e.getStandaloneInjector!==null&&(r=e.getStandaloneInjector(r)||r),r?new Wp(n,r):n}function xO(e){let t=e.get(oi,null);if(t===null)throw new E(407,!1);let n=e.get(sw,null),r=e.get(ur,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function kO(e,t){let n=pw(e);return PC(t,n,n==="svg"?KE:n==="math"?ZE:null)}function pw(e){return(e.selectors[0][0]||"div").toLowerCase()}var ai=class extends pu{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=MO(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=RO(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=aR(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,r,i,o,s){X(22);let a=j(null);try{let c=this.componentDef,l=PO(r,c,s,o),u=OO(c,i||this.ngModule,t),d=xO(u),f=d.rendererFactory.createRenderer(null,c),h=r?xR(f,r,c.encapsulation,u):kO(c,f),g=s?.some(WI)||o?.some(R=>typeof R!="function"&&R.bindings.some(WI)),_=cg(null,l,null,512|VC(c),null,null,d,f,u,null,TC(h,u,!0));_[Ne]=h,Ol(_);let T=null;try{let R=Ig(Ne,_,2,"#host",()=>l.directiveRegistry,!0,0);LC(f,h,R),yo(h,_),hu(l,_,R),rg(l,R,_),Cg(l,R),n!==void 0&&LO(R,this.ngContentSelectors,n),T=Rt(R.index,_),_[Ue]=T[Ue],vg(l,_,null)}catch(R){throw T!==null&&Fp(T),Fp(_),R}finally{X(23),xl()}return new Ql(this.componentType,_,!!g)}finally{j(a)}}};function PO(e,t,n,r){let i=e?["ng-version","20.3.2"]:cR(t.selectors[0]),o=null,s=null,a=0;if(n)for(let u of n)a+=u[Gp].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let d=r[u];if(typeof d!="function")for(let f of d.bindings){a+=f[Gp].requiredVars;let h=u+1;f.create&&(f.targetIdx=h,(o??=[]).push(f)),f.update&&(f.targetIdx=h,(s??=[]).push(f))}}let c=[t];if(r)for(let u of r){let d=typeof u=="function"?u:u.type,f=Zh(d);c.push(f)}return ag(0,null,FO(o,s),1,a,c,null,null,null,[i],null)}function FO(e,t){return!e&&!t?null:n=>{if(n&1&&e)for(let r of e)r.create();if(n&2&&t)for(let r of t)r.update()}}function WI(e){let t=e[Gp].kind;return t==="input"||t==="twoWay"}var Ql=class extends ow{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Dl(n[P],Ne),this.location=ou(this._tNode,n),this.instance=Rt(this._tNode.index,n)[Ue],this.hostView=this.changeDetectorRef=new vr(n,void 0),this.componentType=t}setInput(t,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let i=this._rootLView,o=mg(r,i[P],i,t,n);this.previousInputValues.set(t,n);let s=Rt(r.index,i);yg(s,1)}get injector(){return new ri(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function LO(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var ui=(()=>{class e{static __NG_ELEMENT_ID__=VO}return e})();function VO(){let e=Be();return UO(e,K())}var jO=ui,gw=class extends jO{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return ou(this._hostTNode,this._hostLView)}get injector(){return new ri(this._hostTNode,this._hostLView)}get parentInjector(){let t=Jp(this._hostTNode,this._hostLView);if(lC(t)){let n=Wl(t,this._hostLView),r=$l(t),i=n[P].data[r+8];return new ri(i,n)}else return new ri(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=GI(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-st}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=LI(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,FI(this._hostTNode,s)),a}createComponent(t,n,r,i,o,s,a){let c=t&&!gM(t),l;if(c)l=n;else{let T=n||{};l=T.index,r=T.injector,i=T.projectableNodes,o=T.environmentInjector||T.ngModuleRef,s=T.directives,a=T.bindings}let u=c?t:new ai($n(t)),d=r||this.parentInjector;if(!o&&u.ngModule==null){let R=(c?d:this.parentInjector).get(De,null);R&&(o=R)}let f=$n(u.componentType??{}),h=LI(this._lContainer,f?.id??null),g=h?.firstChild??null,_=u.create(d,i,g,o,s,a);return this.insertImpl(_.hostView,l,FI(this._hostTNode,h)),_}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(QE(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=i[xe],l=new gw(c,c[At],c[xe]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(n),s=this._lContainer;return uO(s,i,o,r),t.attachToViewContainerRef(),zh(Tp(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=GI(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Hp(this._lContainer,n);r&&(bs(Tp(this._lContainer),n),HC(r[P],r))}detach(t){let n=this._adjustIndex(t,-1),r=Hp(this._lContainer,n);return r&&bs(Tp(this._lContainer),n)!=null?new vr(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function GI(e){return e[Rs]}function Tp(e){return e[Rs]||(e[Rs]=[])}function UO(e,t){let n,r=t[e.index];return Yt(r)?n=r:(n=nw(r,t,null,e),t[e.index]=n,lg(t,n)),HO(n,t,e,r),new gw(n,e,t)}function BO(e,t){let n=e[fe],r=n.createComment(""),i=Kt(t,e),o=n.parentNode(i);return Kl(n,o,r,n.nextSibling(i),!1),r}var HO=GO,$O=()=>!1;function WO(e,t,n){return $O(e,t,n)}function GO(e,t,n,r){if(e[hr])return;let i;n.type&8?i=Mt(r):i=BO(t,n),e[hr]=i}var zI=new Set;function di(e){zI.has(e)||(zI.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var ci=class{},gu=class{};var Jl=class extends ci{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Zl(this);constructor(t,n,r,i=!0){super(),this.ngModuleType=t,this._parent=n;let o=Kh(t);this._bootstrapComponents=xC(o.bootstrap),this._r3Injector=vp(t,n,[{provide:ci,useValue:this},{provide:Ys,useValue:this.componentFactoryResolver},...r],Un(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Xl=class extends gu{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Jl(this.moduleType,t,[])}};var Hs=class extends ci{injector;componentFactoryResolver=new Zl(this);instance=null;constructor(t){super();let n=new Yr([...t.providers,{provide:ci,useValue:this},{provide:Ys,useValue:this.componentFactoryResolver}],t.parent||Ss(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Io(e,t,n=null){return new Hs({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var zO=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Qh(!1,n.type),i=r.length>0?Io([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=I({token:e,providedIn:"environment",factory:()=>new e(N(De))})}return e})();function mt(e){return Ws(()=>{let t=mw(e),n=S(m({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Xp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(zO).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Gn.Emulated,styles:e.styles||ft,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&di("NgStandalone"),vw(n);let r=e.dependencies;return n.directiveDefs=qI(r,qO),n.pipeDefs=qI(r,BE),n.id=ZO(n),n})}function qO(e){return $n(e)||Zh(e)}function In(e){return Ws(()=>({type:e.type,bootstrap:e.bootstrap||ft,declarations:e.declarations||ft,imports:e.imports||ft,exports:e.exports||ft,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function YO(e,t){if(e==null)return dr;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=uu.None,c=null),n[o]=[r,a,c],t[o]=s}return n}function KO(e){if(e==null)return dr;let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function le(e){return Ws(()=>{let t=mw(e);return vw(t),t})}function mu(e){return{type:e.type,name:e.name,factory:null,pure:e.pure!==!1,standalone:e.standalone??!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function mw(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||dr,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||ft,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:YO(e.inputs,t),outputs:KO(e.outputs),debugInfo:null}}function vw(e){e.features?.forEach(t=>t(e))}function qI(e,t){return e?()=>{let n=typeof e=="function"?e():e,r=[];for(let i of n){let o=t(i);o!==null&&r.push(o)}return r}:null}function ZO(e){let t=0,n=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let o of r.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function QO(e){return Object.getPrototypeOf(e.prototype).constructor}function Xt(e){let t=QO(e.type),n=!0,r=[e];for(;t;){let i;if(vn(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new E(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let s=e;s.inputs=Sp(e.inputs),s.declaredInputs=Sp(e.declaredInputs),s.outputs=Sp(e.outputs);let a=i.hostBindings;a&&nx(e,a);let c=i.viewQuery,l=i.contentQueries;if(c&&ex(e,c),l&&tx(e,l),JO(e,i),kE(e.outputs,i.outputs),vn(i)&&i.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(e),a===Xt&&(n=!1)}}t=Object.getPrototypeOf(t)}XO(r)}function JO(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n])}}function XO(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Us(i.hostAttrs,n=Us(n,i.hostAttrs))}}function Sp(e){return e===dr?{}:e===ft?[]:e}function ex(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function tx(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,o)=>{t(r,i,o),n(r,i,o)}:e.contentQueries=t}function nx(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}function rx(e,t,n,r,i,o,s,a){if(n.firstCreatePass){e.mergedAttrs=Us(e.mergedAttrs,e.attrs);let u=e.tView=ag(2,e,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,e),u.queries=n.queries.embeddedTView(e))}a&&(e.flags|=a),go(e,!1);let c=ox(n,t,e,r);kl()&&fg(n,t,c,e),yo(c,t);let l=nw(c,t,c,e);t[r+Ne]=l,lg(t,l),WO(l,e,t)}function ix(e,t,n,r,i,o,s,a,c,l,u){let d=n+Ne,f;return t.firstCreatePass?(f=_g(t,d,4,s||null,a||null),Al()&&aw(t,e,f,xs(t.consts,l),gg),sC(t,f)):f=t.data[d],rx(f,e,t,n,r,i,o,c),fo(f)&&hu(t,e,f),l!=null&&pg(e,f,u),f}function ke(e,t,n,r,i,o,s,a){let c=K(),l=pt(),u=xs(l.consts,o);return ix(c,l,e,t,n,r,i,u,void 0,s,a),ke}var ox=sx;function sx(e,t,n,r){return Ps(!0),t[fe].createComment("")}var vu=(function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e})(vu||{}),fi=new D(""),yw=!1,zp=class extends oe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,qE()&&(this.destroyRef=v(yn,{optional:!0})??void 0,this.pendingTasks=v(Wn,{optional:!0})??void 0)}emit(t){let n=j(null);try{super.next(t)}finally{j(n)}}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof ce&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ee=zp;function _w(e){let t,n;function r(){e=Ls;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function YI(e){return queueMicrotask(()=>e()),()=>{e=Ls}}var Dg="isAngularZone",eu=Dg+"_ID",ax=0,pe=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ee(!1);onMicrotaskEmpty=new Ee(!1);onStable=new Ee(!1);onError=new Ee(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=yw}=t;if(typeof Zone>"u")throw new E(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,ux(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Dg)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new E(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new E(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,cx,Ls,Ls);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},cx={};function bg(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function lx(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){_w(()=>{e.callbackScheduled=!1,qp(e),e.isCheckStableRunning=!0,bg(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),qp(e)}function ux(e){let t=()=>{lx(e)},n=ax++;e._inner=e._inner.fork({name:"angular",properties:{[Dg]:!0,[eu]:n,[eu+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(dx(c))return r.invokeTask(o,s,a,c);try{return KI(e),r.invokeTask(o,s,a,c)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),ZI(e)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return KI(e),r.invoke(o,s,a,c,l)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!fx(c)&&t(),ZI(e)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,qp(e),bg(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function qp(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function KI(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function ZI(e){e._nesting--,bg(e)}var tu=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ee;onMicrotaskEmpty=new Ee;onStable=new Ee;onError=new Ee;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function dx(e){return Ew(e,"__ignore_ng_zone__")}function fx(e){return Ew(e,"__scheduler_tick__")}function Ew(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Tg=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=I({token:e,providedIn:"root",factory:()=>new e})}return e})(),Iw=[0,1,2,3],Cw=(()=>{class e{ngZone=v(pe);scheduler=v(ur);errorHandler=v(Gt,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){v(fi,{optional:!0})}execute(){let n=this.sequences.size>0;n&&X(16),this.executing=!0;for(let r of Iw)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&X(17)}register(n){let{view:r}=n;r!==void 0?((r[ti]??=[]).push(n),po(r),r[k]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(vu.AFTER_NEXT_RENDER,n):n()}static \u0275prov=I({token:e,providedIn:"root",factory:()=>new e})}return e})(),nu=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,n,r,i,o,s=null){this.impl=t,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[ti];t&&(this.view[ti]=t.filter(n=>n!==this))}};function Ks(e,t){let n=t?.injector??v(ot);return di("NgAfterNextRender"),px(e,n,t,!0)}function hx(e){return e instanceof Function?[void 0,void 0,e,void 0]:[e.earlyRead,e.write,e.mixedReadWrite,e.read]}function px(e,t,n,r){let i=t.get(Tg);i.impl??=t.get(Cw);let o=t.get(fi,null,{optional:!0}),s=n?.manualCleanup!==!0?t.get(yn):null,a=t.get(Pl,null,{optional:!0}),c=new nu(i.impl,hx(e),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var Sg=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();var Ag=new D("");function qn(e){return!!e&&typeof e.then=="function"}function yu(e){return!!e&&typeof e.subscribe=="function"}var Ng=new D("");function _u(e){return fr([{provide:Ng,multi:!0,useValue:e}])}var Mg=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=v(Ng,{optional:!0})??[];injector=v(ot);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=je(this.injector,i);if(qn(o))n.push(o);else if(yu(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Zs=new D("");function ww(){oh(()=>{let e="";throw new E(600,e)})}function Dw(e){return e.isBoundToModule}var gx=10;var Yn=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=v(Ke);afterRenderManager=v(Tg);zonelessEnabled=v(Fs);rootEffectScheduler=v(Ip);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new oe;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=v(Wn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(U(n=>!n))}constructor(){v(fi,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=v(De);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=ot.NULL){return this._injector.get(pe).run(()=>{X(10);let s=n instanceof pu;if(!this._injector.get(Mg).done){let g="";throw new E(405,g)}let c;s?c=n:c=this._injector.get(Ys).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let l=Dw(c)?void 0:this._injector.get(ci),u=r||c.selector,d=c.create(i,[],u,l),f=d.location.nativeElement,h=d.injector.get(Ag,null);return h?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),js(this.components,d),h?.unregisterApplication(f)}),this._loadComponent(d),X(11,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){X(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(vu.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new E(101,!1);let n=j(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,j(n),this.afterTick.next(),X(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(oi,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<gx;)X(14),this.synchronizeOnce(),X(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ks(i))continue;let o=r&&!this.zonelessEnabled?0:1;JC(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>ks(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;js(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Zs,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>js(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new E(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function js(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Qs(e,t,n,r){let i=K(),o=Ml();if(si(i,o,t)){let s=pt(),a=mp();$R(a,i,e,t,n,r)}return Qs}var Jq=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function ee(e,t,n){let r=K(),i=Ml();if(si(r,i,t)){let o=pt(),s=mp();LR(s,r,e,t,r[fe],n)}return ee}function QI(e,t,n,r,i){mg(t,e,n,i?"class":"style",r)}function b(e,t,n,r){let i=K(),o=i[P],s=e+Ne,a=o.firstCreatePass?Ig(s,i,2,t,gg,Al(),n,r):o.data[s];if(GC(a,i,e,t,mx),fo(a)){let c=i[P];hu(c,i,a),rg(c,a,i)}return r!=null&&pg(i,a),b}function w(){let e=pt(),t=Be(),n=zC(t);return e.firstCreatePass&&Cg(e,n),sI(n)&&aI(),iI(),n.classesWithoutHost!=null&&IM(n)&&QI(e,n,K(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&CM(n)&&QI(e,n,K(),n.stylesWithoutHost,!1),w}function vt(e,t,n,r){return b(e,t,n,r),w(),vt}var mx=(e,t,n,r,i)=>(Ps(!0),PC(t[fe],r,II()));function Eu(e,t,n){let r=K(),i=r[P],o=e+Ne,s=i.firstCreatePass?Ig(o,r,8,"ng-container",gg,Al(),t,n):i.data[o];if(GC(s,r,e,"ng-container",vx),fo(s)){let a=r[P];hu(a,r,s),rg(a,s,r)}return n!=null&&pg(r,s),Eu}function Iu(){let e=pt(),t=Be(),n=zC(t);return e.firstCreatePass&&Cg(e,n),Iu}var vx=(e,t,n,r,i)=>(Ps(!0),dR(t[fe],""));function en(){return K()}var Ll=void 0;function yx(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return t===1&&n===0?1:5}var _x=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ll,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ll,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ll,"{1} 'at' {0}",Ll],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",yx],Ap={};function yt(e){let t=Ex(e),n=JI(t);if(n)return n;let r=t.split("-")[0];if(n=JI(r),n)return n;if(r==="en")return _x;throw new E(701,!1)}function JI(e){return e in Ap||(Ap[e]=Bn.ng&&Bn.ng.common&&Bn.ng.common.locales&&Bn.ng.common.locales[e]),Ap[e]}var ge=(function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e})(ge||{});function Ex(e){return e.toLowerCase().replace(/_/g,"-")}var Js="en-US";var Ix=Js;function bw(e){typeof e=="string"&&(Ix=e.toLowerCase().replace(/_/g,"-"))}function me(e,t,n){let r=K(),i=pt(),o=Be();return Cx(i,r,r[fe],o,e,t,n),me}function Cx(e,t,n,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=bp(r,t,o),SO(r,e,t,s,n,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let d=0;d<u.length;d+=2){let f=u[d],h=u[d+1];c??=bp(r,t,o),$I(r,t,f,h,i,c)}if(l&&l.length)for(let d of l)c??=bp(r,t,o),$I(r,t,d,i,i,c)}}function He(e=1){return EI(e)}function Rg(e){let t=uI();return bl(t,Ne+e)}function Vl(e,t){return e<<17|t<<2}function li(e){return e>>17&32767}function wx(e){return(e&2)==2}function Dx(e,t){return e&131071|t<<17}function Yp(e){return e|2}function _o(e){return(e&131068)>>2}function Np(e,t){return e&-131069|t<<2}function bx(e){return(e&1)===1}function Kp(e){return e|1}function Tx(e,t,n,r,i,o){let s=o?t.classBindings:t.styleBindings,a=li(s),c=_o(s);e[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||ao(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let f=li(e[a+1]);e[r+1]=Vl(f,a),f!==0&&(e[f+1]=Np(e[f+1],r)),e[a+1]=Dx(e[a+1],r)}else e[r+1]=Vl(a,0),a!==0&&(e[a+1]=Np(e[a+1],r)),a=r;else e[r+1]=Vl(c,0),a===0?a=r:e[c+1]=Np(e[c+1],r),c=r;l&&(e[r+1]=Yp(e[r+1])),XI(e,u,r,!0),XI(e,u,r,!1),Sx(t,u,e,r,o),s=Vl(a,c),o?t.classBindings=s:t.styleBindings=s}function Sx(e,t,n,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&ao(o,t)>=0&&(n[r+1]=Kp(n[r+1]))}function XI(e,t,n,r){let i=e[n+1],o=t===null,s=r?li(i):_o(i),a=!1;for(;s!==0&&(a===!1||o);){let c=e[s],l=e[s+1];Ax(c,t)&&(a=!0,e[s+1]=r?Kp(l):Yp(l)),s=r?li(l):_o(l)}a&&(e[n+1]=r?Yp(i):Kp(i))}function Ax(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?ao(e,t)>=0:!1}function hi(e,t,n){return Tw(e,t,n,!1),hi}function Xs(e,t){return Tw(e,t,null,!0),Xs}function Tw(e,t,n,r){let i=K(),o=pt(),s=fp(2);if(o.firstUpdatePass&&Mx(o,e,s,r),t!==Qt&&si(i,s,t)){let a=o.data[gr()];Px(o,a,i,i[fe],e,i[s+1]=Fx(t,n),r,s)}}function Nx(e,t){return t>=e.expandoStartIndex}function Mx(e,t,n,r){let i=e.data;if(i[n+1]===null){let o=i[gr()],s=Nx(e,n);Lx(o,r)&&t===null&&!s&&(t=!1),t=Rx(i,o,t,r),Tx(i,o,t,n,s,r)}}function Rx(e,t,n,r){let i=mI(e),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=Mp(null,e,t,n,r),n=$s(n,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==i)if(n=Mp(i,e,t,n,r),o===null){let c=Ox(e,t,r);c!==void 0&&Array.isArray(c)&&(c=Mp(null,e,t,c[1],r),c=$s(c,t.attrs,r),xx(e,t,r,c))}else o=kx(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function Ox(e,t,n){let r=n?t.classBindings:t.styleBindings;if(_o(r)!==0)return e[li(r)]}function xx(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[li(i)]=r}function kx(e,t,n){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=e[o].hostAttrs;r=$s(r,s,n)}return $s(r,t.attrs,n)}function Mp(e,t,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=t[a],r=$s(r,o.hostAttrs,i),o!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function $s(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),UE(e,s,n?!0:t[++o]))}return e===void 0?null:e}function Px(e,t,n,r,i,o,s,a){if(!(t.type&3))return;let c=e.data,l=c[a+1],u=bx(l)?eC(c,t,n,i,_o(l),s):void 0;if(!ru(u)){ru(o)||wx(l)&&(o=eC(c,null,n,i,a,s));let d=rp(gr(),n);OR(r,s,d,i,o)}}function eC(e,t,n,r,i,o){let s=t===null,a;for(;i>0;){let c=e[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,f=n[i+1];f===Qt&&(f=d?ft:void 0);let h=d?Cl(f,r):u===r?f:void 0;if(l&&!ru(h)&&(h=Cl(c,r)),ru(h)&&(a=h,s))return a;let g=e[i+1];i=s?li(g):_o(g)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(a=Cl(c,r))}return a}function ru(e){return e!==void 0}function Fx(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=Un(zs(e)))),e}function Lx(e,t){return(e.flags&(t?8:16))!==0}function A(e,t=""){let n=K(),r=pt(),i=e+Ne,o=r.firstCreatePass?_g(r,i,1,t,null):r.data[i],s=Vx(r,n,o,t,e);n[i]=s,kl()&&fg(r,n,s,o),go(o,!1)}var Vx=(e,t,n,r,i)=>(Ps(!0),lR(t[fe],r));function jx(e,t,n,r=""){return si(e,Ml(),n)?t+Zr(n)+r:Qt}function Ux(e,t,n,r,i,o=""){let s=dI(),a=fw(e,s,n,i);return fp(2),a?t+Zr(n)+r+Zr(i)+o:Qt}function Cn(e){return _t("",e),Cn}function _t(e,t,n){let r=K(),i=jx(r,e,t,n);return i!==Qt&&Sw(r,gr(),i),_t}function Cu(e,t,n,r,i){let o=K(),s=Ux(o,e,t,n,r,i);return s!==Qt&&Sw(o,gr(),s),Cu}function Sw(e,t,n){let r=rp(t,e);uR(e[fe],r,n)}function Bx(e,t,n){let r=pt();if(r.firstCreatePass){let i=vn(e);Zp(n,r.data,r.blueprint,i,!0),Zp(t,r.data,r.blueprint,i,!1)}}function Zp(e,t,n,r,i){if(e=Oe(e),Array.isArray(e))for(let o=0;o<e.length;o++)Zp(e[o],t,n,r,i);else{let o=pt(),s=K(),a=Be(),c=qr(e)?e:Oe(e.provide),l=Xh(e),u=a.providerIndexes&1048575,d=a.directiveStart,f=a.providerIndexes>>20;if(qr(e)||!e.multi){let h=new ii(l,i,C,null),g=Op(c,t,i?u:u+f,d);g===-1?(kp(zl(a,s),o,c),Rp(o,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(h),s.push(h)):(n[g]=h,s[g]=h)}else{let h=Op(c,t,u+f,d),g=Op(c,t,u,u+f),_=h>=0&&n[h],T=g>=0&&n[g];if(i&&!T||!i&&!_){kp(zl(a,s),o,c);let R=Wx(i?$x:Hx,n.length,i,r,l,e);!i&&T&&(n[g].providerFactory=R),Rp(o,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(R),s.push(R)}else{let R=Aw(n[i?g:h],l,!i&&r);Rp(o,e,h>-1?h:g,R)}!i&&r&&T&&n[g].componentProviders++}}}function Rp(e,t,n,r){let i=qr(t),o=zE(t);if(i||o){let c=(o?Oe(t.useClass):t).prototype.ngOnDestroy;if(c){let l=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function Aw(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Op(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function Hx(e,t,n,r,i){return Qp(this.multi,[])}function $x(e,t,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=ql(r,r[P],this.providerFactory.index,i);s=c.slice(0,a),Qp(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],Qp(o,s);return s}function Qp(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function Wx(e,t,n,r,i,o){let s=new ii(e,n,C,null);return s.multi=[],s.index=t,s.componentProviders=0,Aw(s,i,r&&!n),s}function pi(e,t=[]){return n=>{n.providersResolver=(r,i)=>Bx(r,i?i(e):e,t)}}function wu(e,t,n,r){return Mw(K(),Nl(),e,t,n,r)}function Nw(e,t){let n=e[t];return n===Qt?void 0:n}function Mw(e,t,n,r,i,o){let s=t+n;return si(e,s,i)?dw(e,s+1,o?r.call(o,i):r(i)):Nw(e,s+1)}function Gx(e,t,n,r,i,o,s){let a=t+n;return fw(e,a,i,o)?dw(e,a+2,s?r.call(s,i,o):r(i,o)):Nw(e,a+2)}function gi(e,t){let n=pt(),r,i=e+Ne;n.firstCreatePass?(r=zx(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=cr(r.type,!0)),s,a=qe(C);try{let c=Gl(!1),l=o();return Gl(c),ip(n,K(),i,l),l}finally{qe(a)}}function zx(e,t){if(t)for(let n=t.length-1;n>=0;n--){let r=t[n];if(e===r.name)return r}}function Co(e,t,n){let r=e+Ne,i=K(),o=bl(i,r);return Rw(i,r)?Mw(i,Nl(),t,o.transform,n,o):o.transform(n)}function Og(e,t,n,r){let i=e+Ne,o=K(),s=bl(o,i);return Rw(o,i)?Gx(o,Nl(),t,s.transform,n,r,s):s.transform(n,r)}function Rw(e,t){return e[P].data[t].pure}function xg(e,t){return iw(e,t)}var iu=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},kg=(()=>{class e{compileModuleSync(n){return new Xl(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Kh(n),o=xC(i.declarations).reduce((s,a)=>{let c=$n(a);return c&&s.push(new ai(c)),s},[]);return new iu(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var qx=(()=>{class e{zone=v(pe);changeDetectionScheduler=v(ur);applicationRef=v(Yn);applicationErrorHandler=v(Ke);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ow=new D("",{factory:()=>!1});function Pg({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new pe(S(m({},Lg()),{scheduleInRootZone:n})),[{provide:pe,useFactory:e},{provide:Hn,multi:!0,useFactory:()=>{let r=v(qx,{optional:!0});return()=>r.initialize()}},{provide:Hn,multi:!0,useFactory:()=>{let r=v(Yx);return()=>{r.initialize()}}},t===!0?{provide:_p,useValue:!0}:[],{provide:Ep,useValue:n??yw},{provide:Ke,useFactory:()=>{let r=v(pe),i=v(De),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Gt),o.handleError(s))})}}}]}function Fg(e){let t=e?.ignoreChangesOutsideZone,n=e?.scheduleInRootZone,r=Pg({ngZoneFactory:()=>{let i=Lg(e);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&di("NgZone_CoalesceEvent"),new pe(i)},ignoreChangesOutsideZone:t,scheduleInRootZone:n});return fr([{provide:Ow,useValue:!0},{provide:Fs,useValue:!1},r])}function Lg(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var Yx=(()=>{class e{subscription=new ce;initialized=!1;zone=v(pe);pendingTasks=v(Wn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{pe.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var xw=(()=>{class e{applicationErrorHandler=v(Ke);appRef=v(Yn);taskService=v(Wn);ngZone=v(pe);zonelessEnabled=v(Fs);tracing=v(fi,{optional:!0});disableScheduling=v(_p,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ce;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(eu):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(v(Ep,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof tu||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?YI:_w;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(eu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,YI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Kx(){return typeof $localize<"u"&&$localize.locale||Js}var ea=new D("",{providedIn:"root",factory:()=>v(ea,{optional:!0,skipSelf:!0})||Kx()});function Ie(e){return RE(e)}function wo(e,t){return Bc(e,t?.equal)}var kw=class{[ze];constructor(t){this[ze]=t}destroy(){this[ze].destroy()}};var Uw=Symbol("InputSignalNode#UNSET"),uk=S(m({},Hc),{transformFn:void 0,applyValueToInputSignal(e,t){Gi(e,t)}});function Bw(e,t){let n=Object.create(uk);n.value=e,n.transformFn=t?.transform;function r(){if(Hi(n),n.value===Uw){let i=null;throw new E(-950,i)}return n.value}return r[ze]=n,r}var bu=class{attributeName;constructor(t){this.attributeName=t}__NG_ELEMENT_ID__=()=>Gs(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},dk=new D("");dk.__NG_ELEMENT_ID__=e=>{let t=Be();if(t===null)throw new E(204,!1);if(t.type&2)return t.value;if(e&8)return null;throw new E(204,!1)};function Pw(e,t){return Bw(e,t)}function fk(e){return Bw(Uw,e)}var Hw=(Pw.required=fk,Pw);var Vg=new D(""),hk=new D("");function ta(e){return!e.moduleRef}function pk(e){let t=ta(e)?e.r3Injector:e.moduleRef.injector,n=t.get(pe);return n.run(()=>{ta(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(Ke),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),ta(e)){let o=()=>t.destroy(),s=e.platformInjector.get(Vg);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>e.moduleRef.destroy(),s=e.platformInjector.get(Vg);s.add(o),e.moduleRef.onDestroy(()=>{js(e.allPlatformModules,e.moduleRef),i.unsubscribe(),s.delete(o)})}return mk(r,n,()=>{let o=t.get(Wn),s=o.add(),a=t.get(Mg);return a.runInitializers(),a.donePromise.then(()=>{let c=t.get(ea,Js);if(bw(c||Js),!t.get(hk,!0))return ta(e)?t.get(Yn):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(ta(e)){let u=t.get(Yn);return e.rootComponent!==void 0&&u.bootstrap(e.rootComponent),u}else return gk?.(e.moduleRef,e.allPlatformModules),e.moduleRef}).finally(()=>void o.remove(s))})})}var gk;function mk(e,t,n){try{let r=n();return qn(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e(r)),r}}var Du=null;function vk(e=[],t){return ot.create({name:t,providers:[{provide:Ts,useValue:"platform"},{provide:Vg,useValue:new Set([()=>Du=null])},...e]})}function yk(e=[]){if(Du)return Du;let t=vk(e);return Du=t,ww(),_k(t),t}function _k(e){let t=e.get(au,null);je(e,()=>{t?.forEach(n=>n())})}var _r=(()=>{class e{static __NG_ELEMENT_ID__=Ek}return e})();function Ek(e){return Ik(Be(),K(),(e&16)===16)}function Ik(e,t,n){if(pr(e)&&!n){let r=Rt(e.index,t);return new vr(r,r)}else if(e.type&175){let r=t[Nt];return new vr(r,t)}return null}var jg=class{constructor(){}supports(t){return wg(t)}create(t){return new Ug(t)}},Ck=(e,t)=>t,Ug=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||Ck}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<Fw(r,i,o)?n:r,a=Fw(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let f=0;f<l;f++){let h=f<o.length?o[f]:o[f]=0,g=h+f;u<=g&&g<l&&(o[f]=h+1)}let d=s.previousIndex;o[d]=u-l}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!wg(t))throw new E(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,lw(t,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new Bg(n,r),o,i)),t}_verifyReinsertion(t,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let i=n===null?this._itHead:n._next;return t._next=i,t._prev=n,i===null?this._itTail=t:i._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new Tu),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Tu),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Bg=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,n){this.item=t,this.trackById=n}},Hg=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Tu=class{map=new Map;put(t){let n=t.trackById,r=this.map.get(n);r||(r=new Hg,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,i=this.map.get(r);return i?i.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Fw(e,t,n){let r=e.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function Lw(){return new $g([new jg])}var $g=(()=>{class e{factories;static \u0275prov=I({token:e,providedIn:"root",factory:Lw});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:()=>{let r=v(e,{optional:!0,skipSelf:!0});return e.create(n,r||Lw())}}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new E(901,!1)}}return e})();function $w(e){let{rootComponent:t,appProviders:n,platformProviders:r,platformRef:i}=e;X(8);try{let o=i?.injector??yk(r),s=[Pg({}),{provide:ur,useExisting:xw},wI,...n||[]],a=new Hs({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return pk({r3Injector:a.injector,platformInjector:o,rootComponent:t})}catch(o){return Promise.reject(o)}finally{X(9)}}function Do(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function Ww(e){let t=$n(e);if(!t)return null;let n=new ai(t);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var qw=null;function Pt(){return qw}function Wg(e){qw??=e}var na=class{},ra=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>v(Yw),providedIn:"platform"})}return e})(),Gg=new D(""),Yw=(()=>{class e extends ra{_location;_history;_doc=v(he);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pt().getBaseHref(this._doc)}onPopState(n){let r=Pt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Pt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function Su(e,t){return e?t?e.endsWith("/")?t.startsWith("/")?e+t.slice(1):e+t:t.startsWith("/")?e+t:`${e}/${t}`:e:t}function Gw(e){let t=e.search(/#|\?|$/);return e[t-1]==="/"?e.slice(0,t-1)+e.slice(t):e}function tn(e){return e&&e[0]!=="?"?`?${e}`:e}var nn=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>v(Nu),providedIn:"root"})}return e})(),Au=new D(""),Nu=(()=>{class e extends nn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??v(he).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Su(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+tn(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+tn(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+tn(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(N(ra),N(Au,8))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Er=(()=>{class e{_subject=new oe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=bk(Gw(zw(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+tn(r))}normalize(n){return e.stripTrailingSlash(Dk(this._basePath,zw(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+tn(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+tn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=tn;static joinWithSlash=Su;static stripTrailingSlash=Gw;static \u0275fac=function(r){return new(r||e)(N(nn))};static \u0275prov=I({token:e,factory:()=>wk(),providedIn:"root"})}return e})();function wk(){return new Er(N(nn))}function Dk(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function zw(e){return e.replace(/\/index.html$/,"")}function bk(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var Jg=(()=>{class e extends nn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=Su(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+tn(o))||this._platformLocation.pathname;this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+tn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(N(ra),N(Au,8))};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})();var We=(function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e})(We||{}),ne=(function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e})(ne||{}),at=(function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e})(at||{}),Zn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Xw(e){return yt(e)[ge.LocaleId]}function eD(e,t,n){let r=yt(e),i=[r[ge.DayPeriodsFormat],r[ge.DayPeriodsStandalone]],o=Ft(i,t);return Ft(o,n)}function tD(e,t,n){let r=yt(e),i=[r[ge.DaysFormat],r[ge.DaysStandalone]],o=Ft(i,t);return Ft(o,n)}function nD(e,t,n){let r=yt(e),i=[r[ge.MonthsFormat],r[ge.MonthsStandalone]],o=Ft(i,t);return Ft(o,n)}function rD(e,t){let r=yt(e)[ge.Eras];return Ft(r,t)}function ia(e,t){let n=yt(e);return Ft(n[ge.DateFormat],t)}function oa(e,t){let n=yt(e);return Ft(n[ge.TimeFormat],t)}function sa(e,t){let r=yt(e)[ge.DateTimeFormat];return Ft(r,t)}function aa(e,t){let n=yt(e),r=n[ge.NumberSymbols][t];if(typeof r>"u"){if(t===Zn.CurrencyDecimal)return n[ge.NumberSymbols][Zn.Decimal];if(t===Zn.CurrencyGroup)return n[ge.NumberSymbols][Zn.Group]}return r}function iD(e){if(!e[ge.ExtraData])throw new E(2303,!1)}function oD(e){let t=yt(e);return iD(t),(t[ge.ExtraData][2]||[]).map(r=>typeof r=="string"?zg(r):[zg(r[0]),zg(r[1])])}function sD(e,t,n){let r=yt(e);iD(r);let i=[r[ge.ExtraData][0],r[ge.ExtraData][1]],o=Ft(i,t)||[];return Ft(o,n)||[]}function Ft(e,t){for(let n=t;n>-1;n--)if(typeof e[n]<"u")return e[n];throw new E(2304,!1)}function zg(e){let[t,n]=e.split(":");return{hours:+t,minutes:+n}}var Tk=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Mu={},Sk=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function aD(e,t,n,r){let i=Fk(e);t=Kn(n,t)||t;let s=[],a;for(;t;)if(a=Sk.exec(t),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;t=u}else{s.push(t);break}let c=i.getTimezoneOffset();r&&(c=lD(r,c),i=Pk(i,r));let l="";return s.forEach(u=>{let d=xk(u);l+=d?d(i,n,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Pu(e,t,n){let r=new Date(0);return r.setFullYear(e,t,n),r.setHours(0,0,0),r}function Kn(e,t){let n=Xw(e);if(Mu[n]??={},Mu[n][t])return Mu[n][t];let r="";switch(t){case"shortDate":r=ia(e,at.Short);break;case"mediumDate":r=ia(e,at.Medium);break;case"longDate":r=ia(e,at.Long);break;case"fullDate":r=ia(e,at.Full);break;case"shortTime":r=oa(e,at.Short);break;case"mediumTime":r=oa(e,at.Medium);break;case"longTime":r=oa(e,at.Long);break;case"fullTime":r=oa(e,at.Full);break;case"short":let i=Kn(e,"shortTime"),o=Kn(e,"shortDate");r=Ru(sa(e,at.Short),[i,o]);break;case"medium":let s=Kn(e,"mediumTime"),a=Kn(e,"mediumDate");r=Ru(sa(e,at.Medium),[s,a]);break;case"long":let c=Kn(e,"longTime"),l=Kn(e,"longDate");r=Ru(sa(e,at.Long),[c,l]);break;case"full":let u=Kn(e,"fullTime"),d=Kn(e,"fullDate");r=Ru(sa(e,at.Full),[u,d]);break}return r&&(Mu[n][t]=r),r}function Ru(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(n,r){return t!=null&&r in t?t[r]:n})),e}function rn(e,t,n="-",r,i){let o="";(e<0||i&&e<=0)&&(i?e=-e+1:(e=-e,o=n));let s=String(e);for(;s.length<t;)s="0"+s;return r&&(s=s.slice(s.length-t)),o+s}function Ak(e,t){return rn(e,3).substring(0,t)}function Ce(e,t,n=0,r=!1,i=!1){return function(o,s){let a=Nk(e,o);if((n>0||a>-n)&&(a+=n),e===3)a===0&&n===-12&&(a=12);else if(e===6)return Ak(a,t);let c=aa(s,Zn.MinusSign);return rn(a,t,c,r,i)}}function Nk(e,t){switch(e){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new E(2301,!1)}}function re(e,t,n=We.Format,r=!1){return function(i,o){return Mk(i,o,e,t,n,r)}}function Mk(e,t,n,r,i,o){switch(n){case 2:return nD(t,i,r)[e.getMonth()];case 1:return tD(t,i,r)[e.getDay()];case 0:let s=e.getHours(),a=e.getMinutes();if(o){let l=oD(t),u=sD(t,i,r),d=l.findIndex(f=>{if(Array.isArray(f)){let[h,g]=f,_=s>=h.hours&&a>=h.minutes,T=s<g.hours||s===g.hours&&a<g.minutes;if(h.hours<g.hours){if(_&&T)return!0}else if(_||T)return!0}else if(f.hours===s&&f.minutes===a)return!0;return!1});if(d!==-1)return u[d]}return eD(t,i,r)[s<12?0:1];case 3:return rD(t,r)[e.getFullYear()<=0?0:1];default:let c=n;throw new E(2302,!1)}}function Ou(e){return function(t,n,r){let i=-1*r,o=aa(n,Zn.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(e){case 0:return(i>=0?"+":"")+rn(s,2,o)+rn(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+rn(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+rn(s,2,o)+":"+rn(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+rn(s,2,o)+":"+rn(Math.abs(i%60),2,o);default:throw new E(2310,!1)}}}var Rk=0,ku=4;function Ok(e){let t=Pu(e,Rk,1).getDay();return Pu(e,0,1+(t<=ku?ku:ku+7)-t)}function cD(e){let t=e.getDay(),n=t===0?-3:ku-t;return Pu(e.getFullYear(),e.getMonth(),e.getDate()+n)}function qg(e,t=!1){return function(n,r){let i;if(t){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=cD(n),s=Ok(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return rn(i,e,aa(r,Zn.MinusSign))}}function xu(e,t=!1){return function(n,r){let o=cD(n).getFullYear();return rn(o,e,aa(r,Zn.MinusSign),t)}}var Yg={};function xk(e){if(Yg[e])return Yg[e];let t;switch(e){case"G":case"GG":case"GGG":t=re(3,ne.Abbreviated);break;case"GGGG":t=re(3,ne.Wide);break;case"GGGGG":t=re(3,ne.Narrow);break;case"y":t=Ce(0,1,0,!1,!0);break;case"yy":t=Ce(0,2,0,!0,!0);break;case"yyy":t=Ce(0,3,0,!1,!0);break;case"yyyy":t=Ce(0,4,0,!1,!0);break;case"Y":t=xu(1);break;case"YY":t=xu(2,!0);break;case"YYY":t=xu(3);break;case"YYYY":t=xu(4);break;case"M":case"L":t=Ce(1,1,1);break;case"MM":case"LL":t=Ce(1,2,1);break;case"MMM":t=re(2,ne.Abbreviated);break;case"MMMM":t=re(2,ne.Wide);break;case"MMMMM":t=re(2,ne.Narrow);break;case"LLL":t=re(2,ne.Abbreviated,We.Standalone);break;case"LLLL":t=re(2,ne.Wide,We.Standalone);break;case"LLLLL":t=re(2,ne.Narrow,We.Standalone);break;case"w":t=qg(1);break;case"ww":t=qg(2);break;case"W":t=qg(1,!0);break;case"d":t=Ce(2,1);break;case"dd":t=Ce(2,2);break;case"c":case"cc":t=Ce(7,1);break;case"ccc":t=re(1,ne.Abbreviated,We.Standalone);break;case"cccc":t=re(1,ne.Wide,We.Standalone);break;case"ccccc":t=re(1,ne.Narrow,We.Standalone);break;case"cccccc":t=re(1,ne.Short,We.Standalone);break;case"E":case"EE":case"EEE":t=re(1,ne.Abbreviated);break;case"EEEE":t=re(1,ne.Wide);break;case"EEEEE":t=re(1,ne.Narrow);break;case"EEEEEE":t=re(1,ne.Short);break;case"a":case"aa":case"aaa":t=re(0,ne.Abbreviated);break;case"aaaa":t=re(0,ne.Wide);break;case"aaaaa":t=re(0,ne.Narrow);break;case"b":case"bb":case"bbb":t=re(0,ne.Abbreviated,We.Standalone,!0);break;case"bbbb":t=re(0,ne.Wide,We.Standalone,!0);break;case"bbbbb":t=re(0,ne.Narrow,We.Standalone,!0);break;case"B":case"BB":case"BBB":t=re(0,ne.Abbreviated,We.Format,!0);break;case"BBBB":t=re(0,ne.Wide,We.Format,!0);break;case"BBBBB":t=re(0,ne.Narrow,We.Format,!0);break;case"h":t=Ce(3,1,-12);break;case"hh":t=Ce(3,2,-12);break;case"H":t=Ce(3,1);break;case"HH":t=Ce(3,2);break;case"m":t=Ce(4,1);break;case"mm":t=Ce(4,2);break;case"s":t=Ce(5,1);break;case"ss":t=Ce(5,2);break;case"S":t=Ce(6,1);break;case"SS":t=Ce(6,2);break;case"SSS":t=Ce(6,3);break;case"Z":case"ZZ":case"ZZZ":t=Ou(0);break;case"ZZZZZ":t=Ou(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Ou(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=Ou(2);break;default:return null}return Yg[e]=t,t}function lD(e,t){e=e.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function kk(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function Pk(e,t,n){let i=e.getTimezoneOffset(),o=lD(t,i);return kk(e,-1*(o-i))}function Fk(e){if(Kw(e))return e;if(typeof e=="number"&&!isNaN(e))return new Date(e);if(typeof e=="string"){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){let[i,o=1,s=1]=e.split("-").map(a=>+a);return Pu(i,o-1,s)}let n=parseFloat(e);if(!isNaN(e-n))return new Date(n);let r;if(r=e.match(Tk))return Lk(r)}let t=new Date(e);if(!Kw(t))throw new E(2311,!1);return t}function Lk(e){let t=new Date(0),n=0,r=0,i=e[8]?t.setUTCFullYear:t.setFullYear,o=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),r=Number(e[9]+e[11])),i.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));let s=Number(e[4]||0)-n,a=Number(e[5]||0)-r,c=Number(e[6]||0),l=Math.floor(parseFloat("0."+(e[7]||0))*1e3);return o.call(t,s,a,c,l),t}function Kw(e){return e instanceof Date&&!isNaN(e.valueOf())}var Kg=/\s+/,Zw=[],Xg=(()=>{class e{_ngEl;_renderer;initialClasses=Zw;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(Kg):Zw}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(Kg):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(Kg).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||e)(C(kt),C(Jt))};static \u0275dir=le({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return e})();var Fu=class{$implicit;ngForOf;index;count;constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Vu=(()=>{class e{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Fu(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Qw(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Qw(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(C(ui),C(qs),C($g))};static \u0275dir=le({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return e})();function Qw(e,t){e.context.$implicit=t.item}var on=(()=>{class e{_viewContainer;_context=new Lu;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Jw(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Jw(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(C(ui),C(qs))};static \u0275dir=le({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return e})(),Lu=class{$implicit=null;ngIf=null};function Jw(e,t){if(e&&!e.createEmbeddedView)throw new E(2020,!1)}function uD(e,t){return new E(2100,!1)}var Zg=class{createSubscription(t,n,r){return Ie(()=>t.subscribe({next:n,error:r}))}dispose(t){Ie(()=>t.unsubscribe())}},Qg=class{createSubscription(t,n,r){return t.then(i=>n?.(i),i=>r?.(i)),{unsubscribe:()=>{n=null,r=null}}}dispose(t){t.unsubscribe()}},Vk=new Qg,jk=new Zg,ca=(()=>{class e{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=v(Ke);constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r),r=>this.applicationErrorHandler(r))}_selectStrategy(n){if(qn(n))return Vk;if(yu(n))return jk;throw uD(e,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||e)(C(_r,16))};static \u0275pipe=mu({name:"async",type:e,pure:!1})}return e})();var Uk="mediumDate",dD=new D(""),fD=new D(""),em=(()=>{class e{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??Uk,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return aD(n,s,o||this.locale,a)}catch(s){throw uD(e,s.message)}}static \u0275fac=function(r){return new(r||e)(C(ea,16),C(dD,24),C(fD,24))};static \u0275pipe=mu({name:"date",type:e,pure:!0})}return e})();var Lt=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=In({type:e});static \u0275inj=zt({})}return e})();function tm(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var la=class{};var hD="browser";var pD=(()=>{class e{static \u0275prov=I({token:e,providedIn:"root",factory:()=>new nm(v(he),window)})}return e})(),nm=class{document;window;offset=()=>[0,0];constructor(t,n){this.document=t,this.window=n}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t,n){this.window.scrollTo(S(m({},n),{left:t[0],top:t[1]}))}scrollToAnchor(t,n){let r=Bk(this.document,t);r&&(this.scrollToElement(r,n),r.focus())}setHistoryScrollRestoration(t){try{this.window.history.scrollRestoration=t}catch{console.warn(so(2400,!1))}}scrollToElement(t,n){let r=t.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(S(m({},n),{left:i-s[0],top:o-s[1]}))}};function Bk(e,t){let n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if(typeof e.createTreeWalker=="function"&&e.body&&typeof e.body.attachShadow=="function"){let r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}i=r.nextNode()}}return null}var Uu=new D(""),am=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new E(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(N(Uu),N(pe))};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})(),ua=class{_doc;constructor(t){this._doc=t}manager},rm="ng-app-id";function gD(e){for(let t of e)t.remove()}function mD(e,t){let n=t.createElement("style");return n.textContent=e,n}function Hk(e,t,n,r){let i=e.head?.querySelectorAll(`style[${rm}="${t}"],link[${rm}="${t}"]`);if(i)for(let o of i)o.removeAttribute(rm),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function om(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var cm=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,Hk(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,mD);r?.forEach(i=>this.addUsage(i,this.external,om))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(gD(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])gD(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,mD(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,om(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(N(he),N(su),N(cu,8),N(Eo))};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})(),im={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},lm=/%COMP%/g;var yD="%COMP%",$k=`_nghost-${yD}`,Wk=`_ngcontent-${yD}`,Gk=!0,zk=new D("",{providedIn:"root",factory:()=>Gk});function qk(e){return Wk.replace(lm,e)}function Yk(e){return $k.replace(lm,e)}function _D(e,t){return t.map(n=>n.replace(lm,e))}var um=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,c,l=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new da(n,s,c,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof ju?i.applyToHost(n):i instanceof fa&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,f=this.tracingService;switch(r.encapsulation){case Gn.Emulated:o=new ju(c,l,r,this.appId,u,s,a,d,f);break;case Gn.ShadowDom:return new sm(c,l,n,r,s,a,this.nonce,d,f);default:o=new fa(c,l,r,u,s,a,d,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||e)(N(am),N(cm),N(su),N(zk),N(he),N(Eo),N(pe),N(cu),N(fi,8))};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})(),da=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,i,o){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(im[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(vD(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(vD(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new E(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=im[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=im[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(En.DashCase|En.Important)?t.style.setProperty(n,r,i&En.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&En.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r,i){if(typeof t=="string"&&(t=Pt().getGlobalEventTarget(this.doc,t),!t))throw new E(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,n,o)),this.eventManager.addEventListener(t,n,o,i)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;t(n)===!1&&n.preventDefault()}}};function vD(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var sm=class extends da{sharedStylesHost;hostEl;shadowRoot;constructor(t,n,r,i,o,s,a,c,l){super(t,o,s,c,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=_D(i.id,u);for(let f of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=f,this.shadowRoot.appendChild(h)}let d=i.getExternalStyles?.();if(d)for(let f of d){let h=om(f,o);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},fa=class extends da{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,i,o,s,a,c,l){super(t,o,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?_D(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&du.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ju=class extends fa{contentAttr;hostAttr;constructor(t,n,r,i,o,s,a,c,l){let u=i+"-"+r.id;super(t,n,r,o,s,a,c,l,u),this.contentAttr=qk(u),this.hostAttr=Yk(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}};var Bu=class e extends na{supportsDOMEvents=!0;static makeCurrent(){Wg(new e)}onAndCancel(t,n,r,i){return t.addEventListener(n,r,i),()=>{t.removeEventListener(n,r,i)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=Kk();return n==null?null:Zk(n)}resetBaseElement(){ha=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return tm(document.cookie,t)}},ha=null;function Kk(){return ha=ha||document.head.querySelector("base"),ha?ha.getAttribute("href"):null}function Zk(e){return new URL(e,document.baseURI).pathname}var Qk=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})(),ID=(()=>{class e extends ua{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||e)(N(he))};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})(),ED=["alt","control","meta","shift"],Jk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Xk={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},CD=(()=>{class e extends ua{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pt().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),ED.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=Jk[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),ED.forEach(s=>{if(s!==i){let a=Xk[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(N(he))};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})();function dm(e,t,n){let r=m({rootComponent:e,platformRef:n?.platformRef},eP(t));return $w(r)}function eP(e){return{appProviders:[...oP,...e?.providers??[]],platformProviders:iP}}function tP(){Bu.makeCurrent()}function nP(){return new Gt}function rP(){return eg(document),document}var iP=[{provide:Eo,useValue:hD},{provide:au,useValue:tP,multi:!0},{provide:he,useFactory:rP}];var oP=[{provide:Ts,useValue:"root"},{provide:Gt,useFactory:nP},{provide:Uu,useClass:ID,multi:!0,deps:[he]},{provide:Uu,useClass:CD,multi:!0,deps:[he]},um,cm,am,{provide:oi,useExisting:um},{provide:la,useClass:Qk},[]];var wD=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||e)(N(he))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var L="primary",Ta=Symbol("RouteTitle"),mm=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function yi(e){return new mm(e)}function RD(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=e[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function aP(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!wn(e[n],t[n]))return!1;return!0}function wn(e,t){let n=e?vm(e):void 0,r=t?vm(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!OD(e[i],t[i]))return!1;return!0}function vm(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function OD(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function xD(e){return e.length>0?e[e.length-1]:null}function Qn(e){return _h(e)?e:qn(e)?se(Promise.resolve(e)):M(e)}var cP={exact:PD,subset:FD},kD={exact:lP,subset:uP,ignored:()=>!0};function DD(e,t,n){return cP[n.paths](e.root,t.root,n.matrixParams)&&kD[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function lP(e,t){return wn(e,t)}function PD(e,t,n){if(!mi(e.segments,t.segments)||!Wu(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!PD(e.children[r],t.children[r],n))return!1;return!0}function uP(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>OD(e[n],t[n]))}function FD(e,t,n){return LD(e,t,t.segments,n)}function LD(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!mi(i,n)||t.hasChildren()||!Wu(i,n,r))}else if(e.segments.length===n.length){if(!mi(e.segments,n)||!Wu(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!FD(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!mi(e.segments,i)||!Wu(e.segments,i,r)||!e.children[L]?!1:LD(e.children[L],t,o,r)}}function Wu(e,t,n){return t.every((r,i)=>kD[n](e[i].parameters,r.parameters))}var bn=class{root;queryParams;fragment;_queryParamMap;constructor(t=new Z([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=yi(this.queryParams),this._queryParamMap}toString(){return hP.serialize(this)}},Z=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gu(this)}},Ir=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=yi(this.parameters),this._parameterMap}toString(){return jD(this)}};function dP(e,t){return mi(e,t)&&e.every((n,r)=>wn(n.parameters,t[r].parameters))}function mi(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function fP(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===L&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==L&&(n=n.concat(t(i,r)))}),n}var _i=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>new Cr,providedIn:"root"})}return e})(),Cr=class{parse(t){let n=new _m(t);return new bn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${pa(t.root,!0)}`,r=mP(t.queryParams),i=typeof t.fragment=="string"?`#${pP(t.fragment)}`:"";return`${n}${r}${i}`}},hP=new Cr;function Gu(e){return e.segments.map(t=>jD(t)).join("/")}function pa(e,t){if(!e.hasChildren())return Gu(e);if(t){let n=e.children[L]?pa(e.children[L],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==L&&r.push(`${i}:${pa(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=fP(e,(r,i)=>i===L?[pa(e.children[L],!1)]:[`${i}:${pa(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[L]!=null?`${Gu(e)}/${n[0]}`:`${Gu(e)}/(${n.join("//")})`}}function VD(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hu(e){return VD(e).replace(/%3B/gi,";")}function pP(e){return encodeURI(e)}function ym(e){return VD(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zu(e){return decodeURIComponent(e)}function bD(e){return zu(e.replace(/\+/g,"%20"))}function jD(e){return`${ym(e.path)}${gP(e.parameters)}`}function gP(e){return Object.entries(e).map(([t,n])=>`;${ym(t)}=${ym(n)}`).join("")}function mP(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Hu(n)}=${Hu(i)}`).join("&"):`${Hu(n)}=${Hu(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var vP=/^[^\/()?;#]+/;function fm(e){let t=e.match(vP);return t?t[0]:""}var yP=/^[^\/()?;=#]+/;function _P(e){let t=e.match(yP);return t?t[0]:""}var EP=/^[^=?&#]+/;function IP(e){let t=e.match(EP);return t?t[0]:""}var CP=/^[^&#]+/;function wP(e){let t=e.match(CP);return t?t[0]:""}var _m=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Z([],{}):new Z([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[L]=new Z(t,n)),r}parseSegment(){let t=fm(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new E(4009,!1);return this.capture(t),new Ir(zu(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=_P(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=fm(this.remaining);i&&(r=i,this.capture(r))}t[zu(n)]=zu(r)}parseQueryParam(t){let n=IP(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=wP(this.remaining);s&&(r=s,this.capture(r))}let i=bD(n),o=bD(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=fm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new E(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=L);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[L]:new Z([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new E(4011,!1)}};function UD(e){return e.segments.length>0?new Z([],{[L]:e}):e}function BD(e){let t={};for(let[r,i]of Object.entries(e.children)){let o=BD(i);if(r===L&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new Z(e.segments,t);return DP(n)}function DP(e){if(e.numberOfChildren===1&&e.children[L]){let t=e.children[L];return new Z(e.segments.concat(t.segments),t.children)}return e}function wr(e){return e instanceof bn}function HD(e,t,n=null,r=null){let i=$D(e);return WD(i,t,n,r)}function $D(e){let t;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new Z(o.url,s);return o===e&&(t=a),a}let r=n(e.root),i=UD(r);return t??i}function WD(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return hm(i,i,i,n,r);let o=bP(t);if(o.toRoot())return hm(i,i,new Z([],{}),n,r);let s=TP(o,i,e),a=s.processChildren?ma(s.segmentGroup,s.index,o.commands):zD(s.segmentGroup,s.index,o.commands);return hm(i,s.segmentGroup,a,n,r)}function qu(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function ya(e){return typeof e=="object"&&e!=null&&e.outlets}function hm(e,t,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;e===t?s=n:s=GD(e,t,n);let a=UD(BD(s));return new bn(a,o,i)}function GD(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=GD(o,t,n)}),new Z(e.segments,r)}var Yu=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&qu(r[0]))throw new E(4003,!1);let i=r.find(ya);if(i&&i!==xD(r))throw new E(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function bP(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new Yu(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Yu(n,t,r)}var Ao=class{segmentGroup;processChildren;index;constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function TP(e,t,n){if(e.isAbsolute)return new Ao(t,!0,0);if(!n)return new Ao(t,!1,NaN);if(n.parent===null)return new Ao(n,!0,0);let r=qu(e.commands[0])?0:1,i=n.segments.length-1+r;return SP(n,i,e.numberOfDoubleDots)}function SP(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new E(4005,!1);i=r.segments.length}return new Ao(r,!1,i-o)}function AP(e){return ya(e[0])?e[0].outlets:{[L]:e}}function zD(e,t,n){if(e??=new Z([],{}),e.segments.length===0&&e.hasChildren())return ma(e,t,n);let r=NP(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new Z(e.segments.slice(0,r.pathIndex),{});return o.children[L]=new Z(e.segments.slice(r.pathIndex),e.children),ma(o,0,i)}else return r.match&&i.length===0?new Z(e.segments,{}):r.match&&!e.hasChildren()?Em(e,t,n):r.match?ma(e,0,i):Em(e,t,n)}function ma(e,t,n){if(n.length===0)return new Z(e.segments,{});{let r=AP(n),i={};if(Object.keys(r).some(o=>o!==L)&&e.children[L]&&e.numberOfChildren===1&&e.children[L].segments.length===0){let o=ma(e.children[L],t,n);return new Z(e.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=zD(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Z(e.segments,i)}}function NP(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let s=e.segments[i],a=n[r];if(ya(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!SD(c,l,s))return o;r+=2}else{if(!SD(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Em(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(ya(o)){let c=MP(o.outlets);return new Z(r,c)}if(i===0&&qu(n[0])){let c=e.segments[t];r.push(new Ir(c.path,TD(n[0]))),i++;continue}let s=ya(o)?o.outlets[L]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&qu(a)?(r.push(new Ir(s,TD(a))),i+=2):(r.push(new Ir(s,{})),i++)}return new Z(r,{})}function MP(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=Em(new Z([],{}),0,r))}),t}function TD(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function SD(e,t,n){return e==n.path&&wn(t,n.parameters)}var No="imperative",be=(function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e})(be||{}),It=class{id;url;constructor(t,n){this.id=t,this.url=n}},Dr=class extends It{type=be.NavigationStart;navigationTrigger;restoredState;constructor(t,n,r="imperative",i=null){super(t,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Vt=class extends It{urlAfterRedirects;type=be.NavigationEnd;constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ze=(function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e[e.Aborted=4]="Aborted",e})(Ze||{}),Ro=(function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e})(Ro||{}),Dn=class extends It{reason;code;type=be.NavigationCancel;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Tn=class extends It{reason;code;type=be.NavigationSkipped;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}},Oo=class extends It{error;target;type=be.NavigationError;constructor(t,n,r,i){super(t,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},_a=class extends It{urlAfterRedirects;state;type=be.RoutesRecognized;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ku=class extends It{urlAfterRedirects;state;type=be.GuardsCheckStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zu=class extends It{urlAfterRedirects;state;shouldActivate;type=be.GuardsCheckEnd;constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Qu=class extends It{urlAfterRedirects;state;type=be.ResolveStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ju=class extends It{urlAfterRedirects;state;type=be.ResolveEnd;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xu=class{route;type=be.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ed=class{route;type=be.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},td=class{snapshot;type=be.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nd=class{snapshot;type=be.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rd=class{snapshot;type=be.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},id=class{snapshot;type=be.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xo=class{routerEvent;position;anchor;type=be.Scroll;constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Ea=class{},ko=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function RP(e){return!(e instanceof Ea)&&!(e instanceof ko)}function OP(e,t){return e.providers&&!e._injector&&(e._injector=Io(e.providers,t,`Route: ${e.path}`)),e._injector??t}function sn(e){return e.outlet||L}function xP(e,t){let n=e.filter(r=>sn(r)===t);return n.push(...e.filter(r=>sn(r)!==t)),n}function Lo(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var od=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Lo(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Ei(this.rootInjector)}},Ei=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new od(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||e)(N(De))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),sd=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=Im(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=Im(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=Cm(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Cm(t,this._root).map(n=>n.value)}};function Im(e,t){if(e===t.value)return t;for(let n of t.children){let r=Im(e,n);if(r)return r}return null}function Cm(e,t){if(e===t.value)return[t];for(let n of t.children){let r=Cm(e,n);if(r.length)return r.unshift(t),r}return[]}var Et=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function So(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var Ia=class extends sd{snapshot;constructor(t,n){super(t),this.snapshot=n,Mm(this,t)}toString(){return this.snapshot.toString()}};function qD(e){let t=kP(e),n=new Re([new Ir("",{})]),r=new Re({}),i=new Re({}),o=new Re({}),s=new Re(""),a=new ct(n,r,o,s,i,L,e,t.root);return a.snapshot=t.root,new Ia(new Et(a,[]),t)}function kP(e){let t={},n={},r={},o=new vi([],t,r,"",n,L,e,null,{});return new Ca("",new Et(o,[]))}var ct=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,r,i,o,s,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(U(l=>l[Ta]))??M(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(U(t=>yi(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(U(t=>yi(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ad(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:m(m({},t.params),e.params),data:m(m({},t.data),e.data),resolve:m(m(m(m({},e.data),t.data),i?.data),e._resolvedData)}:r={params:m({},e.params),data:m({},e.data),resolve:m(m({},e.data),e._resolvedData??{})},i&&KD(i)&&(r.resolve[Ta]=i.title),r}var vi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ta]}constructor(t,n,r,i,o,s,a,c,l){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=yi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=yi(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},Ca=class extends sd{url;constructor(t,n){super(n),this.url=t,Mm(this,n)}toString(){return YD(this._root)}};function Mm(e,t){t.value._routerState=e,t.children.forEach(n=>Mm(e,n))}function YD(e){let t=e.children.length>0?` { ${e.children.map(YD).join(", ")} } `:"";return`${e.value}${t}`}function pm(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,wn(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),wn(t.params,n.params)||e.paramsSubject.next(n.params),aP(t.url,n.url)||e.urlSubject.next(n.url),wn(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function wm(e,t){let n=wn(e.params,t.params)&&dP(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||wm(e.parent,t.parent))}function KD(e){return typeof e.title=="string"||e.title===null}var ZD=new D(""),Sa=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=L;activateEvents=new Ee;deactivateEvents=new Ee;attachEvents=new Ee;detachEvents=new Ee;routerOutletData=Hw(void 0);parentContexts=v(Ei);location=v(ui);changeDetector=v(_r);inputBinder=v(Aa,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new E(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new E(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new E(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new E(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Dm(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=le({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[zn]})}return e})(),Dm=class{route;childContexts;parent;outletData;constructor(t,n,r,i){this.route=t,this.childContexts=n,this.parent=r,this.outletData=i}get(t,n){return t===ct?this.route:t===Ei?this.childContexts:t===ZD?this.outletData:this.parent.get(t,n)}},Aa=new D(""),Rm=(()=>{class e{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,i=Wr([r.queryParams,r.params,r.data]).pipe(Ae(([o,s,a],c)=>(a=m(m(m({},o),s),a),c===0?M(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let s=Ww(r.component);if(!s){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(n,i)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})(),Om=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=mt({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&vt(0,"router-outlet")},dependencies:[Sa],encapsulation:2})}return e})();function xm(e){let t=e.children&&e.children.map(xm),n=t?S(m({},e),{children:t}):m({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==L&&(n.component=Om),n}function PP(e,t,n){let r=wa(e,t._root,n?n._root:void 0);return new Ia(r,t)}function wa(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=FP(e,t,n);return new Et(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>wa(e,a)),s}}let r=LP(t.value),i=t.children.map(o=>wa(e,o));return new Et(r,i)}}function FP(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return wa(e,r,i);return wa(e,r)})}function LP(e){return new ct(new Re(e.url),new Re(e.params),new Re(e.queryParams),new Re(e.fragment),new Re(e.data),e.outlet,e.component,e)}var Po=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},QD="ngNavigationCancelingError";function cd(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=wr(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=JD(!1,Ze.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function JD(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[QD]=!0,n.cancellationCode=t,n}function VP(e){return XD(e)&&wr(e.url)}function XD(e){return!!e&&e[QD]}var jP=(e,t,n,r)=>U(i=>(new bm(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),bm=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),pm(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=So(n);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=So(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=So(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=So(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new id(o.value.snapshot))}),t.children.length&&this.forwardEvent(new nd(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(pm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),pm(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},ld=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Mo=class{component;route;constructor(t,n){this.component=t,this.route=n}};function UP(e,t,n){let r=e._root,i=t?t._root:null;return ga(r,i,n,[r.value])}function BP(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Vo(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!Vh(e)?e:t.get(e):r}function ga(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=So(t);return e.children.forEach(s=>{HP(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>va(a,n.getContext(s),i)),i}function HP(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=$P(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new ld(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ga(e,t,a?a.children:null,r,i):ga(e,t,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Mo(a.outlet.component,s))}else s&&va(t,a,i),i.canActivateChecks.push(new ld(r)),o.component?ga(e,null,a?a.children:null,r,i):ga(e,null,n,r,i);return i}function $P(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!mi(e.url,t.url);case"pathParamsOrQueryParamsChange":return!mi(e.url,t.url)||!wn(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!wm(e,t)||!wn(e.queryParams,t.queryParams);case"paramsChange":default:return!wm(e,t)}}function va(e,t,n){let r=So(e),i=e.value;Object.entries(r).forEach(([o,s])=>{i.component?t?va(s,t.children.getContext(o),n):va(s,null,n):va(s,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Mo(t.outlet.component,i)):n.canDeactivateChecks.push(new Mo(null,i)):n.canDeactivateChecks.push(new Mo(null,i))}function Na(e){return typeof e=="function"}function WP(e){return typeof e=="boolean"}function GP(e){return e&&Na(e.canLoad)}function zP(e){return e&&Na(e.canActivate)}function qP(e){return e&&Na(e.canActivateChild)}function YP(e){return e&&Na(e.canDeactivate)}function KP(e){return e&&Na(e.canMatch)}function eb(e){return e instanceof Fn||e?.name==="EmptyError"}var $u=Symbol("INITIAL_VALUE");function Fo(){return Ae(e=>Wr(e.map(t=>t.pipe(Tt(1),Dh($u)))).pipe(U(t=>{for(let n of t)if(n!==!0){if(n===$u)return $u;if(n===!1||ZP(n))return n}return!0}),it(t=>t!==$u),Tt(1)))}function ZP(e){return wr(e)||e instanceof Po}function QP(e,t){return de(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?M(S(m({},n),{guardsResult:!0})):JP(s,r,i,e).pipe(de(a=>a&&WP(a)?XP(r,o,e,t):M(a)),U(a=>S(m({},n),{guardsResult:a})))})}function JP(e,t,n,r){return se(e).pipe(de(i=>iF(i.component,i.route,n,t,r)),Vn(i=>i!==!0,!0))}function XP(e,t,n,r){return se(t).pipe(sr(i=>no(tF(i.route.parent,r),eF(i.route,r),rF(e,i.path,n),nF(e,i.route,n))),Vn(i=>i!==!0,!0))}function eF(e,t){return e!==null&&t&&t(new rd(e)),M(!0)}function tF(e,t){return e!==null&&t&&t(new td(e)),M(!0)}function nF(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return M(!0);let i=r.map(o=>_s(()=>{let s=Lo(t)??n,a=Vo(o,s),c=zP(a)?a.canActivate(t,e):je(s,()=>a(t,e));return Qn(c).pipe(Vn())}));return M(i).pipe(Fo())}function rF(e,t,n){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>BP(s)).filter(s=>s!==null).map(s=>_s(()=>{let a=s.guards.map(c=>{let l=Lo(s.node)??n,u=Vo(c,l),d=qP(u)?u.canActivateChild(r,e):je(l,()=>u(r,e));return Qn(d).pipe(Vn())});return M(a).pipe(Fo())}));return M(o).pipe(Fo())}function iF(e,t,n,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return M(!0);let s=o.map(a=>{let c=Lo(t)??i,l=Vo(a,c),u=YP(l)?l.canDeactivate(e,t,n,r):je(c,()=>l(e,t,n,r));return Qn(u).pipe(Vn())});return M(s).pipe(Fo())}function oF(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return M(!0);let o=i.map(s=>{let a=Vo(s,e),c=GP(a)?a.canLoad(t,n):je(e,()=>a(t,n));return Qn(c)});return M(o).pipe(Fo(),tb(r))}function tb(e){return hh(_e(t=>{if(typeof t!="boolean")throw cd(e,t)}),U(t=>t===!0))}function sF(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return M(!0);let o=i.map(s=>{let a=Vo(s,e),c=KP(a)?a.canMatch(t,n):je(e,()=>a(t,n));return Qn(c)});return M(o).pipe(Fo(),tb(r))}var Da=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},ba=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function To(e){return eo(new Da(e))}function aF(e){return eo(new E(4e3,!1))}function cF(e){return eo(JD(!1,Ze.GuardRejected))}var Tm=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return M(r);if(i.numberOfChildren>1||!i.children[L])return aF(`${t.redirectTo}`);i=i.children[L]}}applyRedirectCommands(t,n,r,i,o){return lF(n,i,o).pipe(U(s=>{if(s instanceof bn)throw new ba(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),t,r);if(s[0]==="/")throw new ba(a);return a}))}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new bn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,i)}),new Z(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new E(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}};function lF(e,t,n){if(typeof e=="string")return M(e);let r=e,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:u,title:d}=t;return Qn(je(n,()=>r({params:l,data:u,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:d})))}var Sm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function uF(e,t,n,r,i){let o=nb(e,t,n);return o.matched?(r=OP(t,r),sF(r,t,n,i).pipe(U(s=>s===!0?o:m({},Sm)))):M(o)}function nb(e,t,n){if(t.path==="**")return dF(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?m({},Sm):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||RD)(n,e,t);if(!i)return m({},Sm);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?m(m({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function dF(e){return{matched:!0,parameters:e.length>0?xD(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function AD(e,t,n,r){return n.length>0&&pF(e,n,r)?{segmentGroup:new Z(t,hF(r,new Z(n,e.children))),slicedSegments:[]}:n.length===0&&gF(e,n,r)?{segmentGroup:new Z(e.segments,fF(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new Z(e.segments,e.children),slicedSegments:n}}function fF(e,t,n,r){let i={};for(let o of n)if(dd(e,t,o)&&!r[sn(o)]){let s=new Z([],{});i[sn(o)]=s}return m(m({},r),i)}function hF(e,t){let n={};n[L]=t;for(let r of e)if(r.path===""&&sn(r)!==L){let i=new Z([],{});n[sn(r)]=i}return n}function pF(e,t,n){return n.some(r=>dd(e,t,r)&&sn(r)!==L)}function gF(e,t,n){return n.some(r=>dd(e,t,r))}function dd(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function mF(e,t,n){return t.length===0&&!e.children[n]}var Am=class{};function vF(e,t,n,r,i,o,s="emptyOnly"){return new Nm(e,t,n,r,i,s,o).recognize()}var yF=31,Nm=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,r,i,o,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Tm(this.urlSerializer,this.urlTree)}noMatchError(t){return new E(4002,`'${t.segmentGroup}'`)}recognize(){let t=AD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(U(({children:n,rootSnapshot:r})=>{let i=new Et(r,n),o=new Ca("",i),s=HD(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let n=new vi([],Object.freeze({}),Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),L,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,L,n).pipe(U(r=>({children:r,rootSnapshot:n})),Ln(r=>{if(r instanceof ba)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Da?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,o):this.processSegment(t,n,r,r.segments,i,!0,o).pipe(U(s=>s instanceof Et?[s]:[]))}processChildren(t,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return se(o).pipe(sr(s=>{let a=r.children[s],c=xP(n,s);return this.processSegmentGroup(t,c,a,s,i)}),wh((s,a)=>(s.push(...a),s)),ar(null),Ch(),de(s=>{if(s===null)return To(r);let a=rb(s);return _F(a),M(a)}))}processSegment(t,n,r,i,o,s,a){return se(n).pipe(sr(c=>this.processSegmentAgainstRoute(c._injector??t,n,c,r,i,o,s,a).pipe(Ln(l=>{if(l instanceof Da)return M(null);throw l}))),Vn(c=>!!c),Ln(c=>{if(eb(c))return mF(r,i,o)?M(new Am):To(r);throw c}))}processSegmentAgainstRoute(t,n,r,i,o,s,a,c){return sn(r)!==s&&(s===L||!dd(i,o,r))?To(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,s,c):To(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=nb(n,i,o);if(!c)return To(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>yF&&(this.allowRedirects=!1));let h=new vi(o,l,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,ND(i),sn(i),i.component??i._loadedComponent??null,i,MD(i)),g=ad(h,a,this.paramsInheritanceStrategy);return h.params=Object.freeze(g.params),h.data=Object.freeze(g.data),this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,h,t).pipe(Ae(T=>this.applyRedirects.lineralizeSegments(i,T)),de(T=>this.processSegment(t,r,n,T.concat(f),s,!1,a)))}matchSegmentAgainstRoute(t,n,r,i,o,s){let a=uF(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Ae(c=>c.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(Ae(({routes:l})=>{let u=r._loadedInjector??t,{parameters:d,consumedSegments:f,remainingSegments:h}=c,g=new vi(f,d,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,ND(r),sn(r),r.component??r._loadedComponent??null,r,MD(r)),_=ad(g,s,this.paramsInheritanceStrategy);g.params=Object.freeze(_.params),g.data=Object.freeze(_.data);let{segmentGroup:T,slicedSegments:R}=AD(n,f,h,l);if(R.length===0&&T.hasChildren())return this.processChildren(u,l,T,g).pipe(U(bt=>new Et(g,bt)));if(l.length===0&&R.length===0)return M(new Et(g,[]));let ut=sn(r)===o;return this.processSegment(u,l,T,R,ut?L:o,!0,g).pipe(U(bt=>new Et(g,bt instanceof Et?[bt]:[])))}))):To(n)))}getChildConfig(t,n,r){return n.children?M({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?M({routes:n._loadedRoutes,injector:n._loadedInjector}):oF(t,n,r,this.urlSerializer).pipe(de(i=>i?this.configLoader.loadChildren(t,n).pipe(_e(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):cF(n))):M({routes:[],injector:t})}};function _F(e){e.sort((t,n)=>t.value.outlet===L?-1:n.value.outlet===L?1:t.value.outlet.localeCompare(n.value.outlet))}function EF(e){let t=e.value.routeConfig;return t&&t.path===""}function rb(e){let t=[],n=new Set;for(let r of e){if(!EF(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=rb(r.children);t.push(new Et(r.value,i))}return t.filter(r=>!n.has(r))}function ND(e){return e.data||{}}function MD(e){return e.resolve||{}}function IF(e,t,n,r,i,o){return de(s=>vF(e,t,n,r,s.extractedUrl,i,o).pipe(U(({state:a,tree:c})=>S(m({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function CF(e,t){return de(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return M(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of ib(c))s.add(l);let a=0;return se(s).pipe(sr(c=>o.has(c)?wF(c,r,e,t):(c.data=ad(c,c.parent,e).resolve,M(void 0))),_e(()=>a++),ro(1),de(c=>a===s.size?M(n):nt))})}function ib(e){let t=e.children.map(n=>ib(n)).flat();return[e,...t]}function wF(e,t,n,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!KD(i)&&(o[Ta]=i.title),_s(()=>(e.data=ad(e,e.parent,n).resolve,DF(o,e,t,r).pipe(U(s=>(e._resolvedData=s,e.data=m(m({},e.data),s),null)))))}function DF(e,t,n,r){let i=vm(e);if(i.length===0)return M({});let o={};return se(i).pipe(de(s=>bF(e[s],t,n,r).pipe(Vn(),_e(a=>{if(a instanceof Po)throw cd(new Cr,a);o[s]=a}))),ro(1),U(()=>o),Ln(s=>eb(s)?nt:eo(s)))}function bF(e,t,n,r){let i=Lo(t)??r,o=Vo(e,i),s=o.resolve?o.resolve(t,n):je(i,()=>o(t,n));return Qn(s)}function gm(e){return Ae(t=>{let n=e(t);return n?se(n).pipe(U(()=>t)):M(t)})}var km=(()=>{class e{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===L);return r}getResolvedTitleForRoute(n){return n.data[Ta]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>v(ob),providedIn:"root"})}return e})(),ob=(()=>{class e extends km{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(N(wD))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),br=new D("",{providedIn:"root",factory:()=>({})}),Ii=new D(""),fd=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=v(kg);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return M(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Qn(je(n,()=>r.loadComponent())).pipe(U(ab),Ae(cb),_e(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Es(()=>{this.componentLoaders.delete(r)})),o=new Ji(i,()=>new oe).pipe(Qi());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return M({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=sb(r,this.compiler,n,this.onLoadEndListener).pipe(Es(()=>{this.childrenLoaders.delete(r)})),s=new Ji(o,()=>new oe).pipe(Qi());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function sb(e,t,n,r){return Qn(je(n,()=>e.loadChildren())).pipe(U(ab),Ae(cb),de(i=>i instanceof gu||Array.isArray(i)?M(i):se(t.compileModuleAsync(i))),U(i=>{r&&r(e);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Ii,[],{optional:!0,self:!0}).flat()),{routes:s.map(xm),injector:o}}))}function TF(e){return e&&typeof e=="object"&&"default"in e}function ab(e){return TF(e)?e.default:e}function cb(e){return M(e)}var hd=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>v(SF),providedIn:"root"})}return e})(),SF=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Pm=new D(""),Fm=new D("");function lb(e,t,n){let r=e.get(Fm),i=e.get(he);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),AF(e)));a.ready.catch(l=>{});let{onViewTransitionCreated:c}=r;return c&&je(e,()=>c({transition:a,from:t,to:n})),s}function AF(e){return new Promise(t=>{Ks({read:()=>setTimeout(t)},{injector:e})})}var Lm=new D(""),pd=(()=>{class e{currentNavigation=gt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new oe;transitionAbortWithErrorSubject=new oe;configLoader=v(fd);environmentInjector=v(De);destroyRef=v(yn);urlSerializer=v(_i);rootContexts=v(Ei);location=v(Er);inputBindingEnabled=v(Aa,{optional:!0})!==null;titleStrategy=v(km);options=v(br,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=v(hd);createViewTransition=v(Pm,{optional:!0});navigationErrorHandler=v(Lm,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>M(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Xu(i)),r=i=>this.events.next(new ed(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;Ie(()=>{this.transitions?.next(S(m({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new Re(null),this.transitions.pipe(it(r=>r!==null),Ae(r=>{let i=!1;return M(r).pipe(Ae(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Ze.SupersededByNewNavigation),nt;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?S(m({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Tn(o.id,this.urlSerializer.serialize(o.rawUrl),"",Ro.IgnoredSameUrlNavigation)),o.resolve(!1),nt;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return M(o).pipe(Ae(c=>(this.events.next(new Dr(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?nt:Promise.resolve(c))),IF(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),_e(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(u=>(u.finalUrl=c.urlAfterRedirects,u));let l=new _a(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:l,source:u,restoredState:d,extras:f}=o,h=new Dr(c,this.urlSerializer.serialize(l),u,d);this.events.next(h);let g=qD(this.rootComponentType).snapshot;return this.currentTransition=r=S(m({},o),{targetSnapshot:g,urlAfterRedirects:l,extras:S(m({},f),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(_=>(_.finalUrl=l,_)),M(r)}else return this.events.next(new Tn(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Ro.IgnoredByUrlHandlingStrategy)),o.resolve(!1),nt}),_e(o=>{let s=new Ku(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),U(o=>(this.currentTransition=r=S(m({},o),{guards:UP(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),QP(this.environmentInjector,o=>this.events.next(o)),_e(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw cd(this.urlSerializer,o.guardsResult);let s=new Zu(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),it(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Ze.GuardRejected),!1)),gm(o=>{if(o.guards.canActivateChecks.length!==0)return M(o).pipe(_e(s=>{let a=new Qu(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Ae(s=>{let a=!1;return M(s).pipe(CF(this.paramsInheritanceStrategy,this.environmentInjector),_e({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Ze.NoDataFromResolver)}}))}),_e(s=>{let a=new Ju(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),gm(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent){let l=Lo(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(_e(u=>{a.component=u}),U(()=>{})))}for(let l of a.children)c.push(...s(l));return c};return Wr(s(o.targetSnapshot.root)).pipe(ar(null),Tt(1))}),gm(()=>this.afterPreactivation()),Ae(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?se(a).pipe(U(()=>r)):M(r)}),U(o=>{let s=PP(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=S(m({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),_e(()=>{this.events.next(new Ea)}),jP(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Tt(1),io(new x(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(it(()=>!i&&!r.targetRouterState),_e(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Ze.Aborted)}))),_e({next:o=>{i=!0,this.lastSuccessfulNavigation=Ie(this.currentNavigation),this.events.next(new Vt(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),io(this.transitionAbortWithErrorSubject.pipe(_e(o=>{throw o}))),Es(()=>{i||this.cancelNavigationTransition(r,"",Ze.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Ln(o=>{if(this.destroyed)return r.resolve(!1),nt;if(i=!0,XD(o))this.events.next(new Dn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),VP(o)?this.events.next(new ko(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Oo(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=je(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Po){let{message:c,cancellationCode:l}=cd(this.urlSerializer,a);this.events.next(new Dn(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new ko(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return nt}))}))}cancelNavigationTransition(n,r,i){let o=new Dn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Ie(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function NF(e){return e!==No}var ub=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>v(MF),providedIn:"root"})}return e})(),ud=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},MF=(()=>{class e extends ud{static \u0275fac=(()=>{let n;return function(i){return(n||(n=yr(e)))(i||e)}})();static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),db=(()=>{class e{urlSerializer=v(_i);options=v(br,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=v(Er);urlHandlingStrategy=v(hd);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new bn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof bn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=qD(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>v(RF),providedIn:"root"})}return e})(),RF=(()=>{class e extends db{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Dr?this.updateStateMemento():n instanceof Tn?this.commitTransition(r):n instanceof _a?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Ea?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Dn&&n.code!==Ze.SupersededByNewNavigation&&n.code!==Ze.Redirect?this.restoreHistory(r):n instanceof Oo?this.restoreHistory(r,!0):n instanceof Vt&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,c=m(m({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",c)}else{let a=m(m({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=yr(e)))(i||e)}})();static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function gd(e,t){e.events.pipe(it(n=>n instanceof Vt||n instanceof Dn||n instanceof Oo||n instanceof Tn),U(n=>n instanceof Vt||n instanceof Tn?0:(n instanceof Dn?n.code===Ze.Redirect||n.code===Ze.SupersededByNewNavigation:!1)?2:1),it(n=>n!==2),Tt(1)).subscribe(()=>{t()})}var OF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Te=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=v(Sg);stateManager=v(db);options=v(br,{optional:!0})||{};pendingTasks=v(Wn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=v(pd);urlSerializer=v(_i);location=v(Er);urlHandlingStrategy=v(hd);injector=v(De);_events=new oe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=v(ub);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=v(Ii,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!v(Aa,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ce;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Ie(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Dn&&r.code!==Ze.Redirect&&r.code!==Ze.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Vt)this.navigated=!0;else if(r instanceof ko){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=m({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||NF(i.source)},s);this.scheduleNavigation(a,No,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}RP(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),No,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=m({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(Ke)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Ie(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(xm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=m(m({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let f=i?i.snapshot:this.routerState.snapshot.root;d=$D(f)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return WD(d,n,u,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=wr(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,No,null,r)}navigate(n,r={skipLocationChange:!1}){return kF(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=m({},OF):r===!1?i=m({},xF):i=r,wr(n))return DD(this.currentUrlTree,n,i);let o=this.parseUrl(n);return DD(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,f)=>{a=d,c=f});let u=this.pendingTasks.add();return gd(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function kF(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new E(4008,!1)}var jo=(()=>{class e{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=gt(null);get href(){return Ie(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new oe;applicationErrorHandler=v(Ke);options=v(br,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(v(new bu("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Vt&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(wr(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:wr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||e)(C(Te),C(ct),Gs("tabindex"),C(Jt),C(kt),C(nn))};static \u0275dir=le({type:e,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&me("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Qs("href",i.reactiveHref(),og)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Do],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Do],replaceUrl:[2,"replaceUrl","replaceUrl",Do],routerLink:"routerLink"},features:[zn]})}return e})();var Ma=class{};var fb=(()=>{class e{router;injector;preloadingStrategy;loader;subscription;constructor(n,r,i,o){this.router=n,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(it(n=>n instanceof Vt),sr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Io(o.providers,n,`Route: ${o.path}`));let s=o._injector??n,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return se(i).pipe(to())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(n,r):i=M(null);let o=i.pipe(de(s=>s===null?M(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(n,r);return se([o,s]).pipe(to())}else return o})}static \u0275fac=function(r){return new(r||e)(N(Te),N(De),N(Ma),N(fd))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),hb=new D(""),PF=(()=>{class e{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=No;restoredId=0;store={};constructor(n,r,i,o,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Dr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Vt?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Tn&&n.code===Ro.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof xo&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>p(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new xo(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){Eg()};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})();function jm(e,...t){return fr([{provide:Ii,multi:!0,useValue:e},[],{provide:ct,useFactory:pb,deps:[Te]},{provide:Zs,multi:!0,useFactory:gb},t.map(n=>n.\u0275providers)])}function pb(e){return e.routerState.root}function Ra(e,t){return{\u0275kind:e,\u0275providers:t}}function gb(){let e=v(ot);return t=>{let n=e.get(Yn);if(t!==n.components[0])return;let r=e.get(Te),i=e.get(mb);e.get(Um)===1&&r.initialNavigation(),e.get(_b,null,{optional:!0})?.setUpPreloading(),e.get(hb,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var mb=new D("",{factory:()=>new oe}),Um=new D("",{providedIn:"root",factory:()=>1});function vb(){let e=[{provide:tg,useValue:!0},{provide:Um,useValue:0},_u(()=>{let t=v(ot);return t.get(Gg,Promise.resolve()).then(()=>new Promise(r=>{let i=t.get(Te),o=t.get(mb);gd(i,()=>{r(!0)}),t.get(pd).afterPreactivation=()=>(r(!0),o.closed?M(void 0):o),i.initialNavigation()}))})];return Ra(2,e)}function yb(){let e=[_u(()=>{v(Te).setUpLocationChangeListener()}),{provide:Um,useValue:2}];return Ra(3,e)}var _b=new D("");function Eb(e){return Ra(0,[{provide:_b,useExisting:fb},{provide:Ma,useExisting:e}])}function Ib(){return Ra(8,[Rm,{provide:Aa,useExisting:Rm}])}function Cb(e){di("NgRouterViewTransitions");let t=[{provide:Pm,useValue:lb},{provide:Fm,useValue:m({skipNextTransition:!!e?.skipInitialTransition},e)}];return Ra(9,t)}var wb=[Er,{provide:_i,useClass:Cr},Te,Ei,{provide:ct,useFactory:pb,deps:[Te]},fd,[]],Oa=(()=>{class e{constructor(){}static forRoot(n,r){return{ngModule:e,providers:[wb,[],{provide:Ii,multi:!0,useValue:n},[],r?.errorHandler?{provide:Lm,useValue:r.errorHandler}:[],{provide:br,useValue:r||{}},r?.useHash?LF():VF(),FF(),r?.preloadingStrategy?Eb(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?jF(r):[],r?.bindToComponentInputs?Ib().\u0275providers:[],r?.enableViewTransitions?Cb().\u0275providers:[],UF()]}}static forChild(n){return{ngModule:e,providers:[{provide:Ii,multi:!0,useValue:n}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=In({type:e});static \u0275inj=zt({})}return e})();function FF(){return{provide:hb,useFactory:()=>{let e=v(pD),t=v(pe),n=v(br),r=v(pd),i=v(_i);return n.scrollOffset&&e.setOffset(n.scrollOffset),new PF(i,r,e,t,n)}}}function LF(){return{provide:nn,useClass:Jg}}function VF(){return{provide:nn,useClass:Nu}}function jF(e){return[e.initialNavigation==="disabled"?yb().\u0275providers:[],e.initialNavigation==="enabledBlocking"?vb().\u0275providers:[]]}var Vm=new D("");function UF(){return[{provide:Vm,useFactory:gb},{provide:Zs,multi:!0,useExisting:Vm}]}var xb=(()=>{class e{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||e)(C(Jt),C(kt))};static \u0275dir=le({type:e})}return e})(),Gm=(()=>{class e extends xb{static \u0275fac=(()=>{let n;return function(i){return(n||(n=yr(e)))(i||e)}})();static \u0275dir=le({type:e,features:[Xt]})}return e})(),bd=new D("");var BF={provide:bd,useExisting:pn(()=>Td),multi:!0};function HF(){let e=Pt()?Pt().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var $F=new D(""),Td=(()=>{class e extends xb{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!HF())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||e)(C(Jt),C(kt),C($F,8))};static \u0275dir=le({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&me("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[pi([BF]),Xt]})}return e})();function zm(e){return e==null||qm(e)===0}function qm(e){return e==null?null:Array.isArray(e)||typeof e=="string"?e.length:e instanceof Set?e.size:null}var kb=new D(""),Pb=new D(""),WF=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,$o=class{static min(t){return GF(t)}static max(t){return zF(t)}static required(t){return qF(t)}static requiredTrue(t){return YF(t)}static email(t){return KF(t)}static minLength(t){return ZF(t)}static maxLength(t){return QF(t)}static pattern(t){return JF(t)}static nullValidator(t){return Fb()}static compose(t){return Hb(t)}static composeAsync(t){return Wb(t)}};function GF(e){return t=>{if(t.value==null||e==null)return null;let n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}function zF(e){return t=>{if(t.value==null||e==null)return null;let n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}function qF(e){return zm(e.value)?{required:!0}:null}function YF(e){return e.value===!0?null:{required:!0}}function KF(e){return zm(e.value)||WF.test(e.value)?null:{email:!0}}function ZF(e){return t=>{let n=t.value?.length??qm(t.value);return n===null||n===0?null:n<e?{minlength:{requiredLength:e,actualLength:n}}:null}}function QF(e){return t=>{let n=t.value?.length??qm(t.value);return n!==null&&n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}}function JF(e){if(!e)return Fb;let t,n;return typeof e=="string"?(n="",e.charAt(0)!=="^"&&(n+="^"),n+=e,e.charAt(e.length-1)!=="$"&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),r=>{if(zm(r.value))return null;let i=r.value;return t.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function Fb(e){return null}function Lb(e){return e!=null}function Vb(e){return qn(e)?se(e):e}function jb(e){let t={};return e.forEach(n=>{t=n!=null?m(m({},t),n):t}),Object.keys(t).length===0?null:t}function Ub(e,t){return t.map(n=>n(e))}function XF(e){return!e.validate}function Bb(e){return e.map(t=>XF(t)?t:n=>t.validate(n))}function Hb(e){if(!e)return null;let t=e.filter(Lb);return t.length==0?null:function(n){return jb(Ub(n,t))}}function $b(e){return e!=null?Hb(Bb(e)):null}function Wb(e){if(!e)return null;let t=e.filter(Lb);return t.length==0?null:function(n){let r=Ub(n,t).map(Vb);return Eh(r).pipe(U(jb))}}function Gb(e){return e!=null?Wb(Bb(e)):null}function Db(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function zb(e){return e._rawValidators}function qb(e){return e._rawAsyncValidators}function Bm(e){return e?Array.isArray(e)?e:[e]:[]}function yd(e,t){return Array.isArray(e)?e.includes(t):e===t}function bb(e,t){let n=Bm(t);return Bm(e).forEach(i=>{yd(n,i)||n.push(i)}),n}function Tb(e,t){return Bm(t).filter(n=>!yd(e,n))}var _d=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=$b(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Gb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},Wo=class extends _d{name;get formDirective(){return null}get path(){return null}},La=class extends _d{_parent=null;name=null;valueAccessor=null},Ed=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},eL={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},yX=S(m({},eL),{"[class.ng-submitted]":"isSubmitted"}),Yb=(()=>{class e extends Ed{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(C(La,2))};static \u0275dir=le({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Xs("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Xt]})}return e})(),Kb=(()=>{class e extends Ed{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(C(Wo,10))};static \u0275dir=le({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Xs("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Xt]})}return e})();var xa="VALID",md="INVALID",Bo="PENDING",ka="DISABLED",Tr=class{},Id=class extends Tr{value;source;constructor(t,n){super(),this.value=t,this.source=n}},Pa=class extends Tr{pristine;source;constructor(t,n){super(),this.pristine=t,this.source=n}},Fa=class extends Tr{touched;source;constructor(t,n){super(),this.touched=t,this.source=n}},Ho=class extends Tr{status;source;constructor(t,n){super(),this.status=t,this.source=n}},Hm=class extends Tr{source;constructor(t){super(),this.source=t}},Va=class extends Tr{source;constructor(t){super(),this.source=t}};function Ym(e){return(Sd(e)?e.validators:e)||null}function tL(e){return Array.isArray(e)?$b(e):e||null}function Km(e,t){return(Sd(t)?t.asyncValidators:e)||null}function nL(e){return Array.isArray(e)?Gb(e):e||null}function Sd(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function Zb(e,t,n){let r=e.controls;if(!(t?Object.keys(r):r).length)throw new E(1e3,"");if(!r[n])throw new E(1001,"")}function Qb(e,t,n){e._forEachChild((r,i)=>{if(n[i]===void 0)throw new E(1002,"")})}var Go=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,n){this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Ie(this.statusReactive)}set status(t){Ie(()=>this.statusReactive.set(t))}_status=wo(()=>this.statusReactive());statusReactive=gt(void 0);get valid(){return this.status===xa}get invalid(){return this.status===md}get pending(){return this.status==Bo}get disabled(){return this.status===ka}get enabled(){return this.status!==ka}errors;get pristine(){return Ie(this.pristineReactive)}set pristine(t){Ie(()=>this.pristineReactive.set(t))}_pristine=wo(()=>this.pristineReactive());pristineReactive=gt(!0);get dirty(){return!this.pristine}get touched(){return Ie(this.touchedReactive)}set touched(t){Ie(()=>this.touchedReactive.set(t))}_touched=wo(()=>this.touchedReactive());touchedReactive=gt(!1);get untouched(){return!this.touched}_events=new oe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(bb(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(bb(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Tb(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Tb(t,this._rawAsyncValidators))}hasValidator(t){return yd(this._rawValidators,t)}hasAsyncValidator(t){return yd(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(S(m({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new Fa(!0,r))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),n&&t.emitEvent!==!1&&this._events.next(new Fa(!1,r))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(S(m({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new Pa(!1,r))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),n&&t.emitEvent!==!1&&this._events.next(new Pa(!0,r))}markAsPending(t={}){this.status=Bo;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Ho(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(S(m({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=ka,this.errors=null,this._forEachChild(i=>{i.disable(S(m({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Id(this.value,r)),this._events.next(new Ho(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(S(m({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=xa,this._forEachChild(r=>{r.enable(S(m({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(S(m({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===xa||this.status===Bo)&&this._runAsyncValidator(r,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Id(this.value,n)),this._events.next(new Ho(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(S(m({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ka:xa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=Bo,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:t!==!1};let r=Vb(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new Ho(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,r)}_initObservables(){this.valueChanges=new Ee,this.statusChanges=new Ee}_calculateStatus(){return this._allControlsDisabled()?ka:this.errors?md:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Bo)?Bo:this._anyControlsHaveStatus(md)?md:xa}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),i&&this._events.next(new Pa(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new Fa(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Sd(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=tL(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=nL(this._rawAsyncValidators)}},Cd=class extends Go{constructor(t,n,r){super(Ym(n),Km(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){Qb(this,!0,t),Object.keys(t).forEach(r=>{Zb(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new Va(this))}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var $m=class extends Cd{};var Jb=new D("",{providedIn:"root",factory:()=>Zm}),Zm="always";function rL(e,t){return[...t.path,e]}function Sb(e,t,n=Zm){Qm(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),oL(e,t),aL(e,t),sL(e,t),iL(e,t)}function Ab(e,t,n=!0){let r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),Dd(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function wd(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function iL(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function Qm(e,t){let n=zb(e);t.validator!==null?e.setValidators(Db(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=qb(e);t.asyncValidator!==null?e.setAsyncValidators(Db(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();wd(t._rawValidators,i),wd(t._rawAsyncValidators,i)}function Dd(e,t){let n=!1;if(e!==null){if(t.validator!==null){let i=zb(e);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.validator);o.length!==i.length&&(n=!0,e.setValidators(o))}}if(t.asyncValidator!==null){let i=qb(e);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.asyncValidator);o.length!==i.length&&(n=!0,e.setAsyncValidators(o))}}}let r=()=>{};return wd(t._rawValidators,r),wd(t._rawAsyncValidators,r),n}function oL(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&Xb(e,t)})}function sL(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&Xb(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function Xb(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function aL(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function cL(e,t){e==null,Qm(e,t)}function lL(e,t){return Dd(e,t)}function uL(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function dL(e){return Object.getPrototypeOf(e.constructor)===Gm}function fL(e,t){e._syncPendingControls(),t.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function hL(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(o=>{o.constructor===Td?n=o:dL(o)?r=o:i=o}),i||r||n||null}function pL(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Nb(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Mb(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var vd=class extends Go{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,n,r){super(Ym(n),Km(r,n)),this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Sd(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Mb(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new Va(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Nb(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Nb(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Mb(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var gL=e=>e instanceof vd;var eT=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275dir=le({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return e})();var tT=new D("");var mL={provide:Wo,useExisting:pn(()=>Jm)},Jm=(()=>{class e extends Wo{callSetDisabledState;get submitted(){return Ie(this._submittedReactive)}set submitted(n){this._submittedReactive.set(n)}_submitted=wo(()=>this._submittedReactive());_submittedReactive=gt(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Ee;constructor(n,r,i){super(),this.callSetDisabledState=i,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Dd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){let r=this.form.get(n.path);return Sb(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){Ab(n.control||null,n,!1),pL(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this._submittedReactive.set(!0),fL(this.form,this.directives),this.ngSubmit.emit(n),this.form._events.next(new Hm(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0,r={}){this.form.reset(n,r),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(n=>{let r=n.control,i=this.form.get(n.path);r!==i&&(Ab(r||null,n),gL(i)&&(Sb(i,n,this.callSetDisabledState),n.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){let r=this.form.get(n.path);cL(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){let r=this.form.get(n.path);r&&lL(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Qm(this.form,this),this._oldForm&&Dd(this._oldForm,this)}static \u0275fac=function(r){return new(r||e)(C(kb,10),C(Pb,10),C(Jb,8))};static \u0275dir=le({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&me("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[pi([mL]),Xt,zn]})}return e})();var vL={provide:La,useExisting:pn(()=>Xm)},Xm=(()=>{class e extends La{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(n){}model;update=new Ee;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=hL(this,o)}ngOnChanges(n){this._added||this._setUpControl(),uL(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return rL(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||e)(C(Wo,13),C(kb,10),C(Pb,10),C(bd,10),C(tT,8))};static \u0275dir=le({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[pi([vL]),Xt,zn]})}return e})();var yL={provide:bd,useExisting:pn(()=>Ad),multi:!0};function nT(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function _L(e){return e.split(":")[0]}var Ad=(()=>{class e extends Gm{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=v(Yn).injector;destroyRef=v(yn);cdr=v(_r);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Ks({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let r=this._getOptionId(n),i=nT(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=_L(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=yr(e)))(i||e)}})();static \u0275dir=le({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&me("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[pi([yL]),Xt]})}return e})(),rT=(()=>{class e{_element;_renderer;_select;id;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(nT(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||e)(C(kt),C(Jt),C(Ad,9))};static \u0275dir=le({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})(),EL={provide:bd,useExisting:pn(()=>iT),multi:!0};function Rb(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function IL(e){return e.split(":")[0]}var iT=(()=>{class e extends Gm{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=IL(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=yr(e)))(i||e)}})();static \u0275dir=le({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&me("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[pi([EL]),Xt]})}return e})(),oT=(()=>{class e{_element;_renderer;_select;id;_value;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(Rb(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(Rb(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||e)(C(kt),C(Jt),C(iT,9))};static \u0275dir=le({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})();var CL=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=In({type:e});static \u0275inj=zt({})}return e})(),Wm=class extends Go{constructor(t,n,r){super(Ym(n),Km(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,n={}){Array.isArray(t)?t.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(t,n,r={}){this.controls.splice(t,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,n={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(t,n,r={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,n={}){Qb(this,!1,t),t.forEach((r,i)=>{Zb(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t=[],n={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new Va(this))}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((n,r)=>{t(n,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(n=>n.enabled&&t(n))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function Ob(e){return!!e&&(e.asyncValidators!==void 0||e.validators!==void 0||e.updateOn!==void 0)}var sT=(()=>{class e{useNonNullable=!1;get nonNullable(){let n=new e;return n.useNonNullable=!0,n}group(n,r=null){let i=this._reduceControls(n),o={};return Ob(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Cd(i,o)}record(n,r=null){let i=this._reduceControls(n);return new $m(i,r)}control(n,r,i){let o={};return this.useNonNullable?(Ob(r)?o=r:(o.validators=r,o.asyncValidators=i),new vd(n,S(m({},o),{nonNullable:!0}))):new vd(n,r,i)}array(n,r,i){let o=n.map(s=>this._createControl(s));return new Wm(o,r,i)}_reduceControls(n){let r={};return Object.keys(n).forEach(i=>{r[i]=this._createControl(n[i])}),r}_createControl(n){if(n instanceof vd)return n;if(n instanceof Go)return n;if(Array.isArray(n)){let r=n[0],i=n.length>1?n[1]:null,o=n.length>2?n[2]:null;return this.control(r,i,o)}else return this.control(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var aT=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:tT,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:Jb,useValue:n.callSetDisabledState??Zm}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=In({type:e});static \u0275inj=zt({imports:[CL]})}return e})();function cT(e=6){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="";for(let r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}var lT=()=>{};var tv={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var y=function(e,t){if(!e)throw Ci(t)},Ci=function(e){return new Error("Firebase Database ("+tv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};var fT=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},DL=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=e[n++],s=e[n++],a=e[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let o=e[n++],s=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return t.join("")},Md={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){let o=e[i],s=i+1<e.length,a=s?e[i+1]:0,c=i+2<e.length,l=c?e[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4,f=(a&15)<<2|l>>6,h=l&63;c||(h=64,s||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(fT(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):DL(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){let o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;let l=i<e.length?n[e.charAt(i)]:64;++i;let d=i<e.length?n[e.charAt(i)]:64;if(++i,o==null||a==null||l==null||d==null)throw new nv;let f=o<<2|a>>4;if(r.push(f),l!==64){let h=a<<4&240|l>>2;if(r.push(h),d!==64){let g=l<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},nv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},iv=function(e){let t=fT(e);return Md.encodeByteArray(t,!0)},Ua=function(e){return iv(e).replace(/\./g,"")},zo=function(e){try{return Md.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function hT(e){return pT(void 0,e)}function pT(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:let n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(let n in t)!t.hasOwnProperty(n)||!bL(n)||(e[n]=pT(e[n],t[n]));return e}function bL(e){return e!=="__proto__"}function TL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var SL=()=>TL().__FIREBASE_DEFAULTS__,AL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},NL=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&zo(e[1]);return t&&JSON.parse(t)},ov=()=>{try{return lT()||SL()||AL()||NL()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},sv=e=>ov()?.emulatorHosts?.[e],gT=e=>{let t=sv(e);if(!t)return;let n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},av=()=>ov()?.config,cv=e=>ov()?.[`_${e}`];var Jn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}};function Sr(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}function Rd(e){return p(this,null,function*(){return(yield fetch(e,{credentials:"include"})).ok})}function mT(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=m({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ua(JSON.stringify(n)),Ua(JSON.stringify(s)),""].join(".")}var ja={};function ML(){let e={prod:[],emulator:[]};for(let t of Object.keys(ja))ja[t]?e.emulator.push(t):e.prod.push(t);return e}function RL(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}var uT=!1;function Od(e,t){if(typeof window>"u"||typeof document>"u"||!Sr(window.location.host)||ja[e]===t||ja[e]||uT)return;ja[e]=t;function n(f){return`__firebase__banner__${f}`}let r="__firebase__banner",o=ML().prod.length>0;function s(){let f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,h){f.setAttribute("width","24"),f.setAttribute("id",h),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function l(){let f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{uT=!0,s()},f}function u(f,h){f.setAttribute("id",h),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){let f=RL(r),h=n("text"),g=document.getElementById(h)||document.createElement("span"),_=n("learnmore"),T=document.getElementById(_)||document.createElement("a"),R=n("preprendIcon"),ut=document.getElementById(R)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){let bt=f.element;a(bt),u(T,_);let Xf=l();c(ut,R),bt.append(ut,g,T,Xf),document.body.appendChild(bt)}o?(g.innerText="Preview backend disconnected.",ut.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ut.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function Ge(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ba(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ge())}function vT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xd(){let e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function kd(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yT(){let e=Ge();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Sn(){return tv.NODE_CLIENT===!0||tv.NODE_ADMIN===!0}function Pd(){try{return typeof indexedDB=="object"}catch{return!1}}function Fd(){return new Promise((e,t)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(n){t(n)}})}function _T(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var OL="FirebaseError",Qe=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=OL,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ct.prototype.create)}},Ct=class{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){let r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],s=o?xL(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Qe(i,a,r)}};function xL(e,t){return e.replace(kL,(n,r)=>{let i=t[r];return i!=null?String(i):`<${r}?>`})}var kL=/\{\$([^}]+)}/g;function qo(e){return JSON.parse(e)}function we(e){return JSON.stringify(e)}var ET=function(e){let t={},n={},r={},i="";try{let o=e.split(".");t=qo(zo(o[0])||""),n=qo(zo(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}};var IT=function(e){let t=ET(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},CT=function(e){let t=ET(e).claims;return typeof t=="object"&&t.admin===!0};function an(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function wi(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function Ha(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function $a(e,t,n){let r={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function jt(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let o=e[i],s=t[i];if(dT(o)&&dT(s)){if(!jt(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function dT(e){return e!==null&&typeof e=="object"}function Ar(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}var Nd=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);let r=this.W_;if(typeof t=="string")for(let d=0;d<16;d++)r[d]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^o&(s^a),u=1518500249):(l=o^s^a,u=1859775393):d<60?(l=o&s|a&(o|s),u=2400959708):(l=o^s^a,u=3395469782);let f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);let r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(o[s]=t.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=t[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let t=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)t[r]=this.chain_[i]>>o&255,++r;return t}};function wT(e,t){let n=new rv(e,t);return n.subscribe.bind(n)}var rv=class{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");PL(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=ev),i.error===void 0&&(i.error=ev),i.complete===void 0&&(i.complete=ev);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function PL(e,t){if(typeof e!="object"||e===null)return!1;for(let n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function ev(){}function Yo(e,t){return`${e} failed: ${t} argument `}var DT=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,y(r<e.length,"Surrogate pair missing trail surrogate.");let s=e.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Wa=function(e){let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};var FL=1e3,LL=2,VL=14400*1e3,jL=.5;function lv(e,t=FL,n=LL){let r=t*Math.pow(n,e),i=Math.round(jL*r*(Math.random()-.5)*2);return Math.min(VL,r+i)}function ve(e){return e&&e._delegate?e._delegate:e}var Me=class{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var Di="[DEFAULT]";var Ld=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){let r=new Jn;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){let n=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(BL(t))try{this.getOrInitializeService({instanceIdentifier:Di})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=Di){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return p(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=Di){return this.instances.has(t)}getOptions(t=Di){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(t,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(t),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&t(o,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:UL(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Di){return this.component?this.component.multipleInstances?t:Di:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function UL(e){return e===Di?void 0:e}function BL(e){return e.instantiationMode==="EAGER"}var Ga=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let n=new Ld(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}};var HL=[],te=(function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e})(te||{}),$L={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},WL=te.INFO,GL={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},zL=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=GL[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},An=class{constructor(t){this.name=t,this._logLevel=WL,this._logHandler=zL,this._userLogHandler=null,HL.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in te))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?$L[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...t),this._logHandler(this,te.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...t),this._logHandler(this,te.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,te.INFO,...t),this._logHandler(this,te.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,te.WARN,...t),this._logHandler(this,te.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...t),this._logHandler(this,te.ERROR,...t)}};var qL=(e,t)=>t.some(n=>e instanceof n),bT,TT;function YL(){return bT||(bT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KL(){return TT||(TT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var ST=new WeakMap,dv=new WeakMap,AT=new WeakMap,uv=new WeakMap,hv=new WeakMap;function ZL(e){let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{n(Nn(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)});return t.then(n=>{n instanceof IDBCursor&&ST.set(n,e)}).catch(()=>{}),hv.set(t,e),t}function QL(e){if(dv.has(e))return;let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});dv.set(e,t)}var fv={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return dv.get(e);if(t==="objectStoreNames")return e.objectStoreNames||AT.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function NT(e){fv=e(fv)}function JL(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){let r=e.call(Vd(this),t,...n);return AT.set(r,t.sort?t.sort():[t]),Nn(r)}:KL().includes(e)?function(...t){return e.apply(Vd(this),t),Nn(ST.get(this))}:function(...t){return Nn(e.apply(Vd(this),t))}}function XL(e){return typeof e=="function"?JL(e):(e instanceof IDBTransaction&&QL(e),qL(e,YL())?new Proxy(e,fv):e)}function Nn(e){if(e instanceof IDBRequest)return ZL(e);if(uv.has(e))return uv.get(e);let t=XL(e);return t!==e&&(uv.set(e,t),hv.set(t,e)),t}var Vd=e=>hv.get(e);function jd(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(e,t),a=Nn(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Nn(s.result),c.oldVersion,c.newVersion,Nn(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var e1=["get","getKey","getAll","getAllKeys","count"],t1=["put","add","delete","clear"],pv=new Map;function MT(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(pv.get(t))return pv.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,i=t1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||e1.includes(n)))return;let o=function(s,...a){return p(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return pv.set(t,o),o}NT(e=>S(m({},e),{get:(t,n,r)=>MT(t,n)||e.get(t,n,r),has:(t,n)=>!!MT(t,n)||e.has(t,n)}));var mv=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(n1(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function n1(e){return e.getComponent()?.type==="VERSION"}var vv="@firebase/app",RT="0.14.6";var Xn=new An("@firebase/app"),r1="@firebase/app-compat",i1="@firebase/analytics-compat",o1="@firebase/analytics",s1="@firebase/app-check-compat",a1="@firebase/app-check",c1="@firebase/auth",l1="@firebase/auth-compat",u1="@firebase/database",d1="@firebase/data-connect",f1="@firebase/database-compat",h1="@firebase/functions",p1="@firebase/functions-compat",g1="@firebase/installations",m1="@firebase/installations-compat",v1="@firebase/messaging",y1="@firebase/messaging-compat",_1="@firebase/performance",E1="@firebase/performance-compat",I1="@firebase/remote-config",C1="@firebase/remote-config-compat",w1="@firebase/storage",D1="@firebase/storage-compat",b1="@firebase/firestore",T1="@firebase/ai",S1="@firebase/firestore-compat",A1="firebase",N1="12.6.0";var yv="[DEFAULT]",M1={[vv]:"fire-core",[r1]:"fire-core-compat",[o1]:"fire-analytics",[i1]:"fire-analytics-compat",[a1]:"fire-app-check",[s1]:"fire-app-check-compat",[c1]:"fire-auth",[l1]:"fire-auth-compat",[u1]:"fire-rtdb",[d1]:"fire-data-connect",[f1]:"fire-rtdb-compat",[h1]:"fire-fn",[p1]:"fire-fn-compat",[g1]:"fire-iid",[m1]:"fire-iid-compat",[v1]:"fire-fcm",[y1]:"fire-fcm-compat",[_1]:"fire-perf",[E1]:"fire-perf-compat",[I1]:"fire-rc",[C1]:"fire-rc-compat",[w1]:"fire-gcs",[D1]:"fire-gcs-compat",[b1]:"fire-fst",[S1]:"fire-fst-compat",[T1]:"fire-vertex","fire-js":"fire-js",[A1]:"fire-js-all"};var Ud=new Map,R1=new Map,_v=new Map;function OT(e,t){try{e.container.addComponent(t)}catch(n){Xn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function lt(e){let t=e.name;if(_v.has(t))return Xn.debug(`There were multiple attempts to register component ${t}.`),!1;_v.set(t,e);for(let n of Ud.values())OT(n,e);for(let n of R1.values())OT(n,e);return!0}function cn(e,t){let n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function wt(e){return e==null?!1:e.settings!==void 0}var O1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nr=new Ct("app","Firebase",O1);var Ev=class{constructor(t,n,r){this._isDeleted=!1,this._options=m({},t),this._config=m({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Me("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}};var Mr=N1;function wv(e,t={}){let n=e;typeof t!="object"&&(t={name:t});let r=m({name:yv,automaticDataCollectionEnabled:!0},t),i=r.name;if(typeof i!="string"||!i)throw Nr.create("bad-app-name",{appName:String(i)});if(n||(n=av()),!n)throw Nr.create("no-options");let o=Ud.get(i);if(o){if(jt(n,o.options)&&jt(r,o.config))return o;throw Nr.create("duplicate-app",{appName:i})}let s=new Ga(i);for(let c of _v.values())s.addComponent(c);let a=new Ev(n,r,s);return Ud.set(i,a),a}function bi(e=yv){let t=Ud.get(e);if(!t&&e===yv&&av())return wv();if(!t)throw Nr.create("no-app",{appName:e});return t}function Pe(e,t,n){let r=M1[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=t.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${t}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Xn.warn(s.join(" "));return}lt(new Me(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}var x1="firebase-heartbeat-database",k1=1,za="firebase-heartbeat-store",gv=null;function FT(){return gv||(gv=jd(x1,k1,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(za)}catch(n){console.warn(n)}}}}).catch(e=>{throw Nr.create("idb-open",{originalErrorMessage:e.message})})),gv}function P1(e){return p(this,null,function*(){try{let n=(yield FT()).transaction(za),r=yield n.objectStore(za).get(LT(e));return yield n.done,r}catch(t){if(t instanceof Qe)Xn.warn(t.message);else{let n=Nr.create("idb-get",{originalErrorMessage:t?.message});Xn.warn(n.message)}}})}function xT(e,t){return p(this,null,function*(){try{let r=(yield FT()).transaction(za,"readwrite");yield r.objectStore(za).put(t,LT(e)),yield r.done}catch(n){if(n instanceof Qe)Xn.warn(n.message);else{let r=Nr.create("idb-set",{originalErrorMessage:n?.message});Xn.warn(r.message)}}})}function LT(e){return`${e.name}!${e.options.appId}`}var F1=1024,L1=30,Iv=class{constructor(t){this.container=t,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Cv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=kT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>L1){let i=j1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Xn.warn(t)}})}getHeartbeatsHeader(){return p(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=kT(),{heartbeatsToSend:n,unsentEntries:r}=V1(this._heartbeatsCache.heartbeats),i=Ua(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Xn.warn(t),""}})}};function kT(){return new Date().toISOString().substring(0,10)}function V1(e,t=F1){let n=[],r=e.slice();for(let i of e){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),PT(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),PT(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Cv=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return Pd()?Fd().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield P1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return xT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return xT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return})}};function PT(e){return Ua(JSON.stringify({version:2,heartbeats:e})).length}function j1(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function U1(e){lt(new Me("platform-logger",t=>new mv(t),"PRIVATE")),lt(new Me("heartbeat",t=>new Iv(t),"PRIVATE")),Pe(vv,RT,e),Pe(vv,RT,"esm2020"),Pe("fire-js","")}U1("");var VT="@firebase/database",jT="1.1.0";var Ny="";function B1(e){Ny=e}var Rv=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),we(n))}get(t){let n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:qo(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var Ov=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return an(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var mS=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Rv(t)}}catch{}return new Ov},Si=mS("localStorage"),xv=mS("sessionStorage");var Qo=new An("@firebase/database"),H1=(function(){let e=1;return function(){return e++}})(),vS=function(e){let t=DT(e),n=new Nd;n.update(t);let r=n.digest();return Md.encodeByteArray(r)},hc=function(...e){let t="";for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=hc.apply(null,r):typeof r=="object"?t+=we(r):t+=r,t+=" "}return t},Ai=null,UT=!0,$1=function(e,t){y(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(Qo.logLevel=te.VERBOSE,Ai=Qo.log.bind(Qo),t&&xv.set("logging_enabled",!0)):typeof e=="function"?Ai=e:(Ai=null,xv.remove("logging_enabled"))},Fe=function(...e){if(UT===!0&&(UT=!1,Ai===null&&xv.get("logging_enabled")===!0&&$1(!0)),Ai){let t=hc.apply(null,e);Ai(t)}},pc=function(e){return function(...t){Fe(e,...t)}},kv=function(...e){let t="FIREBASE INTERNAL ERROR: "+hc(...e);Qo.error(t)},er=function(...e){let t=`FIREBASE FATAL ERROR: ${hc(...e)}`;throw Qo.error(t),new Error(t)},Xe=function(...e){let t="FIREBASE WARNING: "+hc(...e);Qo.warn(t)},W1=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Xe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},My=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},G1=function(e){if(Sn()||document.readyState==="complete")e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Mi="[MIN_NAME]",kr="[MAX_NAME]",Oi=function(e,t){if(e===t)return 0;if(e===Mi||t===kr)return-1;if(t===Mi||e===kr)return 1;{let n=BT(e),r=BT(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1}},z1=function(e,t){return e===t?0:e<t?-1:1},qa=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+we(t))},Ry=function(e){if(typeof e!="object"||e===null)return we(e);let t=[];for(let r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)r!==0&&(n+=","),n+=we(t[r]),n+=":",n+=Ry(e[t[r]]);return n+="}",n},yS=function(e,t){let n=e.length;if(n<=t)return[e];let r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Le(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var _S=function(e){y(!My(e),"Invalid JSON number");let t=11,n=52,r=(1<<t-1)-1,i,o,s,a,c;e===0?(o=0,s=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),r),o=a+r,s=Math.round(e*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(e/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},q1=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Y1=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function K1(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");let r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}var Z1=new RegExp("^-?(0*)\\d{1,10}$"),Q1=-2147483648,J1=2147483647,BT=function(e){if(Z1.test(e)){let t=Number(e);if(t>=Q1&&t<=J1)return t}return null},as=function(e){try{e()}catch(t){setTimeout(()=>{let n=t.stack||"";throw Xe("Exception was thrown by user callback.",n),t},Math.floor(0))}},X1=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ja=function(e,t){let n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var Pv=class{constructor(t,n){this.appCheckProvider=n,this.appName=t.name,wt(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.appCheckProvider?.get().then(n=>n.addTokenListener(t))}notifyForInvalidToken(){Xe(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Fv=class{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(Fe("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Xe(t)}},Xa=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),Hd="5",ES="v",IS="s",CS="r",wS="f",DS=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,bS="ls",TS="p",Lv="ac",SS="websocket",AS="long_polling";var $d=class{constructor(t,n,r,i,o=!1,s="",a=!1,c=!1,l=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Si.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Si.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}};function eV(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function NS(e,t,n){y(typeof t=="string","typeof type must == string"),y(typeof n=="object","typeof params must == object");let r;if(t===SS)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===AS)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);eV(e)&&(n.ns=e.namespace);let i=[];return Le(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var Vv=class{constructor(){this.counters_={}}incrementCounter(t,n=1){an(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return hT(this.counters_)}};var Dv={},bv={};function Oy(e){let t=e.toString();return Dv[t]||(Dv[t]=new Vv),Dv[t]}function tV(e,t){let n=e.toString();return bv[n]||(bv[n]=t()),bv[n]}var jv=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&as(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var HT="start",nV="close",rV="pLPCommand",iV="pRTLPCB",MS="id",RS="pw",OS="ser",oV="cb",sV="seg",aV="ts",cV="d",lV="dframe",xS=1870,kS=30,uV=xS-kS,dV=25e3,fV=3e4,Uv=class e{constructor(t,n,r,i,o,s,a){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=pc(t),this.stats_=Oy(n),this.urlFn=c=>(this.appCheckToken&&(c[Lv]=this.appCheckToken),NS(n,AS,c))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new jv(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(fV)),G1(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Bv((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===HT)this.id=a,this.password=c;else if(s===nV)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[HT]="t",r[OS]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[oV]=this.scriptTagHolder.uniqueCallbackIdentifier),r[ES]=Hd,this.transportSessionId&&(r[IS]=this.transportSessionId),this.lastSessionId&&(r[bS]=this.lastSessionId),this.applicationId&&(r[TS]=this.applicationId),this.appCheckToken&&(r[Lv]=this.appCheckToken),typeof location<"u"&&location.hostname&&DS.test(location.hostname)&&(r[CS]=wS);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return Sn()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!q1()&&!Y1()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let n=we(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=iv(n),i=yS(r,uV);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,n){if(Sn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[lV]="t",r[MS]=t,r[RS]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let n=we(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Bv=class e{constructor(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Sn())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=H1(),window[rV+this.uniqueCallbackIdentifier]=t,window[iV+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Fe("frame writing exception"),a.stack&&Fe(a.stack),Fe(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Fe("No IE domain setting required")}catch{let r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[MS]=this.myID,t[RS]=this.myPW,t[OS]=this.currentSerial;let n=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+kS+r.length<=xS;){let s=this.pendingSegs.shift();r=r+"&"+sV+i+"="+s.seg+"&"+aV+i+"="+s.ts+"&"+cV+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(dV)),o=()=>{clearTimeout(i),r()};this.addTag(t,o)}addTag(t,n){Sn()?this.doNodeLongPoll(t,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Fe("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var hV=16384,pV=45e3,Wd=null;typeof MozWebSocket<"u"?Wd=MozWebSocket:typeof WebSocket<"u"&&(Wd=WebSocket);var Ya=(()=>{class e{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=pc(this.connId),this.stats_=Oy(r),this.connURL=e.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[ES]=Hd,!Sn()&&typeof location<"u"&&location.hostname&&DS.test(location.hostname)&&(a[CS]=wS),r&&(a[IS]=r),i&&(a[bS]=i),o&&(a[Lv]=o),s&&(a[TS]=s),NS(n,SS,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Si.set("previous_websocket_failure",!0);try{let i;if(Sn()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Hd}/${Ny}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Wd(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Wd!==null&&!e.forceDisallow_}static previouslyFailed(){return Si.isInMemoryStorage||Si.get("previous_websocket_failure")===!0}markConnectionHealthy(){Si.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=qo(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(y(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=we(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=yS(r,hV);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(pV))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),gV=(()=>{class e{static get ALL_TRANSPORTS(){return[Uv,Ya]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(n){this.initTransports_(n)}initTransports_(n){let r=Ya&&Ya.isAvailable(),i=r&&!Ya.previouslyFailed();if(n.webSocketOnly&&(r||Xe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ya];else{let o=this.transports_=[];for(let s of e.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),mV=6e4,vV=5e3,yV=10*1024,_V=100*1024,Tv="t",$T="d",EV="s",WT="r",IV="e",GT="o",zT="a",qT="n",YT="p",CV="h",Hv=class{constructor(t,n,r,i,o,s,a,c,l,u){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=pc("c:"+this.id+":"),this.transportManager_=new gV(n),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ja(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>_V?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>yV?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){let n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Tv in t){let n=t[Tv];n===zT?this.upgradeIfSecondaryHealthy_():n===WT?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===GT&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let n=qa("t",t),r=qa("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:YT,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:zT,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:qT,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let n=qa("t",t),r=qa("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let n=qa(Tv,t);if($T in t){let r=t[$T];if(n===CV){let i=m({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===qT){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===EV?this.onConnectionShutdown_(r):n===WT?this.onReset_(r):n===IV?kv("Server Error: "+r):n===GT?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):kv("Unknown control packet command: "+n)}}onHandshake_(t){let n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Hd!==r&&Xe("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ja(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(mV))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ja(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(vV))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:YT,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Si.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Gd=class{put(t,n,r,i){}merge(t,n,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}};var zd=class{constructor(t){this.allowedEvents_=t,this.listeners_={},y(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){let r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});let i=this.getInitialEvent(t);i&&n.apply(r,i)}off(t,n,r){this.validateEventType_(t);let i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(t){y(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}};var qd=class e extends zd{static getInstance(){return new e}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ba()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return y(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var KT=32,ZT=768,Q=class{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}};function Y(){return new Q("")}function $(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Pr(e){return e.pieces_.length-e.pieceNum_}function ie(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Q(e.pieces_,t)}function xy(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function wV(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function rc(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function PS(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Q(t,0)}function ue(e,t){let n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Q)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{let r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Q(n,0)}function W(e){return e.pieceNum_>=e.pieces_.length}function Je(e,t){let n=$(e),r=$(t);if(n===null)return t;if(n===r)return Je(ie(e),ie(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function DV(e,t){let n=rc(e,0),r=rc(t,0);for(let i=0;i<n.length&&i<r.length;i++){let o=Oi(n[i],r[i]);if(o!==0)return o}return n.length===r.length?0:n.length<r.length?-1:1}function ky(e,t){if(Pr(e)!==Pr(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Ut(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Pr(e)>Pr(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var $v=class{constructor(t,n){this.errorPrefix_=n,this.parts_=rc(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Wa(this.parts_[r]);FS(this)}};function bV(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Wa(t),FS(e)}function TV(e){let t=e.parts_.pop();e.byteLength_-=Wa(t),e.parts_.length>0&&(e.byteLength_-=1)}function FS(e){if(e.byteLength_>ZT)throw new Error(e.errorPrefix_+"has a key path longer than "+ZT+" bytes ("+e.byteLength_+").");if(e.parts_.length>KT)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+KT+") or object contains a cycle "+Ti(e))}function Ti(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var Wv=class e extends zd{static getInstance(){return new e}constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(t){return y(t==="visible","Unknown event type: "+t),[this.visible_]}};var Ka=1e3,SV=300*1e3,QT=30*1e3,AV=1.3,NV=3e4,MV="server_kill",JT=3,Py=(()=>{class e extends Gd{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=e.nextPersistentConnectionId_++,this.log_=pc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ka,this.maxReconnectDelay_=SV,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Sn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Wv.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&qd.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(we(s)),y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new Jn,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),y(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;e.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&an(n,"w")){let i=wi(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();Xe(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||CT(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=QT)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=IT(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+we(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):kv("Unrecognized action received from server: "+we(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ka,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Ka,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>NV&&(this.reconnectDelay_=Ka),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*AV)}this.onConnectStatus_(!1)}establishConnection_(){return p(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){y(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Fe("getToken() completed but was canceled"):(Fe("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new Hv(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,g=>{Xe(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(MV)},s))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&Xe(f),l())}}})}interrupt(n){Fe("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Fe("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Ha(this.interruptReasons_)&&(this.reconnectDelay_=Ka,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>Ry(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new Q(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){Fe("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=JT&&(this.reconnectDelay_=QT,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Fe("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=JT&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Sn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Ny.replace(/\./g,"-")]=1,Ba()?n["framework.cordova"]=1:kd()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=qd.getInstance().currentlyOnline();return Ha(this.interruptReasons_)&&n}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),G=class e{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new e(t,n)}};var Jo=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){let r=new G(Mi,t),i=new G(Mi,n);return this.compare(r,i)!==0}minPost(){return G.MIN}};var Bd,Yd=class extends Jo{static get __EMPTY_NODE(){return Bd}static set __EMPTY_NODE(t){Bd=t}compare(t,n){return Oi(t.name,n.name)}isDefinedOn(t){throw Ci("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return G.MIN}maxPost(){return new G(kr,Bd)}makePost(t,n){return y(typeof t=="string","KeyIndex indexValue must always be a string."),new G(t,Bd)}toString(){return".key"}},Ni=new Yd;var Zo=class{constructor(t,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(t=t,s=n?r(t.key,n):1,i&&(s*=-1),s<0)this.isReverse_?t=t.left:t=t.right;else if(s===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},ln=(()=>{class e{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??e.RED,this.left=o??Bt.EMPTY_NODE,this.right=s??Bt.EMPTY_NODE}copy(n,r,i,o,s){return new e(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Bt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Bt.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),Gv=class{copy(t,n,r,i,o){return this}insert(t,n,r){return new ln(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Bt=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,ln.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,ln.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Zo(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new Zo(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new Zo(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new Zo(this.root_,null,this.comparator_,!0,t)}};Bt.EMPTY_NODE=new Gv;function RV(e,t){return Oi(e.name,t.name)}function Fy(e,t){return Oi(e,t)}var zv;function OV(e){zv=e}var LS=function(e){return typeof e=="number"?"number:"+_S(e):"string:"+e},VS=function(e){if(e.isLeafNode()){let t=e.val();y(typeof t=="string"||typeof t=="number"||typeof t=="object"&&an(t,".sv"),"Priority must be a string or number.")}else y(e===zv||e.isEmpty(),"priority of unexpected type.");y(e===zv||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var XT,Xo=(()=>{class e{static set __childrenNodeConstructor(n){XT=n}static get __childrenNodeConstructor(){return XT}constructor(n,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,y(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),VS(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return W(n)?this:$(n)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=$(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(y(i!==".priority"||Pr(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(ie(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+LS(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=_S(this.value_):n+=this.value_,this.lazyHash_=vS(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(y(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(r),s=e.VALUE_TYPE_ORDER.indexOf(i);return y(o>=0,"Unknown leaf type: "+r),y(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),jS,US;function xV(e){jS=e}function kV(e){US=e}var qv=class extends Jo{compare(t,n){let r=t.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?Oi(t.name,n.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return G.MIN}maxPost(){return new G(kr,new Xo("[PRIORITY-POST]",US))}makePost(t,n){let r=jS(t);return new G(n,new Xo("[PRIORITY-POST]",r))}toString(){return".priority"}},ae=new qv;var PV=Math.log(2),Yv=class{constructor(t){let n=o=>parseInt(Math.log(o)/PV,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;let i=r(this.count);this.bits_=t+1&i}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},Kd=function(e,t,n,r){e.sort(t);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=e[c],f=n?n(d):d,new ln(f,d.node,ln.BLACK,null,null);{let h=parseInt(u/2,10)+c,g=i(c,h),_=i(h+1,l);return d=e[h],f=n?n(d):d,new ln(f,d.node,ln.BLACK,g,_)}},o=function(c){let l=null,u=null,d=e.length,f=function(g,_){let T=d-g,R=d;d-=g;let ut=i(T+1,R),bt=e[T],Xf=n?n(bt):bt;h(new ln(Xf,bt.node,_,null,ut))},h=function(g){l?(l.left=g,l=g):(u=g,l=g)};for(let g=0;g<c.count;++g){let _=c.nextBitIsOne(),T=Math.pow(2,c.count-(g+1));_?f(T,ln.BLACK):(f(T,ln.BLACK),f(T,ln.RED))}return u},s=new Yv(e.length),a=o(s);return new Bt(r||t,a)};var Sv,Ko={},es=class e{static get Default(){return y(Ko&&ae,"ChildrenNode.ts has not been loaded"),Sv=Sv||new e({".priority":Ko},{".priority":ae}),Sv}constructor(t,n){this.indexes_=t,this.indexSet_=n}get(t){let n=wi(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof Bt?n:null}hasIndex(t){return an(this.indexSet_,t.toString())}addIndex(t,n){y(t!==Ni,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(G.Wrap),s=o.getNext();for(;s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=Kd(r,t.getCompare()):a=Ko;let c=t.toString(),l=m({},this.indexSet_);l[c]=t;let u=m({},this.indexes_);return u[c]=a,new e(u,l)}addToIndexes(t,n){let r=$a(this.indexes_,(i,o)=>{let s=wi(this.indexSet_,o);if(y(s,"Missing index implementation for "+o),i===Ko)if(s.isDefinedOn(t.node)){let a=[],c=n.getIterator(G.Wrap),l=c.getNext();for(;l;)l.name!==t.name&&a.push(l),l=c.getNext();return a.push(t),Kd(a,s.getCompare())}else return Ko;else{let a=n.get(t.name),c=i;return a&&(c=c.remove(new G(t.name,a))),c.insert(t,t.node)}});return new e(r,this.indexSet_)}removeFromIndexes(t,n){let r=$a(this.indexes_,i=>{if(i===Ko)return i;{let o=n.get(t.name);return o?i.remove(new G(t.name,o)):i}});return new e(r,this.indexSet_)}};var Za,V=(()=>{class e{static get EMPTY_NODE(){return Za||(Za=new e(new Bt(Fy),null,es.Default))}constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&VS(this.priorityNode_),this.children_.isEmpty()&&y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Za}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Za:r}}getChild(n){let r=$(n);return r===null?this:this.getImmediateChild(r).getChild(ie(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(y(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new G(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?Za:this.priorityNode_;return new e(o,a,s)}}updateChild(n,r){let i=$(n);if(i===null)return r;{y($(n)!==".priority"||Pr(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(ie(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(ae,(a,c)=>{r[a]=c.val(n),i++,s&&e.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+LS(this.getPriority().val())+":"),this.forEachChild(ae,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":vS(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new G(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new G(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new G(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,G.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,G.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===gc?-1:0}withIndex(n){if(n===Ni||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Ni||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(ae),o=r.getIterator(ae),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Ni?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),Kv=class extends V{constructor(){super(new Bt(Fy),V.EMPTY_NODE,es.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return V.EMPTY_NODE}isEmpty(){return!1}},gc=new Kv;Object.defineProperties(G,{MIN:{value:new G(Mi,V.EMPTY_NODE)},MAX:{value:new G(kr,gc)}});Yd.__EMPTY_NODE=V.EMPTY_NODE;Xo.__childrenNodeConstructor=V;OV(gc);kV(gc);var FV=!0;function Se(e,t=null){if(e===null)return V.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),y(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let n=e;return new Xo(n,Se(t))}if(!(e instanceof Array)&&FV){let n=[],r=!1;if(Le(e,(s,a)=>{if(s.substring(0,1)!=="."){let c=Se(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new G(s,c)))}}),n.length===0)return V.EMPTY_NODE;let o=Kd(n,RV,s=>s.name,Fy);if(r){let s=Kd(n,ae.getCompare());return new V(o,Se(t),new es({".priority":s},{".priority":ae}))}else return new V(o,Se(t),es.Default)}else{let n=V.EMPTY_NODE;return Le(e,(r,i)=>{if(an(e,r)&&r.substring(0,1)!=="."){let o=Se(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(Se(t))}}xV(Se);var ic=class extends Jo{constructor(t){super(),this.indexPath_=t,y(!W(t)&&$(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){let r=this.extractChild(t.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?Oi(t.name,n.name):o}makePost(t,n){let r=Se(t),i=V.EMPTY_NODE.updateChild(this.indexPath_,r);return new G(n,i)}maxPost(){let t=V.EMPTY_NODE.updateChild(this.indexPath_,gc);return new G(kr,t)}toString(){return rc(this.indexPath_,0).join("/")}};var Zv=class extends Jo{compare(t,n){let r=t.node.compareTo(n.node);return r===0?Oi(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return G.MIN}maxPost(){return G.MAX}makePost(t,n){let r=Se(t);return new G(n,r)}toString(){return".value"}},BS=new Zv;function HS(e){return{type:"value",snapshotNode:e}}function ts(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function oc(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function sc(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function LV(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var ac=class{constructor(t){this.index_=t}updateChild(t,n,r,i,o,s){y(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=t.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?t.hasChild(n)?s.trackChildChange(oc(n,a)):y(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ts(n,r)):s.trackChildChange(sc(n,r,a))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(ae,(i,o)=>{n.hasChild(i)||r.trackChildChange(oc(i,o))}),n.isLeafNode()||n.forEachChild(ae,(i,o)=>{if(t.hasChild(i)){let s=t.getImmediateChild(i);s.equals(o)||r.trackChildChange(sc(i,o,s))}else r.trackChildChange(ts(i,o))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?V.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Zd=class e{constructor(t){this.indexedFilter_=new ac(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,i,o,s){return this.matches(new G(n,r))||(r=V.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,o,s)}updateFullNode(t,n,r){n.isLeafNode()&&(n=V.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(V.EMPTY_NODE);let o=this;return n.forEachChild(ae,(s,a)=>{o.matches(new G(s,a))||(i=i.updateImmediateChild(s,V.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}};var Qv=class{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Zd(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,i,o,s){return this.rangedFilter_.matches(new G(n,r))||(r=V.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,o,s):this.fullLimitUpdateChild_(t,n,r,o,s)}updateFullNode(t,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=V.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=V.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(V.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,V.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(f,h)=>d(h,f)}else s=this.index_.getCompare();let a=t;y(a.numChildren()===this.limit_,"");let c=new G(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:s(f,c);if(u&&!r.isEmpty()&&h>=0)return o?.trackChildChange(sc(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(oc(n,d));let _=a.updateImmediateChild(n,V.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(o?.trackChildChange(ts(f.name,f.node)),_.updateImmediateChild(f.name,f.node)):_}}else return r.isEmpty()?t:u&&s(l,c)>=0?(o!=null&&(o.trackChildChange(oc(l.name,l.node)),o.trackChildChange(ts(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,V.EMPTY_NODE)):t}};var Jv=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ae}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Mi}hasEnd(){return this.endSet_}getIndexEndValue(){return y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:kr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return y(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ae}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function VV(e){return e.loadsAllData()?new ac(e.getIndex()):e.hasLimit()?new Qv(e):new Zd(e)}function jV(e,t,n){let r=e.copy();return r.startSet_=!0,t===void 0&&(t=null),r.indexStartValue_=t,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function UV(e,t,n){let r=e.copy();return r.endSet_=!0,t===void 0&&(t=null),r.indexEndValue_=t,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function BV(e,t){let n=e.copy();return n.index_=t,n}function eS(e){let t={};if(e.isDefault())return t;let n;if(e.index_===ae?n="$priority":e.index_===BS?n="$value":e.index_===Ni?n="$key":(y(e.index_ instanceof ic,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=we(n),e.startSet_){let r=e.startAfterSet_?"startAfter":"startAt";t[r]=we(e.indexStartValue_),e.startNameSet_&&(t[r]+=","+we(e.indexStartName_))}if(e.endSet_){let r=e.endBeforeSet_?"endBefore":"endAt";t[r]=we(e.indexEndValue_),e.endNameSet_&&(t[r]+=","+we(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function tS(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==ae&&(t.i=e.index_.toString()),t}var Xv=class e extends Gd{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(y(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,n,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=pc("p:rest:"),this.listens_={}}listen(t,n,r,i){let o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);let s=e.getListenId_(t,r),a={};this.listens_[s]=a;let c=eS(t._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),wi(this.listens_,s)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(t,n){let r=e.getListenId_(t,n);delete this.listens_[r]}get(t){let n=eS(t._queryParams),r=t._path.toString(),i=new Jn;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Ar(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=qo(a.responseText)}catch{Xe("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Xe("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var ey=class{constructor(){this.rootNode_=V.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}};function Qd(){return{value:null,children:new Map}}function $S(e,t,n){if(W(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let r=$(t);e.children.has(r)||e.children.set(r,Qd());let i=e.children.get(r);t=ie(t),$S(i,t,n)}}function ty(e,t,n){e.value!==null?n(t,e.value):HV(e,(r,i)=>{let o=new Q(t.toString()+"/"+r);ty(i,o,n)})}function HV(e,t){e.children.forEach((n,r)=>{t(r,n)})}var ny=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),n=m({},t);return this.last_&&Le(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=t,n}};var nS=10*1e3,$V=30*1e3,WV=300*1e3,ry=class{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new ny(t);let r=nS+($V-nS)*Math.random();Ja(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let t=this.statsListener_.get(),n={},r=!1;Le(t,(i,o)=>{o>0&&an(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Ja(this.reportStats_.bind(this),Math.floor(Math.random()*2*WV))}};var Mn=(function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e})(Mn||{});function Ly(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Vy(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function jy(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var iy=class e{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=Mn.ACK_USER_WRITE,this.source=Ly()}operationForChild(t){if(W(this.path)){if(this.affectedTree.value!=null)return y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Q(t));return new e(Y(),n,this.revert)}}else return y($(this.path)===t,"operationForChild called for unrelated child."),new e(ie(this.path),this.affectedTree,this.revert)}};var Jd=class e{constructor(t,n){this.source=t,this.path=n,this.type=Mn.LISTEN_COMPLETE}operationForChild(t){return W(this.path)?new e(this.source,Y()):new e(this.source,ie(this.path))}};var ns=class e{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=Mn.OVERWRITE}operationForChild(t){return W(this.path)?new e(this.source,Y(),this.snap.getImmediateChild(t)):new e(this.source,ie(this.path),this.snap)}};var cc=class e{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=Mn.MERGE}operationForChild(t){if(W(this.path)){let n=this.children.subtree(new Q(t));return n.isEmpty()?null:n.value?new ns(this.source,Y(),n.value):new e(this.source,Y(),n)}else return y($(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,ie(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Rn=class{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(W(t))return this.isFullyInitialized()&&!this.filtered_;let n=$(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var oy=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function GV(e,t,n,r){let i=[],o=[];return t.forEach(s=>{s.type==="child_changed"&&e.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(LV(s.childName,s.snapshotNode))}),Qa(e,i,"child_removed",t,r,n),Qa(e,i,"child_added",t,r,n),Qa(e,i,"child_moved",o,r,n),Qa(e,i,"child_changed",t,r,n),Qa(e,i,"value",t,r,n),i}function Qa(e,t,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>qV(e,a,c)),s.forEach(a=>{let c=zV(e,a,o);i.forEach(l=>{l.respondsTo(a.type)&&t.push(l.createEvent(c,e.query_))})})}function zV(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function qV(e,t,n){if(t.childName==null||n.childName==null)throw Ci("Should only compare child_ events.");let r=new G(t.childName,t.snapshotNode),i=new G(n.childName,n.snapshotNode);return e.index_.compare(r,i)}function pf(e,t){return{eventCache:e,serverCache:t}}function ec(e,t,n,r){return pf(new Rn(t,n,r),e.serverCache)}function WS(e,t,n,r){return pf(e.eventCache,new Rn(t,n,r))}function Xd(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Ri(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Av,YV=()=>(Av||(Av=new Bt(z1)),Av),et=class e{static fromObject(t){let n=new e(null);return Le(t,(r,i)=>{n=n.set(new Q(r),i)}),n}constructor(t,n=YV()){this.value=t,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:Y(),value:this.value};if(W(t))return null;{let r=$(t),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(ie(t),n);return o!=null?{path:ue(new Q(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(W(t))return this;{let n=$(t),r=this.children.get(n);return r!==null?r.subtree(ie(t)):new e(null)}}set(t,n){if(W(t))return new e(n,this.children);{let r=$(t),o=(this.children.get(r)||new e(null)).set(ie(t),n),s=this.children.insert(r,o);return new e(this.value,s)}}remove(t){if(W(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=$(t),r=this.children.get(n);if(r){let i=r.remove(ie(t)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new e(null):new e(this.value,o)}else return this}}get(t){if(W(t))return this.value;{let n=$(t),r=this.children.get(n);return r?r.get(ie(t)):null}}setTree(t,n){if(W(t))return n;{let r=$(t),o=(this.children.get(r)||new e(null)).setTree(ie(t),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new e(this.value,s)}}fold(t){return this.fold_(Y(),t)}fold_(t,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(ue(t,i),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,Y(),n)}findOnPath_(t,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(W(t))return null;{let o=$(t),s=this.children.get(o);return s?s.findOnPath_(ie(t),ue(n,o),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,Y(),n)}foreachOnPath_(t,n,r){if(W(t))return this;{this.value&&r(n,this.value);let i=$(t),o=this.children.get(i);return o?o.foreachOnPath_(ie(t),ue(n,i),r):new e(null)}}foreach(t){this.foreach_(Y(),t)}foreach_(t,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ue(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}};var un=class e{constructor(t){this.writeTree_=t}static empty(){return new e(new et(null))}};function tc(e,t,n){if(W(t))return new un(new et(n));{let r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){let i=r.path,o=r.value,s=Je(i,t);return o=o.updateChild(s,n),new un(e.writeTree_.set(i,o))}else{let i=new et(n),o=e.writeTree_.setTree(t,i);return new un(o)}}}function sy(e,t,n){let r=e;return Le(n,(i,o)=>{r=tc(r,ue(t,i),o)}),r}function rS(e,t){if(W(t))return un.empty();{let n=e.writeTree_.setTree(t,new et(null));return new un(n)}}function ay(e,t){return xi(e,t)!=null}function xi(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(Je(n.path,t)):null}function iS(e){let t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ae,(r,i)=>{t.push(new G(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&t.push(new G(r,i.value))}),t}function Or(e,t){if(W(t))return e;{let n=xi(e,t);return n!=null?new un(new et(n)):new un(e.writeTree_.subtree(t))}}function cy(e){return e.writeTree_.isEmpty()}function rs(e,t){return GS(Y(),e.writeTree_,t)}function GS(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((i,o)=>{i===".priority"?(y(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=GS(ue(e,i),o,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(ue(e,".priority"),r)),n}}function gf(e,t){return KS(t,e)}function KV(e,t,n,r,i){y(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=tc(e.visibleWrites,t,n)),e.lastWriteId=r}function ZV(e,t,n,r){y(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=sy(e.visibleWrites,t,n),e.lastWriteId=r}function QV(e,t){for(let n=0;n<e.allWrites.length;n++){let r=e.allWrites[n];if(r.writeId===t)return r}return null}function JV(e,t){let n=e.allWrites.findIndex(a=>a.writeId===t);y(n>=0,"removeWrite called with nonexistent writeId.");let r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,s=e.allWrites.length-1;for(;i&&s>=0;){let a=e.allWrites[s];a.visible&&(s>=n&&XV(a,r.path)?i=!1:Ut(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return ej(e),!0;if(r.snap)e.visibleWrites=rS(e.visibleWrites,r.path);else{let a=r.children;Le(a,c=>{e.visibleWrites=rS(e.visibleWrites,ue(r.path,c))})}return!0}else return!1}function XV(e,t){if(e.snap)return Ut(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&Ut(ue(e.path,n),t))return!0;return!1}function ej(e){e.visibleWrites=zS(e.allWrites,tj,Y()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function tj(e){return e.visible}function zS(e,t,n){let r=un.empty();for(let i=0;i<e.length;++i){let o=e[i];if(t(o)){let s=o.path,a;if(o.snap)Ut(n,s)?(a=Je(n,s),r=tc(r,a,o.snap)):Ut(s,n)&&(a=Je(s,n),r=tc(r,Y(),o.snap.getChild(a)));else if(o.children){if(Ut(n,s))a=Je(n,s),r=sy(r,a,o.children);else if(Ut(s,n))if(a=Je(s,n),W(a))r=sy(r,Y(),o.children);else{let c=wi(o.children,$(a));if(c){let l=c.getChild(ie(a));r=tc(r,Y(),l)}}}else throw Ci("WriteRecord should have .snap or .children")}}return r}function qS(e,t,n,r,i){if(!r&&!i){let o=xi(e.visibleWrites,t);if(o!=null)return o;{let s=Or(e.visibleWrites,t);if(cy(s))return n;if(n==null&&!ay(s,Y()))return null;{let a=n||V.EMPTY_NODE;return rs(s,a)}}}else{let o=Or(e.visibleWrites,t);if(!i&&cy(o))return n;if(!i&&n==null&&!ay(o,Y()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Ut(l.path,t)||Ut(t,l.path))},a=zS(e.allWrites,s,t),c=n||V.EMPTY_NODE;return rs(a,c)}}}function nj(e,t,n){let r=V.EMPTY_NODE,i=xi(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(ae,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=Or(e.visibleWrites,t);return n.forEachChild(ae,(s,a)=>{let c=rs(Or(o,new Q(s)),a);r=r.updateImmediateChild(s,c)}),iS(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=Or(e.visibleWrites,t);return iS(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function rj(e,t,n,r,i){y(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=ue(t,n);if(ay(e.visibleWrites,o))return null;{let s=Or(e.visibleWrites,o);return cy(s)?i.getChild(n):rs(s,i.getChild(n))}}function ij(e,t,n,r){let i=ue(t,n),o=xi(e.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=Or(e.visibleWrites,i);return rs(s,r.getNode().getImmediateChild(n))}else return null}function oj(e,t){return xi(e.visibleWrites,t)}function sj(e,t,n,r,i,o,s){let a,c=Or(e.visibleWrites,t),l=xi(c,Y());if(l!=null)a=l;else if(n!=null)a=rs(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function aj(){return{visibleWrites:un.empty(),allWrites:[],lastWriteId:-1}}function ef(e,t,n,r){return qS(e.writeTree,e.treePath,t,n,r)}function Uy(e,t){return nj(e.writeTree,e.treePath,t)}function oS(e,t,n,r){return rj(e.writeTree,e.treePath,t,n,r)}function tf(e,t){return oj(e.writeTree,ue(e.treePath,t))}function cj(e,t,n,r,i,o){return sj(e.writeTree,e.treePath,t,n,r,i,o)}function By(e,t,n){return ij(e.writeTree,e.treePath,t,n)}function YS(e,t){return KS(ue(e.treePath,t),e.writeTree)}function KS(e,t){return{treePath:e,writeTree:t}}var ly=class{constructor(){this.changeMap=new Map}trackChildChange(t){let n=t.type,r=t.childName;y(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),y(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,sc(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,oc(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,ts(r,t.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,sc(r,t.snapshotNode,i.oldSnap));else throw Ci("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}};var uy=class{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}},ZS=new uy,lc=class{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{let r=this.optCompleteServerCache_!=null?new Rn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return By(this.writes_,t,r)}}getChildAfterChild(t,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ri(this.viewCache_),o=cj(this.writes_,i,n,1,r,t);return o.length===0?null:o[0]}};function lj(e){return{filter:e}}function uj(e,t){y(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),y(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function dj(e,t,n,r,i){let o=new ly,s,a;if(n.type===Mn.OVERWRITE){let l=n;l.source.fromUser?s=dy(e,t,l.path,l.snap,r,i,o):(y(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!W(l.path),s=nf(e,t,l.path,l.snap,r,i,a,o))}else if(n.type===Mn.MERGE){let l=n;l.source.fromUser?s=hj(e,t,l.path,l.children,r,i,o):(y(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),s=fy(e,t,l.path,l.children,r,i,a,o))}else if(n.type===Mn.ACK_USER_WRITE){let l=n;l.revert?s=mj(e,t,l.path,r,i,o):s=pj(e,t,l.path,l.affectedTree,r,i,o)}else if(n.type===Mn.LISTEN_COMPLETE)s=gj(e,t,n.path,r,o);else throw Ci("Unknown operation type: "+n.type);let c=o.getChanges();return fj(t,s,c),{viewCache:s,changes:c}}function fj(e,t,n){let r=t.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Xd(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(HS(Xd(t)))}}function QS(e,t,n,r,i,o){let s=t.eventCache;if(tf(r,n)!=null)return t;{let a,c;if(W(n))if(y(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let l=Ri(t),u=l instanceof V?l:V.EMPTY_NODE,d=Uy(r,u);a=e.filter.updateFullNode(t.eventCache.getNode(),d,o)}else{let l=ef(r,Ri(t));a=e.filter.updateFullNode(t.eventCache.getNode(),l,o)}else{let l=$(n);if(l===".priority"){y(Pr(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=t.serverCache.getNode();let d=oS(r,n,u,c);d!=null?a=e.filter.updatePriority(u,d):a=s.getNode()}else{let u=ie(n),d;if(s.isCompleteForChild(l)){c=t.serverCache.getNode();let f=oS(r,n,s.getNode(),c);f!=null?d=s.getNode().getImmediateChild(l).updateChild(u,f):d=s.getNode().getImmediateChild(l)}else d=By(r,l,t.serverCache);d!=null?a=e.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return ec(t,a,s.isFullyInitialized()||W(n),e.filter.filtersNodes())}}function nf(e,t,n,r,i,o,s,a){let c=t.serverCache,l,u=s?e.filter:e.filter.getIndexedFilter();if(W(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=$(n);if(!c.isCompleteForPath(n)&&Pr(n)>1)return t;let g=ie(n),T=c.getNode().getImmediateChild(h).updateChild(g,r);h===".priority"?l=u.updatePriority(c.getNode(),T):l=u.updateChild(c.getNode(),h,T,g,ZS,null)}let d=WS(t,l,c.isFullyInitialized()||W(n),u.filtersNodes()),f=new lc(i,d,o);return QS(e,d,n,i,f,a)}function dy(e,t,n,r,i,o,s){let a=t.eventCache,c,l,u=new lc(i,t,o);if(W(n))l=e.filter.updateFullNode(t.eventCache.getNode(),r,s),c=ec(t,l,!0,e.filter.filtersNodes());else{let d=$(n);if(d===".priority")l=e.filter.updatePriority(t.eventCache.getNode(),r),c=ec(t,l,a.isFullyInitialized(),a.isFiltered());else{let f=ie(n),h=a.getNode().getImmediateChild(d),g;if(W(f))g=r;else{let _=u.getCompleteChild(d);_!=null?xy(f)===".priority"&&_.getChild(PS(f)).isEmpty()?g=_:g=_.updateChild(f,r):g=V.EMPTY_NODE}if(h.equals(g))c=t;else{let _=e.filter.updateChild(a.getNode(),d,g,f,u,s);c=ec(t,_,a.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function sS(e,t){return e.eventCache.isCompleteForChild(t)}function hj(e,t,n,r,i,o,s){let a=t;return r.foreach((c,l)=>{let u=ue(n,c);sS(t,$(u))&&(a=dy(e,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=ue(n,c);sS(t,$(u))||(a=dy(e,a,u,l,i,o,s))}),a}function aS(e,t,n){return n.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function fy(e,t,n,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,l;W(n)?l=r:l=new et(null).setTree(n,r);let u=t.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=t.serverCache.getNode().getImmediateChild(d),g=aS(e,h,f);c=nf(e,c,new Q(d),g,i,o,s,a)}}),l.children.inorderTraversal((d,f)=>{let h=!t.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let g=t.serverCache.getNode().getImmediateChild(d),_=aS(e,g,f);c=nf(e,c,new Q(d),_,i,o,s,a)}}),c}function pj(e,t,n,r,i,o,s){if(tf(i,n)!=null)return t;let a=t.serverCache.isFiltered(),c=t.serverCache;if(r.value!=null){if(W(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return nf(e,t,n,c.getNode().getChild(n),i,o,a,s);if(W(n)){let l=new et(null);return c.getNode().forEachChild(Ni,(u,d)=>{l=l.set(new Q(u),d)}),fy(e,t,n,l,i,o,a,s)}else return t}else{let l=new et(null);return r.foreach((u,d)=>{let f=ue(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),fy(e,t,n,l,i,o,a,s)}}function gj(e,t,n,r,i){let o=t.serverCache,s=WS(t,o.getNode(),o.isFullyInitialized()||W(n),o.isFiltered());return QS(e,s,n,r,ZS,i)}function mj(e,t,n,r,i,o){let s;if(tf(r,n)!=null)return t;{let a=new lc(r,t,i),c=t.eventCache.getNode(),l;if(W(n)||$(n)===".priority"){let u;if(t.serverCache.isFullyInitialized())u=ef(r,Ri(t));else{let d=t.serverCache.getNode();y(d instanceof V,"serverChildren would be complete if leaf node"),u=Uy(r,d)}u=u,l=e.filter.updateFullNode(c,u,o)}else{let u=$(n),d=By(r,u,t.serverCache);d==null&&t.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=e.filter.updateChild(c,u,d,ie(n),a,o):t.eventCache.getNode().hasChild(u)?l=e.filter.updateChild(c,u,V.EMPTY_NODE,ie(n),a,o):l=c,l.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=ef(r,Ri(t)),s.isLeafNode()&&(l=e.filter.updateFullNode(l,s,o)))}return s=t.serverCache.isFullyInitialized()||tf(r,Y())!=null,ec(t,l,s,e.filter.filtersNodes())}}var hy=class{constructor(t,n){this.query_=t,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new ac(r.getIndex()),o=VV(r);this.processor_=lj(o);let s=n.serverCache,a=n.eventCache,c=i.updateFullNode(V.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(V.EMPTY_NODE,a.getNode(),null),u=new Rn(c,s.isFullyInitialized(),i.filtersNodes()),d=new Rn(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=pf(d,u),this.eventGenerator_=new oy(this.query_)}get query(){return this.query_}};function vj(e){return e.viewCache_.serverCache.getNode()}function yj(e){return Xd(e.viewCache_)}function _j(e,t){let n=Ri(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!W(t)&&!n.getImmediateChild($(t)).isEmpty())?n.getChild(t):null}function cS(e){return e.eventRegistrations_.length===0}function Ej(e,t){e.eventRegistrations_.push(t)}function lS(e,t,n){let r=[];if(n){y(t==null,"A cancel should cancel all event registrations.");let i=e.query._path;e.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(t){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){let s=e.eventRegistrations_[o];if(!s.matches(t))i.push(s);else if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function uS(e,t,n,r){t.type===Mn.MERGE&&t.source.queryId!==null&&(y(Ri(e.viewCache_),"We should always have a full cache before handling merges"),y(Xd(e.viewCache_),"Missing event cache, even though we have a server cache"));let i=e.viewCache_,o=dj(e.processor_,i,t,n,r);return uj(e.processor_,o.viewCache),y(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,JS(e,o.changes,o.viewCache.eventCache.getNode(),null)}function Ij(e,t){let n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ae,(o,s)=>{r.push(ts(o,s))}),n.isFullyInitialized()&&r.push(HS(n.getNode())),JS(e,r,n.getNode(),t)}function JS(e,t,n,r){let i=r?[r]:e.eventRegistrations_;return GV(e.eventGenerator_,t,n,i)}var rf,of=class{constructor(){this.views=new Map}};function Cj(e){y(!rf,"__referenceConstructor has already been defined"),rf=e}function wj(){return y(rf,"Reference.ts has not been loaded"),rf}function Dj(e){return e.views.size===0}function Hy(e,t,n,r){let i=t.source.queryId;if(i!==null){let o=e.views.get(i);return y(o!=null,"SyncTree gave us an op for an invalid query."),uS(o,t,n,r)}else{let o=[];for(let s of e.views.values())o=o.concat(uS(s,t,n,r));return o}}function XS(e,t,n,r,i){let o=t._queryIdentifier,s=e.views.get(o);if(!s){let a=ef(n,i?r:null),c=!1;a?c=!0:r instanceof V?(a=Uy(n,r),c=!1):(a=V.EMPTY_NODE,c=!1);let l=pf(new Rn(a,c,!1),new Rn(r,i,!1));return new hy(t,l)}return s}function bj(e,t,n,r,i,o){let s=XS(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),Ej(s,n),Ij(s,n)}function Tj(e,t,n,r){let i=t._queryIdentifier,o=[],s=[],a=Fr(e);if(i==="default")for(let[c,l]of e.views.entries())s=s.concat(lS(l,n,r)),cS(l)&&(e.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{let c=e.views.get(i);c&&(s=s.concat(lS(c,n,r)),cS(c)&&(e.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!Fr(e)&&o.push(new(wj())(t._repo,t._path)),{removed:o,events:s}}function eA(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function xr(e,t){let n=null;for(let r of e.views.values())n=n||_j(r,t);return n}function tA(e,t){if(t._queryParams.loadsAllData())return mf(e);{let r=t._queryIdentifier;return e.views.get(r)}}function nA(e,t){return tA(e,t)!=null}function Fr(e){return mf(e)!=null}function mf(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var sf;function Sj(e){y(!sf,"__referenceConstructor has already been defined"),sf=e}function Aj(){return y(sf,"Reference.ts has not been loaded"),sf}var Nj=1,af=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new et(null),this.pendingWriteTree_=aj(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function rA(e,t,n,r,i){return KV(e.pendingWriteTree_,t,n,r,i),i?cs(e,new ns(Ly(),t,n)):[]}function Mj(e,t,n,r){ZV(e.pendingWriteTree_,t,n,r);let i=et.fromObject(n);return cs(e,new cc(Ly(),t,i))}function Rr(e,t,n=!1){let r=QV(e.pendingWriteTree_,t);if(JV(e.pendingWriteTree_,t)){let o=new et(null);return r.snap!=null?o=o.set(Y(),!0):Le(r.children,s=>{o=o.set(new Q(s),!0)}),cs(e,new iy(r.path,o,n))}else return[]}function mc(e,t,n){return cs(e,new ns(Vy(),t,n))}function Rj(e,t,n){let r=et.fromObject(n);return cs(e,new cc(Vy(),t,r))}function Oj(e,t){return cs(e,new Jd(Vy(),t))}function xj(e,t,n){let r=Wy(e,n);if(r){let i=Gy(r),o=i.path,s=i.queryId,a=Je(o,t),c=new Jd(jy(s),a);return zy(e,o,c)}else return[]}function cf(e,t,n,r,i=!1){let o=t._path,s=e.syncPointTree_.get(o),a=[];if(s&&(t._queryIdentifier==="default"||nA(s,t))){let c=Tj(s,t,n,r);Dj(s)&&(e.syncPointTree_=e.syncPointTree_.remove(o));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=e.syncPointTree_.findOnPath(o,(f,h)=>Fr(h));if(u&&!d){let f=e.syncPointTree_.subtree(o);if(!f.isEmpty()){let h=Fj(f);for(let g=0;g<h.length;++g){let _=h[g],T=_.query,R=aA(e,_);e.listenProvider_.startListening(nc(T),uc(e,T),R.hashFn,R.onComplete)}}}!d&&l.length>0&&!r&&(u?e.listenProvider_.stopListening(nc(t),null):l.forEach(f=>{let h=e.queryToTagMap.get(vf(f));e.listenProvider_.stopListening(nc(f),h)}))}Lj(e,l)}return a}function iA(e,t,n,r){let i=Wy(e,r);if(i!=null){let o=Gy(i),s=o.path,a=o.queryId,c=Je(s,t),l=new ns(jy(a),c,n);return zy(e,s,l)}else return[]}function kj(e,t,n,r){let i=Wy(e,r);if(i){let o=Gy(i),s=o.path,a=o.queryId,c=Je(s,t),l=et.fromObject(n),u=new cc(jy(a),c,l);return zy(e,s,u)}else return[]}function py(e,t,n,r=!1){let i=t._path,o=null,s=!1;e.syncPointTree_.foreachOnPath(i,(f,h)=>{let g=Je(f,i);o=o||xr(h,g),s=s||Fr(h)});let a=e.syncPointTree_.get(i);a?(s=s||Fr(a),o=o||xr(a,Y())):(a=new of,e.syncPointTree_=e.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=V.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((h,g)=>{let _=xr(g,Y());_&&(o=o.updateImmediateChild(h,_))}));let l=nA(a,t);if(!l&&!t._queryParams.loadsAllData()){let f=vf(t);y(!e.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=Vj();e.queryToTagMap.set(f,h),e.tagToQueryMap.set(h,f)}let u=gf(e.pendingWriteTree_,i),d=bj(a,t,n,u,o,c);if(!l&&!s&&!r){let f=tA(a,t);d=d.concat(jj(e,t,f))}return d}function $y(e,t,n){let i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(s,a)=>{let c=Je(s,t),l=xr(a,c);if(l)return l});return qS(i,t,o,n,!0)}function Pj(e,t){let n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(l,u)=>{let d=Je(l,n);r=r||xr(u,d)});let i=e.syncPointTree_.get(n);i?r=r||xr(i,Y()):(i=new of,e.syncPointTree_=e.syncPointTree_.set(n,i));let o=r!=null,s=o?new Rn(r,!0,!1):null,a=gf(e.pendingWriteTree_,t._path),c=XS(i,t,a,o?s.getNode():V.EMPTY_NODE,o);return yj(c)}function cs(e,t){return oA(t,e.syncPointTree_,null,gf(e.pendingWriteTree_,Y()))}function oA(e,t,n,r){if(W(e.path))return sA(e,t,n,r);{let i=t.get(Y());n==null&&i!=null&&(n=xr(i,Y()));let o=[],s=$(e.path),a=e.operationForChild(s),c=t.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=YS(r,s);o=o.concat(oA(a,c,l,u))}return i&&(o=o.concat(Hy(i,e,r,n))),o}}function sA(e,t,n,r){let i=t.get(Y());n==null&&i!=null&&(n=xr(i,Y()));let o=[];return t.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=YS(r,s),u=e.operationForChild(s);u&&(o=o.concat(sA(u,a,c,l)))}),i&&(o=o.concat(Hy(i,e,r,n))),o}function aA(e,t){let n=t.query,r=uc(e,n);return{hashFn:()=>(vj(t)||V.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?xj(e,n._path,r):Oj(e,n._path);{let o=K1(i,n);return cf(e,n,null,o)}}}}function uc(e,t){let n=vf(t);return e.queryToTagMap.get(n)}function vf(e){return e._path.toString()+"$"+e._queryIdentifier}function Wy(e,t){return e.tagToQueryMap.get(t)}function Gy(e){let t=e.indexOf("$");return y(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Q(e.substr(0,t))}}function zy(e,t,n){let r=e.syncPointTree_.get(t);y(r,"Missing sync point for query tag that we're tracking");let i=gf(e.pendingWriteTree_,t);return Hy(r,n,i,null)}function Fj(e){return e.fold((t,n,r)=>{if(n&&Fr(n))return[mf(n)];{let i=[];return n&&(i=eA(n)),Le(r,(o,s)=>{i=i.concat(s)}),i}})}function nc(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Aj())(e._repo,e._path):e}function Lj(e,t){for(let n=0;n<t.length;++n){let r=t[n];if(!r._queryParams.loadsAllData()){let i=vf(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}function Vj(){return Nj++}function jj(e,t,n){let r=t._path,i=uc(e,t),o=aA(e,n),s=e.listenProvider_.startListening(nc(t),i,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(r);if(i)y(!Fr(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!W(l)&&u&&Fr(u))return[mf(u).query];{let f=[];return u&&(f=f.concat(eA(u).map(h=>h.query))),Le(d,(h,g)=>{f=f.concat(g)}),f}});for(let l=0;l<c.length;++l){let u=c[l];e.listenProvider_.stopListening(nc(u),uc(e,u))}}return s}var gy=class e{constructor(t){this.node_=t}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},my=class e{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){let n=ue(this.path_,t);return new e(this.syncTree_,n)}node(){return $y(this.syncTree_,this.path_)}},Uj=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},dS=function(e,t,n){if(!e||typeof e!="object")return e;if(y(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return Bj(e[".sv"],t,n);if(typeof e[".sv"]=="object")return Hj(e[".sv"],t);y(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},Bj=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:y(!1,"Unexpected server value: "+e)}},Hj=function(e,t,n){e.hasOwnProperty("increment")||y(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let r=e.increment;typeof r!="number"&&y(!1,"Unexpected increment value: "+r);let i=t.node();if(y(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},cA=function(e,t,n,r){return qy(t,new my(n,e),r)},lA=function(e,t,n){return qy(e,new gy(t),n)};function qy(e,t,n){let r=e.getPriority().val(),i=dS(r,t.getImmediateChild(".priority"),n),o;if(e.isLeafNode()){let s=e,a=dS(s.getValue(),t,n);return a!==s.getValue()||i!==s.getPriority().val()?new Xo(a,Se(i)):e}else{let s=e;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Xo(i))),s.forEachChild(ae,(a,c)=>{let l=qy(c,t.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var dc=class{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}};function Yy(e,t){let n=t instanceof Q?t:new Q(t),r=e,i=$(n);for(;i!==null;){let o=wi(r.node.children,i)||{children:{},childCount:0};r=new dc(i,r,o),n=ie(n),i=$(n)}return r}function ls(e){return e.node.value}function uA(e,t){e.node.value=t,vy(e)}function dA(e){return e.node.childCount>0}function $j(e){return ls(e)===void 0&&!dA(e)}function yf(e,t){Le(e.node.children,(n,r)=>{t(new dc(n,e,r))})}function fA(e,t,n,r){n&&!r&&t(e),yf(e,i=>{fA(i,t,!0,r)}),n&&r&&t(e)}function Wj(e,t,n){let r=n?e:e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function vc(e){return new Q(e.parent===null?e.name:vc(e.parent)+"/"+e.name)}function vy(e){e.parent!==null&&Gj(e.parent,e.name,e)}function Gj(e,t,n){let r=$j(n),i=an(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,vy(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,vy(e))}var zj=/[\[\].#$\/\u0000-\u001F\u007F]/,qj=/[\[\].#$\u0000-\u001F\u007F]/,Nv=10*1024*1024,_f=function(e){return typeof e=="string"&&e.length!==0&&!zj.test(e)},hA=function(e){return typeof e=="string"&&e.length!==0&&!qj.test(e)},Yj=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),hA(e)},yy=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!My(e)||e&&typeof e=="object"&&an(e,".sv")},Ef=function(e,t,n,r){r&&t===void 0||If(Yo(e,"value"),t,n)},If=function(e,t,n){let r=n instanceof Q?new $v(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+Ti(r));if(typeof t=="function")throw new Error(e+"contains a function "+Ti(r)+" with contents = "+t.toString());if(My(t))throw new Error(e+"contains "+t.toString()+" "+Ti(r));if(typeof t=="string"&&t.length>Nv/3&&Wa(t)>Nv)throw new Error(e+"contains a string greater than "+Nv+" utf8 bytes "+Ti(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let i=!1,o=!1;if(Le(t,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!_f(s)))throw new Error(e+" contains an invalid key ("+s+") "+Ti(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);bV(r,s),If(e,a,r),TV(r)}),i&&o)throw new Error(e+' contains ".value" child '+Ti(r)+" in addition to actual children.")}},Kj=function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];let o=rc(r);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!_f(o[s]))throw new Error(e+"contains an invalid key ("+o[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(DV);let i=null;for(n=0;n<t.length;n++){if(r=t[n],i!==null&&Ut(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},Zj=function(e,t,n,r){if(r&&t===void 0)return;let i=Yo(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");let o=[];Le(t,(s,a)=>{let c=new Q(s);if(If(i,a,ue(n,c)),xy(c)===".priority"&&!yy(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(c)}),Kj(i,o)};var Qj=function(e,t,n,r){if(!(r&&n===void 0)&&!_f(n))throw new Error(Yo(e,t)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Ky=function(e,t,n,r){if(!(r&&n===void 0)&&!hA(n))throw new Error(Yo(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Jj=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ky(e,t,n,r)},pA=function(e,t){if($(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},Xj=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!_f(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Yj(n))throw new Error(Yo(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var _y=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Cf(e,t){let n=null;for(let r=0;r<t.length;r++){let i=t[r],o=i.getPath();n!==null&&!ky(o,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function gA(e,t,n){Cf(e,n),mA(e,r=>ky(r,t))}function Ht(e,t,n){Cf(e,n),mA(e,r=>Ut(r,t)||Ut(t,r))}function mA(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){let i=e.eventLists_[r];if(i){let o=i.path;t(o)?(eU(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function eU(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let r=n.getEventRunner();Ai&&Fe("event: "+n.toString()),as(r)}}}var tU="repo_interrupt",nU=25,Ey=class{constructor(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _y,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Qd(),this.transactionQueueTree_=new dc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function rU(e,t,n){if(e.stats_=Oy(e.repoInfo_),e.forceRestClient_||X1())e.server_=new Xv(e.repoInfo_,(r,i,o,s)=>{fS(e,r,i,o,s)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>hS(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{we(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Py(e.repoInfo_,t,(r,i,o,s)=>{fS(e,r,i,o,s)},r=>{hS(e,r)},r=>{oU(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=tV(e.repoInfo_,()=>new ry(e.stats_,e.server_)),e.infoData_=new ey,e.infoSyncTree_=new af({startListening:(r,i,o,s)=>{let a=[],c=e.infoData_.getNode(r._path);return c.isEmpty()||(a=mc(e.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),Zy(e,"connected",!1),e.serverSyncTree_=new af({startListening:(r,i,o,s)=>(e.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);Ht(e.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}function iU(e){let n=e.infoData_.getNode(new Q(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function wf(e){return Uj({timestamp:iU(e)})}function fS(e,t,n,r,i){e.dataUpdateCount++;let o=new Q(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i)if(r){let c=$a(n,l=>Se(l));s=kj(e.serverSyncTree_,o,c,i)}else{let c=Se(n);s=iA(e.serverSyncTree_,o,c,i)}else if(r){let c=$a(n,l=>Se(l));s=Rj(e.serverSyncTree_,o,c)}else{let c=Se(n);s=mc(e.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=is(e,o)),Ht(e.eventQueue_,a,s)}function hS(e,t){Zy(e,"connected",t),t===!1&&lU(e)}function oU(e,t){Le(t,(n,r)=>{Zy(e,n,r)})}function Zy(e,t,n){let r=new Q("/.info/"+t),i=Se(n);e.infoData_.updateSnapshot(r,i);let o=mc(e.infoSyncTree_,r,i);Ht(e.eventQueue_,r,o)}function Qy(e){return e.nextWriteId_++}function sU(e,t,n){let r=Pj(e.serverSyncTree_,t);return r!=null?Promise.resolve(r):e.server_.get(t).then(i=>{let o=Se(i).withIndex(t._queryParams.getIndex());py(e.serverSyncTree_,t,n,!0);let s;if(t._queryParams.loadsAllData())s=mc(e.serverSyncTree_,t._path,o);else{let a=uc(e.serverSyncTree_,t);s=iA(e.serverSyncTree_,t._path,o,a)}return Ht(e.eventQueue_,t._path,s),cf(e.serverSyncTree_,t,n,null,!0),o},i=>(yc(e,"get for query "+we(t)+" failed: "+i),Promise.reject(new Error(i))))}function aU(e,t,n,r,i){yc(e,"set",{path:t.toString(),value:n,priority:r});let o=wf(e),s=Se(n,r),a=$y(e.serverSyncTree_,t),c=lA(s,a,o),l=Qy(e),u=rA(e.serverSyncTree_,t,c,l,!0);Cf(e.eventQueue_,u),e.server_.put(t.toString(),s.val(!0),(f,h)=>{let g=f==="ok";g||Xe("set at "+t+" failed: "+f);let _=Rr(e.serverSyncTree_,l,!g);Ht(e.eventQueue_,t,_),Iy(e,i,f,h)});let d=Xy(e,t);is(e,d),Ht(e.eventQueue_,d,[])}function cU(e,t,n,r){yc(e,"update",{path:t.toString(),value:n});let i=!0,o=wf(e),s={};if(Le(n,(a,c)=>{i=!1,s[a]=cA(ue(t,a),Se(c),e.serverSyncTree_,o)}),i)Fe("update() called with empty data.  Don't do anything."),Iy(e,r,"ok",void 0);else{let a=Qy(e),c=Mj(e.serverSyncTree_,t,s,a);Cf(e.eventQueue_,c),e.server_.merge(t.toString(),n,(l,u)=>{let d=l==="ok";d||Xe("update at "+t+" failed: "+l);let f=Rr(e.serverSyncTree_,a,!d),h=f.length>0?is(e,t):t;Ht(e.eventQueue_,h,f),Iy(e,r,l,u)}),Le(n,l=>{let u=Xy(e,ue(t,l));is(e,u)}),Ht(e.eventQueue_,t,[])}}function lU(e){yc(e,"onDisconnectEvents");let t=wf(e),n=Qd();ty(e.onDisconnect_,Y(),(i,o)=>{let s=cA(i,o,e.serverSyncTree_,t);$S(n,i,s)});let r=[];ty(n,Y(),(i,o)=>{r=r.concat(mc(e.serverSyncTree_,i,o));let s=Xy(e,i);is(e,s)}),e.onDisconnect_=Qd(),Ht(e.eventQueue_,Y(),r)}function uU(e,t,n){let r;$(t._path)===".info"?r=py(e.infoSyncTree_,t,n):r=py(e.serverSyncTree_,t,n),gA(e.eventQueue_,t._path,r)}function pS(e,t,n){let r;$(t._path)===".info"?r=cf(e.infoSyncTree_,t,n):r=cf(e.serverSyncTree_,t,n),gA(e.eventQueue_,t._path,r)}function dU(e){e.persistentConnection_&&e.persistentConnection_.interrupt(tU)}function yc(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),Fe(n,...t)}function Iy(e,t,n,r){t&&as(()=>{if(n==="ok")t(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,t(s)}})}function vA(e,t,n){return $y(e.serverSyncTree_,t,n)||V.EMPTY_NODE}function Jy(e,t=e.transactionQueueTree_){if(t||Df(e,t),ls(t)){let n=_A(e,t);y(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&fU(e,vc(t),n)}else dA(t)&&yf(t,n=>{Jy(e,n)})}function fU(e,t,n){let r=n.map(l=>l.currentWriteId),i=vA(e,t,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];y(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Je(t,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=t;e.server_.put(c.toString(),a,l=>{yc(e,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(Rr(e.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Df(e,Yy(e.transactionQueueTree_,t)),Jy(e,e.transactionQueueTree_),Ht(e.eventQueue_,t,u);for(let f=0;f<d.length;f++)as(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Xe("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}is(e,t)}},s)}function is(e,t){let n=yA(e,t),r=vc(n),i=_A(e,n);return hU(e,i,r),r}function hU(e,t,n){if(t.length===0)return;let r=[],i=[],s=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let c=t[a],l=Je(n,c.path),u=!1,d;if(y(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(Rr(e.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=nU)u=!0,d="maxretry",i=i.concat(Rr(e.serverSyncTree_,c.currentWriteId,!0));else{let f=vA(e,c.path,s);c.currentInputSnapshot=f;let h=t[a].update(f.val());if(h!==void 0){If("transaction failed: Data returned ",h,c.path);let g=Se(h);typeof h=="object"&&h!=null&&an(h,".priority")||(g=g.updatePriority(f.getPriority()));let T=c.currentWriteId,R=wf(e),ut=lA(g,f,R);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=ut,c.currentWriteId=Qy(e),s.splice(s.indexOf(T),1),i=i.concat(rA(e.serverSyncTree_,c.path,ut,c.currentWriteId,c.applyLocally)),i=i.concat(Rr(e.serverSyncTree_,T,!0))}else u=!0,d="nodata",i=i.concat(Rr(e.serverSyncTree_,c.currentWriteId,!0))}Ht(e.eventQueue_,n,i),i=[],u&&(t[a].status=2,(function(f){setTimeout(f,Math.floor(0))})(t[a].unwatcher),t[a].onComplete&&(d==="nodata"?r.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):r.push(()=>t[a].onComplete(new Error(d),!1,null))))}Df(e,e.transactionQueueTree_);for(let a=0;a<r.length;a++)as(r[a]);Jy(e,e.transactionQueueTree_)}function yA(e,t){let n,r=e.transactionQueueTree_;for(n=$(t);n!==null&&ls(r)===void 0;)r=Yy(r,n),t=ie(t),n=$(t);return r}function _A(e,t){let n=[];return EA(e,t,n),n.sort((r,i)=>r.order-i.order),n}function EA(e,t,n){let r=ls(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);yf(t,i=>{EA(e,i,n)})}function Df(e,t){let n=ls(t);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,uA(t,n.length>0?n:void 0)}yf(t,r=>{Df(e,r)})}function Xy(e,t){let n=vc(yA(e,t)),r=Yy(e.transactionQueueTree_,t);return Wj(r,i=>{Mv(e,i)}),Mv(e,r),fA(r,i=>{Mv(e,i)}),n}function Mv(e,t){let n=ls(t);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(y(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(y(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(Rr(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?uA(t,void 0):n.length=o+1,Ht(e.eventQueue_,vc(t),i);for(let s=0;s<r.length;s++)as(r[s])}}function pU(e){let t="",n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function gU(e){let t={};e.charAt(0)==="?"&&(e=e.substring(1));for(let n of e.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Xe(`Invalid query segment '${n}' in query '${e}'`)}return t}var gS=function(e,t){let n=mU(e),r=n.namespace;n.domain==="firebase.com"&&er(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&er("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||W1();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new $d(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Q(n.pathString)}},mU=function(e){let t="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof e=="string"){let l=e.indexOf("//");l>=0&&(a=e.substring(0,l-1),e=e.substring(l+2));let u=e.indexOf("/");u===-1&&(u=e.length);let d=e.indexOf("?");d===-1&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=pU(e.substring(u,d)));let f=gU(e.substring(Math.min(e.length,d)));l=t.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(t.substring(l+1),10)):l=t.length;let h=t.slice(0,l);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let g=t.indexOf(".");r=t.substring(0,g).toLowerCase(),n=t.substring(g+1),o=r}"ns"in f&&(o=f.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var lf=class{constructor(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+we(this.snapshot.exportVal())}},uf=class{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var df=class{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return y(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var os=class e{constructor(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return W(this._path)?null:xy(this._path)}get ref(){return new On(this._repo,this._path)}get _queryIdentifier(){let t=tS(this._queryParams),n=Ry(t);return n==="{}"?"default":n}get _queryObject(){return tS(this._queryParams)}isEqual(t){if(t=ve(t),!(t instanceof e))return!1;let n=this._repo===t._repo,r=ky(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+wV(this._path)}};function vU(e,t){if(e._orderByCalled===!0)throw new Error(t+": You can't combine multiple orderBy calls.")}function e_(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Ni){let r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==Mi)throw new Error(r);if(typeof t!="string")throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==kr)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(e.getIndex()===ae){if(t!=null&&!yy(t)||n!=null&&!yy(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(y(e.getIndex()instanceof ic||e.getIndex()===BS,"unknown index type."),t!=null&&typeof t=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function IA(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var On=class e extends os{constructor(t,n){super(t,n,new Jv,!1)}get parent(){let t=PS(this._path);return t===null?null:new e(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},fc=class e{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let n=new Q(t),r=ff(this.ref,t);return new e(this._node.getChild(n),r,ae)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>t(new e(i,ff(this.ref,r),ae)))}hasChild(t){let n=new Q(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function $t(e,t){return e=ve(e),e._checkNotDeleted("ref"),t!==void 0?ff(e._root,t):e._root}function ff(e,t){return e=ve(e),$(e._path)===null?Jj("child","path",t,!1):Ky("child","path",t,!1),new On(e._repo,ue(e._path,t))}function t_(e){return pA("remove",e._path),bf(e,null)}function bf(e,t){e=ve(e),pA("set",e._path),Ef("set",t,e._path,!1);let n=new Jn;return aU(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function Tf(e,t){Zj("update",t,e._path,!1);let n=new Jn;return cU(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}function CA(e){e=ve(e);let t=new df(()=>{}),n=new hf(t);return sU(e._repo,e,n).then(r=>new fc(r,new On(e._repo,e._path),e._queryParams.getIndex()))}var hf=class e{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){let r=n._queryParams.getIndex();return new lf("value",this,new fc(t.snapshotNode,new On(n._repo,n._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new uf(this,t,n):null}matches(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Cy=class e{constructor(t,n){this.eventType=t,this.callbackContext=n}respondsTo(t){let n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new uf(this,t,n):null}createEvent(t,n){y(t.childName!=null,"Child events should have a childName.");let r=ff(new On(n._repo,n._path),t.childName),i=n._queryParams.getIndex();return new lf(t.type,this,new fc(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function yU(e,t,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{pS(e._repo,e,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let s=new df(n,o||void 0),a=t==="value"?new hf(s):new Cy(t,s);return uU(e._repo,e,a),()=>pS(e._repo,e,a)}function _c(e,t,n,r){return yU(e,"value",t,n,r)}var ss=class{},wy=class extends ss{constructor(t,n){super(),this._value=t,this._key=n,this.type="endAt"}_apply(t){Ef("endAt",this._value,t._path,!0);let n=UV(t._queryParams,this._value,this._key);if(IA(n),e_(n),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new os(t._repo,t._path,n,t._orderByCalled)}};var Dy=class extends ss{constructor(t,n){super(),this._value=t,this._key=n,this.type="startAt"}_apply(t){Ef("startAt",this._value,t._path,!0);let n=jV(t._queryParams,this._value,this._key);if(IA(n),e_(n),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new os(t._repo,t._path,n,t._orderByCalled)}};var by=class extends ss{constructor(t){super(),this._path=t,this.type="orderByChild"}_apply(t){vU(t,"orderByChild");let n=new Q(this._path);if(W(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let r=new ic(n),i=BV(t._queryParams,r);return e_(i),new os(t._repo,t._path,i,!0)}};function wA(e){if(e==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(e==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(e==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ky("orderByChild","path",e,!1),new by(e)}var Ty=class extends ss{constructor(t,n){super(),this._value=t,this._key=n,this.type="equalTo"}_apply(t){if(Ef("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new wy(this._value,this._key)._apply(new Dy(this._value,this._key)._apply(t))}};function DA(e,t){return Qj("equalTo","key",t,!0),new Ty(e,t)}function bA(e,...t){let n=ve(e);for(let r of t)n=r._apply(n);return n}Cj(On);Sj(On);var _U="FIREBASE_DATABASE_EMULATOR_HOST",Sy={},EU=!1;function IU(e,t,n,r){let i=t.lastIndexOf(":"),o=t.substring(0,i),s=Sr(o);e.repoInfo_=new $d(t,s,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}function CU(e,t,n,r,i){let o=r||e.options.databaseURL;o===void 0&&(e.options.projectId||er("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Fe("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let s=gS(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[_U]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=gS(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new Xa(Xa.OWNER):new Fv(e.name,e.options,t);Xj("Invalid Firebase Database URL",s),W(s.path)||er("Database URL must point to the root of a Firebase Database (not including a child path).");let d=DU(a,e,u,new Pv(e,n));return new Ay(d,e)}function wU(e,t){let n=Sy[t];(!n||n[e.key]!==e)&&er(`Database ${t}(${e.repoInfo_}) has already been deleted.`),dU(e),delete n[e.key]}function DU(e,t,n,r){let i=Sy[t.name];i||(i={},Sy[t.name]=i);let o=i[e.toURLString()];return o&&er("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Ey(e,EU,n,r),i[e.toURLString()]=o,o}var Ay=class{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(rU(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new On(this._repo,Y())),this._rootInternal}_delete(){return this._rootInternal!==null&&(wU(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&er("Cannot call "+t+" on a deleted database.")}};function TA(e=bi(),t){let n=cn(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){let r=gT("database");r&&bU(n,...r)}return n}function bU(e,t,n,r={}){e=ve(e),e._checkNotDeleted("useEmulator");let i=`${t}:${n}`,o=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&jt(r,o.repoInfo_.emulatorOptions))return;er("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let s;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&er('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Xa(Xa.OWNER);else if(r.mockUserToken){let a=typeof r.mockUserToken=="string"?r.mockUserToken:mT(r.mockUserToken,e.app.options.projectId);s=new Xa(a)}Sr(t)&&(Rd(t),Od("Database",!0)),IU(o,i,r,s)}function TU(e){B1(Mr),lt(new Me("database",(t,{instanceIdentifier:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return CU(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),Pe(VT,jT,e),Pe(VT,jT,"esm2020")}Py.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};Py.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};TU();var SU="firebase",AU="12.7.0";Pe(SU,AU,"app");var NA="@firebase/installations",o_="0.6.19";var MA=1e4,RA=`w:${o_}`,OA="FIS_v2",NU="https://firebaseinstallations.googleapis.com/v1",MU=3600*1e3,RU="installations",OU="Installations";var xU={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Pi=new Ct(RU,OU,xU);function xA(e){return e instanceof Qe&&e.code.includes("request-failed")}function kA({projectId:e}){return`${NU}/projects/${e}/installations`}function PA(e){return{token:e.token,requestStatus:2,expiresIn:PU(e.expiresIn),creationTime:Date.now()}}function FA(e,t){return p(this,null,function*(){let r=(yield t.json()).error;return Pi.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function LA({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function kU(e,{refreshToken:t}){let n=LA(e);return n.append("Authorization",FU(t)),n}function VA(e){return p(this,null,function*(){let t=yield e();return t.status>=500&&t.status<600?e():t})}function PU(e){return Number(e.replace("s","000"))}function FU(e){return`${OA} ${e}`}function LU(r,i){return p(this,arguments,function*({appConfig:e,heartbeatServiceProvider:t},{fid:n}){let o=kA(e),s=LA(e),a=t.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}let c={fid:n,authVersion:OA,appId:e.appId,sdkVersion:RA},l={method:"POST",headers:s,body:JSON.stringify(c)},u=yield VA(()=>fetch(o,l));if(u.ok){let d=yield u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:PA(d.authToken)}}else throw yield FA("Create Installation",u)})}function jA(e){return new Promise(t=>{setTimeout(t,e)})}function VU(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}var jU=/^[cdef][\w-]{21}$/,i_="";function UU(){try{let e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;let n=BU(e);return jU.test(n)?n:i_}catch{return i_}}function BU(e){return VU(e).substr(0,22)}function Af(e){return`${e.appName}!${e.appId}`}var UA=new Map;function BA(e,t){let n=Af(e);HA(n,t),HU(n,t)}function HA(e,t){let n=UA.get(e);if(n)for(let r of n)r(t)}function HU(e,t){let n=$U();n&&n.postMessage({key:e,fid:t}),WU()}var ki=null;function $U(){return!ki&&"BroadcastChannel"in self&&(ki=new BroadcastChannel("[Firebase] FID Change"),ki.onmessage=e=>{HA(e.data.key,e.data.fid)}),ki}function WU(){UA.size===0&&ki&&(ki.close(),ki=null)}var GU="firebase-installations-database",zU=1,Fi="firebase-installations-store",n_=null;function s_(){return n_||(n_=jd(GU,zU,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Fi)}}})),n_}function Sf(e,t){return p(this,null,function*(){let n=Af(e),i=(yield s_()).transaction(Fi,"readwrite"),o=i.objectStore(Fi),s=yield o.get(n);return yield o.put(t,n),yield i.done,(!s||s.fid!==t.fid)&&BA(e,t.fid),t})}function $A(e){return p(this,null,function*(){let t=Af(e),r=(yield s_()).transaction(Fi,"readwrite");yield r.objectStore(Fi).delete(t),yield r.done})}function Nf(e,t){return p(this,null,function*(){let n=Af(e),i=(yield s_()).transaction(Fi,"readwrite"),o=i.objectStore(Fi),s=yield o.get(n),a=t(s);return a===void 0?yield o.delete(n):yield o.put(a,n),yield i.done,a&&(!s||s.fid!==a.fid)&&BA(e,a.fid),a})}function a_(e){return p(this,null,function*(){let t,n=yield Nf(e.appConfig,r=>{let i=qU(r),o=YU(e,i);return t=o.registrationPromise,o.installationEntry});return n.fid===i_?{installationEntry:yield t}:{installationEntry:n,registrationPromise:t}})}function qU(e){let t=e||{fid:UU(),registrationStatus:0};return WA(t)}function YU(e,t){if(t.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(Pi.create("app-offline"));return{installationEntry:t,registrationPromise:i}}let n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=KU(e,n);return{installationEntry:n,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:ZU(e)}:{installationEntry:t}}function KU(e,t){return p(this,null,function*(){try{let n=yield LU(e,t);return Sf(e.appConfig,n)}catch(n){throw xA(n)&&n.customData.serverCode===409?yield $A(e.appConfig):yield Sf(e.appConfig,{fid:t.fid,registrationStatus:0}),n}})}function ZU(e){return p(this,null,function*(){let t=yield SA(e.appConfig);for(;t.registrationStatus===1;)yield jA(100),t=yield SA(e.appConfig);if(t.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield a_(e);return r||n}return t})}function SA(e){return Nf(e,t=>{if(!t)throw Pi.create("installation-not-found");return WA(t)})}function WA(e){return QU(e)?{fid:e.fid,registrationStatus:0}:e}function QU(e){return e.registrationStatus===1&&e.registrationTime+MA<Date.now()}function JU(r,i){return p(this,arguments,function*({appConfig:e,heartbeatServiceProvider:t},n){let o=XU(e,n),s=kU(e,n),a=t.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}let c={installation:{sdkVersion:RA,appId:e.appId}},l={method:"POST",headers:s,body:JSON.stringify(c)},u=yield VA(()=>fetch(o,l));if(u.ok){let d=yield u.json();return PA(d)}else throw yield FA("Generate Auth Token",u)})}function XU(e,{fid:t}){return`${kA(e)}/${t}/authTokens:generate`}function c_(e,t=!1){return p(this,null,function*(){let n,r=yield Nf(e.appConfig,o=>{if(!GA(o))throw Pi.create("not-registered");let s=o.authToken;if(!t&&nB(s))return o;if(s.requestStatus===1)return n=eB(e,t),o;{if(!navigator.onLine)throw Pi.create("app-offline");let a=iB(o);return n=tB(e,a),a}});return n?yield n:r.authToken})}function eB(e,t){return p(this,null,function*(){let n=yield AA(e.appConfig);for(;n.authToken.requestStatus===1;)yield jA(100),n=yield AA(e.appConfig);let r=n.authToken;return r.requestStatus===0?c_(e,t):r})}function AA(e){return Nf(e,t=>{if(!GA(t))throw Pi.create("not-registered");let n=t.authToken;return oB(n)?S(m({},t),{authToken:{requestStatus:0}}):t})}function tB(e,t){return p(this,null,function*(){try{let n=yield JU(e,t),r=S(m({},t),{authToken:n});return yield Sf(e.appConfig,r),n}catch(n){if(xA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield $A(e.appConfig);else{let r=S(m({},t),{authToken:{requestStatus:0}});yield Sf(e.appConfig,r)}throw n}})}function GA(e){return e!==void 0&&e.registrationStatus===2}function nB(e){return e.requestStatus===2&&!rB(e)}function rB(e){let t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+MU}function iB(e){let t={requestStatus:1,requestTime:Date.now()};return S(m({},e),{authToken:t})}function oB(e){return e.requestStatus===1&&e.requestTime+MA<Date.now()}function sB(e){return p(this,null,function*(){let t=e,{installationEntry:n,registrationPromise:r}=yield a_(t);return r?r.catch(console.error):c_(t).catch(console.error),n.fid})}function aB(e,t=!1){return p(this,null,function*(){let n=e;return yield cB(n),(yield c_(n,t)).token})}function cB(e){return p(this,null,function*(){let{registrationPromise:t}=yield a_(e);t&&(yield t)})}function lB(e){if(!e||!e.options)throw r_("App Configuration");if(!e.name)throw r_("App Name");let t=["projectId","apiKey","appId"];for(let n of t)if(!e.options[n])throw r_(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function r_(e){return Pi.create("missing-app-config-values",{valueName:e})}var zA="installations",uB="installations-internal",dB=e=>{let t=e.getProvider("app").getImmediate(),n=lB(t),r=cn(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},fB=e=>{let t=e.getProvider("app").getImmediate(),n=cn(t,zA).getImmediate();return{getId:()=>sB(n),getToken:i=>aB(n,i)}};function hB(){lt(new Me(zA,dB,"PUBLIC")),lt(new Me(uB,fB,"PRIVATE"))}hB();Pe(NA,o_);Pe(NA,o_,"esm2020");var Mf="analytics",pB="firebase_id",gB="origin",mB=60*1e3,vB="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",g_="https://www.googletagmanager.com/gtag/js";var tt=new An("@firebase/analytics");var yB={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Dt=new Ct("analytics","Analytics",yB);function _B(e){if(!e.startsWith(g_)){let t=Dt.create("invalid-gtag-resource",{gtagURL:e});return tt.warn(t.message),""}return e}function XA(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function EB(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function IB(e,t){let n=EB("firebase-js-sdk-policy",{createScriptURL:_B}),r=document.createElement("script"),i=`${g_}?l=${e}&id=${t}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function CB(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}function wB(e,t,n,r,i,o){return p(this,null,function*(){let s=r[i];try{if(s)yield t[s];else{let c=(yield XA(n)).find(l=>l.measurementId===i);c&&(yield t[c.appId])}}catch(a){tt.error(a)}e("config",i,o)})}function DB(e,t,n,r,i){return p(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield XA(n);for(let c of s){let l=a.find(d=>d.measurementId===c),u=l&&t[l.appId];if(u)o.push(u);else{o=[];break}}}o.length===0&&(o=Object.values(t)),yield Promise.all(o),e("event",r,i||{})}catch(o){tt.error(o)}})}function bB(e,t,n,r){function i(o,...s){return p(this,null,function*(){try{if(o==="event"){let[a,c]=s;yield DB(e,t,n,a,c)}else if(o==="config"){let[a,c]=s;yield wB(e,t,n,r,a,c)}else if(o==="consent"){let[a,c]=s;e("consent",a,c)}else if(o==="get"){let[a,c,l]=s;e("get",a,c,l)}else if(o==="set"){let[a]=s;e("set",a)}else e(o,...s)}catch(a){tt.error(a)}})}return i}function TB(e,t,n,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=bB(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}function SB(e){let t=window.document.getElementsByTagName("script");for(let n of Object.values(t))if(n.src&&n.src.includes(g_)&&n.src.includes(e))return n;return null}var AB=30,NB=1e3,u_=class{constructor(t={},n=NB){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}},e0=new u_;function MB(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function RB(e){return p(this,null,function*(){let{appId:t,apiKey:n}=e,r={method:"GET",headers:MB(n)},i=vB.replace("{app-id}",t),o=yield fetch(i,r);if(o.status!==200&&o.status!==304){let s="";try{let a=yield o.json();a.error?.message&&(s=a.error.message)}catch{}throw Dt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s})}return o.json()})}function OB(r){return p(this,arguments,function*(e,t=e0,n){let{appId:i,apiKey:o,measurementId:s}=e.options;if(!i)throw Dt.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw Dt.create("no-api-key")}let a=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new d_;return setTimeout(()=>p(null,null,function*(){c.abort()}),n!==void 0?n:mB),t0({appId:i,apiKey:o,measurementId:s},a,c,t)})}function t0(o,s,a){return p(this,arguments,function*(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=e0){let{appId:c,measurementId:l}=e;try{yield xB(r,t)}catch(u){if(l)return tt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:c,measurementId:l};throw u}try{let u=yield RB(e);return i.deleteThrottleMetadata(c),u}catch(u){let d=u;if(!kB(d)){if(i.deleteThrottleMetadata(c),l)return tt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:c,measurementId:l};throw u}let f=Number(d?.customData?.httpStatus)===503?lv(n,i.intervalMillis,AB):lv(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return i.setThrottleMetadata(c,h),tt.debug(`Calling attemptFetch again in ${f} millis`),t0(e,h,r,i)}})}function xB(e,t){return new Promise((n,r)=>{let i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(o),r(Dt.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function kB(e){if(!(e instanceof Qe)||!e.customData)return!1;let t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var d_=class{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}};var f_;function PB(e,t,n,r,i){return p(this,null,function*(){if(i&&i.global){e("event",n,r);return}else{let o=yield t,s=S(m({},r),{send_to:o});e("event",n,s)}})}function FB(e,t,n,r){return p(this,null,function*(){if(r&&r.global){let i={};for(let o of Object.keys(n))i[`user_properties.${o}`]=n[o];return e("set",i),Promise.resolve()}else{let i=yield t;e("config",i,{update:!0,user_properties:n})}})}var h_;function LB(e){h_=e}function VB(e){f_=e}function jB(){return p(this,null,function*(){if(Pd())try{yield Fd()}catch(e){return tt.warn(Dt.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}else return tt.warn(Dt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function UB(e,t,n,r,i,o,s){return p(this,null,function*(){let a=OB(e);a.then(f=>{n[f.measurementId]=f.appId,e.options.measurementId&&f.measurementId!==e.options.measurementId&&tt.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>tt.error(f)),t.push(a);let c=jB().then(f=>{if(f)return r.getId()}),[l,u]=yield Promise.all([a,c]);SB(o)||IB(o,l.measurementId),h_&&(i("consent","default",h_),LB(void 0)),i("js",new Date);let d=s?.config??{};return d[gB]="firebase",d.update=!0,u!=null&&(d[pB]=u),i("config",l.measurementId,d),f_&&(i("set",f_),VB(void 0)),l.measurementId})}var p_=class{constructor(t){this.app=t}_delete(){return delete us[this.app.options.appId],Promise.resolve()}},us={},qA=[],YA={},l_="dataLayer",BB="gtag",KA,m_,ZA=!1;function HB(){let e=[];if(xd()&&e.push("This is a browser extension environment."),_T()||e.push("Cookies are not available."),e.length>0){let t=e.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Dt.create("invalid-analytics-context",{errorInfo:t});tt.warn(n.message)}}function $B(e,t,n){HB();let r=e.options.appId;if(!r)throw Dt.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)tt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Dt.create("no-api-key");if(us[r]!=null)throw Dt.create("already-exists",{id:r});if(!ZA){CB(l_);let{wrappedGtag:o,gtagCore:s}=TB(us,qA,YA,l_,BB);m_=o,KA=s,ZA=!0}return us[r]=UB(e,qA,YA,t,KA,l_,n),new p_(e)}function n0(e=bi()){e=ve(e);let t=cn(e,Mf);return t.isInitialized()?t.getImmediate():WB(e)}function WB(e,t={}){let n=cn(e,Mf);if(n.isInitialized()){let i=n.getImmediate();if(jt(t,n.getOptions()))return i;throw Dt.create("already-initialized")}return n.initialize({options:t})}function GB(e,t,n){e=ve(e),FB(m_,us[e.app.options.appId],t,n).catch(r=>tt.error(r))}function zB(e,t,n,r){e=ve(e),PB(m_,us[e.app.options.appId],t,n,r).catch(i=>tt.error(i))}var QA="@firebase/analytics",JA="0.10.19";function qB(){lt(new Me(Mf,(t,{options:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return $B(r,i,n)},"PUBLIC")),lt(new Me("analytics-internal",e,"PRIVATE")),Pe(QA,JA),Pe(QA,JA,"esm2020");function e(t){try{let n=t.getProvider(Mf).getImmediate();return{logEvent:(r,i,o)=>zB(n,r,i,o),setUserProperties:(r,i)=>GB(n,r,i)}}catch(n){throw Dt.create("interop-component-reg-failed",{reason:n})}}}qB();function v0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var y0=v0,_0=new Ct("auth","Firebase",v0());var Ff=new An("@firebase/auth");function YB(e,...t){Ff.logLevel<=te.WARN&&Ff.warn(`Auth (${Mr}): ${e}`,...t)}function Of(e,...t){Ff.logLevel<=te.ERROR&&Ff.error(`Auth (${Mr}): ${e}`,...t)}function kn(e,...t){throw k_(e,...t)}function dn(e,...t){return k_(e,...t)}function x_(e,t,n){let r=S(m({},y0()),{[t]:n});return new Ct("auth","Firebase",r).create(t,{appName:e.name})}function Li(e){return x_(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function KB(e,t,n){let r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&kn(e,"argument-error"),x_(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function k_(e,...t){if(typeof e!="string"){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return _0.create(e,...t)}function O(e,t,...n){if(!e)throw k_(t,...n)}function tr(e){let t="INTERNAL ASSERTION FAILED: "+e;throw Of(t),new Error(t)}function rr(e,t){e||tr(t)}function __(){return typeof self<"u"&&self.location?.href||""}function ZB(){return r0()==="http:"||r0()==="https:"}function r0(){return typeof self<"u"&&self.location?.protocol||null}function QB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZB()||xd()||"connection"in navigator)?navigator.onLine:!0}function JB(){if(typeof navigator>"u")return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var Vi=class{constructor(t,n){this.shortDelay=t,this.longDelay=n,rr(n>t,"Short delay should be less than long delay!"),this.isMobile=Ba()||kd()}get(){return QB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function P_(e,t){rr(e.emulator,"Emulator should always be set here");let{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}var Lf=class{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var XB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var eH=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tH=new Vi(3e4,6e4);function F_(e,t){return e.tenantId&&!t.tenantId?S(m({},t),{tenantId:e.tenantId}):t}function fs(o,s,a,c){return p(this,arguments,function*(e,t,n,r,i={}){return E0(e,i,()=>p(null,null,function*(){let l={},u={};r&&(t==="GET"?u=r:l={body:JSON.stringify(r)});let d=Ar(m({key:e.config.apiKey},u)).slice(1),f=yield e._getAdditionalHeaders();f["Content-Type"]="application/json",e.languageCode&&(f["X-Firebase-Locale"]=e.languageCode);let h=m({method:t,headers:f},l);return vT()||(h.referrerPolicy="no-referrer"),e.emulatorConfig&&Sr(e.emulatorConfig.host)&&(h.credentials="include"),Lf.fetch()(yield I0(e,e.config.apiHost,n,d),h)}))})}function E0(e,t,n){return p(this,null,function*(){e._canInitEmulator=!1;let r=m(m({},XB),t);try{let i=new E_(e),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Rf(e,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rf(e,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Rf(e,"email-already-in-use",s);if(c==="USER_DISABLED")throw Rf(e,"user-disabled",s);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw x_(e,u,l);kn(e,u)}}catch(i){if(i instanceof Qe)throw i;kn(e,"network-request-failed",{message:String(i)})}})}function nH(o,s,a,c){return p(this,arguments,function*(e,t,n,r,i={}){let l=yield fs(e,t,n,r,i);return"mfaPendingCredential"in l&&kn(e,"multi-factor-auth-required",{_serverResponse:l}),l})}function I0(e,t,n,r){return p(this,null,function*(){let i=`${t}${n}?${r}`,o=e,s=o.config.emulator?P_(e.config,i):`${e.config.apiScheme}://${i}`;return eH.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var E_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(dn(this.auth,"network-request-failed")),tH.get())})}};function Rf(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=dn(e,t,r);return i.customData._tokenResponse=n,i}function rH(e,t){return p(this,null,function*(){return fs(e,"POST","/v1/accounts:delete",t)})}function Vf(e,t){return p(this,null,function*(){return fs(e,"POST","/v1/accounts:lookup",t)})}function Ec(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function C0(e,t=!1){return p(this,null,function*(){let n=ve(e),r=yield n.getIdToken(t),i=L_(r);O(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Ec(v_(i.auth_time)),issuedAtTime:Ec(v_(i.iat)),expirationTime:Ec(v_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function v_(e){return Number(e)*1e3}function L_(e){let[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return Of("JWT malformed, contained fewer than 3 sections"),null;try{let i=zo(n);return i?JSON.parse(i):(Of("Failed to decode base64 JWT payload"),null)}catch(i){return Of("Caught error parsing JWT payload as JSON",i?.toString()),null}}function i0(e){let t=L_(e);return O(t,"internal-error"),O(typeof t.exp<"u","internal-error"),O(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}function Cc(e,t,n=!1){return p(this,null,function*(){if(n)return t;try{return yield t}catch(r){throw r instanceof Qe&&iH(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})}function iH({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}var I_=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;let n=this.getInterval(t);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),n)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var wc=class{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ec(this.lastLoginAt),this.creationTime=Ec(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function jf(e){return p(this,null,function*(){let t=e.auth,n=yield e.getIdToken(),r=yield Cc(e,Vf(t,{idToken:n}));O(r?.users.length,t,"internal-error");let i=r.users[0];e._notifyReloadListener(i);let o=i.providerUserInfo?.length?D0(i.providerUserInfo):[],s=oH(e.providerData,o),a=e.isAnonymous,c=!(e.email&&i.passwordHash)&&!s?.length,l=a?c:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new wc(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(e,u)})}function w0(e){return p(this,null,function*(){let t=ve(e);yield jf(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})}function oH(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function D0(e){return e.map(r=>{var i=r,{providerId:t}=i,n=Rc(i,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function sH(e,t){return p(this,null,function*(){let n=yield E0(e,{},()=>p(null,null,function*(){let r=Ar({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=e.config,s=yield I0(e,i,"/v1/token",`key=${o}`),a=yield e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return e.emulatorConfig&&Sr(e.emulatorConfig.host)&&(c.credentials="include"),Lf.fetch()(s,c)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function aH(e,t){return p(this,null,function*(){return fs(e,"POST","/v2/accounts:revokeToken",F_(e,t))})}var Ic=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){O(t.idToken,"internal-error"),O(typeof t.idToken<"u","internal-error"),O(typeof t.refreshToken<"u","internal-error");let n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):i0(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){O(t.length!==0,"internal-error");let n=i0(t);this.updateTokensAndExpiration(t,null,n)}getToken(t,n=!1){return p(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(O(this.refreshToken,t,"user-token-expired"),this.refreshToken?(yield this.refresh(t,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(t,n){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield sH(t,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new e;return r&&(O(typeof r=="string","internal-error",{appName:t}),s.refreshToken=r),i&&(O(typeof i=="string","internal-error",{appName:t}),s.accessToken=i),o&&(O(typeof o=="number","internal-error",{appName:t}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return tr("not implemented")}};function Lr(e,t){O(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}var Vr=class e{constructor(o){var s=o,{uid:t,auth:n,stsTokenManager:r}=s,i=Rc(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new I_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new wc(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(t){return p(this,null,function*(){let n=yield Cc(this,this.stsTokenManager.getToken(this.auth,t));return O(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(t){return C0(this,t)}reload(){return w0(this)}_assign(t){this!==t&&(O(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>m({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let n=new e(S(m({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){O(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,n=!1){return p(this,null,function*(){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&(yield jf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){if(wt(this.auth.app))return Promise.reject(Li(this.auth));let t=yield this.getIdToken();return yield Cc(this,rH(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return S(m({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>m({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){let r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:h,providerData:g,stsTokenManager:_}=n;O(d&&_,t,"internal-error");let T=Ic.fromJSON(this.name,_);O(typeof d=="string",t,"internal-error"),Lr(r,t.name),Lr(i,t.name),O(typeof f=="boolean",t,"internal-error"),O(typeof h=="boolean",t,"internal-error"),Lr(o,t.name),Lr(s,t.name),Lr(a,t.name),Lr(c,t.name),Lr(l,t.name),Lr(u,t.name);let R=new e({uid:d,auth:t,email:i,emailVerified:f,displayName:r,isAnonymous:h,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:T,createdAt:l,lastLoginAt:u});return g&&Array.isArray(g)&&(R.providerData=g.map(ut=>m({},ut))),c&&(R._redirectEventId=c),R}static _fromIdTokenResponse(t,n,r=!1){return p(this,null,function*(){let i=new Ic;i.updateFromServerResponse(n);let o=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return yield jf(o),o})}static _fromGetAccountInfoResponse(t,n,r){return p(this,null,function*(){let i=n.users[0];O(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?D0(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Ic;a.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new wc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var o0=new Map;function nr(e){rr(e instanceof Function,"Expected a class definition");let t=o0.get(e);return t?(rr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,o0.set(e,t),t)}var cH=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(n,r){return p(this,null,function*(){this.storage[n]=r})}_get(n){return p(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return p(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return e.type="NONE",e})(),C_=cH;function xf(e,t,n){return`firebase:${e}:${t}:${n}`}var Uf=class e{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=xf(this.userKey,i.apiKey,o),this.fullPersistenceKey=xf("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){return p(this,null,function*(){let t=yield this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){let n=yield Vf(this.auth,{idToken:t}).catch(()=>{});return n?Vr._fromGetAccountInfoResponse(this.auth,n,t):null}return Vr._fromJSON(this.auth,t)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){return p(this,null,function*(){if(this.persistence===t)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,n,r="authUser"){return p(this,null,function*(){if(!n.length)return new e(nr(C_),t,r);let i=(yield Promise.all(n.map(l=>p(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||nr(C_),s=xf(r,t.config.apiKey,t.name),a=null;for(let l of n)try{let u=yield l._get(s);if(u){let d;if(typeof u=="string"){let f=yield Vf(t,{idToken:u}).catch(()=>{});if(!f)break;d=yield Vr._fromGetAccountInfoResponse(t,f,u)}else d=Vr._fromJSON(t,u);l!==o&&(a=d),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new e(o,t,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>p(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new e(o,t,r))})}};function s0(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(A0(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(b0(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(M0(t))return"Blackberry";if(R0(t))return"Webos";if(T0(t))return"Safari";if((t.includes("chrome/")||S0(t))&&!t.includes("edge/"))return"Chrome";if(N0(t))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if(r?.length===2)return r[1]}return"Other"}function b0(e=Ge()){return/firefox\//i.test(e)}function T0(e=Ge()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function S0(e=Ge()){return/crios\//i.test(e)}function A0(e=Ge()){return/iemobile/i.test(e)}function N0(e=Ge()){return/android/i.test(e)}function M0(e=Ge()){return/blackberry/i.test(e)}function R0(e=Ge()){return/webos/i.test(e)}function V_(e=Ge()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function lH(e=Ge()){return V_(e)&&!!window.navigator?.standalone}function uH(){return yT()&&document.documentMode===10}function O0(e=Ge()){return V_(e)||N0(e)||R0(e)||M0(e)||/windows phone/i.test(e)||A0(e)}function x0(e,t=[]){let n;switch(e){case"Browser":n=s0(Ge());break;case"Worker":n=`${s0(Ge())}-${e}`;break;default:n=e}let r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Mr}/${r}`}var w_=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){let r=o=>new Promise((s,a)=>{try{let c=t(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(t){return p(this,null,function*(){if(this.auth.currentUser===t)return;let n=[];try{for(let r of this.queue)yield r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function dH(n){return p(this,arguments,function*(e,t={}){return fs(e,"GET","/v2/passwordPolicy",F_(e,t))})}var fH=6,D_=class{constructor(t){let n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??fH,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){let n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}};var b_=class{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bf(this),this.idTokenSubscription=new Bf(this),this.beforeStateQueue=new w_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=nr(n)),this._initializationPromise=this.queue(()=>p(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield Uf.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let t=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(t,!0)}})}initializeCurrentUserFromIdToken(t){return p(this,null,function*(){try{let n=yield Vf(this,{idToken:t}),r=yield Vr._fromGetAccountInfoResponse(this,n,t);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(t){return p(this,null,function*(){if(wt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let n=yield this.assertedPersistence.getCurrentUser(),r=n,i=!1;if(t&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=yield this.tryRedirectSignIn(t);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return O(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(t){return p(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(t){return p(this,null,function*(){try{yield jf(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)})}useDeviceLanguage(){this.languageCode=JB()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(t){return p(this,null,function*(){if(wt(this.app))return Promise.reject(Li(this));let n=t?ve(t):null;return n&&O(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(t,n=!1){return p(this,null,function*(){if(!this._deleted)return t&&O(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(t)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(t),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return wt(this.app)?Promise.reject(Li(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(t){return wt(this.app)?Promise.reject(Li(this)):this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(nr(t))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(t){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let t=yield dH(this),n=new D_(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Ct("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{let r=this.onAuthStateChanged(()=>{r(),t()},n)}})}revokeAccessToken(t){return p(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield aH(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(t,n){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)})}getOrInitRedirectPersistenceManager(t){return p(this,null,function*(){if(!this.redirectPersistenceManager){let n=t&&nr(t)||this._popupRedirectResolver;O(n,this,"argument-error"),this.redirectPersistenceManager=yield Uf.create(this,[nr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(t){return p(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null})}_persistUserIfCurrent(t){return p(this,null,function*(){if(t===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(t)}))})}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(O(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=t.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=t.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(t){return p(this,null,function*(){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?yield this.assertedPersistence.setCurrentUser(t):yield this.assertedPersistence.removeCurrentUser()})}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return O(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=x0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let n=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return p(this,null,function*(){if(wt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&YB(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Kf(e){return ve(e)}var Bf=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=wT(n=>this.observer=n)}get next(){return O(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var j_={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hH(e){j_=e}function pH(e){return j_.loadJS(e)}function gH(){return j_.gapiScript}function k0(e){return`__${e}${Math.floor(Math.random()*1e6)}`}function P0(e,t){let n=cn(e,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(jt(o,t??{}))return i;kn(i,"already-initialized")}return n.initialize({options:t})}function mH(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(nr);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function F0(e,t,n){let r=Kf(e);O(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=L0(t),{host:s,port:a}=vH(t),c=a===null?"":`:${a}`,l={url:`${o}//${s}${c}/`},u=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){O(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),O(jt(l,r.config.emulator)&&jt(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Sr(s)?(Rd(`${o}//${s}${c}`),Od("Auth",!0)):i||yH()}function L0(e){let t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function vH(e){let t=L0(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:a0(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:a0(s)}}}function a0(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function yH(){function e(){let t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}var Dc=class{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return tr("not implemented")}_getIdTokenResponse(t){return tr("not implemented")}_linkToIdToken(t,n){return tr("not implemented")}_getReauthenticationResolver(t){return tr("not implemented")}};function ds(e,t){return p(this,null,function*(){return nH(e,"POST","/v1/accounts:signInWithIdp",F_(e,t))})}var _H="http://localhost",Hf=class e extends Dc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){let n=new e(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):kn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){let a=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=a,o=Rc(a,["providerId","signInMethod"]);if(!r||!i)return null;let s=new e(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(t){let n=this.buildRequest();return ds(t,n)}_linkToIdToken(t,n){let r=this.buildRequest();return r.idToken=n,ds(t,r)}_getReauthenticationResolver(t){let n=this.buildRequest();return n.autoCreate=!1,ds(t,n)}buildRequest(){let t={requestUri:_H,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Ar(n)}return t}};var bc=class{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}};var $f=class extends bc{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}};var U_=(()=>{class e extends $f{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return Hf._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return e.credentialFromTaggedObject(n)}static credentialFromError(n){return e.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return e.credential(r,i)}catch{return null}}}e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com";return e})();var Tc=class e{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static _fromIdTokenResponse(t,n,r,i=!1){return p(this,null,function*(){let o=yield Vr._fromIdTokenResponse(t,r,i),s=c0(r);return new e({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(t,n,r){return p(this,null,function*(){yield t._updateTokensIfNecessary(r,!0);let i=c0(r);return new e({user:t,providerId:i,_tokenResponse:r,operationType:n})})}};function c0(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var T_=class e extends Qe{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new e(t,n,r,i)}};function V0(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?T_._fromErrorAndOperation(e,o,t,r):o})}function EH(e,t,n=!1){return p(this,null,function*(){let r=yield Cc(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return Tc._forOperation(e,"link",r)})}function IH(e,t,n=!1){return p(this,null,function*(){let{auth:r}=e;if(wt(r.app))return Promise.reject(Li(r));let i="reauthenticate";try{let o=yield Cc(e,V0(r,i,t,e),n);O(o.idToken,r,"internal-error");let s=L_(o.idToken);O(s,r,"internal-error");let{sub:a}=s;return O(e.uid===a,r,"user-mismatch"),Tc._forOperation(e,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&kn(r,"user-mismatch"),o}})}function CH(e,t,n=!1){return p(this,null,function*(){if(wt(e.app))return Promise.reject(Li(e));let r="signIn",i=yield V0(e,r,t),o=yield Tc._fromIdTokenResponse(e,r,i);return n||(yield e._updateCurrentUser(o.user)),o})}function j0(e,t,n,r){return ve(e).onIdTokenChanged(t,n,r)}function U0(e,t,n){return ve(e).beforeAuthStateChanged(t,n)}function B_(e,t,n,r){return ve(e).onAuthStateChanged(t,n,r)}function H_(e){return ve(e).signOut()}var Wf="__sak";var Gf=class{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Wf,"1"),this.storage.removeItem(Wf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){let n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}};var wH=1e3,DH=10,bH=(()=>{class e extends Gf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=O0(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);uH()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,DH):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},wH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return p(this,null,function*(){yield jr(e.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return p(this,null,function*(){let r=yield jr(e.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return p(this,null,function*(){yield jr(e.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return e.type="LOCAL",e})(),B0=bH;var TH=(()=>{class e extends Gf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return e.type="SESSION",e})(),$_=TH;function SH(e){return Promise.all(e.map(t=>p(null,null,function*(){try{return{fulfilled:!0,value:yield t}}catch(n){return{fulfilled:!1,reason:n}}})))}var AH=(()=>{class e{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new e(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return p(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(u=>p(this,null,function*(){return u(r.origin,s)})),l=yield SH(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}e.receivers=[];return e})();function W_(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}var S_=class{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}_send(t,n,r=50){return p(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=W_("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(d){let f=d;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(f.data.response);break;default:clearTimeout(u),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function xn(){return window}function NH(e){xn().location.href=e}function H0(){return typeof xn().WorkerGlobalScope<"u"&&typeof xn().importScripts=="function"}function MH(){return p(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function RH(){return navigator?.serviceWorker?.controller||null}function OH(){return H0()?self:null}var $0="firebaseLocalStorageDb",xH=1,zf="firebaseLocalStorage",W0="fbase_key",ji=class{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Zf(e,t){return e.transaction([zf],t?"readwrite":"readonly").objectStore(zf)}function kH(){let e=indexedDB.deleteDatabase($0);return new ji(e).toPromise()}function A_(){let e=indexedDB.open($0,xH);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{let r=e.result;try{r.createObjectStore(zf,{keyPath:W0})}catch(i){n(i)}}),e.addEventListener("success",()=>p(null,null,function*(){let r=e.result;r.objectStoreNames.contains(zf)?t(r):(r.close(),yield kH(),t(yield A_()))}))})}function l0(e,t,n){return p(this,null,function*(){let r=Zf(e,!0).put({[W0]:t,value:n});return new ji(r).toPromise()})}function PH(e,t){return p(this,null,function*(){let n=Zf(e,!1).get(t),r=yield new ji(n).toPromise();return r===void 0?null:r.value})}function u0(e,t){let n=Zf(e,!0).delete(t);return new ji(n).toPromise()}var FH=800,LH=3,VH=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return p(this,null,function*(){return this.db?this.db:(this.db=yield A_(),this.db)})}_withRetries(n){return p(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>LH)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return p(this,null,function*(){return H0()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return p(this,null,function*(){this.receiver=AH._getInstance(OH()),this.receiver._subscribe("keyChanged",(n,r)=>p(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>p(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return p(this,null,function*(){if(this.activeServiceWorker=yield MH(),!this.activeServiceWorker)return;this.sender=new S_(this.activeServiceWorker);let n=yield this.sender._send("ping",{},800);n&&n[0]?.fulfilled&&n[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return p(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||RH()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return p(this,null,function*(){try{if(!indexedDB)return!1;let n=yield A_();return yield l0(n,Wf,"1"),yield u0(n,Wf),!0}catch{}return!1})}_withPendingWrite(n){return p(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(i=>l0(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return p(this,null,function*(){let r=yield this._withRetries(i=>PH(i,n));return this.localCache[n]=r,r})}_remove(n){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(r=>u0(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return p(this,null,function*(){let n=yield this._withRetries(o=>{let s=Zf(o,!1).getAll();return new ji(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>p(this,null,function*(){return this._poll()}),FH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return e.type="LOCAL",e})(),G0=VH;var Dee=k0("rcb"),bee=new Vi(3e4,6e4);function z0(e,t){return t?nr(t):(O(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}var Sc=class extends Dc{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return ds(t,this._buildIdpRequest())}_linkToIdToken(t,n){return ds(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return ds(t,this._buildIdpRequest())}_buildIdpRequest(t){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}};function jH(e){return CH(e.auth,new Sc(e),e.bypassAuthState)}function UH(e){let{auth:t,user:n}=e;return O(n,t,"internal-error"),IH(n,new Sc(e),e.bypassAuthState)}function BH(e){return p(this,null,function*(){let{auth:t,user:n}=e;return O(n,t,"internal-error"),EH(n,new Sc(e),e.bypassAuthState)})}var qf=class{constructor(t,n,r,i,o=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((t,n)=>p(this,null,function*(){this.pendingPromise={resolve:t,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(t){return p(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=t;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return jH;case"linkViaPopup":case"linkViaRedirect":return BH;case"reauthViaPopup":case"reauthViaRedirect":return UH;default:kn(this.auth,"internal-error")}}resolve(t){rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var HH=new Vi(2e3,1e4);function G_(e,t,n){return p(this,null,function*(){if(wt(e.app))return Promise.reject(dn(e,"operation-not-supported-in-this-environment"));let r=Kf(e);KB(e,t,bc);let i=z0(r,n);return new $H(r,"signInViaPopup",t,i).executeNotNull()})}var $H=(()=>{class e extends qf{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}executeNotNull(){return p(this,null,function*(){let n=yield this.execute();return O(n,this.auth,"internal-error"),n})}onExecution(){return p(this,null,function*(){rr(this.filter.length===1,"Popup operations only handle one event");let n=W_();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(dn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){let n=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,HH.get())};n()}}e.currentPopupAction=null;return e})(),WH="pendingRedirect",kf=new Map,N_=class e extends qf{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return p(this,null,function*(){let t=kf.get(this.auth._key());if(!t){try{let r=(yield GH(this.resolver,this.auth))?yield jr(e.prototype,this,"execute").call(this):null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}kf.set(this.auth._key(),t)}return this.bypassAuthState||kf.set(this.auth._key(),()=>Promise.resolve(null)),t()})}onAuthEvent(t){return p(this,null,function*(){if(t.type==="signInViaRedirect")return jr(e.prototype,this,"onAuthEvent").call(this,t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){let n=yield this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,jr(e.prototype,this,"onAuthEvent").call(this,t);this.resolve(null)}})}onExecution(){return p(this,null,function*(){})}cleanUp(){}};function GH(e,t){return p(this,null,function*(){let n=YH(t),r=qH(e);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function zH(e,t){kf.set(e._key(),t)}function qH(e){return nr(e._redirectPersistence)}function YH(e){return xf(WH,e.config.apiKey,e.name)}function KH(e,t,n=!1){return p(this,null,function*(){if(wt(e.app))return Promise.reject(Li(e));let r=Kf(e),i=z0(r,t),s=yield new N_(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,t)),s})}var ZH=600*1e3,M_=class{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!QH(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!q0(t)){let r=t.error.code?.split("auth/")[1]||"internal-error";n.onError(dn(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){let r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=ZH&&this.cachedEventUids.clear(),this.cachedEventUids.has(d0(t))}saveEventToCache(t){this.cachedEventUids.add(d0(t)),this.lastProcessedEventTime=Date.now()}};function d0(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function q0({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function QH(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return q0(e);default:return!1}}function JH(n){return p(this,arguments,function*(e,t={}){return fs(e,"GET","/v1/projects",t)})}var XH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,e2=/^https?/;function t2(e){return p(this,null,function*(){if(e.config.emulator)return;let{authorizedDomains:t}=yield JH(e);for(let n of t)try{if(n2(n))return}catch{}kn(e,"unauthorized-domain")})}function n2(e){let t=__(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){let s=new URL(e);return s.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!e2.test(n))return!1;if(XH.test(e))return r===e;let i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var r2=new Vi(3e4,6e4);function f0(){let e=xn().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function i2(e){return new Promise((t,n)=>{function r(){f0(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{f0(),n(dn(e,"network-request-failed"))},timeout:r2.get()})}if(xn().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(xn().gapi?.load)r();else{let i=k0("iframefcb");return xn()[i]=()=>{gapi.load?r():n(dn(e,"network-request-failed"))},pH(`${gH()}?onload=${i}`).catch(o=>n(o))}}).catch(t=>{throw Pf=null,t})}var Pf=null;function o2(e){return Pf=Pf||i2(e),Pf}var s2=new Vi(5e3,15e3),a2="__/auth/iframe",c2="emulator/auth/iframe",l2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},u2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function d2(e){let t=e.config;O(t.authDomain,e,"auth-domain-config-required");let n=t.emulator?P_(t,c2):`https://${e.config.authDomain}/${a2}`,r={apiKey:t.apiKey,appName:e.name,v:Mr},i=u2.get(e.config.apiHost);i&&(r.eid=i);let o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Ar(r).slice(1)}`}function f2(e){return p(this,null,function*(){let t=yield o2(e),n=xn().gapi;return O(n,e,"internal-error"),t.open({where:document.body,url:d2(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:l2,dontclear:!0},r=>new Promise((i,o)=>p(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=dn(e,"network-request-failed"),a=xn().setTimeout(()=>{o(s)},s2.get());function c(){xn().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var h2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},p2=500,g2=600,m2="_blank",v2="http://localhost",Yf=class{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function y2(e,t,n,r=p2,i=g2){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=S(m({},h2),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Ge().toLowerCase();n&&(a=S0(l)?m2:n),b0(l)&&(t=t||v2,c.scrollbars="yes");let u=Object.entries(c).reduce((f,[h,g])=>`${f}${h}=${g},`,"");if(lH(l)&&a!=="_self")return _2(t||"",a),new Yf(null);let d=window.open(t||"",a,u);O(d,e,"popup-blocked");try{d.focus()}catch{}return new Yf(d)}function _2(e,t){let n=document.createElement("a");n.href=e,n.target=t;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var E2="__/auth/handler",I2="emulator/auth/handler",C2=encodeURIComponent("fac");function h0(e,t,n,r,i,o){return p(this,null,function*(){O(e.config.authDomain,e,"auth-domain-config-required"),O(e.config.apiKey,e,"invalid-api-key");let s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Mr,eventId:i};if(t instanceof bc){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",Ha(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(let[u,d]of Object.entries(o||{}))s[u]=d}if(t instanceof $f){let u=t.getScopes().filter(d=>d!=="");u.length>0&&(s.scopes=u.join(","))}e.tenantId&&(s.tid=e.tenantId);let a=s;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield e._getAppCheckToken(),l=c?`#${C2}=${encodeURIComponent(c)}`:"";return`${w2(e)}?${Ar(a).slice(1)}${l}`})}function w2({config:e}){return e.emulator?P_(e,I2):`https://${e.authDomain}/${E2}`}var y_="webStorageSupport",R_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$_,this._completeRedirectFn=KH,this._overrideRedirectResult=zH}_openPopup(t,n,r,i){return p(this,null,function*(){rr(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");let o=yield h0(t,n,r,__(),i);return y2(t,o,W_())})}_openRedirect(t,n,r,i){return p(this,null,function*(){yield this._originValidation(t);let o=yield h0(t,n,r,__(),i);return NH(o),new Promise(()=>{})})}_initialize(t){let n=t._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(rr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(t){return p(this,null,function*(){let n=yield f2(t),r=new M_(t);return n.register("authEvent",i=>(O(i?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r})}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(y_,{type:y_},i=>{let o=i?.[0]?.[y_];o!==void 0&&n(!!o),kn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){let n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=t2(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return O0()||T0()||V_()}},Y0=R_;var p0="@firebase/auth",g0="1.12.0";var O_=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(t){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(t)}:null})}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){O(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function D2(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function b2(e){lt(new Me("auth",(t,{options:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;O(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:x0(e)},l=new b_(r,i,o,c);return mH(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),lt(new Me("auth-internal",t=>{let n=Kf(t.getProvider("auth").getImmediate());return(r=>new O_(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pe(p0,g0,D2(e)),Pe(p0,g0,"esm2020")}var T2=300,S2=cv("authIdTokenMaxAge")||T2,m0=null,A2=e=>t=>p(null,null,function*(){let n=t&&(yield t.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>S2)return;let i=n?.token;m0!==i&&(m0=i,yield fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function z_(e=bi()){let t=cn(e,"auth");if(t.isInitialized())return t.getImmediate();let n=P0(e,{popupRedirectResolver:Y0,persistence:[G0,B0,$_]}),r=cv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=A2(o.toString());U0(n,s,()=>s(n.currentUser)),j0(n,a=>s(a))}}let i=sv("auth");return i&&F0(n,`http://${i}`),n}function N2(){return document.getElementsByTagName("head")?.[0]??document}hH({loadJS(e){return new Promise((t,n)=>{let r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{let o=dn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",N2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});b2("Browser");var M2={apiKey:"AIzaSyDgBCejpvZHSbQYGXSfSlLfAbzSzqjWouY",authDomain:"animatic-7d235.firebaseapp.com",databaseURL:"https://animatic-7d235-default-rtdb.firebaseio.com",projectId:"animatic-7d235",storageBucket:"animatic-7d235.firebasestorage.app",messagingSenderId:"737458226045",appId:"1:737458226045:web:8da82aec2fa8c12a18c214",measurementId:"G-KDGHMVCXKH"},Qf=wv(M2),Qte=typeof window<"u"?n0(Qf):null,ir=typeof window<"u"?z_(Qf):null;var Pn=(()=>{class e{collectionName="cards";db=TA(Qf);saveUserProfile(n,r){return p(this,null,function*(){let i=$t(this.db,`users/${n}`),o=yield CA(i),s=o.exists()?o.val():void 0,a={displayName:r.displayName??s?.displayName??"",email:r.email??s?.email??"",profilePic:r.profilePic??s?.profilePic??null,lastLogin:r.lastLogin??Math.floor(Date.now()/1e3),createdAt:s?.createdAt??Date.now()};return Tf(i,a)})}removeUndefined(n){return Object.fromEntries(Object.entries(n).filter(([r,i])=>i!==void 0))}createCard(n){return p(this,null,function*(){let r={title:n.title,description:n.description??"",animationType:n.animationType,font:n.font,backgroundColor:n.backgroundColor??"#ffffffff",createdAt:n.createdAt?n.createdAt.getTime():Date.now(),createdBy:n.createdBy},i={revealTime:n.revealTime?n.revealTime.getTime():null,createdBy:n.createdBy},o=this.removeUndefined(r),s=this.removeUndefined(i),a=$t(this.db,`${this.collectionName}/${n.code}`),c=$t(this.db,`cardsMeta/${n.code}`);return yield bf(a,o),bf(c,s)})}getCardMeta(n){return new x(r=>{let i=$t(this.db,`cardsMeta/${n}`),o=_c(i,s=>{r.next(s.exists()?s.val():null)},s=>r.error(s));return()=>o()})}getCardByCode(n,r){let i=new x(s=>{let a=$t(this.db,`${this.collectionName}/${n}`),c=_c(a,l=>s.next(l.exists()?l.val():null),l=>s.error(l));return()=>c()}),o=new x(s=>{let a=$t(this.db,`cardsMeta/${n}`),c=_c(a,l=>s.next(l.exists()?l.val():null),l=>s.error(l));return()=>c()});return Wr([i,o]).pipe(U(([s,a])=>{if(!s)return null;let c=a&&a.createdBy||s.createdBy||null,l=a&&typeof a.revealTime<"u"?a.revealTime:null;return!(l!==null&&Date.now()>=l||l===null)&&!(!!r&&r===c)?null:{title:s.title,description:s.description,animationType:s.animationType,font:s.font,revealTime:l?new Date(l):void 0,code:n,createdBy:s.createdBy,createdAt:s.createdAt?new Date(s.createdAt):new Date(0)}}))}getUserCards(n){let r=bA($t(this.db,this.collectionName),wA("createdBy"),DA(n));return new x(i=>{let o=_c(r,s=>{let a=s.exists()?s.val():{},c=Object.keys(a||{}).map(l=>{let u=a[l];return{title:u.title,description:u.description,animationType:u.animationType,font:u.font,revealTime:void 0,code:l,createdBy:u.createdBy,createdAt:u.createdAt?new Date(u.createdAt):new Date(0)}});i.next(c.slice().sort((l,u)=>u.createdAt.getTime()-l.createdAt.getTime()))},s=>i.error(s));return()=>o()})}updateCard(n){return p(this,null,function*(){let r={title:n.title,description:n.description??"",animationType:n.animationType,font:n.font,backgroundColor:n.backgroundColor??"#ffffffff",createdAt:n.createdAt?n.createdAt.getTime():Date.now(),createdBy:n.createdBy},i={createdBy:n.createdBy};n.revealTime!==void 0&&(i.revealTime=n.revealTime?n.revealTime.getTime():null);let o=this.removeUndefined(r),s=this.removeUndefined(i),a=$t(this.db,`${this.collectionName}/${n.code}`),c=$t(this.db,`cardsMeta/${n.code}`);return yield Tf(a,o),Tf(c,s)})}deleteCard(n){return p(this,null,function*(){let r=$t(this.db,`${this.collectionName}/${n}`),i=$t(this.db,`cardsMeta/${n}`);return yield t_(r),t_(i)})}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var fn=(()=>{class e{provider=new U_;user$=this.authState();signInWithGoogle(){return p(this,null,function*(){return ir?(yield G_(ir,this.provider)).user:Promise.reject(new Error("Auth not initialized"))})}googleSignIn(){return this.signInWithGoogle()}signOut(){return ir?H_(ir):Promise.reject(new Error("Auth not initialized"))}authState(){return new x(n=>{if(!ir){n.next(null),n.complete();return}let r=B_(ir,i=>n.next(i),i=>n.error(i));return()=>r()})}getCurrentUser(){return ir?ir.currentUser??null:null}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function R2(e,t){e&1&&(b(0,"div",22),A(1," Title is required "),w())}function O2(e,t){e&1&&(b(0,"div",22),A(1," Animation type is required "),w())}function x2(e,t){e&1&&(b(0,"div",22),A(1," Font selection is required "),w())}var q_=(()=>{class e{fb;firebaseService;authService;router;route;cardForm;previewCard={};editMode=!1;cardCode=null;fonts=["Roboto","Open Sans","Bradley Hand","Cursive","Monospace"];animations=["fade-in","slide","typewriter"];constructor(n,r,i,o,s){this.fb=n,this.firebaseService=r,this.authService=i,this.router=o,this.route=s}ngOnInit(){this.cardForm=this.fb.group({title:["",$o.required],description:[""],animationType:["",$o.required],font:["",$o.required],revealTime:[""]}),this.route.paramMap.subscribe(n=>{this.cardCode=n.get("code"),this.editMode=!!this.cardCode,this.editMode&&this.cardCode&&this.firebaseService.getCardByCode(this.cardCode,this.authService.getCurrentUser()?.uid).subscribe(r=>{r&&(this.cardForm.patchValue({title:r.title,description:r.description,animationType:r.animationType,font:r.font,revealTime:r.revealTime?this.formatDate(r.revealTime):""}),this.previewCard=r)})}),this.cardForm.valueChanges.subscribe(n=>this.previewCard=n)}formatDate(n){return new Date(n).toISOString().slice(0,16)}onSubmit(){return p(this,null,function*(){if(this.cardForm.invalid)return;let n=this.authService.getCurrentUser(),r=this.cardForm.value,i={code:this.editMode?this.cardCode:cT(),title:r.title,description:r.description,animationType:r.animationType,font:r.font,revealTime:r.revealTime?new Date(r.revealTime):void 0,createdBy:n?.uid||"anonymous",createdAt:new Date};this.editMode?(yield this.firebaseService.updateCard(i),this.router.navigate(["/dashboard"])):(yield this.firebaseService.createCard(i),this.router.navigate(["/view",i.code]))})}static \u0275fac=function(r){return new(r||e)(C(sT),C(Pn),C(fn),C(Te),C(ct))};static \u0275cmp=mt({type:e,selectors:[["app-creator-page"]],decls:51,vars:7,consts:[[1,"container","py-4"],[1,"text-center","fw-bold","mb-4"],[1,"needs-validation",3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"form-label","fw-semibold"],["type","text","formControlName","title","placeholder","Enter your title",1,"form-control"],["class","text-danger small",4,"ngIf"],["rows","3","formControlName","description","placeholder","Enter short message...",1,"form-control"],["formControlName","animationType",1,"form-select"],["value","","disabled","","selected",""],["value","fade-slide"],["value","pop"],["value","zoom"],["value","typewriter"],["formControlName","font",1,"form-select"],["value","Roboto"],["value","Poppins"],["value","Montserrat"],["value","Playfair Display"],["type","datetime-local","formControlName","revealTime",1,"form-control"],[1,"form-text"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],[1,"text-danger","small"]],template:function(r,i){if(r&1&&(b(0,"div",0)(1,"h2",1),A(2),w(),b(3,"form",2),me("ngSubmit",function(){return i.onSubmit()}),b(4,"div",3)(5,"label",4),A(6,"Title *"),w(),vt(7,"input",5),ke(8,R2,2,0,"div",6),w(),b(9,"div",3)(10,"label",4),A(11,"Description"),w(),vt(12,"textarea",7),w(),b(13,"div",3)(14,"label",4),A(15,"Animation Type *"),w(),b(16,"select",8)(17,"option",9),A(18,"Select animation"),w(),b(19,"option",10),A(20,"Fade & Slide"),w(),b(21,"option",11),A(22,"Pop"),w(),b(23,"option",12),A(24,"Zoom"),w(),b(25,"option",13),A(26,"Typewriter"),w()(),ke(27,O2,2,0,"div",6),w(),b(28,"div",3)(29,"label",4),A(30,"Font *"),w(),b(31,"select",14)(32,"option",9),A(33,"Select font"),w(),b(34,"option",15),A(35,"Roboto"),w(),b(36,"option",16),A(37,"Poppins"),w(),b(38,"option",17),A(39,"Montserrat"),w(),b(40,"option",18),A(41,"Playfair Display"),w()(),ke(42,x2,2,0,"div",6),w(),b(43,"div",3)(44,"label",4),A(45,"Reveal Time (Optional)"),w(),vt(46,"input",19),b(47,"div",20),A(48,"If set, card will be locked until this time."),w()(),b(49,"button",21),A(50),w()()()),r&2){let o,s,a;B(2),Cn(i.editMode?"Edit Card":"Create Your Card"),B(),ee("formGroup",i.cardForm),B(5),ee("ngIf",((o=i.cardForm.get("title"))==null?null:o.touched)&&((o=i.cardForm.get("title"))==null?null:o.invalid)),B(19),ee("ngIf",((s=i.cardForm.get("animationType"))==null?null:s.touched)&&((s=i.cardForm.get("animationType"))==null?null:s.invalid)),B(15),ee("ngIf",((a=i.cardForm.get("font"))==null?null:a.touched)&&((a=i.cardForm.get("font"))==null?null:a.invalid)),B(7),ee("disabled",i.cardForm.invalid),B(),_t(" ",i.editMode?"Update Card":"Create Card"," ")}},dependencies:[Lt,on,aT,eT,rT,oT,Td,Ad,Yb,Kb,Jm,Xm],styles:[".creator-container[_ngcontent-%COMP%]{max-width:600px;margin:auto;padding:16px}.creator-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.preview[_ngcontent-%COMP%]{margin-top:24px;padding:16px;border:1px solid #ddd;border-radius:8px}.preview-card[_ngcontent-%COMP%]{padding:20px;text-align:center;border-radius:12px;background:#fafafa;box-shadow:0 2px 6px #0000001a}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn 1.5s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.slide[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn 1.2s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(-100%);opacity:0}to{transform:translate(0);opacity:1}}.typewriter[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .typewriter[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;border-right:2px solid black;animation:_ngcontent-%COMP%_typing 3s steps(30,end),_ngcontent-%COMP%_blink .75s step-end infinite}@keyframes _ngcontent-%COMP%_typing{0%{width:0}to{width:100%}}@keyframes _ngcontent-%COMP%_blink{50%{border-color:transparent}}"]})}return e})();function k2(e,t){e&1&&(b(0,"div",5)(1,"div",6)(2,"span",7),A(3,"Loading..."),w()()())}function P2(e,t){if(e&1&&(b(0,"div",8)(1,"h3",9),A(2,"This card will reveal in"),w(),b(3,"h1",10),A(4),w()()),e&2){let n=He();B(4),Cn(n.countdown)}}function F2(e,t){if(e&1){let n=en();b(0,"button",11),me("click",function(){Ot(n);let i=He();return xt(i.goFullscreen())}),A(1," View Fullscreen "),w()}}function L2(e,t){if(e&1&&(b(0,"div",12)(1,"h1",13),A(2),w(),b(3,"p",14),A(4),w()()),e&2){let n=He();ee("ngClass",n.getAnimationClass()),B(),hi("font-family",n.card.font),B(),_t(" ",n.card.title," "),B(),hi("font-family",n.card.font),B(),_t(" ",n.card.description," ")}}var K0=(()=>{class e{route;firebaseService;card=null;showFullscreenBtn=!0;countdown=null;timerSub=null;revealReady=!1;constructor(n,r){this.route=n,this.firebaseService=r}ngOnInit(){this.route.params.subscribe(n=>{let r=n.code;this.firebaseService.getCardMeta(r).subscribe(i=>{if(i)if(i.revealTime){let o=new Date(i.revealTime);o>new Date?(this.revealReady=!1,this.startCountdown(o)):(this.revealReady=!0,this.loadCard(r))}else this.revealReady=!0,this.loadCard(r)})})}loadCard(n){this.firebaseService.getCardByCode(n).subscribe(r=>{this.card=r,console.log("Card Loaded:",r)})}startCountdown(n){this.updateCountdown(n),this.timerSub=Ih(1e3).subscribe(()=>{this.updateCountdown(n)})}updateCountdown(n){let r=new Date,i=n.getTime()-r.getTime();if(i<=0){this.countdown=null,this.revealReady=!0,this.timerSub&&(this.timerSub.unsubscribe(),this.timerSub=null),this.route.params.subscribe(c=>{let l=c.code;this.firebaseService.getCardByCode(l).subscribe(u=>{this.card=u})});return}let o=Math.floor(i/36e5),s=Math.floor(i%36e5/6e4),a=Math.floor(i%6e4/1e3);this.countdown=`${o}h ${s}m ${a}s`}goFullscreen(){this.showFullscreenBtn=!1,document.documentElement.requestFullscreen()}getAnimationClass(){if(!this.card)return"";switch(this.card.animationType){case"fade-in":return"fade-in";case"slide":return"slide";case"typewriter":return"typewriter";default:return""}}ngOnDestroy(){this.timerSub&&this.timerSub.unsubscribe()}static \u0275fac=function(r){return new(r||e)(C(ct),C(Pn))};static \u0275cmp=mt({type:e,selectors:[["app-view-page"]],decls:5,vars:4,consts:[[1,"container-fluid","p-0","text-center"],["class","d-flex justify-content-center align-items-center vh-100",4,"ngIf"],["class","vh-100 d-flex flex-column justify-content-center align-items-center",4,"ngIf"],["class","btn btn-dark position-fixed bottom-0 start-50 translate-middle-x mb-4 px-4 py-2 fw-semibold",3,"click",4,"ngIf"],["class","d-flex flex-column justify-content-center align-items-center vh-100 view-card px-3",3,"ngClass",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center","vh-100"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"vh-100","d-flex","flex-column","justify-content-center","align-items-center"],[1,"fw-bold","mb-3"],[1,"display-4","text-primary","fw-bold"],[1,"btn","btn-dark","position-fixed","bottom-0","start-50","translate-middle-x","mb-4","px-4","py-2","fw-semibold",3,"click"],[1,"d-flex","flex-column","justify-content-center","align-items-center","vh-100","view-card","px-3",3,"ngClass"],[1,"card-title","fw-bold","heavy-title","mb-3"],[1,"card-description","fs-4"]],template:function(r,i){r&1&&(b(0,"div",0),ke(1,k2,4,0,"div",1)(2,P2,5,1,"div",2)(3,F2,2,0,"button",3)(4,L2,5,7,"div",4),w()),r&2&&(B(),ee("ngIf",!i.card&&!i.countdown),B(),ee("ngIf",i.countdown&&!i.revealReady),B(),ee("ngIf",i.card&&i.revealReady&&i.showFullscreenBtn),B(),ee("ngIf",i.card&&i.revealReady))},dependencies:[Lt,Xg,on],styles:[".view-card[_ngcontent-%COMP%]{text-align:center;background-color:#fff!important;color:#000!important;padding:20px;width:100%}.heavy-title[_ngcontent-%COMP%]{font-size:3rem;font-weight:900}.card-description[_ngcontent-%COMP%]{max-width:90%;line-height:1.5;font-weight:500}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn 1.5s ease-in-out both}.slide[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp 1.5s ease both}.typewriter[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;border-right:3px solid #000;animation:_ngcontent-%COMP%_typing 2.5s steps(30,end),_ngcontent-%COMP%_blink .75s step-end infinite}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(50px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_typing{0%{width:0}to{width:100%}}@keyframes _ngcontent-%COMP%_blink{50%{border-color:transparent}}"]})}return e})();var V2=e=>["/view",e],j2=e=>["/creator",e];function U2(e,t){if(e&1){let n=en();b(0,"div",9)(1,"div",10)(2,"div",11)(3,"h5",12),A(4),w(),b(5,"p",13),A(6),w(),b(7,"p",14)(8,"strong"),A(9,"Animation:"),w(),A(10),b(11,"strong"),A(12,"Font:"),w(),A(13),w(),b(14,"p",15),A(15),gi(16,"date"),w()(),b(17,"div",16)(18,"div",17)(19,"button",18),A(20," View "),w(),b(21,"button",19),A(22," Edit "),w()(),b(23,"button",20),me("click",function(){let i=Ot(n).$implicit,o=He(3);return xt(o.deleteCard(i.code))}),A(24," Delete "),w()()()()}if(e&2){let n=t.$implicit;B(2),hi("background-color",n.backgroundColor||"#f8f9fa"),B(2),Cn(n.title),B(2),_t(" ",n.description||"No description"," "),B(4),_t(" ",n.animationType," | "),B(3),_t(" ",n.font," "),B(2),_t(" ",Og(16,9,n.createdAt,"medium")," "),B(4),ee("routerLink",wu(12,V2,n.code)),B(2),ee("routerLink",wu(14,j2,n.code))}}function B2(e,t){if(e&1&&(b(0,"div",7),ke(1,U2,25,16,"div",8),w()),e&2){let n=He().ngIf;B(),ee("ngForOf",n)}}function H2(e,t){e&1&&(b(0,"div",21)(1,"p",22),A(2,"No cards yet \u{1F3A8}"),w(),b(3,"button",23),A(4," Create Your First Card "),w()())}function $2(e,t){if(e&1&&(Eu(0),ke(1,B2,2,1,"div",6)(2,H2,5,0,"ng-template",null,0,xg),Iu()),e&2){let n=t.ngIf,r=Rg(3);B(),ee("ngIf",n&&n.length>0)("ngIfElse",r)}}var Z0=(()=>{class e{firebaseService;auth;userCards$=M([]);loading=!1;loggedInUser=null;destroy$=new oe;constructor(n,r){this.firebaseService=n,this.auth=r}ngOnInit(){this.userCards$=this.auth.user$.pipe(Ae(n=>(this.loggedInUser={uid:n?.uid||"",displayName:n?.displayName||"",email:n?.email||"",profilePic:n?.photoURL||null},n?this.firebaseService.getUserCards(n.uid):M([]))))}editCard(n){console.log("Editing card:",n)}deleteCard(n){return p(this,null,function*(){if(confirm("Are you sure you want to delete this card?"))try{yield this.firebaseService.deleteCard(n),console.log(`Deleted card: ${n}`)}catch(r){console.error("Failed to delete card:",r)}})}static \u0275fac=function(r){return new(r||e)(C(Pn),C(fn))};static \u0275cmp=mt({type:e,selectors:[["app-dashboard"]],decls:8,vars:3,consts:[["noCards",""],[1,"container","py-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"fw-bold"],["routerLink","/creator",1,"btn","btn-primary"],[4,"ngIf"],["class","row g-3",4,"ngIf","ngIfElse"],[1,"row","g-3"],["class","col-12 col-sm-6 col-lg-4",4,"ngFor","ngForOf"],[1,"col-12","col-sm-6","col-lg-4"],[1,"card","shadow-sm","h-100","border-0","rounded-3"],[1,"card-body"],[1,"card-title","fw-bold"],[1,"card-text","small","text-muted","mb-1"],[1,"card-text","small"],[1,"card-text","text-secondary","small","mb-2"],[1,"card-footer","bg-white","border-0","d-flex","justify-content-between","align-items-center"],[1,"d-flex","gap-2"],[1,"btn","btn-outline-success","btn-sm",3,"routerLink"],[1,"btn","btn-outline-primary","btn-sm",3,"routerLink"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"text-center","mt-5"],[1,"fw-semibold","text-secondary"],["routerLink","/creator",1,"btn","btn-primary","mt-2"]],template:function(r,i){r&1&&(b(0,"div",1)(1,"div",2)(2,"h2",3),A(3,"Animatic Cards"),w(),b(4,"button",4),A(5," + Create Card "),w()(),ke(6,$2,4,2,"ng-container",5),gi(7,"async"),w()),r&2&&(B(6),ee("ngIf",Co(7,1,i.userCards$)))},dependencies:[Lt,Vu,on,Oa,jo,ca,em],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:16px;max-width:900px;margin:auto}.card-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px}.dashboard-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 2px 6px #00000026}"]})}return e})();var Jf=(()=>{class e{auth;router;constructor(n,r){this.auth=n,this.router=r}canActivate(){return this.auth.authState().pipe(Tt(1),U(n=>!!n),_e(n=>{n||this.router.navigate(["/login"])}))}static \u0275fac=function(r){return new(r||e)(N(fn),N(Te))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Q0=(()=>{class e{auth;router;constructor(n,r){this.auth=n,this.router=r}canActivate(){return this.auth.authState().pipe(Tt(1),U(n=>n?(this.router.navigate(["/dashboard"]),!1):!0))}static \u0275fac=function(r){return new(r||e)(N(fn),N(Te))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function W2(e,t){e&1&&(b(0,"h2"),A(1,"Sign in with Google"),w())}function G2(e,t){if(e&1){let n=en();b(0,"button",5),me("click",function(){Ot(n);let i=He();return xt(i.signIn())}),vt(1,"img",6),b(2,"span"),A(3),w()()}if(e&2){let n=He();ee("disabled",n.loading),B(3),Cn(n.loading?"Signing in...":"Sign in with Google")}}function z2(e,t){if(e&1){let n=en();b(0,"div",7)(1,"p"),A(2),w(),b(3,"button",8),me("click",function(){Ot(n);let i=He();return xt(i.logout())}),A(4,"Sign out"),w()()}if(e&2){let n=He();B(2),Cu("Welcome, ",n.loggedInUser.displayName," (",n.loggedInUser.email,")")}}function q2(e,t){e&1&&(b(0,"p",9),A(1,"You will be redirected after successful sign-in."),w())}var J0=(()=>{class e{auth;router;firebaseService;loading=!1;loggedInUser=null;destroy$=new oe;constructor(n,r,i){this.auth=n,this.router=r,this.firebaseService=i}ngOnInit(){this.auth.authState().pipe(io(this.destroy$)).subscribe(n=>{this.loggedInUser=n,n&&this.router.navigate(["/dashboard"])})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}signIn(){this.loading=!0,this.auth.signInWithGoogle().then(n=>{console.log("Signed in user:",n),n?this.firebaseService.saveUserProfile(n.uid,{displayName:n.displayName||"",email:n.email||"",profilePic:n.photoURL||null,lastLogin:Math.floor(Date.now()/1e3)}).catch(r=>console.warn("saveUserProfile failed",r)).finally(()=>this.router.navigate(["/dashboard"])):this.router.navigate(["/dashboard"])}).catch(n=>{console.error("Sign-in error:",n),alert("Sign-in failed: "+(n?.message||n))}).finally(()=>this.loading=!1)}logout(){this.auth.signOut().then(()=>{this.loggedInUser=null,this.router.navigate(["/login"])}).catch(n=>console.error("Sign-out error:",n))}static \u0275fac=function(r){return new(r||e)(C(fn),C(Te),C(Pn))};static \u0275cmp=mt({type:e,selectors:[["app-login"]],decls:5,vars:4,consts:[[1,"login-card"],[4,"ngIf"],["class","google-btn",3,"disabled","click",4,"ngIf"],["class","user-info",4,"ngIf"],["class","hint",4,"ngIf"],[1,"google-btn",3,"click","disabled"],["src","https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","alt","Google"],[1,"user-info"],[1,"btn-cancel",3,"click"],[1,"hint"]],template:function(r,i){r&1&&(b(0,"div",0),ke(1,W2,2,0,"h2",1)(2,G2,4,2,"button",2)(3,z2,5,2,"div",3)(4,q2,2,0,"p",4),w()),r&2&&(B(),ee("ngIf",!i.loggedInUser),B(),ee("ngIf",!i.loggedInUser),B(),ee("ngIf",i.loggedInUser),B(),ee("ngIf",!i.loggedInUser))},dependencies:[Lt,on],styles:[".login-card[_ngcontent-%COMP%]{width:320px;padding:1.25rem;border-radius:8px;box-shadow:0 6px 18px #10182814;background:#fff;display:flex;flex-direction:column;gap:.75rem}[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;padding:1rem;background:#f3f4f6}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .25rem}.login-card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:.9rem;gap:.25rem}.login-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #e5e7eb;border-radius:4px}.login-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem .8rem;border:none;background:linear-gradient(90deg,#ff6b6b,#b649ff);color:#fff;border-radius:6px;cursor:pointer}.login-card[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:.8rem;color:#6b7280}.google-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.75rem;padding:.6rem .8rem;border-radius:6px;border:1px solid #e5e7eb;background:#fff;cursor:pointer}.google-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}.google-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}"]})}return e})();var X0=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:J0,canActivate:[Q0]},{path:"creator",component:q_,canActivate:[Jf]},{path:"creator/:code",component:q_,canActivate:[Jf]},{path:"view/:code",component:K0},{path:"dashboard",component:Z0,canActivate:[Jf]},{path:"**",redirectTo:"dashboard"}];var eN={providers:[yp(),Fg({eventCoalescing:!0}),jm(X0)]};function Y2(e,t){if(e&1){let n=en();b(0,"a",6),me("click",function(){Ot(n);let i=He();return xt(i.login())}),A(1,"Login"),w()}}function K2(e,t){if(e&1){let n=en();b(0,"a",6),me("click",function(){Ot(n);let i=He();return xt(i.logout())}),A(1,"Logout"),w()}}var tN=(()=>{class e{auth;router;firebaseService;title=gt("FireTest");user$;constructor(n,r,i){this.auth=n,this.router=r,this.firebaseService=i,this.user$=this.auth.user$}login(){this.auth.googleSignIn().then(n=>{console.log("Signed in user:",n),n?this.firebaseService.saveUserProfile(n.uid,{displayName:n.displayName||"",email:n.email||"",profilePic:n.photoURL||null,lastLogin:Math.floor(Date.now()/1e3)}).catch(r=>console.warn("saveUserProfile failed",r)).finally(()=>this.router.navigate(["/dashboard"])):this.router.navigate(["/dashboard"])}).catch(n=>{console.error("Sign-in error:",n),alert("Sign-in failed: "+(n?.message||n))}).finally(()=>{})}logout(){this.auth.signOut().then(()=>{this.router.navigate(["/login"])}).catch(n=>{console.error("Sign-out error:",n)})}static \u0275fac=function(r){return new(r||e)(C(fn),C(Te),C(Pn))};static \u0275cmp=mt({type:e,selectors:[["app-root"]],decls:10,vars:6,consts:[[1,"app-header",2,"display","flex","justify-content","space-between","align-items","center","padding","8px 16px","border-bottom","1px solid #eee"],[1,"brand"],["routerLink","/",2,"display","inline-block","line-height","1"],["src","/assets/animatic.svg","alt","Animatic",2,"height","40px","display","block","object-fit","contain"],[1,"actions"],["href","javascript:void(0)",3,"click",4,"ngIf"],["href","javascript:void(0)",3,"click"]],template:function(r,i){r&1&&(b(0,"header",0)(1,"div",1)(2,"a",2),vt(3,"img",3),w()(),b(4,"div",4),ke(5,Y2,2,0,"a",5),gi(6,"async"),ke(7,K2,2,0,"a",5),gi(8,"async"),w()(),vt(9,"router-outlet")),r&2&&(B(5),ee("ngIf",!Co(6,2,i.user$)),B(2),ee("ngIf",Co(8,4,i.user$)))},dependencies:[Lt,on,Oa,Sa,jo,ca],styles:[".app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;font-family:Roboto,sans-serif}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.8rem 1rem;background:#222;color:#fff}.header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.header[_ngcontent-%COMP%]   .auth-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.header[_ngcontent-%COMP%]   .auth-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.4rem .8rem;border:none;border-radius:4px;background:#4cafef;color:#fff;font-size:.9rem;cursor:pointer}.header[_ngcontent-%COMP%]   .auth-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#2196f3}.header[_ngcontent-%COMP%]   .auth-actions[_ngcontent-%COMP%]   .welcome[_ngcontent-%COMP%]{font-size:.9rem}.content[_ngcontent-%COMP%]{flex:1;padding:1rem}"]})}return e})();dm(tN,eN).catch(e=>console.error(e));
