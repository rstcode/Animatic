<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold">Animatic Cards</h2>

    <button class="btn btn-primary"
            routerLink="/creator">
      + Create Card
    </button>
  </div>

  <ng-container *ngIf="userCards$ | async as cards">
    
    <!-- Cards Available -->
    <div *ngIf="cards && cards.length > 0; else noCards" class="row g-3">

      <div class="col-12 col-sm-6 col-lg-4"
           *ngFor="let card of cards">
        <div class="card shadow-sm h-100 border-0 rounded-3">

          <div class="card-body"
               [style.background-color]="card.backgroundColor || '#f8f9fa'">
            <h5 class="card-title fw-bold">{{ card.title }}</h5>

            <p class="card-text small text-muted mb-1">
              {{ card.description || "No description" }}
            </p>

            <p class="card-text small">
              <strong>Animation:</strong> {{ card.animationType }} |
              <strong>Font:</strong> {{ card.font }}
            </p>

            <p class="card-text text-secondary small mb-2">
              {{ card.createdAt | date:'medium' }}
            </p>

          </div>

        <div class="card-footer bg-white border-0 d-flex justify-content-between align-items-center">
        
        <!-- View + Edit side-by-side -->
        <div class="d-flex gap-2">
            <button class="btn btn-outline-success btn-sm"
                    [routerLink]="['/view', card.code]">
            View
            </button>

            <button class="btn btn-outline-primary btn-sm"
                    [routerLink]="['/creator', card.code]">
            Edit
            </button>
        </div>

        <!-- Delete bottom-right -->
        <button class="btn btn-outline-danger btn-sm"
                (click)="deleteCard(card.code)">
            Delete
        </button>
        </div>

        </div>
      </div>
    </div>

    <!-- No Cards -->
    <ng-template #noCards>
      <div class="text-center mt-5">
        <p class="fw-semibold text-secondary">No cards yet ðŸŽ¨</p>
        <button class="btn btn-primary mt-2"
                routerLink="/creator">
          Create Your First Card
        </button>
      </div>
    </ng-template>

  </ng-container>
</div>
